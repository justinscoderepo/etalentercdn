import{d as j,r as n,j as e}from"./main-pxHJVgAj.js";import{V as w,a as N}from"./v2Sidebar-DO4sFb9s.js";import{d as y,O as E}from"./index-DnBI3Rer.js";const T=({children:f})=>{const x=y(),{user:u,token:S}=j()||{},[t,a]=n.useState(!1),[o,d]=n.useState(!1),[i,h]=n.useState(!1),[g,b]=n.useState(!0),l=n.useRef(null),c=n.useRef(null);n.useEffect(()=>{const s=()=>{h(window.innerWidth<1024),window.innerWidth<1024&&a(!0)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),n.useEffect(()=>{const s=r=>{i||l.current&&!l.current.contains(r.target)&&c.current&&!c.current.contains(r.target)&&(t&&o?d(!1):t||a(!0))};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[i,t,o]);const p=()=>{!i&&t&&d(!0)},v=()=>{!i&&t&&setTimeout(()=>{d(!1)},100)};n.useEffect(()=>{const s=setTimeout(()=>{b(!1)},300);return()=>clearTimeout(s)},[]);const m=(()=>{const s=x.pathname,r=s.split("/").filter(Boolean);return{controller:r[0]||"Home",action:r[1]||"Index",fullPath:s,breadcrumb:r.join(" > ")||"Home"}})();return g?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-primary/5 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Loading eTalenter..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsxs("div",{className:"flex h-screen overflow-hidden",children:[e.jsx(w,{ref:l,isCollapsed:t,isHoverExpanded:o,isMobile:i,onToggle:()=>a(!t),onMouseEnter:p,onMouseLeave:v,user:u,pageContext:m}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(N,{ref:c,user:u,isSidebarCollapsed:t,onSidebarToggle:()=>a(!t),pageContext:m}),e.jsx("main",{className:"flex-1 overflow-auto bg-gray-50",children:e.jsx("div",{className:"h-full",children:e.jsx("div",{className:"min-h-full",children:f||e.jsx(E,{})})})})]})]}),i&&!t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>a(!0)}),e.jsx("div",{id:"global-spinner",className:"fixed inset-0 bg-white bg-opacity-75 z-50 hidden items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Processing..."})]})}),e.jsx("div",{id:"toast-container",className:"fixed top-4 right-4 z-50 space-y-2"}),e.jsx("div",{id:"modal-container",className:"fixed inset-0 z-50 hidden"})]})};export{T as V};
