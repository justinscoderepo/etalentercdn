import{u as j,r as d,j as C,R as _,b}from"./mainweb-C-fYIVSe.js";import{u as z}from"./useBackend-JnmMr3HB.js";import"./httpService-fNHmhpQ8.js";import"./index-t--hEgTQ.js";const F=_.lazy(()=>b(()=>import("./selectBox-BrhRw_GH.js"),[])),V=({fieldName:a,label:c,placeholder:N,errors:s,register:u,formData:l,disabled:L,onChange:o})=>{let m=s?.[a],{user:i}=j(),{EventLevels:e}=i??{},t=e?.filter(r=>r.Order!=1)||[],[E,p]=d.useState(m);d.useEffect(()=>{p(s?.[a])},[s?.[a]]);let[g,x]=d.useState({});const{rows:v}=z("/CandidateJson/GetSubOrganizations",{sort:{sortOrder:"DESC",sortColumn:"id"},limit:1e5,doCache:!0,select:"Name,Id,CompetitionLevel,CompetitionLevelLevelName,ParentOrganization"});console.log({locals:v});let{refactoredGroups:O}=l?R(v,l,g,t):{refactoredGroups:{}};return d.useEffect(()=>{l&&v&&t.forEach(r=>{let n=a+"."+r.LevelName;if(o){let f=r.LevelName.charAt(0).toLowerCase()+r.LevelName.slice(1),h=l[f],S=l[n];h&&!S&&o(n,h)}})},[t,l,v]),console.log({levels:t}),C.jsx("div",{className:t.length>1?"grid grid-cols-2 gap-4":"grid grid-cols-1",children:t.map(r=>C.jsx("div",{children:C.jsx(F,{fieldName:a+"."+r.LevelName,label:r.Order==2?c:r.LevelName,placeholder:N,disabled:L,errors:s,register:u,formData:l,optional:!1,onChange:n=>{g[r.LevelName]=n.target.value,x({...g});let f=r.LevelName.charAt(0).toLowerCase()+r.LevelName.slice(1);o(f,n.target.value),o(a+"."+r.LevelName,n.target.value),p("")},options:O[r.LevelName],optionKey:"Id",optionText:"Name"})},r.LevelName))})};function R(a,c,N,s){let u=a?.length?[...a]:[],l=u&&u?.length>0?u.reduce((e,t)=>(e[t.CompetitionLevelLevelName]=e[t.CompetitionLevelLevelName]||[],e[t.CompetitionLevelLevelName].push(t),e),Object.create(null)):{},L="",o=!0,m={};c&&Object.keys(c).forEach(e=>{let t=e.charAt(0).toUpperCase()+e.slice(1);m[t]=c[e]});let i={};return s?.forEach(e=>{let t={...m,...N};L?i[e.LevelName]=l[e.LevelName]?.filter(p=>p.ParentOrganization==t?.[L]):o?i[e.LevelName]=l[e.LevelName]:i[e.LevelName]=[],t?.[e.LevelName]&&(L=e.LevelName),o=!1}),{refactoredGroups:i}}export{R as ExtractLevelKeys,V as default};
