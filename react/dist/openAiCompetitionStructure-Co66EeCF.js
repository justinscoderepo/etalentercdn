import{r as le,j as d,L as Ts,n as $t}from"./mainweb-BTnueSEP.js";import{C as vi,u as wi}from"./index.esm-ClcTqUzr.js";import{u as ki,p as Si}from"./httpService-C8TQb376.js";import{c as fr}from"./utilities-CN4lTu6a.js";import{V as Ai}from"./validationMessage-BexvAGxA.js";import{F as Ci}from"./XMarkIcon-CROtcPL2.js";import{v as Qn}from"./v4-BKT09osN.js";import"./index-t--hEgTQ.js";function Pi({title:s,titleId:e,...t},n){return le.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},t),s?le.createElement("title",{id:e},s):null,le.createElement("path",{fillRule:"evenodd",d:"M10.53 3.47a.75.75 0 0 0-1.06 0L6.22 6.72a.75.75 0 0 0 1.06 1.06L10 5.06l2.72 2.72a.75.75 0 1 0 1.06-1.06l-3.25-3.25Zm-4.31 9.81 3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L10 14.94l-2.72-2.72a.75.75 0 0 0-1.06 1.06Z",clipRule:"evenodd"}))}const Ri=le.forwardRef(Pi);function Ti({optional:s,control:e,fieldName:t,label:n,errors:r,enableCrop:a,onChangeValidation:i,viewOnly:o,aspect:l,disableRequiredsymbol:c,validVideoExtensions:u,validImageExtensions:f,validExtensions:g,rules:_,labelFont:A,fileUploadUrl:k,isImageOptimize:S}){let q=r==null?void 0:r[t],[b,L]=le.useState(q);const[R,U]=le.useState(!1);let[I,O]=le.useState([]);le.useEffect(()=>{L(r==null?void 0:r[t])},[r==null?void 0:r[t]]);function x(T,Z){const H=T.split(","),Y=H[0].match(/:(.*?);/)[1],X=atob(H[1]);let we=X.length;const an=new Uint8Array(we);for(;we--;)an[we]=X.charCodeAt(we);return new File([an],Z,{type:Y})}const $=async T=>{var Z,H,Y;try{U(!0);let X=await ki(`${k}`,T);(Z=X==null?void 0:X.data)!=null&&Z.Results&&(X.data?(I.push({filePath:X.data.Results,webUrl:`${X.data.Results}`}),O(I),i(I)):($t.error("Failed to upload"),i([{filePath:"",webUrl:""}])),U(!1))}catch(X){$t.error((Y=(H=X==null?void 0:X.response)==null?void 0:H.data)==null?void 0:Y.message),i([{filePath:"",webUrl:""}])}U(!1)};return d.jsx("div",{className:"overflow-hidden min-h-64",children:R?d.jsx(Ts,{}):d.jsx("div",{className:"",children:d.jsx("div",{children:d.jsx("div",{className:"",children:!o&&d.jsx(d.Fragment,{children:d.jsxs("div",{className:"my-5",children:[d.jsx("label",{htmlFor:t,className:fr(A||" text-sm text-center block font-medium text-gray-700 mb-1",b?"text-danger":"text-gray-400"),children:n||t}),_&&_.required&&!c?d.jsx("sup",{}):"",d.jsx(vi,{name:t,control:e,rules:{required:!s},render:({field:T})=>{var Z;return d.jsxs("div",{className:fr("flex flex-col p-10 w-full border-0 pt-4 border-b border-transparent bg-gray-100 focus:border-darkprimary focus:ring-0 sm:text-sm",b?"border-danger":"text-gray-200 border-purple-400"),children:[(Z=T==null?void 0:T.value)!=null&&Z.length?d.jsx(d.Fragment,{children:d.jsx("div",{className:"flex flex-1 w-full relative h-full  space-x-8  grow flex-row items-center rounded-lg tracking-wide overflow-x-scroll",children:T.value.map((H,Y)=>d.jsxs("div",{className:"relative flex flex-shrink-0",children:[d.jsx("img",{src:H.webUrl,alt:`Image ${Y}`,className:"max-h-100 flex w-96 mb-3 mr-3 nonselectable",draggable:!1}),d.jsx("div",{className:"absolute top-0 right-0  pt-2 pr-2 block",children:d.jsxs("button",{type:"button",className:"rounded-md bg-transparent text-shadow text-white hover:text-white focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 bg-lightcharcoal p-2 bg-opacity-90",onClick:()=>{setTimeout(()=>{I=I.filter((X,we)=>we!==Y),O(I),i(I)},100)},children:[d.jsx("span",{className:"sr-only",children:"Close"}),d.jsx(Ci,{className:"h-8 w-8 text-[#c5c5c5]","aria-hidden":"true"})]})})]},Y))})}):d.jsx(d.Fragment,{}),d.jsxs("label",{className:"w-100 relative h-full flex flex-col items-center rounded-lg tracking-wide cursor-pointer ",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-8 h-8 mt-8 text-primary",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z",className:"text-lightcharcoal"}),d.jsx("path",{className:"text-lightcharcoal",strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),d.jsx("span",{className:"mt-2 font-medium leading-normal text-primary mb-8",children:"Upload"}),d.jsx("input",{type:"file",className:"hidden",accept:"image/*",multiple:!0,onChange:async H=>{U(!0);const Y=Array.from(H.target.files);let X=0;if(Y.forEach(wt=>{X+=wt.size}),X/(1024*1024)>10){$t.error("Total file size should be lesser than 10MB."),U(!1);return}const an=Y.map(wt=>new Promise((Xn,ur)=>{const Qe=new FileReader;Qe.onload=function(on){Xn(on.target.result)},Qe.readAsDataURL(wt)}));Promise.all(an).then(wt=>{wt.forEach((Xn,ur)=>{const Qe=new FormData,on=Y[ur];let Ye,et;const kt=new Image;kt.src=Xn,kt.onload=async function(){if(S===!0){const St=kt.height,At=kt.width,ln=document.createElement("canvas"),_i=ln.getContext("2d");if(St>300&&At>300)if(At<St){Ye=300;const Kn=At/Ye;et=St/Kn}else{et=300;const Kn=St/et;Ye=At/Kn}else et=St,Ye=At;ln.width=Ye,ln.height=et,_i.drawImage(kt,0,0,Ye,et);const bi=ln.toDataURL("image/jpeg"),dr=x(bi,on.name);let xi=URL.createObjectURL(dr);T.onChange([...T.value,xi]),Qe.append("file",dr)}else Qe.append("file",on);$(Qe)}})}),H.target.value=""}})]})]})}}),b&&d.jsx(Ai,{message:"This file is required"})]})})})})})})}let hr=!1,jt,Ur,Vr,ds,zr,Wr,Gr,Jr,qr;function Hr(s,e={auto:!1}){if(hr)throw new Error(`you must \`import 'openai/shims/${s.kind}'\` before importing anything else from openai`);if(jt)throw new Error(`can't \`import 'openai/shims/${s.kind}'\` after \`import 'openai/shims/${jt}'\``);hr=e.auto,jt=s.kind,Ur=s.fetch,s.Request,s.Response,s.Headers,Vr=s.FormData,s.Blob,ds=s.File,zr=s.ReadableStream,Wr=s.getMultipartRequestOptions,Gr=s.getDefaultAgent,Jr=s.fileFromPath,qr=s.isFsReadStream}class Ei{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function Xr({manuallyImported:s}={}){const e=s?"You may need to use polyfills":"Add one of these imports before your first `import â€¦ from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,n,r,a;try{t=fetch,n=Request,r=Response,a=Headers}catch(i){throw new Error(`this environment is missing the following Web Fetch API type: ${i.message}. ${e}`)}return{kind:"web",fetch:t,Request:n,Response:r,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(i,o)=>({...o,body:new Ei(i)}),getDefaultAgent:i=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:i=>!1}}Hr(Xr({manuallyImported:!0}));const fs="RFC3986",hs={RFC1738:s=>String(s).replace(/%20/g,"+"),RFC3986:s=>String(s)},Ii="RFC1738",Ni=Array.isArray,ke=(()=>{const s=[];for(let e=0;e<256;++e)s.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return s})(),Yn=1024,Oi=(s,e,t,n,r)=>{if(s.length===0)return s;let a=s;if(typeof s=="symbol"?a=Symbol.prototype.toString.call(s):typeof s!="string"&&(a=String(s)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let i="";for(let o=0;o<a.length;o+=Yn){const l=a.length>=Yn?a.slice(o,o+Yn):a,c=[];for(let u=0;u<l.length;++u){let f=l.charCodeAt(u);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||r===Ii&&(f===40||f===41)){c[c.length]=l.charAt(u);continue}if(f<128){c[c.length]=ke[f];continue}if(f<2048){c[c.length]=ke[192|f>>6]+ke[128|f&63];continue}if(f<55296||f>=57344){c[c.length]=ke[224|f>>12]+ke[128|f>>6&63]+ke[128|f&63];continue}u+=1,f=65536+((f&1023)<<10|l.charCodeAt(u)&1023),c[c.length]=ke[240|f>>18]+ke[128|f>>12&63]+ke[128|f>>6&63]+ke[128|f&63]}i+=c.join("")}return i};function $i(s){return!s||typeof s!="object"?!1:!!(s.constructor&&s.constructor.isBuffer&&s.constructor.isBuffer(s))}function mr(s,e){if(Ni(s)){const t=[];for(let n=0;n<s.length;n+=1)t.push(e(s[n]));return t}return e(s)}const ji=Object.prototype.hasOwnProperty,Kr={brackets(s){return String(s)+"[]"},comma:"comma",indices(s,e){return String(s)+"["+e+"]"},repeat(s){return String(s)}},Se=Array.isArray,Mi=Array.prototype.push,Qr=function(s,e){Mi.apply(s,Se(e)?e:[e])},Fi=Date.prototype.toISOString,Q={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Oi,encodeValuesOnly:!1,format:fs,formatter:hs[fs],indices:!1,serializeDate(s){return Fi.call(s)},skipNulls:!1,strictNullHandling:!1};function Zi(s){return typeof s=="string"||typeof s=="number"||typeof s=="boolean"||typeof s=="symbol"||typeof s=="bigint"}const es={};function Yr(s,e,t,n,r,a,i,o,l,c,u,f,g,_,A,k,S,q){let b=s,L=q,R=0,U=!1;for(;(L=L.get(es))!==void 0&&!U;){const T=L.get(s);if(R+=1,typeof T<"u"){if(T===R)throw new RangeError("Cyclic object value");U=!0}typeof L.get(es)>"u"&&(R=0)}if(typeof c=="function"?b=c(e,b):b instanceof Date?b=g==null?void 0:g(b):t==="comma"&&Se(b)&&(b=mr(b,function(T){return T instanceof Date?g==null?void 0:g(T):T})),b===null){if(a)return l&&!k?l(e,Q.encoder,S,"key",_):e;b=""}if(Zi(b)||$i(b)){if(l){const T=k?e:l(e,Q.encoder,S,"key",_);return[(A==null?void 0:A(T))+"="+(A==null?void 0:A(l(b,Q.encoder,S,"value",_)))]}return[(A==null?void 0:A(e))+"="+(A==null?void 0:A(String(b)))]}const I=[];if(typeof b>"u")return I;let O;if(t==="comma"&&Se(b))k&&l&&(b=mr(b,l)),O=[{value:b.length>0?b.join(",")||null:void 0}];else if(Se(c))O=c;else{const T=Object.keys(b);O=u?T.sort(u):T}const x=o?String(e).replace(/\./g,"%2E"):String(e),$=n&&Se(b)&&b.length===1?x+"[]":x;if(r&&Se(b)&&b.length===0)return $+"[]";for(let T=0;T<O.length;++T){const Z=O[T],H=typeof Z=="object"&&typeof Z.value<"u"?Z.value:b[Z];if(i&&H===null)continue;const Y=f&&o?Z.replace(/\./g,"%2E"):Z,X=Se(b)?typeof t=="function"?t($,Y):$:$+(f?"."+Y:"["+Y+"]");q.set(s,R);const we=new WeakMap;we.set(es,q),Qr(I,Yr(H,X,t,n,r,a,i,o,t==="comma"&&k&&Se(b)?null:l,c,u,f,g,_,A,k,S,we))}return I}function Li(s=Q){if(typeof s.allowEmptyArrays<"u"&&typeof s.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof s.encodeDotInKeys<"u"&&typeof s.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(s.encoder!==null&&typeof s.encoder<"u"&&typeof s.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=s.charset||Q.charset;if(typeof s.charset<"u"&&s.charset!=="utf-8"&&s.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=fs;if(typeof s.format<"u"){if(!ji.call(hs,s.format))throw new TypeError("Unknown format option provided.");t=s.format}const n=hs[t];let r=Q.filter;(typeof s.filter=="function"||Se(s.filter))&&(r=s.filter);let a;if(s.arrayFormat&&s.arrayFormat in Kr?a=s.arrayFormat:"indices"in s?a=s.indices?"indices":"repeat":a=Q.arrayFormat,"commaRoundTrip"in s&&typeof s.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const i=typeof s.allowDots>"u"?s.encodeDotInKeys?!0:Q.allowDots:!!s.allowDots;return{addQueryPrefix:typeof s.addQueryPrefix=="boolean"?s.addQueryPrefix:Q.addQueryPrefix,allowDots:i,allowEmptyArrays:typeof s.allowEmptyArrays=="boolean"?!!s.allowEmptyArrays:Q.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof s.charsetSentinel=="boolean"?s.charsetSentinel:Q.charsetSentinel,commaRoundTrip:!!s.commaRoundTrip,delimiter:typeof s.delimiter>"u"?Q.delimiter:s.delimiter,encode:typeof s.encode=="boolean"?s.encode:Q.encode,encodeDotInKeys:typeof s.encodeDotInKeys=="boolean"?s.encodeDotInKeys:Q.encodeDotInKeys,encoder:typeof s.encoder=="function"?s.encoder:Q.encoder,encodeValuesOnly:typeof s.encodeValuesOnly=="boolean"?s.encodeValuesOnly:Q.encodeValuesOnly,filter:r,format:t,formatter:n,serializeDate:typeof s.serializeDate=="function"?s.serializeDate:Q.serializeDate,skipNulls:typeof s.skipNulls=="boolean"?s.skipNulls:Q.skipNulls,sort:typeof s.sort=="function"?s.sort:null,strictNullHandling:typeof s.strictNullHandling=="boolean"?s.strictNullHandling:Q.strictNullHandling}}function Di(s,e={}){let t=s;const n=Li(e);let r,a;typeof n.filter=="function"?(a=n.filter,t=a("",t)):Se(n.filter)&&(a=n.filter,r=a);const i=[];if(typeof t!="object"||t===null)return"";const o=Kr[n.arrayFormat],l=o==="comma"&&n.commaRoundTrip;r||(r=Object.keys(t)),n.sort&&r.sort(n.sort);const c=new WeakMap;for(let g=0;g<r.length;++g){const _=r[g];n.skipNulls&&t[_]===null||Qr(i,Yr(t[_],_,o,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,c))}const u=i.join(n.delimiter);let f=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),u.length>0?f+u:""}const at="4.93.0",ea=()=>{jt||Hr(Xr(),{auto:!0})};ea();class C extends Error{}class ne extends C{constructor(e,t,n,r){super(`${ne.makeMessage(e,t,n)}`),this.status=e,this.headers=r,this.request_id=r==null?void 0:r["x-request-id"],this.error=t;const a=t;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,t,n){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,n,r){if(!e||!r)return new Fn({message:n,cause:ps(t)});const a=t==null?void 0:t.error;return e===400?new ta(e,a,n,r):e===401?new na(e,a,n,r):e===403?new sa(e,a,n,r):e===404?new ra(e,a,n,r):e===409?new aa(e,a,n,r):e===422?new ia(e,a,n,r):e===429?new oa(e,a,n,r):e>=500?new la(e,a,n,r):new ne(e,a,n,r)}}class he extends ne{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Fn extends ne{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class Es extends Fn{constructor({message:e}={}){super({message:e??"Request timed out."})}}class ta extends ne{}class na extends ne{}class sa extends ne{}class ra extends ne{}class aa extends ne{}class ia extends ne{}class oa extends ne{}class la extends ne{}class ca extends C{constructor(){super("Could not parse response content as the length limit was reached")}}class ua extends C{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var cn=function(s,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(s,t):r?r.value=t:e.set(s,t),t},ze=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},ue;class Zn{constructor(){ue.set(this,void 0),this.buffer=new Uint8Array,cn(this,ue,null,"f")}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let n=new Uint8Array(this.buffer.length+t.length);n.set(this.buffer),n.set(t,this.buffer.length),this.buffer=n;const r=[];let a;for(;(a=Bi(this.buffer,ze(this,ue,"f")))!=null;){if(a.carriage&&ze(this,ue,"f")==null){cn(this,ue,a.index,"f");continue}if(ze(this,ue,"f")!=null&&(a.index!==ze(this,ue,"f")+1||a.carriage)){r.push(this.decodeText(this.buffer.slice(0,ze(this,ue,"f")-1))),this.buffer=this.buffer.slice(ze(this,ue,"f")),cn(this,ue,null,"f");continue}const i=ze(this,ue,"f")!==null?a.preceding-1:a.preceding,o=this.decodeText(this.buffer.slice(0,i));r.push(o),this.buffer=this.buffer.slice(a.index),cn(this,ue,null,"f")}return r}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new C(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new C(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new C("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}ue=new WeakMap;Zn.NEWLINE_CHARS=new Set([`
`,"\r"]);Zn.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Bi(s,e){for(let r=e??0;r<s.length;r++){if(s[r]===10)return{preceding:r,index:r+1,carriage:!1};if(s[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function Ui(s){for(let n=0;n<s.length-1;n++){if(s[n]===10&&s[n+1]===10||s[n]===13&&s[n+1]===13)return n+2;if(s[n]===13&&s[n+1]===10&&n+3<s.length&&s[n+2]===13&&s[n+3]===10)return n+4}return-1}function da(s){if(s[Symbol.asyncIterator])return s;const e=s.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class Ce{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;async function*r(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let a=!1;try{for await(const i of Vi(e,t))if(!a){if(i.data.startsWith("[DONE]")){a=!0;continue}if(i.event===null||i.event.startsWith("response.")||i.event.startsWith("transcript.")){let o;try{o=JSON.parse(i.data)}catch(l){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),l}if(o&&o.error)throw new ne(void 0,o.error,void 0,_a(e.headers));yield o}else{let o;try{o=JSON.parse(i.data)}catch(l){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),l}if(i.event=="error")throw new ne(void 0,o.error,o.message,void 0);yield{event:i.event,data:o}}}a=!0}catch(i){if(i instanceof Error&&i.name==="AbortError")return;throw i}finally{a||t.abort()}}return new Ce(r,t)}static fromReadableStream(e,t){let n=!1;async function*r(){const i=new Zn,o=da(e);for await(const l of o)for(const c of i.decode(l))yield c;for(const l of i.flush())yield l}async function*a(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let i=!1;try{for await(const o of r())i||o&&(yield JSON.parse(o));i=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{i||t.abort()}}return new Ce(a,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=a=>({next:()=>{if(a.length===0){const i=n.next();e.push(i),t.push(i)}return a.shift()}});return[new Ce(()=>r(e),this.controller),new Ce(()=>r(t),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new zr({async start(){t=e[Symbol.asyncIterator]()},async pull(r){try{const{value:a,done:i}=await t.next();if(i)return r.close();const o=n.encode(JSON.stringify(a)+`
`);r.enqueue(o)}catch(a){r.error(a)}},async cancel(){var r;await((r=t.return)==null?void 0:r.call(t))}})}}async function*Vi(s,e){if(!s.body)throw e.abort(),new C("Attempted to iterate over a response with no body");const t=new Wi,n=new Zn,r=da(s.body);for await(const a of zi(r))for(const i of n.decode(a)){const o=t.decode(i);o&&(yield o)}for(const a of n.flush()){const i=t.decode(a);i&&(yield i)}}async function*zi(s){let e=new Uint8Array;for await(const t of s){if(t==null)continue;const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let r=new Uint8Array(e.length+n.length);r.set(e),r.set(n,e.length),e=r;let a;for(;(a=Ui(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class Wi{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=Gi(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function Gi(s,e){const t=s.indexOf(e);return t!==-1?[s.substring(0,t),e,s.substring(t+e.length)]:[s,"",""]}const fa=s=>s!=null&&typeof s=="object"&&typeof s.url=="string"&&typeof s.blob=="function",ha=s=>s!=null&&typeof s=="object"&&typeof s.name=="string"&&typeof s.lastModified=="number"&&Ln(s),Ln=s=>s!=null&&typeof s=="object"&&typeof s.size=="number"&&typeof s.type=="string"&&typeof s.text=="function"&&typeof s.slice=="function"&&typeof s.arrayBuffer=="function",Ji=s=>ha(s)||fa(s)||qr(s);async function ma(s,e,t){var r;if(s=await s,ha(s))return s;if(fa(s)){const a=await s.blob();e||(e=new URL(s.url).pathname.split(/[\\/]/).pop()??"unknown_file");const i=Ln(a)?[await a.arrayBuffer()]:[a];return new ds(i,e,t)}const n=await qi(s);if(e||(e=Xi(s)??"unknown_file"),!(t!=null&&t.type)){const a=(r=n[0])==null?void 0:r.type;typeof a=="string"&&(t={...t,type:a})}return new ds(n,e,t)}async function qi(s){var t;let e=[];if(typeof s=="string"||ArrayBuffer.isView(s)||s instanceof ArrayBuffer)e.push(s);else if(Ln(s))e.push(await s.arrayBuffer());else if(Ki(s))for await(const n of s)e.push(n);else throw new Error(`Unexpected data type: ${typeof s}; constructor: ${(t=s==null?void 0:s.constructor)==null?void 0:t.name}; props: ${Hi(s)}`);return e}function Hi(s){return`[${Object.getOwnPropertyNames(s).map(t=>`"${t}"`).join(", ")}]`}function Xi(s){var e;return ts(s.name)||ts(s.filename)||((e=ts(s.path))==null?void 0:e.split(/[\\/]/).pop())}const ts=s=>{if(typeof s=="string")return s;if(typeof Buffer<"u"&&s instanceof Buffer)return String(s)},Ki=s=>s!=null&&typeof s=="object"&&typeof s[Symbol.asyncIterator]=="function",pr=s=>s&&typeof s=="object"&&s.body&&s[Symbol.toStringTag]==="MultipartBody",mt=async s=>{const e=await Qi(s.body);return Wr(e,s)},Qi=async s=>{const e=new Vr;return await Promise.all(Object.entries(s||{}).map(([t,n])=>ms(e,t,n))),e},ms=async(s,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")s.append(e,String(t));else if(Ji(t)){const n=await ma(t);s.append(e,n)}else if(Array.isArray(t))await Promise.all(t.map(n=>ms(s,e+"[]",n)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([n,r])=>ms(s,`${e}[${n}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var ut={},Yi=function(s,e,t,n,r){if(typeof e=="function"?s!==e||!0:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(s,t),t},eo=function(s,e,t,n){if(typeof e=="function"?s!==e||!0:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},un;ea();async function pa(s){var i;const{response:e}=s;if(s.options.stream)return Ze("response",e.status,e.url,e.headers,e.body),s.options.__streamClass?s.options.__streamClass.fromSSEResponse(e,s.controller):Ce.fromSSEResponse(e,s.controller);if(e.status===204)return null;if(s.options.__binaryResponse)return e;const t=e.headers.get("content-type"),n=(i=t==null?void 0:t.split(";")[0])==null?void 0:i.trim();if((n==null?void 0:n.includes("application/json"))||(n==null?void 0:n.endsWith("+json"))){const o=await e.json();return Ze("response",e.status,e.url,e.headers,o),ga(o,e)}const a=await e.text();return Ze("response",e.status,e.url,e.headers,a),a}function ga(s,e){return!s||typeof s!="object"||Array.isArray(s)?s:Object.defineProperty(s,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class Dn extends Promise{constructor(e,t=pa){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new Dn(this.responsePromise,async t=>ga(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class to{constructor({baseURL:e,maxRetries:t=2,timeout:n=6e5,httpAgent:r,fetch:a}){this.baseURL=e,this.maxRetries=ns("maxRetries",t),this.timeout=ns("timeout",n),this.httpAgent=r,this.fetch=a??Ur}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...io(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${uo()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(async r=>{const a=r&&Ln(r==null?void 0:r.body)?new DataView(await r.body.arrayBuffer()):(r==null?void 0:r.body)instanceof DataView?r.body:(r==null?void 0:r.body)instanceof ArrayBuffer?new DataView(r.body):r&&ArrayBuffer.isView(r==null?void 0:r.body)?new DataView(r.body.buffer):r==null?void 0:r.body;return{method:e,path:t,...r,body:a}}))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){var A;e={...e};const{method:n,path:r,query:a,headers:i={}}=e,o=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:pr(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,l=this.calculateContentLength(o),c=this.buildURL(r,a);"timeout"in e&&ns("timeout",e.timeout),e.timeout=e.timeout??this.timeout;const u=e.httpAgent??this.httpAgent??Gr(c),f=e.timeout+1e3;typeof((A=u==null?void 0:u.options)==null?void 0:A.timeout)=="number"&&f>(u.options.timeout??0)&&(u.options.timeout=f),this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const g=this.buildHeaders({options:e,headers:i,contentLength:l,retryCount:t});return{req:{method:n,...o&&{body:o},headers:g,...u&&{agent:u},signal:e.signal??null},url:c,timeout:e.timeout}}buildHeaders({options:e,headers:t,contentLength:n,retryCount:r}){const a={};n&&(a["content-length"]=n);const i=this.defaultHeaders(e);return br(a,i),br(a,t),pr(e.body)&&jt!=="node"&&delete a["content-type"],fn(i,"x-stainless-retry-count")===void 0&&fn(t,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(r)),fn(i,"x-stainless-timeout")===void 0&&fn(t,"x-stainless-timeout")===void 0&&e.timeout&&(a["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(a,t),a}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,n,r){return ne.generate(e,t,n,r)}request(e,t=null){return new Dn(this.makeRequest(e,t))}async makeRequest(e,t){var f,g;const n=await e,r=n.maxRetries??this.maxRetries;t==null&&(t=r),await this.prepareOptions(n);const{req:a,url:i,timeout:o}=this.buildRequest(n,{retryCount:r-t});if(await this.prepareRequest(a,{url:i,options:n}),Ze("request",i,n,a.headers),(f=n.signal)!=null&&f.aborted)throw new he;const l=new AbortController,c=await this.fetchWithTimeout(i,a,o,l).catch(ps);if(c instanceof Error){if((g=n.signal)!=null&&g.aborted)throw new he;if(t)return this.retryRequest(n,t);throw c.name==="AbortError"?new Es:new Fn({cause:c})}const u=_a(c.headers);if(!c.ok){if(t&&this.shouldRetry(c)){const b=`retrying, ${t} attempts remaining`;return Ze(`response (error; ${b})`,c.status,i,u),this.retryRequest(n,t,u)}const _=await c.text().catch(b=>ps(b).message),A=oo(_),k=A?void 0:_;throw Ze(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,c.status,i,u,k),this.makeStatusError(c.status,A,k,u)}return{response:c,options:n,controller:l}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new no(this,n,e)}buildURL(e,t){const n=co(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return ba(r)||(t={...r,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,n])=>typeof n<"u").map(([t,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(t)}=`;throw new C(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,n,r){const{signal:a,...i}=t||{};a&&a.addEventListener("abort",()=>r.abort());const o=setTimeout(()=>r.abort(),n),l={signal:r.signal,...i};return l.method&&(l.method=l.method.toUpperCase()),this.fetch.call(void 0,e,l).finally(()=>{clearTimeout(o)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,n){let r;const a=n==null?void 0:n["retry-after-ms"];if(a){const o=parseFloat(a);Number.isNaN(o)||(r=o)}const i=n==null?void 0:n["retry-after"];if(i&&!r){const o=parseFloat(i);Number.isNaN(o)?r=Date.parse(i)-Date.now():r=o*1e3}if(!(r&&0<=r&&r<60*1e3)){const o=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,o)}return await Qt(r),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,i=Math.min(.5*Math.pow(2,a),8),o=1-Math.random()*.25;return i*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${at}`}}class ya{constructor(e,t,n,r){un.set(this,void 0),Yi(this,un,e),this.options=r,this.response=t,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new C("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[r,a]of n)e.url.searchParams.set(r,a);t.query=void 0,t.path=e.url.toString()}return await eo(this,un,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(un=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class no extends Dn{constructor(e,t,n){super(t,async r=>new n(e,r.response,await pa(r),r.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const _a=s=>new Proxy(Object.fromEntries(s.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}}),so={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},J=s=>typeof s=="object"&&s!==null&&!ba(s)&&Object.keys(s).every(e=>xa(so,e)),ro=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":at,"X-Stainless-OS":yr(Deno.build.os),"X-Stainless-Arch":gr(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":at,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":at,"X-Stainless-OS":yr(process.platform),"X-Stainless-Arch":gr(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const s=ao();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":at,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":at,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function ao(){if(typeof navigator>"u"||!navigator)return null;const s=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of s){const n=t.exec(navigator.userAgent);if(n){const r=n[1]||0,a=n[2]||0,i=n[3]||0;return{browser:e,version:`${r}.${a}.${i}`}}}return null}const gr=s=>s==="x32"?"x32":s==="x86_64"||s==="x64"?"x64":s==="arm"?"arm":s==="aarch64"||s==="arm64"?"arm64":s?`other:${s}`:"unknown",yr=s=>(s=s.toLowerCase(),s.includes("ios")?"iOS":s==="android"?"Android":s==="darwin"?"MacOS":s==="win32"?"Windows":s==="freebsd"?"FreeBSD":s==="openbsd"?"OpenBSD":s==="linux"?"Linux":s?`Other:${s}`:"Unknown");let _r;const io=()=>_r??(_r=ro()),oo=s=>{try{return JSON.parse(s)}catch{return}},lo=/^[a-z][a-z0-9+.-]*:/i,co=s=>lo.test(s),Qt=s=>new Promise(e=>setTimeout(e,s)),ns=(s,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new C(`${s} must be an integer`);if(e<0)throw new C(`${s} must be a positive integer`);return e},ps=s=>{if(s instanceof Error)return s;if(typeof s=="object"&&s!==null)try{return new Error(JSON.stringify(s))}catch{}return new Error(s)},dn=s=>{var e,t,n,r;if(typeof process<"u")return((e=ut==null?void 0:ut[s])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(r=(n=(t=Deno.env)==null?void 0:t.get)==null?void 0:n.call(t,s))==null?void 0:r.trim()};function ba(s){if(!s)return!0;for(const e in s)return!1;return!0}function xa(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function br(s,e){for(const t in e){if(!xa(e,t))continue;const n=t.toLowerCase();if(!n)continue;const r=e[t];r===null?delete s[n]:r!==void 0&&(s[n]=r)}}const xr=new Set(["authorization","api-key"]);function Ze(s,...e){if(typeof process<"u"&&(ut==null?void 0:ut.DEBUG)==="true"){const t=e.map(n=>{if(!n)return n;if(n.headers){const a={...n,headers:{...n.headers}};for(const i in n.headers)xr.has(i.toLowerCase())&&(a.headers[i]="REDACTED");return a}let r=null;for(const a in n)xr.has(a.toLowerCase())&&(r??(r={...n}),r[a]="REDACTED");return r??n});console.log(`OpenAI:DEBUG:${s}`,...t)}}const uo=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const e=Math.random()*16|0;return(s==="x"?e:e&3|8).toString(16)}),fo=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",ho=s=>typeof(s==null?void 0:s.get)=="function",fn=(s,e)=>{var n;const t=e.toLowerCase();if(ho(s)){const r=((n=e[0])==null?void 0:n.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(a,i,o)=>i+o.toUpperCase());for(const a of[e,t,e.toUpperCase(),r]){const i=s.get(a);if(i)return i}}for(const[r,a]of Object.entries(s))if(r.toLowerCase()===t)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${e} header, using the first entry.`),a[0]):a},mo=s=>{if(typeof Buffer<"u"){const e=Buffer.from(s,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(s),t=e.length,n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);return Array.from(new Float32Array(n.buffer))}};function ss(s){return s!=null&&typeof s=="object"&&!Array.isArray(s)}class Bn extends ya{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class se extends ya{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var n;const e=this.getPaginatedItems();if(!e.length)return null;const t=(n=e[e.length-1])==null?void 0:n.id;return t?{params:{after:t}}:null}}class F{constructor(e){this._client=e}}let va=class extends F{list(e,t={},n){return J(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,po,{query:t,...n})}},Un=class extends F{constructor(){super(...arguments),this.messages=new va(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,n){return this._client.post(`/chat/completions/${e}`,{body:t,...n})}list(e={},t){return J(e)?this.list({},e):this._client.getAPIList("/chat/completions",Vn,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}};class Vn extends se{}class po extends se{}Un.ChatCompletionsPage=Vn;Un.Messages=va;let zn=class extends F{constructor(){super(...arguments),this.completions=new Un(this._client)}};zn.Completions=Un;zn.ChatCompletionsPage=Vn;class wa extends F{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t==null?void 0:t.headers},__binaryResponse:!0})}}class ka extends F{create(e,t){return this._client.post("/audio/transcriptions",mt({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}}class Sa extends F{create(e,t){return this._client.post("/audio/translations",mt({body:e,...t,__metadata:{model:e.model}}))}}class Yt extends F{constructor(){super(...arguments),this.transcriptions=new ka(this._client),this.translations=new Sa(this._client),this.speech=new wa(this._client)}}Yt.Transcriptions=ka;Yt.Translations=Sa;Yt.Speech=wa;class Is extends F{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return J(e)?this.list({},e):this._client.getAPIList("/batches",Ns,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class Ns extends se{}Is.BatchesPage=Ns;class Os extends F{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/assistants/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},t){return J(e)?this.list({},e):this._client.getAPIList("/assistants",$s,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class $s extends se{}Os.AssistantsPage=$s;function vr(s){return typeof s.parse=="function"}const dt=s=>(s==null?void 0:s.role)==="assistant",Aa=s=>(s==null?void 0:s.role)==="function",Ca=s=>(s==null?void 0:s.role)==="tool";var ge=function(s,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(s,t):r?r.value=t:e.set(s,t),t},W=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},gs,bn,xn,Ct,Pt,vn,Rt,Ie,Tt,An,Cn,it,Pa;class js{constructor(){gs.add(this),this.controller=new AbortController,bn.set(this,void 0),xn.set(this,()=>{}),Ct.set(this,()=>{}),Pt.set(this,void 0),vn.set(this,()=>{}),Rt.set(this,()=>{}),Ie.set(this,{}),Tt.set(this,!1),An.set(this,!1),Cn.set(this,!1),it.set(this,!1),ge(this,bn,new Promise((e,t)=>{ge(this,xn,e,"f"),ge(this,Ct,t,"f")}),"f"),ge(this,Pt,new Promise((e,t)=>{ge(this,vn,e,"f"),ge(this,Rt,t,"f")}),"f"),W(this,bn,"f").catch(()=>{}),W(this,Pt,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},W(this,gs,"m",Pa).bind(this))},0)}_connected(){this.ended||(W(this,xn,"f").call(this),this._emit("connect"))}get ended(){return W(this,Tt,"f")}get errored(){return W(this,An,"f")}get aborted(){return W(this,Cn,"f")}abort(){this.controller.abort()}on(e,t){return(W(this,Ie,"f")[e]||(W(this,Ie,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=W(this,Ie,"f")[e];if(!n)return this;const r=n.findIndex(a=>a.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(W(this,Ie,"f")[e]||(W(this,Ie,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{ge(this,it,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,t)})}async done(){ge(this,it,!0,"f"),await W(this,Pt,"f")}_emit(e,...t){if(W(this,Tt,"f"))return;e==="end"&&(ge(this,Tt,!0,"f"),W(this,vn,"f").call(this));const n=W(this,Ie,"f")[e];if(n&&(W(this,Ie,"f")[e]=n.filter(r=>!r.once),n.forEach(({listener:r})=>r(...t))),e==="abort"){const r=t[0];!W(this,it,"f")&&!(n!=null&&n.length)&&Promise.reject(r),W(this,Ct,"f").call(this,r),W(this,Rt,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=t[0];!W(this,it,"f")&&!(n!=null&&n.length)&&Promise.reject(r),W(this,Ct,"f").call(this,r),W(this,Rt,"f").call(this,r),this._emit("end")}}_emitFinal(){}}bn=new WeakMap,xn=new WeakMap,Ct=new WeakMap,Pt=new WeakMap,vn=new WeakMap,Rt=new WeakMap,Ie=new WeakMap,Tt=new WeakMap,An=new WeakMap,Cn=new WeakMap,it=new WeakMap,gs=new WeakSet,Pa=function(e){if(ge(this,An,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new he),e instanceof he)return ge(this,Cn,!0,"f"),this._emit("abort",e);if(e instanceof C)return this._emit("error",e);if(e instanceof Error){const t=new C(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new C(String(e)))};function go(s,e){const t={...s};return Object.defineProperties(t,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),t}function Ms(s){return(s==null?void 0:s.$brand)==="auto-parseable-response-format"}function en(s){return(s==null?void 0:s.$brand)==="auto-parseable-tool"}function yo(s,e){return!e||!Ra(e)?{...s,choices:s.choices.map(t=>({...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:Fs(s,e)}function Fs(s,e){const t=s.choices.map(n=>{var r;if(n.finish_reason==="length")throw new ca;if(n.finish_reason==="content_filter")throw new ua;return{...n,message:{...n.message,...n.message.tool_calls?{tool_calls:((r=n.message.tool_calls)==null?void 0:r.map(a=>bo(e,a)))??void 0}:void 0,parsed:n.message.content&&!n.message.refusal?_o(e,n.message.content):null}}});return{...s,choices:t}}function _o(s,e){var t,n;return((t=s.response_format)==null?void 0:t.type)!=="json_schema"?null:((n=s.response_format)==null?void 0:n.type)==="json_schema"?"$parseRaw"in s.response_format?s.response_format.$parseRaw(e):JSON.parse(e):null}function bo(s,e){var n;const t=(n=s.tools)==null?void 0:n.find(r=>{var a;return((a=r.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:en(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function xo(s,e){var n;if(!s)return!1;const t=(n=s.tools)==null?void 0:n.find(r=>{var a;return((a=r.function)==null?void 0:a.name)===e.function.name});return en(t)||(t==null?void 0:t.function.strict)||!1}function Ra(s){var e;return Ms(s.response_format)?!0:((e=s.tools)==null?void 0:e.some(t=>en(t)||t.type==="function"&&t.function.strict===!0))??!1}function vo(s){for(const e of s??[]){if(e.type!=="function")throw new C(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new C(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var oe=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},re,ys,Pn,_s,bs,xs,Ta,vs;const wr=10;class Ea extends js{constructor(){super(...arguments),re.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var n;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(n=e.choices[0])==null?void 0:n.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(Aa(e)||Ca(e))&&e.content)this._emit("functionCallResult",e.content);else if(dt(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(dt(e)&&e.tool_calls)for(const n of e.tool_calls)n.type==="function"&&this._emit("functionCall",n.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new C("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),oe(this,re,"m",ys).call(this)}async finalMessage(){return await this.done(),oe(this,re,"m",Pn).call(this)}async finalFunctionCall(){return await this.done(),oe(this,re,"m",_s).call(this)}async finalFunctionCallResult(){return await this.done(),oe(this,re,"m",bs).call(this)}async totalUsage(){return await this.done(),oe(this,re,"m",xs).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=oe(this,re,"m",Pn).call(this);t&&this._emit("finalMessage",t);const n=oe(this,re,"m",ys).call(this);n&&this._emit("finalContent",n);const r=oe(this,re,"m",_s).call(this);r&&this._emit("finalFunctionCall",r);const a=oe(this,re,"m",bs).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(i=>i.usage)&&this._emit("totalUsage",oe(this,re,"m",xs).call(this))}async _createChatCompletion(e,t,n){const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),oe(this,re,"m",Ta).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Fs(a,t))}async _runChatCompletion(e,t,n){for(const r of t.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){var g;const r="function",{function_call:a="auto",stream:i,...o}=t,l=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:c=wr}=n||{},u={};for(const _ of t.functions)u[_.name||_.function.name]=_;const f=t.functions.map(_=>({name:_.name||_.function.name,parameters:_.parameters,description:_.description}));for(const _ of t.messages)this._addMessage(_,!1);for(let _=0;_<c;++_){const k=(g=(await this._createChatCompletion(e,{...o,function_call:a,functions:f,messages:[...this.messages]},n)).choices[0])==null?void 0:g.message;if(!k)throw new C("missing message in ChatCompletion response");if(!k.function_call)return;const{name:S,arguments:q}=k.function_call,b=u[S];if(b){if(l&&l!==S){const I=`Invalid function_call: ${JSON.stringify(S)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:r,name:S,content:I});continue}}else{const I=`Invalid function_call: ${JSON.stringify(S)}. Available options are: ${f.map(O=>JSON.stringify(O.name)).join(", ")}. Please try again`;this._addMessage({role:r,name:S,content:I});continue}let L;try{L=vr(b)?await b.parse(q):q}catch(I){this._addMessage({role:r,name:S,content:I instanceof Error?I.message:String(I)});continue}const R=await b.function(L,this),U=oe(this,re,"m",vs).call(this,R);if(this._addMessage({role:r,name:S,content:U}),l)return}}async _runTools(e,t,n){var _,A,k;const r="tool",{tool_choice:a="auto",stream:i,...o}=t,l=typeof a!="string"&&((_=a==null?void 0:a.function)==null?void 0:_.name),{maxChatCompletions:c=wr}=n||{},u=t.tools.map(S=>{if(en(S)){if(!S.$callback)throw new C("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:S.$callback,name:S.function.name,description:S.function.description||"",parameters:S.function.parameters,parse:S.$parseRaw,strict:!0}}}return S}),f={};for(const S of u)S.type==="function"&&(f[S.function.name||S.function.function.name]=S.function);const g="tools"in t?u.map(S=>S.type==="function"?{type:"function",function:{name:S.function.name||S.function.function.name,parameters:S.function.parameters,description:S.function.description,strict:S.function.strict}}:S):void 0;for(const S of t.messages)this._addMessage(S,!1);for(let S=0;S<c;++S){const b=(A=(await this._createChatCompletion(e,{...o,tool_choice:a,tools:g,messages:[...this.messages]},n)).choices[0])==null?void 0:A.message;if(!b)throw new C("missing message in ChatCompletion response");if(!((k=b.tool_calls)!=null&&k.length))return;for(const L of b.tool_calls){if(L.type!=="function")continue;const R=L.id,{name:U,arguments:I}=L.function,O=f[U];if(O){if(l&&l!==U){const Z=`Invalid tool_call: ${JSON.stringify(U)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:r,tool_call_id:R,content:Z});continue}}else{const Z=`Invalid tool_call: ${JSON.stringify(U)}. Available options are: ${Object.keys(f).map(H=>JSON.stringify(H)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:R,content:Z});continue}let x;try{x=vr(O)?await O.parse(I):I}catch(Z){const H=Z instanceof Error?Z.message:String(Z);this._addMessage({role:r,tool_call_id:R,content:H});continue}const $=await O.function(x,this),T=oe(this,re,"m",vs).call(this,$);if(this._addMessage({role:r,tool_call_id:R,content:T}),l)return}}}}re=new WeakSet,ys=function(){return oe(this,re,"m",Pn).call(this).content??null},Pn=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(dt(t)){const{function_call:n,...r}=t,a={...r,content:t.content??null,refusal:t.refusal??null};return n&&(a.function_call=n),a}}throw new C("stream ended without producing a ChatCompletionMessage with role=assistant")},_s=function(){var e,t;for(let n=this.messages.length-1;n>=0;n--){const r=this.messages[n];if(dt(r)&&(r!=null&&r.function_call))return r.function_call;if(dt(r)&&((e=r==null?void 0:r.tool_calls)!=null&&e.length))return(t=r.tool_calls.at(-1))==null?void 0:t.function}},bs=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Aa(t)&&t.content!=null||Ca(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(n=>{var r;return n.role==="assistant"&&((r=n.tool_calls)==null?void 0:r.some(a=>a.type==="function"&&a.id===t.tool_call_id))}))return t.content}},xs=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},Ta=function(e){if(e.n!=null&&e.n>1)throw new C("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},vs=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Ft extends Ea{static runFunctions(e,t,n){const r=new Ft,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,a)),r}static runTools(e,t,n){const r=new Ft,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}_addMessage(e,t=!0){super._addMessage(e,t),dt(e)&&e.content&&this._emit("content",e.content)}}const Ia=1,Na=2,Oa=4,$a=8,ja=16,Ma=32,Fa=64,Za=128,La=256,Da=Za|La,Ba=ja|Ma|Da|Fa,Ua=Ia|Na|Ba,Va=Oa|$a,wo=Ua|Va,ee={STR:Ia,NUM:Na,ARR:Oa,OBJ:$a,NULL:ja,BOOL:Ma,NAN:Fa,INFINITY:Za,MINUS_INFINITY:La,INF:Da,SPECIAL:Ba,ATOM:Ua,COLLECTION:Va,ALL:wo};class ko extends Error{}class So extends Error{}function Ao(s,e=ee.ALL){if(typeof s!="string")throw new TypeError(`expecting str, got ${typeof s}`);if(!s.trim())throw new Error(`${s} is empty`);return Co(s.trim(),e)}const Co=(s,e)=>{const t=s.length;let n=0;const r=g=>{throw new ko(`${g} at position ${n}`)},a=g=>{throw new So(`${g} at position ${n}`)},i=()=>(f(),n>=t&&r("Unexpected end of input"),s[n]==='"'?o():s[n]==="{"?l():s[n]==="["?c():s.substring(n,n+4)==="null"||ee.NULL&e&&t-n<4&&"null".startsWith(s.substring(n))?(n+=4,null):s.substring(n,n+4)==="true"||ee.BOOL&e&&t-n<4&&"true".startsWith(s.substring(n))?(n+=4,!0):s.substring(n,n+5)==="false"||ee.BOOL&e&&t-n<5&&"false".startsWith(s.substring(n))?(n+=5,!1):s.substring(n,n+8)==="Infinity"||ee.INFINITY&e&&t-n<8&&"Infinity".startsWith(s.substring(n))?(n+=8,1/0):s.substring(n,n+9)==="-Infinity"||ee.MINUS_INFINITY&e&&1<t-n&&t-n<9&&"-Infinity".startsWith(s.substring(n))?(n+=9,-1/0):s.substring(n,n+3)==="NaN"||ee.NAN&e&&t-n<3&&"NaN".startsWith(s.substring(n))?(n+=3,NaN):u()),o=()=>{const g=n;let _=!1;for(n++;n<t&&(s[n]!=='"'||_&&s[n-1]==="\\");)_=s[n]==="\\"?!_:!1,n++;if(s.charAt(n)=='"')try{return JSON.parse(s.substring(g,++n-Number(_)))}catch(A){a(String(A))}else if(ee.STR&e)try{return JSON.parse(s.substring(g,n-Number(_))+'"')}catch{return JSON.parse(s.substring(g,s.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},l=()=>{n++,f();const g={};try{for(;s[n]!=="}";){if(f(),n>=t&&ee.OBJ&e)return g;const _=o();f(),n++;try{const A=i();Object.defineProperty(g,_,{value:A,writable:!0,enumerable:!0,configurable:!0})}catch(A){if(ee.OBJ&e)return g;throw A}f(),s[n]===","&&n++}}catch{if(ee.OBJ&e)return g;r("Expected '}' at end of object")}return n++,g},c=()=>{n++;const g=[];try{for(;s[n]!=="]";)g.push(i()),f(),s[n]===","&&n++}catch{if(ee.ARR&e)return g;r("Expected ']' at end of array")}return n++,g},u=()=>{if(n===0){s==="-"&&ee.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(s)}catch(_){if(ee.NUM&e)try{return s[s.length-1]==="."?JSON.parse(s.substring(0,s.lastIndexOf("."))):JSON.parse(s.substring(0,s.lastIndexOf("e")))}catch{}a(String(_))}}const g=n;for(s[n]==="-"&&n++;s[n]&&!",]}".includes(s[n]);)n++;n==t&&!(ee.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(s.substring(g,n))}catch{s.substring(g,n)==="-"&&ee.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(s.substring(g,s.lastIndexOf("e")))}catch(A){a(String(A))}}},f=()=>{for(;n<t&&` 
\r	`.includes(s[n]);)n++};return i()},kr=s=>Ao(s,ee.ALL^ee.NUM);var tt=function(s,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(s,t):r?r.value=t:e.set(s,t),t},z=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},K,Ee,nt,je,rs,hn,as,is,os,mn,ls,Sr;class Zt extends Ea{constructor(e){super(),K.add(this),Ee.set(this,void 0),nt.set(this,void 0),je.set(this,void 0),tt(this,Ee,e,"f"),tt(this,nt,[],"f")}get currentChatCompletionSnapshot(){return z(this,je,"f")}static fromReadableStream(e){const t=new Zt(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,n){const r=new Zt(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,n){var i;super._createChatCompletion;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),z(this,K,"m",rs).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const o of a)z(this,K,"m",as).call(this,o);if((i=a.controller.signal)!=null&&i.aborted)throw new he;return this._addChatCompletion(z(this,K,"m",mn).call(this))}async _fromReadableStream(e,t){var i;const n=t==null?void 0:t.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),z(this,K,"m",rs).call(this),this._connected();const r=Ce.fromReadableStream(e,this.controller);let a;for await(const o of r)a&&a!==o.id&&this._addChatCompletion(z(this,K,"m",mn).call(this)),z(this,K,"m",as).call(this,o),a=o.id;if((i=r.controller.signal)!=null&&i.aborted)throw new he;return this._addChatCompletion(z(this,K,"m",mn).call(this))}[(Ee=new WeakMap,nt=new WeakMap,je=new WeakMap,K=new WeakSet,rs=function(){this.ended||tt(this,je,void 0,"f")},hn=function(t){let n=z(this,nt,"f")[t.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},z(this,nt,"f")[t.index]=n,n)},as=function(t){var r,a,i,o,l,c,u,f,g,_,A,k,S,q,b;if(this.ended)return;const n=z(this,K,"m",Sr).call(this,t);this._emit("chunk",t,n);for(const L of t.choices){const R=n.choices[L.index];L.delta.content!=null&&((r=R.message)==null?void 0:r.role)==="assistant"&&((a=R.message)!=null&&a.content)&&(this._emit("content",L.delta.content,R.message.content),this._emit("content.delta",{delta:L.delta.content,snapshot:R.message.content,parsed:R.message.parsed})),L.delta.refusal!=null&&((i=R.message)==null?void 0:i.role)==="assistant"&&((o=R.message)!=null&&o.refusal)&&this._emit("refusal.delta",{delta:L.delta.refusal,snapshot:R.message.refusal}),((l=L.logprobs)==null?void 0:l.content)!=null&&((c=R.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(u=L.logprobs)==null?void 0:u.content,snapshot:((f=R.logprobs)==null?void 0:f.content)??[]}),((g=L.logprobs)==null?void 0:g.refusal)!=null&&((_=R.message)==null?void 0:_.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(A=L.logprobs)==null?void 0:A.refusal,snapshot:((k=R.logprobs)==null?void 0:k.refusal)??[]});const U=z(this,K,"m",hn).call(this,R);R.finish_reason&&(z(this,K,"m",os).call(this,R),U.current_tool_call_index!=null&&z(this,K,"m",is).call(this,R,U.current_tool_call_index));for(const I of L.delta.tool_calls??[])U.current_tool_call_index!==I.index&&(z(this,K,"m",os).call(this,R),U.current_tool_call_index!=null&&z(this,K,"m",is).call(this,R,U.current_tool_call_index)),U.current_tool_call_index=I.index;for(const I of L.delta.tool_calls??[]){const O=(S=R.message.tool_calls)==null?void 0:S[I.index];O!=null&&O.type&&((O==null?void 0:O.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(q=O.function)==null?void 0:q.name,index:I.index,arguments:O.function.arguments,parsed_arguments:O.function.parsed_arguments,arguments_delta:((b=I.function)==null?void 0:b.arguments)??""}):(O==null||O.type,void 0))}}},is=function(t,n){var i,o,l;if(z(this,K,"m",hn).call(this,t).done_tool_calls.has(n))return;const a=(i=t.message.tool_calls)==null?void 0:i[n];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const c=(l=(o=z(this,Ee,"f"))==null?void 0:o.tools)==null?void 0:l.find(u=>u.type==="function"&&u.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:n,arguments:a.function.arguments,parsed_arguments:en(c)?c.$parseRaw(a.function.arguments):c!=null&&c.function.strict?JSON.parse(a.function.arguments):null})}else a.type},os=function(t){var r,a;const n=z(this,K,"m",hn).call(this,t);if(t.message.content&&!n.content_done){n.content_done=!0;const i=z(this,K,"m",ls).call(this);this._emit("content.done",{content:t.message.content,parsed:i?i.$parseRaw(t.message.content):null})}t.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(r=t.logprobs)!=null&&r.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(a=t.logprobs)!=null&&a.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},mn=function(){if(this.ended)throw new C("stream has ended, this shouldn't happen");const t=z(this,je,"f");if(!t)throw new C("request ended without sending any chunks");return tt(this,je,void 0,"f"),tt(this,nt,[],"f"),Po(t,z(this,Ee,"f"))},ls=function(){var n;const t=(n=z(this,Ee,"f"))==null?void 0:n.response_format;return Ms(t)?t:null},Sr=function(t){var n,r,a,i;let o=z(this,je,"f");const{choices:l,...c}=t;o?Object.assign(o,c):o=tt(this,je,{...c,choices:[]},"f");for(const{delta:u,finish_reason:f,index:g,logprobs:_=null,...A}of t.choices){let k=o.choices[g];if(k||(k=o.choices[g]={finish_reason:f,index:g,message:{},logprobs:_,...A}),_)if(!k.logprobs)k.logprobs=Object.assign({},_);else{const{content:I,refusal:O,...x}=_;Object.assign(k.logprobs,x),I&&((n=k.logprobs).content??(n.content=[]),k.logprobs.content.push(...I)),O&&((r=k.logprobs).refusal??(r.refusal=[]),k.logprobs.refusal.push(...O))}if(f&&(k.finish_reason=f,z(this,Ee,"f")&&Ra(z(this,Ee,"f")))){if(f==="length")throw new ca;if(f==="content_filter")throw new ua}if(Object.assign(k,A),!u)continue;const{content:S,refusal:q,function_call:b,role:L,tool_calls:R,...U}=u;if(Object.assign(k.message,U),q&&(k.message.refusal=(k.message.refusal||"")+q),L&&(k.message.role=L),b&&(k.message.function_call?(b.name&&(k.message.function_call.name=b.name),b.arguments&&((a=k.message.function_call).arguments??(a.arguments=""),k.message.function_call.arguments+=b.arguments)):k.message.function_call=b),S&&(k.message.content=(k.message.content||"")+S,!k.message.refusal&&z(this,K,"m",ls).call(this)&&(k.message.parsed=kr(k.message.content))),R){k.message.tool_calls||(k.message.tool_calls=[]);for(const{index:I,id:O,type:x,function:$,...T}of R){const Z=(i=k.message.tool_calls)[I]??(i[I]={});Object.assign(Z,T),O&&(Z.id=O),x&&(Z.type=x),$&&(Z.function??(Z.function={name:$.name??"",arguments:""})),$!=null&&$.name&&(Z.function.name=$.name),$!=null&&$.arguments&&(Z.function.arguments+=$.arguments,xo(z(this,Ee,"f"),Z)&&(Z.function.parsed_arguments=kr(Z.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,i)=>t.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Ce(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Po(s,e){const{id:t,choices:n,created:r,model:a,system_fingerprint:i,...o}=s,l={...o,id:t,choices:n.map(({message:c,finish_reason:u,index:f,logprobs:g,..._})=>{if(!u)throw new C(`missing finish_reason for choice ${f}`);const{content:A=null,function_call:k,tool_calls:S,...q}=c,b=c.role;if(!b)throw new C(`missing role for choice ${f}`);if(k){const{arguments:L,name:R}=k;if(L==null)throw new C(`missing function_call.arguments for choice ${f}`);if(!R)throw new C(`missing function_call.name for choice ${f}`);return{..._,message:{content:A,function_call:{arguments:L,name:R},role:b,refusal:c.refusal??null},finish_reason:u,index:f,logprobs:g}}return S?{..._,index:f,finish_reason:u,logprobs:g,message:{...q,role:b,content:A,refusal:c.refusal??null,tool_calls:S.map((L,R)=>{const{function:U,type:I,id:O,...x}=L,{arguments:$,name:T,...Z}=U||{};if(O==null)throw new C(`missing choices[${f}].tool_calls[${R}].id
${pn(s)}`);if(I==null)throw new C(`missing choices[${f}].tool_calls[${R}].type
${pn(s)}`);if(T==null)throw new C(`missing choices[${f}].tool_calls[${R}].function.name
${pn(s)}`);if($==null)throw new C(`missing choices[${f}].tool_calls[${R}].function.arguments
${pn(s)}`);return{...x,id:O,type:I,function:{...Z,name:T,arguments:$}}})}}:{..._,message:{...q,content:A,role:b,refusal:c.refusal??null},finish_reason:u,index:f,logprobs:g}}),created:r,model:a,object:"chat.completion",...i?{system_fingerprint:i}:{}};return yo(l,e)}function pn(s){return JSON.stringify(s)}class ft extends Zt{static fromReadableStream(e){const t=new ft(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,n){const r=new ft(null),a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,a)),r}static runTools(e,t,n){const r=new ft(t),a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}}let za=class extends F{parse(e,t){return vo(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(n=>Fs(n,e))}runFunctions(e,t){return e.stream?ft.runFunctions(this._client,e,t):Ft.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?ft.runTools(this._client,e,t):Ft.runTools(this._client,e,t)}stream(e,t){return Zt.createChatCompletion(this._client,e,t)}};class ws extends F{constructor(){super(...arguments),this.completions=new za(this._client)}}(function(s){s.Completions=za})(ws||(ws={}));class Wa extends F{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Ga extends F{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Wn extends F{constructor(){super(...arguments),this.sessions=new Wa(this._client),this.transcriptionSessions=new Ga(this._client)}}Wn.Sessions=Wa;Wn.TranscriptionSessions=Ga;var w=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},ce=function(s,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(s,t):r?r.value=t:e.set(s,t),t},te,ks,Ae,wn,ye,Je,lt,Ge,Rn,de,kn,Sn,Mt,Et,It,Ar,Cr,Pr,Rr,Tr,Er,Ir;class _e extends js{constructor(){super(...arguments),te.add(this),ks.set(this,[]),Ae.set(this,{}),wn.set(this,{}),ye.set(this,void 0),Je.set(this,void 0),lt.set(this,void 0),Ge.set(this,void 0),Rn.set(this,void 0),de.set(this,void 0),kn.set(this,void 0),Sn.set(this,void 0),Mt.set(this,void 0)}[(ks=new WeakMap,Ae=new WeakMap,wn=new WeakMap,ye=new WeakMap,Je=new WeakMap,lt=new WeakMap,Ge=new WeakMap,Rn=new WeakMap,de=new WeakMap,kn=new WeakMap,Sn=new WeakMap,Mt=new WeakMap,te=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,i)=>t.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new _e;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var a;const n=t==null?void 0:t.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=Ce.fromReadableStream(e,this.controller);for await(const i of r)w(this,te,"m",Et).call(this,i);if((a=r.controller.signal)!=null&&a.aborted)throw new he;return this._addRun(w(this,te,"m",It).call(this))}toReadableStream(){return new Ce(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,r,a){const i=new _e;return i._run(()=>i._runToolAssistantStream(e,t,n,r,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,t,n,r,a){var c;const i=a==null?void 0:a.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},l=await e.submitToolOutputs(t,n,o,{...a,signal:this.controller.signal});this._connected();for await(const u of l)w(this,te,"m",Et).call(this,u);if((c=l.controller.signal)!=null&&c.aborted)throw new he;return this._addRun(w(this,te,"m",It).call(this))}static createThreadAssistantStream(e,t,n){const r=new _e;return r._run(()=>r._threadAssistantStream(e,t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,n,r){const a=new _e;return a._run(()=>a._runAssistantStream(e,t,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return w(this,kn,"f")}currentRun(){return w(this,Sn,"f")}currentMessageSnapshot(){return w(this,ye,"f")}currentRunStepSnapshot(){return w(this,Mt,"f")}async finalRunSteps(){return await this.done(),Object.values(w(this,Ae,"f"))}async finalMessages(){return await this.done(),Object.values(w(this,wn,"f"))}async finalRun(){if(await this.done(),!w(this,Je,"f"))throw Error("Final run was not received.");return w(this,Je,"f")}async _createThreadAssistantStream(e,t,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},i=await e.createAndRun(a,{...n,signal:this.controller.signal});this._connected();for await(const l of i)w(this,te,"m",Et).call(this,l);if((o=i.controller.signal)!=null&&o.aborted)throw new he;return this._addRun(w(this,te,"m",It).call(this))}async _createAssistantStream(e,t,n,r){var l;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},o=await e.create(t,i,{...r,signal:this.controller.signal});this._connected();for await(const c of o)w(this,te,"m",Et).call(this,c);if((l=o.controller.signal)!=null&&l.aborted)throw new he;return this._addRun(w(this,te,"m",It).call(this))}static accumulateDelta(e,t){for(const[n,r]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let a=e[n];if(a==null){e[n]=r;continue}if(n==="index"||n==="type"){e[n]=r;continue}if(typeof a=="string"&&typeof r=="string")a+=r;else if(typeof a=="number"&&typeof r=="number")a+=r;else if(ss(a)&&ss(r))a=this.accumulateDelta(a,r);else if(Array.isArray(a)&&Array.isArray(r)){if(a.every(i=>typeof i=="string"||typeof i=="number")){a.push(...r);continue}for(const i of r){if(!ss(i))throw new Error(`Expected array delta entry to be an object but got: ${i}`);const o=i.index;if(o==null)throw console.error(i),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=a[o];l==null?a.push(i):a[o]=this.accumulateDelta(l,i)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${r}, accValue: ${a}`);e[n]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,r){return await this._createAssistantStream(t,e,n,r)}async _runToolAssistantStream(e,t,n,r,a){return await this._createToolAssistantStream(n,e,t,r,a)}}Et=function(e){if(!this.ended)switch(ce(this,kn,e,"f"),w(this,te,"m",Pr).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":w(this,te,"m",Ir).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":w(this,te,"m",Cr).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":w(this,te,"m",Ar).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},It=function(){if(this.ended)throw new C("stream has ended, this shouldn't happen");if(!w(this,Je,"f"))throw Error("Final run has not been received");return w(this,Je,"f")},Ar=function(e){const[t,n]=w(this,te,"m",Tr).call(this,e,w(this,ye,"f"));ce(this,ye,t,"f"),w(this,wn,"f")[t.id]=t;for(const r of n){const a=t.content[r.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let a=r.text,i=t.content[r.index];if(i&&i.type=="text")this._emit("textDelta",a,i.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=w(this,lt,"f")){if(w(this,Ge,"f"))switch(w(this,Ge,"f").type){case"text":this._emit("textDone",w(this,Ge,"f").text,w(this,ye,"f"));break;case"image_file":this._emit("imageFileDone",w(this,Ge,"f").image_file,w(this,ye,"f"));break}ce(this,lt,r.index,"f")}ce(this,Ge,t.content[r.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(w(this,lt,"f")!==void 0){const r=e.data.content[w(this,lt,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,w(this,ye,"f"));break;case"text":this._emit("textDone",r.text,w(this,ye,"f"));break}}w(this,ye,"f")&&this._emit("messageDone",e.data),ce(this,ye,void 0,"f")}},Cr=function(e){const t=w(this,te,"m",Rr).call(this,e);switch(ce(this,Mt,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of n.step_details.tool_calls)a.index==w(this,Rn,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(w(this,de,"f")&&this._emit("toolCallDone",w(this,de,"f")),ce(this,Rn,a.index,"f"),ce(this,de,t.step_details.tool_calls[a.index],"f"),w(this,de,"f")&&this._emit("toolCallCreated",w(this,de,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ce(this,Mt,void 0,"f"),e.data.step_details.type=="tool_calls"&&w(this,de,"f")&&(this._emit("toolCallDone",w(this,de,"f")),ce(this,de,void 0,"f")),this._emit("runStepDone",e.data,t);break}},Pr=function(e){w(this,ks,"f").push(e),this._emit("event",e)},Rr=function(e){switch(e.event){case"thread.run.step.created":return w(this,Ae,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=w(this,Ae,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const r=_e.accumulateDelta(t,n.delta);w(this,Ae,"f")[e.data.id]=r}return w(this,Ae,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":w(this,Ae,"f")[e.data.id]=e.data;break}if(w(this,Ae,"f")[e.data.id])return w(this,Ae,"f")[e.data.id];throw new Error("No snapshot available")},Tr=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const a of r.delta.content)if(a.index in t.content){let i=t.content[a.index];t.content[a.index]=w(this,te,"m",Er).call(this,a,i)}else t.content[a.index]=a,n.push(a);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Er=function(e,t){return _e.accumulateDelta(t,e)},Ir=function(e){switch(ce(this,Sn,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":ce(this,Je,e.data,"f"),w(this,de,"f")&&(this._emit("toolCallDone",w(this,de,"f")),ce(this,de,void 0,"f"));break}};class Zs extends F{create(e,t,n){return this._client.post(`/threads/${e}/messages`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/messages/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,t={},n){return J(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,Ls,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t,n){return this._client.delete(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Ls extends se{}Zs.MessagesPage=Ls;class Ds extends F{retrieve(e,t,n,r={},a){return J(r)?this.retrieve(e,t,n,{},r):this._client.get(`/threads/${e}/runs/${t}/steps/${n}`,{query:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e,t,n={},r){return J(n)?this.list(e,t,{},n):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,Bs,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Bs extends se{}Ds.RunStepsPage=Bs;let tn=class extends F{constructor(){super(...arguments),this.steps=new Ds(this._client)}create(e,t,n){const{include:r,...a}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:r},body:a,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:t.stream??!1})}retrieve(e,t,n){return this._client.get(`/threads/${e}/runs/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,t={},n){return J(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,Us,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,t,n){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}createAndStream(e,t,n){return _e.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){const r={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:a,response:i}=await this.retrieve(e,t,{...n,headers:{...n==null?void 0:n.headers,...r}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(n!=null&&n.pollIntervalMs)o=n.pollIntervalMs;else{const l=i.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await Qt(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,n){return _e.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,t,n,r){const a=await this.submitToolOutputs(e,t,n,r);return await this.poll(e,a.id,r)}submitToolOutputsStream(e,t,n,r){return _e.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,r)}};class Us extends se{}tn.RunsPage=Us;tn.Steps=Ds;tn.RunStepsPage=Bs;class _t extends F{constructor(){super(...arguments),this.runs=new tn(this._client),this.messages=new Zs(this._client)}create(e={},t){return J(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/threads/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return _e.createThreadAssistantStream(e,this._client.beta.threads,t)}}_t.Runs=tn;_t.RunsPage=Us;_t.Messages=Zs;_t.MessagesPage=Ls;class bt extends F{constructor(){super(...arguments),this.realtime=new Wn(this._client),this.chat=new ws(this._client),this.assistants=new Os(this._client),this.threads=new _t(this._client)}}bt.Realtime=Wn;bt.Assistants=Os;bt.AssistantsPage=$s;bt.Threads=_t;class Ja extends F{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class qa extends F{create(e,t){const n=!!e.encoding_format;let r=n?e.encoding_format:"base64";n&&Ze("Request","User defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:r},...t});return n?a:(Ze("response","Decoding base64 embeddings to float32 array"),a._thenUnwrap(i=>(i&&i.data&&i.data.forEach(o=>{const l=o.embedding;o.embedding=mo(l)}),i)))}}class Vs extends F{retrieve(e,t,n,r){return this._client.get(`/evals/${e}/runs/${t}/output_items/${n}`,r)}list(e,t,n={},r){return J(n)?this.list(e,t,{},n):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,zs,{query:n,...r})}}class zs extends se{}Vs.OutputItemListResponsesPage=zs;class nn extends F{constructor(){super(...arguments),this.outputItems=new Vs(this._client)}create(e,t,n){return this._client.post(`/evals/${e}/runs`,{body:t,...n})}retrieve(e,t,n){return this._client.get(`/evals/${e}/runs/${t}`,n)}list(e,t={},n){return J(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,Ws,{query:t,...n})}del(e,t,n){return this._client.delete(`/evals/${e}/runs/${t}`,n)}cancel(e,t,n){return this._client.post(`/evals/${e}/runs/${t}`,n)}}class Ws extends se{}nn.RunListResponsesPage=Ws;nn.OutputItems=Vs;nn.OutputItemListResponsesPage=zs;class sn extends F{constructor(){super(...arguments),this.runs=new nn(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,n){return this._client.post(`/evals/${e}`,{body:t,...n})}list(e={},t){return J(e)?this.list({},e):this._client.getAPIList("/evals",Gs,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}}class Gs extends se{}sn.EvalListResponsesPage=Gs;sn.Runs=nn;sn.RunListResponsesPage=Ws;let Js=class extends F{create(e,t){return this._client.post("/files",mt({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return J(e)?this.list({},e):this._client.getAPIList("/files",qs,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t==null?void 0:t.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=30*60*1e3}={}){const r=new Set(["processed","error","deleted"]),a=Date.now();let i=await this.retrieve(e);for(;!i.status||!r.has(i.status);)if(await Qt(t),i=await this.retrieve(e),Date.now()-a>n)throw new Es({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return i}};class qs extends se{}Js.FileObjectsPage=qs;class Hs extends F{create(e,t,n){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,Xs,{body:t,method:"post",...n})}retrieve(e,t={},n){return J(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...n})}del(e,t){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions`,t)}}class Xs extends Bn{}Hs.PermissionCreateResponsesPage=Xs;let Gn=class extends F{constructor(){super(...arguments),this.permissions=new Hs(this._client)}};Gn.Permissions=Hs;Gn.PermissionCreateResponsesPage=Xs;class Ks extends F{list(e,t={},n){return J(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Qs,{query:t,...n})}}class Qs extends se{}Ks.FineTuningJobCheckpointsPage=Qs;class xt extends F{constructor(){super(...arguments),this.checkpoints=new Ks(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return J(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Ys,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return J(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,er,{query:t,...n})}}class Ys extends se{}class er extends se{}xt.FineTuningJobsPage=Ys;xt.FineTuningJobEventsPage=er;xt.Checkpoints=Ks;xt.FineTuningJobCheckpointsPage=Qs;class vt extends F{constructor(){super(...arguments),this.jobs=new xt(this._client),this.checkpoints=new Gn(this._client)}}vt.Jobs=xt;vt.FineTuningJobsPage=Ys;vt.FineTuningJobEventsPage=er;vt.Checkpoints=Gn;class Ha extends F{createVariation(e,t){return this._client.post("/images/variations",mt({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",mt({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class tr extends F{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",nr,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class nr extends Bn{}tr.ModelsPage=nr;class Xa extends F{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function Ro(s,e){return!e||!Eo(e)?{...s,output_parsed:null,output:s.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(n=>({...n,parsed:null}))}:t)}:Ka(s,e)}function Ka(s,e){const t=s.output.map(r=>{if(r.type==="function_call")return{...r,parsed_arguments:Oo(e,r)};if(r.type==="message"){const a=r.content.map(i=>i.type==="output_text"?{...i,parsed:To(e,i.text)}:i);return{...r,content:a}}return r}),n=Object.assign({},s,{output:t});return Object.getOwnPropertyDescriptor(s,"output_text")||Qa(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(const r of n.output)if(r.type==="message"){for(const a of r.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),n}function To(s,e){var t,n,r,a;return((n=(t=s.text)==null?void 0:t.format)==null?void 0:n.type)!=="json_schema"?null:"$parseRaw"in((r=s.text)==null?void 0:r.format)?((a=s.text)==null?void 0:a.format).$parseRaw(e):JSON.parse(e)}function Eo(s){var e;return!!Ms((e=s.text)==null?void 0:e.format)}function Io(s){return(s==null?void 0:s.$brand)==="auto-parseable-tool"}function No(s,e){return s.find(t=>t.type==="function"&&t.name===e)}function Oo(s,e){const t=No(s.tools??[],e.name);return{...e,...e,parsed_arguments:Io(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function Qa(s){const e=[];for(const t of s.output)if(t.type==="message")for(const n of t.content)n.type==="output_text"&&e.push(n.text);s.output_text=e.join("")}class Ya extends F{list(e,t={},n){return J(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,jo,{query:t,...n})}}var st=function(s,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(s,t):r?r.value=t:e.set(s,t),t},Me=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},rt,gn,Fe,yn,Nr,Or,$r,jr;class sr extends js{constructor(e){super(),rt.add(this),gn.set(this,void 0),Fe.set(this,void 0),yn.set(this,void 0),st(this,gn,e,"f")}static createResponse(e,t,n){const r=new sr(t);return r._run(()=>r._createResponse(e,t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createResponse(e,t,n){var i;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Me(this,rt,"m",Nr).call(this);const a=await e.responses.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const o of a)Me(this,rt,"m",Or).call(this,o);if((i=a.controller.signal)!=null&&i.aborted)throw new he;return Me(this,rt,"m",$r).call(this)}[(gn=new WeakMap,Fe=new WeakMap,yn=new WeakMap,rt=new WeakSet,Nr=function(){this.ended||st(this,Fe,void 0,"f")},Or=function(t){if(this.ended)return;const n=Me(this,rt,"m",jr).call(this,t);switch(this._emit("event",t),t.type){case"response.output_text.delta":{const r=n.output[t.output_index];if(!r)throw new C(`missing output at index ${t.output_index}`);if(r.type==="message"){const a=r.content[t.content_index];if(!a)throw new C(`missing content at index ${t.content_index}`);if(a.type!=="output_text")throw new C(`expected content to be 'output_text', got ${a.type}`);this._emit("response.output_text.delta",{...t,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const r=n.output[t.output_index];if(!r)throw new C(`missing output at index ${t.output_index}`);r.type==="function_call"&&this._emit("response.function_call_arguments.delta",{...t,snapshot:r.arguments});break}default:this._emit(t.type,t);break}},$r=function(){if(this.ended)throw new C("stream has ended, this shouldn't happen");const t=Me(this,Fe,"f");if(!t)throw new C("request ended without sending any events");st(this,Fe,void 0,"f");const n=$o(t,Me(this,gn,"f"));return st(this,yn,n,"f"),n},jr=function(t){let n=Me(this,Fe,"f");if(!n){if(t.type!=="response.created")throw new C(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return n=st(this,Fe,t.response,"f"),n}switch(t.type){case"response.output_item.added":{n.output.push(t.item);break}case"response.content_part.added":{const r=n.output[t.output_index];if(!r)throw new C(`missing output at index ${t.output_index}`);r.type==="message"&&r.content.push(t.part);break}case"response.output_text.delta":{const r=n.output[t.output_index];if(!r)throw new C(`missing output at index ${t.output_index}`);if(r.type==="message"){const a=r.content[t.content_index];if(!a)throw new C(`missing content at index ${t.content_index}`);if(a.type!=="output_text")throw new C(`expected content to be 'output_text', got ${a.type}`);a.text+=t.delta}break}case"response.function_call_arguments.delta":{const r=n.output[t.output_index];if(!r)throw new C(`missing output at index ${t.output_index}`);r.type==="function_call"&&(r.arguments+=t.delta);break}case"response.completed":{st(this,Fe,t.response,"f");break}}return n},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,i)=>t.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=Me(this,yn,"f");if(!e)throw new C("stream ended without producing a ChatCompletion");return e}}function $o(s,e){return Ro(s,e)}class rr extends F{constructor(){super(...arguments),this.inputItems=new Ya(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(n=>("object"in n&&n.object==="response"&&Qa(n),n))}retrieve(e,t={},n){return J(t)?this.retrieve(e,{},t):this._client.get(`/responses/${e}`,{query:t,...n})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(n=>Ka(n,e))}stream(e,t){return sr.createResponse(this._client,e,t)}}class jo extends se{}rr.InputItems=Ya;class ei extends F{create(e,t,n){return this._client.post(`/uploads/${e}/parts`,mt({body:t,...n}))}}class ar extends F{constructor(){super(...arguments),this.parts=new ei(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(`/uploads/${e}/complete`,{body:t,...n})}}ar.Parts=ei;const Mo=async s=>{const e=await Promise.allSettled(s),t=e.filter(r=>r.status==="rejected");if(t.length){for(const r of t)console.error(r.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const n=[];for(const r of e)r.status==="fulfilled"&&n.push(r.value);return n};class Jn extends F{create(e,t,n){return this._client.post(`/vector_stores/${e}/files`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,t,n,r){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,t={},n){return J(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,qn,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t,n){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}async poll(e,t,n){const r={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const a=await this.retrieve(e,t,{...n,headers:r}).withResponse(),i=a.data;switch(i.status){case"in_progress":let o=5e3;if(n!=null&&n.pollIntervalMs)o=n.pollIntervalMs;else{const l=a.response.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await Qt(o);break;case"failed":case"completed":return i}}}async upload(e,t,n){const r=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,t,n){const r=await this.upload(e,t,n);return await this.poll(e,r.id,n)}content(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,ir,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class qn extends se{}class ir extends Bn{}Jn.VectorStoreFilesPage=qn;Jn.FileContentResponsesPage=ir;class ti extends F{create(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t);return await this.poll(e,r.id,n)}listFiles(e,t,n={},r){return J(n)?this.listFiles(e,t,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,qn,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async poll(e,t,n){const r={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:a,response:i}=await this.retrieve(e,t,{...n,headers:r}).withResponse();switch(a.status){case"in_progress":let o=5e3;if(n!=null&&n.pollIntervalMs)o=n.pollIntervalMs;else{const l=i.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await Qt(o);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},r){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(r==null?void 0:r.maxConcurrency)??5,i=Math.min(a,t.length),o=this._client,l=t.values(),c=[...n];async function u(g){for(let _ of g){const A=await o.files.create({file:_,purpose:"assistants"},r);c.push(A.id)}}const f=Array(i).fill(l).map(u);return await Mo(f),await this.createAndPoll(e,{file_ids:c})}}class Ve extends F{constructor(){super(...arguments),this.files=new Jn(this._client),this.fileBatches=new ti(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/vector_stores/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},t){return J(e)?this.list({},e):this._client.getAPIList("/vector_stores",or,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}search(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/search`,lr,{body:t,method:"post",...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class or extends se{}class lr extends Bn{}Ve.VectorStoresPage=or;Ve.VectorStoreSearchResponsesPage=lr;Ve.Files=Jn;Ve.VectorStoreFilesPage=qn;Ve.FileContentResponsesPage=ir;Ve.FileBatches=ti;var ni;class N extends to{constructor({baseURL:e=dn("OPENAI_BASE_URL"),apiKey:t=dn("OPENAI_API_KEY"),organization:n=dn("OPENAI_ORG_ID")??null,project:r=dn("OPENAI_PROJECT_ID")??null,...a}={}){if(t===void 0)throw new C("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const i={apiKey:t,organization:n,project:r,...a,baseURL:e||"https://api.openai.com/v1"};if(!i.dangerouslyAllowBrowser&&fo())throw new C(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:i.baseURL,timeout:i.timeout??6e5,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new Ja(this),this.chat=new zn(this),this.embeddings=new qa(this),this.files=new Js(this),this.images=new Ha(this),this.audio=new Yt(this),this.moderations=new Xa(this),this.models=new tr(this),this.fineTuning=new vt(this),this.vectorStores=new Ve(this),this.beta=new bt(this),this.batches=new Is(this),this.uploads=new ar(this),this.responses=new rr(this),this.evals=new sn(this),this._options=i,this.apiKey=t,this.organization=n,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return Di(e,{arrayFormat:"brackets"})}}ni=N;N.OpenAI=ni;N.DEFAULT_TIMEOUT=6e5;N.OpenAIError=C;N.APIError=ne;N.APIConnectionError=Fn;N.APIConnectionTimeoutError=Es;N.APIUserAbortError=he;N.NotFoundError=ra;N.ConflictError=aa;N.RateLimitError=oa;N.BadRequestError=ta;N.AuthenticationError=na;N.InternalServerError=la;N.PermissionDeniedError=sa;N.UnprocessableEntityError=ia;N.toFile=ma;N.fileFromPath=Jr;N.Completions=Ja;N.Chat=zn;N.ChatCompletionsPage=Vn;N.Embeddings=qa;N.Files=Js;N.FileObjectsPage=qs;N.Images=Ha;N.Audio=Yt;N.Moderations=Xa;N.Models=tr;N.ModelsPage=nr;N.FineTuning=vt;N.VectorStores=Ve;N.VectorStoresPage=or;N.VectorStoreSearchResponsesPage=lr;N.Beta=bt;N.Batches=Is;N.BatchesPage=Ns;N.Uploads=ar;N.Responses=rr;N.Evals=sn;N.EvalListResponsesPage=Gs;const Fo=Symbol("Let zodToJsonSchema decide on which parser to use"),Mr={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Zo=s=>typeof s=="string"?{...Mr,basePath:["#"],definitions:{},name:s}:{...Mr,basePath:["#"],definitions:{},...s},Ss=s=>"_def"in s?s._def:s;function Lo(s){if(!s)return!0;for(const e in s)return!1;return!0}const Do=s=>{const e=Zo(s),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:t,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([n,r])=>[Ss(r),{def:Ss(r),path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};function si(s,e,t,n){n!=null&&n.errorMessages&&t&&(s.errorMessage={...s.errorMessage,[e]:t})}function V(s,e,t,n,r){s[e]=t,si(s,e,n,r)}var D;(function(s){s.assertEqual=r=>r;function e(r){}s.assertIs=e;function t(r){throw new Error}s.assertNever=t,s.arrayToEnum=r=>{const a={};for(const i of r)a[i]=i;return a},s.getValidEnumValues=r=>{const a=s.objectKeys(r).filter(o=>typeof r[r[o]]!="number"),i={};for(const o of a)i[o]=r[o];return s.objectValues(i)},s.objectValues=r=>s.objectKeys(r).map(function(a){return r[a]}),s.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const a=[];for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&a.push(i);return a},s.find=(r,a)=>{for(const i of r)if(a(i))return i},s.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function n(r,a=" | "){return r.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}s.joinValues=n,s.jsonStringifyReplacer=(r,a)=>typeof a=="bigint"?a.toString():a})(D||(D={}));var As;(function(s){s.mergeShapes=(e,t)=>({...e,...t})})(As||(As={}));const y=D.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Oe=s=>{switch(typeof s){case"undefined":return y.undefined;case"string":return y.string;case"number":return isNaN(s)?y.nan:y.number;case"boolean":return y.boolean;case"function":return y.function;case"bigint":return y.bigint;case"symbol":return y.symbol;case"object":return Array.isArray(s)?y.array:s===null?y.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?y.promise:typeof Map<"u"&&s instanceof Map?y.map:typeof Set<"u"&&s instanceof Set?y.set:typeof Date<"u"&&s instanceof Date?y.date:y.object;default:return y.unknown}},h=D.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Bo=s=>JSON.stringify(s,null,2).replace(/"([^"]+)":/g,"$1:");class fe extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},n={_errors:[]},r=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(r);else if(i.code==="invalid_return_type")r(i.returnTypeError);else if(i.code==="invalid_arguments")r(i.argumentsError);else if(i.path.length===0)n._errors.push(t(i));else{let o=n,l=0;for(;l<i.path.length;){const c=i.path[l];l===i.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(t(i))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return r(this),n}static assert(e){if(!(e instanceof fe))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,D.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}fe.create=s=>new fe(s);const pt=(s,e)=>{let t;switch(s.code){case h.invalid_type:s.received===y.undefined?t="Required":t=`Expected ${s.expected}, received ${s.received}`;break;case h.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(s.expected,D.jsonStringifyReplacer)}`;break;case h.unrecognized_keys:t=`Unrecognized key(s) in object: ${D.joinValues(s.keys,", ")}`;break;case h.invalid_union:t="Invalid input";break;case h.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${D.joinValues(s.options)}`;break;case h.invalid_enum_value:t=`Invalid enum value. Expected ${D.joinValues(s.options)}, received '${s.received}'`;break;case h.invalid_arguments:t="Invalid function arguments";break;case h.invalid_return_type:t="Invalid function return type";break;case h.invalid_date:t="Invalid date";break;case h.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(t=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?t=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?t=`Invalid input: must end with "${s.validation.endsWith}"`:D.assertNever(s.validation):s.validation!=="regex"?t=`Invalid ${s.validation}`:t="Invalid";break;case h.too_small:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:t="Invalid input";break;case h.too_big:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?t=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:t="Invalid input";break;case h.custom:t="Invalid input";break;case h.invalid_intersection_types:t="Intersection results could not be merged";break;case h.not_multiple_of:t=`Number must be a multiple of ${s.multipleOf}`;break;case h.not_finite:t="Number must be finite";break;default:t=e.defaultError,D.assertNever(s)}return{message:t}};let ri=pt;function Uo(s){ri=s}function Tn(){return ri}const En=s=>{const{data:e,path:t,errorMaps:n,issueData:r}=s,a=[...t,...r.path||[]],i={...r,path:a};if(r.message!==void 0)return{...r,path:a,message:r.message};let o="";const l=n.filter(c=>!!c).slice().reverse();for(const c of l)o=c(i,{data:e,defaultError:o}).message;return{...r,path:a,message:o}},Vo=[];function p(s,e){const t=Tn(),n=En({issueData:e,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,t,t===pt?void 0:pt].filter(r=>!!r)});s.common.issues.push(n)}class ae{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if(r.status==="aborted")return P;r.status==="dirty"&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const r of t){const a=await r.key,i=await r.value;n.push({key:a,value:i})}return ae.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:a,value:i}=r;if(a.status==="aborted"||i.status==="aborted")return P;a.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof i.value<"u"||r.alwaysSet)&&(n[a.value]=i.value)}return{status:e.value,value:n}}}const P=Object.freeze({status:"aborted"}),ct=s=>({status:"dirty",value:s}),ie=s=>({status:"valid",value:s}),Cs=s=>s.status==="aborted",Ps=s=>s.status==="dirty",He=s=>s.status==="valid",Lt=s=>typeof Promise<"u"&&s instanceof Promise;function In(s,e,t,n){if(typeof e=="function"?s!==e||!0:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(s)}function ai(s,e,t,n,r){if(typeof e=="function"?s!==e||!0:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(s,t),t}var v;(function(s){s.errToObj=e=>typeof e=="string"?{message:e}:e||{},s.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(v||(v={}));var Nt,Ot;class Re{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Fr=(s,e)=>{if(He(e))return{success:!0,data:e.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new fe(s.common.issues);return this._error=t,this._error}}};function E(s){if(!s)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:r}=s;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(i,o)=>{var l,c;const{message:u}=s;return i.code==="invalid_enum_value"?{message:u??o.defaultError}:typeof o.data>"u"?{message:(l=u??n)!==null&&l!==void 0?l:o.defaultError}:i.code!=="invalid_type"?{message:o.defaultError}:{message:(c=u??t)!==null&&c!==void 0?c:o.defaultError}},description:r}}class M{get description(){return this._def.description}_getType(e){return Oe(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Oe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ae,ctx:{common:e.parent.common,data:e.data,parsedType:Oe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Lt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oe(e)},a=this._parseSync({data:e,path:r.path,parent:r});return Fr(r,a)}"~validate"(e){var t,n;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oe(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:r});return He(a)?{value:a.value}:{issues:r.common.issues}}catch(a){!((n=(t=a==null?void 0:a.message)===null||t===void 0?void 0:t.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(a=>He(a)?{value:a.value}:{issues:r.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oe(e)},r=this._parse({data:e,path:n.path,parent:n}),a=await(Lt(r)?r:Promise.resolve(r));return Fr(n,a)}refine(e,t){const n=r=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,a)=>{const i=e(r),o=()=>a.addIssue({code:h.custom,...n(r)});return typeof Promise<"u"&&i instanceof Promise?i.then(l=>l?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,t){return this._refinement((n,r)=>e(n)?!0:(r.addIssue(typeof t=="function"?t(n,r):t),!1))}_refinement(e){return new ve({schema:this,typeName:m.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Pe.create(this,this._def)}nullable(){return Ue.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return xe.create(this)}promise(){return yt.create(this,this._def)}or(e){return Vt.create([this,e],this._def)}and(e){return zt.create(this,e,this._def)}transform(e){return new ve({...E(this._def),schema:this,typeName:m.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Ht({...E(this._def),innerType:this,defaultValue:t,typeName:m.ZodDefault})}brand(){return new cr({typeName:m.ZodBranded,type:this,...E(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Xt({...E(this._def),innerType:this,catchValue:t,typeName:m.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return rn.create(this,e)}readonly(){return Kt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const zo=/^c[^\s-]{8,}$/i,Wo=/^[0-9a-z]+$/,Go=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Jo=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,qo=/^[a-z0-9_-]{21}$/i,Ho=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Xo=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ko=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Qo="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let cs;const Yo=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,el=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,tl=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,nl=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,sl=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,rl=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ii="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",al=new RegExp(`^${ii}$`);function oi(s){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return s.precision?e=`${e}\\.\\d{${s.precision}}`:s.precision==null&&(e=`${e}(\\.\\d+)?`),e}function il(s){return new RegExp(`^${oi(s)}$`)}function li(s){let e=`${ii}T${oi(s)}`;const t=[];return t.push(s.local?"Z?":"Z"),s.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function ol(s,e){return!!((e==="v4"||!e)&&Yo.test(s)||(e==="v6"||!e)&&tl.test(s))}function ll(s,e){if(!Ho.test(s))return!1;try{const[t]=s.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),r=JSON.parse(atob(n));return!(typeof r!="object"||r===null||!r.typ||!r.alg||e&&r.alg!==e)}catch{return!1}}function cl(s,e){return!!((e==="v4"||!e)&&el.test(s)||(e==="v6"||!e)&&nl.test(s))}class be extends M{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==y.string){const a=this._getOrReturnCtx(e);return p(a,{code:h.invalid_type,expected:y.string,received:a.parsedType}),P}const n=new ae;let r;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(r=this._getOrReturnCtx(e,r),p(r,{code:h.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(r=this._getOrReturnCtx(e,r),p(r,{code:h.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const i=e.data.length>a.value,o=e.data.length<a.value;(i||o)&&(r=this._getOrReturnCtx(e,r),i?p(r,{code:h.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&p(r,{code:h.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")Ko.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"email",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")cs||(cs=new RegExp(Qo,"u")),cs.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"emoji",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")Jo.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"uuid",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")qo.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"nanoid",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")zo.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"cuid",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")Wo.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"cuid2",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")Go.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"ulid",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),p(r,{validation:"url",code:h.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"regex",code:h.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(r=this._getOrReturnCtx(e,r),p(r,{code:h.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(r=this._getOrReturnCtx(e,r),p(r,{code:h.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(r=this._getOrReturnCtx(e,r),p(r,{code:h.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?li(a).test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{code:h.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?al.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{code:h.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?il(a).test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{code:h.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?Xo.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"duration",code:h.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?ol(e.data,a.version)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"ip",code:h.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?ll(e.data,a.alg)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"jwt",code:h.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?cl(e.data,a.version)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"cidr",code:h.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?sl.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"base64",code:h.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?rl.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"base64url",code:h.invalid_string,message:a.message}),n.dirty()):D.assertNever(a);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(r=>e.test(r),{validation:t,code:h.invalid_string,...v.errToObj(n)})}_addCheck(e){return new be({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...v.errToObj(e)})}url(e){return this._addCheck({kind:"url",...v.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...v.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...v.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...v.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...v.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...v.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...v.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...v.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...v.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...v.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...v.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...v.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...v.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...v.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...v.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...v.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...v.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...v.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...v.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...v.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...v.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...v.errToObj(t)})}nonempty(e){return this.min(1,v.errToObj(e))}trim(){return new be({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new be({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new be({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}be.create=s=>{var e;return new be({checks:[],typeName:m.ZodString,coerce:(e=s==null?void 0:s.coerce)!==null&&e!==void 0?e:!1,...E(s)})};function ul(s,e){const t=(s.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,r=t>n?t:n,a=parseInt(s.toFixed(r).replace(".","")),i=parseInt(e.toFixed(r).replace(".",""));return a%i/Math.pow(10,r)}class Le extends M{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==y.number){const a=this._getOrReturnCtx(e);return p(a,{code:h.invalid_type,expected:y.number,received:a.parsedType}),P}let n;const r=new ae;for(const a of this._def.checks)a.kind==="int"?D.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),p(n,{code:h.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),p(n,{code:h.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),p(n,{code:h.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):a.kind==="multipleOf"?ul(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),p(n,{code:h.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),p(n,{code:h.not_finite,message:a.message}),r.dirty()):D.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,v.toString(t))}gt(e,t){return this.setLimit("min",e,!1,v.toString(t))}lte(e,t){return this.setLimit("max",e,!0,v.toString(t))}lt(e,t){return this.setLimit("max",e,!1,v.toString(t))}setLimit(e,t,n,r){return new Le({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:v.toString(r)}]})}_addCheck(e){return new Le({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:v.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:v.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:v.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:v.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:v.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:v.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:v.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:v.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:v.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&D.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Le.create=s=>new Le({checks:[],typeName:m.ZodNumber,coerce:(s==null?void 0:s.coerce)||!1,...E(s)});class De extends M{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==y.bigint)return this._getInvalidInput(e);let n;const r=new ae;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),p(n,{code:h.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),p(n,{code:h.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),p(n,{code:h.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):D.assertNever(a);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return p(t,{code:h.invalid_type,expected:y.bigint,received:t.parsedType}),P}gte(e,t){return this.setLimit("min",e,!0,v.toString(t))}gt(e,t){return this.setLimit("min",e,!1,v.toString(t))}lte(e,t){return this.setLimit("max",e,!0,v.toString(t))}lt(e,t){return this.setLimit("max",e,!1,v.toString(t))}setLimit(e,t,n,r){return new De({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:v.toString(r)}]})}_addCheck(e){return new De({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:v.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:v.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:v.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:v.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:v.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}De.create=s=>{var e;return new De({checks:[],typeName:m.ZodBigInt,coerce:(e=s==null?void 0:s.coerce)!==null&&e!==void 0?e:!1,...E(s)})};class Dt extends M{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==y.boolean){const n=this._getOrReturnCtx(e);return p(n,{code:h.invalid_type,expected:y.boolean,received:n.parsedType}),P}return ie(e.data)}}Dt.create=s=>new Dt({typeName:m.ZodBoolean,coerce:(s==null?void 0:s.coerce)||!1,...E(s)});class Xe extends M{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==y.date){const a=this._getOrReturnCtx(e);return p(a,{code:h.invalid_type,expected:y.date,received:a.parsedType}),P}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return p(a,{code:h.invalid_date}),P}const n=new ae;let r;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(r=this._getOrReturnCtx(e,r),p(r,{code:h.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(r=this._getOrReturnCtx(e,r),p(r,{code:h.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):D.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Xe({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:v.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:v.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Xe.create=s=>new Xe({checks:[],coerce:(s==null?void 0:s.coerce)||!1,typeName:m.ZodDate,...E(s)});class Nn extends M{_parse(e){if(this._getType(e)!==y.symbol){const n=this._getOrReturnCtx(e);return p(n,{code:h.invalid_type,expected:y.symbol,received:n.parsedType}),P}return ie(e.data)}}Nn.create=s=>new Nn({typeName:m.ZodSymbol,...E(s)});class Bt extends M{_parse(e){if(this._getType(e)!==y.undefined){const n=this._getOrReturnCtx(e);return p(n,{code:h.invalid_type,expected:y.undefined,received:n.parsedType}),P}return ie(e.data)}}Bt.create=s=>new Bt({typeName:m.ZodUndefined,...E(s)});class Ut extends M{_parse(e){if(this._getType(e)!==y.null){const n=this._getOrReturnCtx(e);return p(n,{code:h.invalid_type,expected:y.null,received:n.parsedType}),P}return ie(e.data)}}Ut.create=s=>new Ut({typeName:m.ZodNull,...E(s)});class gt extends M{constructor(){super(...arguments),this._any=!0}_parse(e){return ie(e.data)}}gt.create=s=>new gt({typeName:m.ZodAny,...E(s)});class qe extends M{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ie(e.data)}}qe.create=s=>new qe({typeName:m.ZodUnknown,...E(s)});class $e extends M{_parse(e){const t=this._getOrReturnCtx(e);return p(t,{code:h.invalid_type,expected:y.never,received:t.parsedType}),P}}$e.create=s=>new $e({typeName:m.ZodNever,...E(s)});class On extends M{_parse(e){if(this._getType(e)!==y.undefined){const n=this._getOrReturnCtx(e);return p(n,{code:h.invalid_type,expected:y.void,received:n.parsedType}),P}return ie(e.data)}}On.create=s=>new On({typeName:m.ZodVoid,...E(s)});class xe extends M{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==y.array)return p(t,{code:h.invalid_type,expected:y.array,received:t.parsedType}),P;if(r.exactLength!==null){const i=t.data.length>r.exactLength.value,o=t.data.length<r.exactLength.value;(i||o)&&(p(t,{code:i?h.too_big:h.too_small,minimum:o?r.exactLength.value:void 0,maximum:i?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(p(t,{code:h.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(p(t,{code:h.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((i,o)=>r.type._parseAsync(new Re(t,i,t.path,o)))).then(i=>ae.mergeArray(n,i));const a=[...t.data].map((i,o)=>r.type._parseSync(new Re(t,i,t.path,o)));return ae.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new xe({...this._def,minLength:{value:e,message:v.toString(t)}})}max(e,t){return new xe({...this._def,maxLength:{value:e,message:v.toString(t)}})}length(e,t){return new xe({...this._def,exactLength:{value:e,message:v.toString(t)}})}nonempty(e){return this.min(1,e)}}xe.create=(s,e)=>new xe({type:s,minLength:null,maxLength:null,exactLength:null,typeName:m.ZodArray,...E(e)});function ot(s){if(s instanceof G){const e={};for(const t in s.shape){const n=s.shape[t];e[t]=Pe.create(ot(n))}return new G({...s._def,shape:()=>e})}else return s instanceof xe?new xe({...s._def,type:ot(s.element)}):s instanceof Pe?Pe.create(ot(s.unwrap())):s instanceof Ue?Ue.create(ot(s.unwrap())):s instanceof Te?Te.create(s.items.map(e=>ot(e))):s}class G extends M{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=D.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==y.object){const c=this._getOrReturnCtx(e);return p(c,{code:h.invalid_type,expected:y.object,received:c.parsedType}),P}const{status:n,ctx:r}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof $e&&this._def.unknownKeys==="strip"))for(const c in r.data)i.includes(c)||o.push(c);const l=[];for(const c of i){const u=a[c],f=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Re(r,f,r.path,c)),alwaysSet:c in r.data})}if(this._def.catchall instanceof $e){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of o)l.push({key:{status:"valid",value:u},value:{status:"valid",value:r.data[u]}});else if(c==="strict")o.length>0&&(p(r,{code:h.unrecognized_keys,keys:o}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of o){const f=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Re(r,f,r.path,u)),alwaysSet:u in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const f=await u.key,g=await u.value;c.push({key:f,value:g,alwaysSet:u.alwaysSet})}return c}).then(c=>ae.mergeObjectSync(n,c)):ae.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return v.errToObj,new G({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var r,a,i,o;const l=(i=(a=(r=this._def).errorMap)===null||a===void 0?void 0:a.call(r,t,n).message)!==null&&i!==void 0?i:n.defaultError;return t.code==="unrecognized_keys"?{message:(o=v.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new G({...this._def,unknownKeys:"strip"})}passthrough(){return new G({...this._def,unknownKeys:"passthrough"})}extend(e){return new G({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new G({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:m.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new G({...this._def,catchall:e})}pick(e){const t={};return D.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new G({...this._def,shape:()=>t})}omit(e){const t={};return D.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new G({...this._def,shape:()=>t})}deepPartial(){return ot(this)}partial(e){const t={};return D.objectKeys(this.shape).forEach(n=>{const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()}),new G({...this._def,shape:()=>t})}required(e){const t={};return D.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof Pe;)a=a._def.innerType;t[n]=a}}),new G({...this._def,shape:()=>t})}keyof(){return ci(D.objectKeys(this.shape))}}G.create=(s,e)=>new G({shape:()=>s,unknownKeys:"strip",catchall:$e.create(),typeName:m.ZodObject,...E(e)});G.strictCreate=(s,e)=>new G({shape:()=>s,unknownKeys:"strict",catchall:$e.create(),typeName:m.ZodObject,...E(e)});G.lazycreate=(s,e)=>new G({shape:s,unknownKeys:"strip",catchall:$e.create(),typeName:m.ZodObject,...E(e)});class Vt extends M{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function r(a){for(const o of a)if(o.result.status==="valid")return o.result;for(const o of a)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const i=a.map(o=>new fe(o.ctx.common.issues));return p(t,{code:h.invalid_union,unionErrors:i}),P}if(t.common.async)return Promise.all(n.map(async a=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(r);{let a;const i=[];for(const l of n){const c={...t,common:{...t.common,issues:[]},parent:null},u=l._parseSync({data:t.data,path:t.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!a&&(a={result:u,ctx:c}),c.common.issues.length&&i.push(c.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(l=>new fe(l));return p(t,{code:h.invalid_union,unionErrors:o}),P}}get options(){return this._def.options}}Vt.create=(s,e)=>new Vt({options:s,typeName:m.ZodUnion,...E(e)});const Ne=s=>s instanceof Gt?Ne(s.schema):s instanceof ve?Ne(s.innerType()):s instanceof Jt?[s.value]:s instanceof Be?s.options:s instanceof qt?D.objectValues(s.enum):s instanceof Ht?Ne(s._def.innerType):s instanceof Bt?[void 0]:s instanceof Ut?[null]:s instanceof Pe?[void 0,...Ne(s.unwrap())]:s instanceof Ue?[null,...Ne(s.unwrap())]:s instanceof cr||s instanceof Kt?Ne(s.unwrap()):s instanceof Xt?Ne(s._def.innerType):[];class Hn extends M{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==y.object)return p(t,{code:h.invalid_type,expected:y.object,received:t.parsedType}),P;const n=this.discriminator,r=t.data[n],a=this.optionsMap.get(r);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(p(t,{code:h.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),P)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const a of t){const i=Ne(a.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of i){if(r.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);r.set(o,a)}}return new Hn({typeName:m.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...E(n)})}}function Rs(s,e){const t=Oe(s),n=Oe(e);if(s===e)return{valid:!0,data:s};if(t===y.object&&n===y.object){const r=D.objectKeys(e),a=D.objectKeys(s).filter(o=>r.indexOf(o)!==-1),i={...s,...e};for(const o of a){const l=Rs(s[o],e[o]);if(!l.valid)return{valid:!1};i[o]=l.data}return{valid:!0,data:i}}else if(t===y.array&&n===y.array){if(s.length!==e.length)return{valid:!1};const r=[];for(let a=0;a<s.length;a++){const i=s[a],o=e[a],l=Rs(i,o);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return t===y.date&&n===y.date&&+s==+e?{valid:!0,data:s}:{valid:!1}}class zt extends M{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(a,i)=>{if(Cs(a)||Cs(i))return P;const o=Rs(a.value,i.value);return o.valid?((Ps(a)||Ps(i))&&t.dirty(),{status:t.value,value:o.data}):(p(n,{code:h.invalid_intersection_types}),P)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,i])=>r(a,i)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}zt.create=(s,e,t)=>new zt({left:s,right:e,typeName:m.ZodIntersection,...E(t)});class Te extends M{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==y.array)return p(n,{code:h.invalid_type,expected:y.array,received:n.parsedType}),P;if(n.data.length<this._def.items.length)return p(n,{code:h.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),P;!this._def.rest&&n.data.length>this._def.items.length&&(p(n,{code:h.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...n.data].map((i,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new Re(n,i,n.path,o)):null}).filter(i=>!!i);return n.common.async?Promise.all(a).then(i=>ae.mergeArray(t,i)):ae.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new Te({...this._def,rest:e})}}Te.create=(s,e)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Te({items:s,typeName:m.ZodTuple,rest:null,...E(e)})};class Wt extends M{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==y.object)return p(n,{code:h.invalid_type,expected:y.object,received:n.parsedType}),P;const r=[],a=this._def.keyType,i=this._def.valueType;for(const o in n.data)r.push({key:a._parse(new Re(n,o,n.path,o)),value:i._parse(new Re(n,n.data[o],n.path,o)),alwaysSet:o in n.data});return n.common.async?ae.mergeObjectAsync(t,r):ae.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof M?new Wt({keyType:e,valueType:t,typeName:m.ZodRecord,...E(n)}):new Wt({keyType:be.create(),valueType:e,typeName:m.ZodRecord,...E(t)})}}class $n extends M{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==y.map)return p(n,{code:h.invalid_type,expected:y.map,received:n.parsedType}),P;const r=this._def.keyType,a=this._def.valueType,i=[...n.data.entries()].map(([o,l],c)=>({key:r._parse(new Re(n,o,n.path,[c,"key"])),value:a._parse(new Re(n,l,n.path,[c,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of i){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return P;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(c.value,u.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const l of i){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return P;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(c.value,u.value)}return{status:t.value,value:o}}}}$n.create=(s,e,t)=>new $n({valueType:e,keyType:s,typeName:m.ZodMap,...E(t)});class Ke extends M{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==y.set)return p(n,{code:h.invalid_type,expected:y.set,received:n.parsedType}),P;const r=this._def;r.minSize!==null&&n.data.size<r.minSize.value&&(p(n,{code:h.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&n.data.size>r.maxSize.value&&(p(n,{code:h.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const a=this._def.valueType;function i(l){const c=new Set;for(const u of l){if(u.status==="aborted")return P;u.status==="dirty"&&t.dirty(),c.add(u.value)}return{status:t.value,value:c}}const o=[...n.data.values()].map((l,c)=>a._parse(new Re(n,l,n.path,c)));return n.common.async?Promise.all(o).then(l=>i(l)):i(o)}min(e,t){return new Ke({...this._def,minSize:{value:e,message:v.toString(t)}})}max(e,t){return new Ke({...this._def,maxSize:{value:e,message:v.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Ke.create=(s,e)=>new Ke({valueType:s,minSize:null,maxSize:null,typeName:m.ZodSet,...E(e)});class ht extends M{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==y.function)return p(t,{code:h.invalid_type,expected:y.function,received:t.parsedType}),P;function n(o,l){return En({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Tn(),pt].filter(c=>!!c),issueData:{code:h.invalid_arguments,argumentsError:l}})}function r(o,l){return En({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Tn(),pt].filter(c=>!!c),issueData:{code:h.invalid_return_type,returnTypeError:l}})}const a={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof yt){const o=this;return ie(async function(...l){const c=new fe([]),u=await o._def.args.parseAsync(l,a).catch(_=>{throw c.addIssue(n(l,_)),c}),f=await Reflect.apply(i,this,u);return await o._def.returns._def.type.parseAsync(f,a).catch(_=>{throw c.addIssue(r(f,_)),c})})}else{const o=this;return ie(function(...l){const c=o._def.args.safeParse(l,a);if(!c.success)throw new fe([n(l,c.error)]);const u=Reflect.apply(i,this,c.data),f=o._def.returns.safeParse(u,a);if(!f.success)throw new fe([r(u,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ht({...this._def,args:Te.create(e).rest(qe.create())})}returns(e){return new ht({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new ht({args:e||Te.create([]).rest(qe.create()),returns:t||qe.create(),typeName:m.ZodFunction,...E(n)})}}class Gt extends M{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Gt.create=(s,e)=>new Gt({getter:s,typeName:m.ZodLazy,...E(e)});class Jt extends M{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return p(t,{received:t.data,code:h.invalid_literal,expected:this._def.value}),P}return{status:"valid",value:e.data}}get value(){return this._def.value}}Jt.create=(s,e)=>new Jt({value:s,typeName:m.ZodLiteral,...E(e)});function ci(s,e){return new Be({values:s,typeName:m.ZodEnum,...E(e)})}class Be extends M{constructor(){super(...arguments),Nt.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return p(t,{expected:D.joinValues(n),received:t.parsedType,code:h.invalid_type}),P}if(In(this,Nt)||ai(this,Nt,new Set(this._def.values)),!In(this,Nt).has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return p(t,{received:t.data,code:h.invalid_enum_value,options:n}),P}return ie(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Be.create(e,{...this._def,...t})}exclude(e,t=this._def){return Be.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}Nt=new WeakMap;Be.create=ci;class qt extends M{constructor(){super(...arguments),Ot.set(this,void 0)}_parse(e){const t=D.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==y.string&&n.parsedType!==y.number){const r=D.objectValues(t);return p(n,{expected:D.joinValues(r),received:n.parsedType,code:h.invalid_type}),P}if(In(this,Ot)||ai(this,Ot,new Set(D.getValidEnumValues(this._def.values))),!In(this,Ot).has(e.data)){const r=D.objectValues(t);return p(n,{received:n.data,code:h.invalid_enum_value,options:r}),P}return ie(e.data)}get enum(){return this._def.values}}Ot=new WeakMap;qt.create=(s,e)=>new qt({values:s,typeName:m.ZodNativeEnum,...E(e)});class yt extends M{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==y.promise&&t.common.async===!1)return p(t,{code:h.invalid_type,expected:y.promise,received:t.parsedType}),P;const n=t.parsedType===y.promise?t.data:Promise.resolve(t.data);return ie(n.then(r=>this._def.type.parseAsync(r,{path:t.path,errorMap:t.common.contextualErrorMap})))}}yt.create=(s,e)=>new yt({type:s,typeName:m.ZodPromise,...E(e)});class ve extends M{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===m.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:i=>{p(n,i),i.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),r.type==="preprocess"){const i=r.transform(n.data,a);if(n.common.async)return Promise.resolve(i).then(async o=>{if(t.value==="aborted")return P;const l=await this._def.schema._parseAsync({data:o,path:n.path,parent:n});return l.status==="aborted"?P:l.status==="dirty"||t.value==="dirty"?ct(l.value):l});{if(t.value==="aborted")return P;const o=this._def.schema._parseSync({data:i,path:n.path,parent:n});return o.status==="aborted"?P:o.status==="dirty"||t.value==="dirty"?ct(o.value):o}}if(r.type==="refinement"){const i=o=>{const l=r.refinement(o,a);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?P:(o.status==="dirty"&&t.dirty(),i(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?P:(o.status==="dirty"&&t.dirty(),i(o.value).then(()=>({status:t.value,value:o.value}))))}if(r.type==="transform")if(n.common.async===!1){const i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!He(i))return i;const o=r.transform(i.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(i=>He(i)?Promise.resolve(r.transform(i.value,a)).then(o=>({status:t.value,value:o})):i);D.assertNever(r)}}ve.create=(s,e,t)=>new ve({schema:s,typeName:m.ZodEffects,effect:e,...E(t)});ve.createWithPreprocess=(s,e,t)=>new ve({schema:e,effect:{type:"preprocess",transform:s},typeName:m.ZodEffects,...E(t)});class Pe extends M{_parse(e){return this._getType(e)===y.undefined?ie(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Pe.create=(s,e)=>new Pe({innerType:s,typeName:m.ZodOptional,...E(e)});class Ue extends M{_parse(e){return this._getType(e)===y.null?ie(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ue.create=(s,e)=>new Ue({innerType:s,typeName:m.ZodNullable,...E(e)});class Ht extends M{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===y.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Ht.create=(s,e)=>new Ht({innerType:s,typeName:m.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...E(e)});class Xt extends M{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Lt(r)?r.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new fe(n.common.issues)},input:n.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new fe(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Xt.create=(s,e)=>new Xt({innerType:s,typeName:m.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...E(e)});class jn extends M{_parse(e){if(this._getType(e)!==y.nan){const n=this._getOrReturnCtx(e);return p(n,{code:h.invalid_type,expected:y.nan,received:n.parsedType}),P}return{status:"valid",value:e.data}}}jn.create=s=>new jn({typeName:m.ZodNaN,...E(s)});const dl=Symbol("zod_brand");class cr extends M{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class rn extends M{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?P:a.status==="dirty"?(t.dirty(),ct(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const r=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return r.status==="aborted"?P:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:n.path,parent:n})}}static create(e,t){return new rn({in:e,out:t,typeName:m.ZodPipeline})}}class Kt extends M{_parse(e){const t=this._def.innerType._parse(e),n=r=>(He(r)&&(r.value=Object.freeze(r.value)),r);return Lt(t)?t.then(r=>n(r)):n(t)}unwrap(){return this._def.innerType}}Kt.create=(s,e)=>new Kt({innerType:s,typeName:m.ZodReadonly,...E(e)});function Zr(s,e){const t=typeof s=="function"?s(e):typeof s=="string"?{message:s}:s;return typeof t=="string"?{message:t}:t}function ui(s,e={},t){return s?gt.create().superRefine((n,r)=>{var a,i;const o=s(n);if(o instanceof Promise)return o.then(l=>{var c,u;if(!l){const f=Zr(e,n),g=(u=(c=f.fatal)!==null&&c!==void 0?c:t)!==null&&u!==void 0?u:!0;r.addIssue({code:"custom",...f,fatal:g})}});if(!o){const l=Zr(e,n),c=(i=(a=l.fatal)!==null&&a!==void 0?a:t)!==null&&i!==void 0?i:!0;r.addIssue({code:"custom",...l,fatal:c})}}):gt.create()}const fl={object:G.lazycreate};var m;(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(m||(m={}));const hl=(s,e={message:`Input not instance of ${s.name}`})=>ui(t=>t instanceof s,e),di=be.create,fi=Le.create,ml=jn.create,pl=De.create,hi=Dt.create,gl=Xe.create,yl=Nn.create,_l=Bt.create,bl=Ut.create,xl=gt.create,vl=qe.create,wl=$e.create,kl=On.create,Sl=xe.create,Al=G.create,Cl=G.strictCreate,Pl=Vt.create,Rl=Hn.create,Tl=zt.create,El=Te.create,Il=Wt.create,Nl=$n.create,Ol=Ke.create,$l=ht.create,jl=Gt.create,Ml=Jt.create,Fl=Be.create,Zl=qt.create,Ll=yt.create,Lr=ve.create,Dl=Pe.create,Bl=Ue.create,Ul=ve.createWithPreprocess,Vl=rn.create,zl=()=>di().optional(),Wl=()=>fi().optional(),Gl=()=>hi().optional(),Jl={string:s=>be.create({...s,coerce:!0}),number:s=>Le.create({...s,coerce:!0}),boolean:s=>Dt.create({...s,coerce:!0}),bigint:s=>De.create({...s,coerce:!0}),date:s=>Xe.create({...s,coerce:!0})},ql=P;var j=Object.freeze({__proto__:null,defaultErrorMap:pt,setErrorMap:Uo,getErrorMap:Tn,makeIssue:En,EMPTY_PATH:Vo,addIssueToContext:p,ParseStatus:ae,INVALID:P,DIRTY:ct,OK:ie,isAborted:Cs,isDirty:Ps,isValid:He,isAsync:Lt,get util(){return D},get objectUtil(){return As},ZodParsedType:y,getParsedType:Oe,ZodType:M,datetimeRegex:li,ZodString:be,ZodNumber:Le,ZodBigInt:De,ZodBoolean:Dt,ZodDate:Xe,ZodSymbol:Nn,ZodUndefined:Bt,ZodNull:Ut,ZodAny:gt,ZodUnknown:qe,ZodNever:$e,ZodVoid:On,ZodArray:xe,ZodObject:G,ZodUnion:Vt,ZodDiscriminatedUnion:Hn,ZodIntersection:zt,ZodTuple:Te,ZodRecord:Wt,ZodMap:$n,ZodSet:Ke,ZodFunction:ht,ZodLazy:Gt,ZodLiteral:Jt,ZodEnum:Be,ZodNativeEnum:qt,ZodPromise:yt,ZodEffects:ve,ZodTransformer:ve,ZodOptional:Pe,ZodNullable:Ue,ZodDefault:Ht,ZodCatch:Xt,ZodNaN:jn,BRAND:dl,ZodBranded:cr,ZodPipeline:rn,ZodReadonly:Kt,custom:ui,Schema:M,ZodSchema:M,late:fl,get ZodFirstPartyTypeKind(){return m},coerce:Jl,any:xl,array:Sl,bigint:pl,boolean:hi,date:gl,discriminatedUnion:Rl,effect:Lr,enum:Fl,function:$l,instanceof:hl,intersection:Tl,lazy:jl,literal:Ml,map:Nl,nan:ml,nativeEnum:Zl,never:wl,null:bl,nullable:Bl,number:fi,object:Al,oboolean:Gl,onumber:Wl,optional:Dl,ostring:zl,pipeline:Vl,preprocess:Ul,promise:Ll,record:Il,set:Ol,strictObject:Cl,string:di,symbol:yl,transformer:Lr,tuple:El,undefined:_l,union:Pl,unknown:vl,void:kl,NEVER:ql,ZodIssueCode:h,quotelessJson:Bo,ZodError:fe});function Hl(){return{}}function Xl(s,e){var n,r;const t={type:"array"};return((r=(n=s.type)==null?void 0:n._def)==null?void 0:r.typeName)!==m.ZodAny&&(t.items=B(s.type._def,{...e,currentPath:[...e.currentPath,"items"]})),s.minLength&&V(t,"minItems",s.minLength.value,s.minLength.message,e),s.maxLength&&V(t,"maxItems",s.maxLength.value,s.maxLength.message,e),s.exactLength&&(V(t,"minItems",s.exactLength.value,s.exactLength.message,e),V(t,"maxItems",s.exactLength.value,s.exactLength.message,e)),t}function Kl(s,e){const t={type:"integer",format:"int64"};if(!s.checks)return t;for(const n of s.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?V(t,"minimum",n.value,n.message,e):V(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),V(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?V(t,"maximum",n.value,n.message,e):V(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),V(t,"maximum",n.value,n.message,e));break;case"multipleOf":V(t,"multipleOf",n.value,n.message,e);break}return t}function Ql(){return{type:"boolean"}}function Yl(s,e){return B(s.type._def,e)}const ec=(s,e)=>B(s.innerType._def,e);function mi(s,e,t){const n=t??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((r,a)=>mi(s,e,r))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return tc(s,e)}}const tc=(s,e)=>{const t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(const n of s.checks)switch(n.kind){case"min":V(t,"minimum",n.value,n.message,e);break;case"max":V(t,"maximum",n.value,n.message,e);break}return t};function nc(s,e){return{...B(s.innerType._def,e),default:s.defaultValue()}}function sc(s,e,t){return e.effectStrategy==="input"?B(s.schema._def,e,t):{}}function rc(s){return{type:"string",enum:[...s.values]}}const ac=s=>"type"in s&&s.type==="string"?!1:"allOf"in s;function ic(s,e){const t=[B(s.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),B(s.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const r=[];return t.forEach(a=>{if(ac(a))r.push(...a.allOf),a.unevaluatedProperties===void 0&&(n=void 0);else{let i=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:o,...l}=a;i=l}else n=void 0;r.push(i)}}),r.length?{allOf:r,...n}:void 0}function oc(s,e){const t=typeof s.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(s.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[s.value]}:{type:t==="bigint"?"integer":t,const:s.value}}let us;const We={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(us===void 0&&(us=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),us),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function pi(s,e){const t={type:"string"};function n(r){return e.patternStrategy==="escape"?lc(r):r}if(s.checks)for(const r of s.checks)switch(r.kind){case"min":V(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,r.value):r.value,r.message,e);break;case"max":V(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":me(t,"email",r.message,e);break;case"format:idn-email":me(t,"idn-email",r.message,e);break;case"pattern:zod":pe(t,We.email,r.message,e);break}break;case"url":me(t,"uri",r.message,e);break;case"uuid":me(t,"uuid",r.message,e);break;case"regex":pe(t,r.regex,r.message,e);break;case"cuid":pe(t,We.cuid,r.message,e);break;case"cuid2":pe(t,We.cuid2,r.message,e);break;case"startsWith":pe(t,RegExp(`^${n(r.value)}`),r.message,e);break;case"endsWith":pe(t,RegExp(`${n(r.value)}$`),r.message,e);break;case"datetime":me(t,"date-time",r.message,e);break;case"date":me(t,"date",r.message,e);break;case"time":me(t,"time",r.message,e);break;case"duration":me(t,"duration",r.message,e);break;case"length":V(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,r.value):r.value,r.message,e),V(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,r.value):r.value,r.message,e);break;case"includes":{pe(t,RegExp(n(r.value)),r.message,e);break}case"ip":{r.version!=="v6"&&me(t,"ipv4",r.message,e),r.version!=="v4"&&me(t,"ipv6",r.message,e);break}case"emoji":pe(t,We.emoji,r.message,e);break;case"ulid":{pe(t,We.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{me(t,"binary",r.message,e);break}case"contentEncoding:base64":{V(t,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{pe(t,We.base64,r.message,e);break}}break}case"nanoid":pe(t,We.nanoid,r.message,e)}return t}const lc=s=>Array.from(s).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),me=(s,e,t,n)=>{var r;s.format||(r=s.anyOf)!=null&&r.some(a=>a.format)?(s.anyOf||(s.anyOf=[]),s.format&&(s.anyOf.push({format:s.format,...s.errorMessage&&n.errorMessages&&{errorMessage:{format:s.errorMessage.format}}}),delete s.format,s.errorMessage&&(delete s.errorMessage.format,Object.keys(s.errorMessage).length===0&&delete s.errorMessage)),s.anyOf.push({format:e,...t&&n.errorMessages&&{errorMessage:{format:t}}})):V(s,"format",e,t,n)},pe=(s,e,t,n)=>{var r;s.pattern||(r=s.allOf)!=null&&r.some(a=>a.pattern)?(s.allOf||(s.allOf=[]),s.pattern&&(s.allOf.push({pattern:s.pattern,...s.errorMessage&&n.errorMessages&&{errorMessage:{pattern:s.errorMessage.pattern}}}),delete s.pattern,s.errorMessage&&(delete s.errorMessage.pattern,Object.keys(s.errorMessage).length===0&&delete s.errorMessage)),s.allOf.push({pattern:Dr(e,n),...t&&n.errorMessages&&{errorMessage:{pattern:t}}})):V(s,"pattern",Dr(e,n),t,n)},Dr=(s,e)=>{var c;const t=typeof s=="function"?s():s;if(!e.applyRegexFlags||!t.flags)return t.source;const n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=n.i?t.source.toLowerCase():t.source;let a="",i=!1,o=!1,l=!1;for(let u=0;u<r.length;u++){if(i){a+=r[u],i=!1;continue}if(n.i){if(o){if(r[u].match(/[a-z]/)){l?(a+=r[u],a+=`${r[u-2]}-${r[u]}`.toUpperCase(),l=!1):r[u+1]==="-"&&((c=r[u+2])!=null&&c.match(/[a-z]/))?(a+=r[u],l=!0):a+=`${r[u]}${r[u].toUpperCase()}`;continue}}else if(r[u].match(/[a-z]/)){a+=`[${r[u]}${r[u].toUpperCase()}]`;continue}}if(n.m){if(r[u]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[u]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[u]==="."){a+=o?`${r[u]}\r
`:`[${r[u]}\r
]`;continue}a+=r[u],r[u]==="\\"?i=!0:o&&r[u]==="]"?o=!1:!o&&r[u]==="["&&(o=!0)}try{const u=new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return a};function gi(s,e){var n,r,a,i;if(e.target==="openApi3"&&((n=s.keyType)==null?void 0:n._def.typeName)===m.ZodEnum)return{type:"object",required:s.keyType._def.values,properties:s.keyType._def.values.reduce((o,l)=>({...o,[l]:B(s.valueType._def,{...e,currentPath:[...e.currentPath,"properties",l]})??{}}),{}),additionalProperties:!1};const t={type:"object",additionalProperties:B(s.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return t;if(((r=s.keyType)==null?void 0:r._def.typeName)===m.ZodString&&((a=s.keyType._def.checks)!=null&&a.length)){const o=Object.entries(pi(s.keyType._def,e)).reduce((l,[c,u])=>c==="type"?l:{...l,[c]:u},{});return{...t,propertyNames:o}}else if(((i=s.keyType)==null?void 0:i._def.typeName)===m.ZodEnum)return{...t,propertyNames:{enum:s.keyType._def.values}};return t}function cc(s,e){if(e.mapStrategy==="record")return gi(s,e);const t=B(s.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=B(s.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,n],minItems:2,maxItems:2}}}function uc(s){const e=s.values,n=Object.keys(s.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),r=Array.from(new Set(n.map(a=>typeof a)));return{type:r.length===1?r[0]==="string"?"string":"number":["string","number"],enum:n}}function dc(){return{not:{}}}function fc(s){return s.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Mn={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function hc(s,e){if(e.target==="openApi3")return Br(s,e);const t=s.options instanceof Map?Array.from(s.options.values()):s.options;if(t.every(n=>n._def.typeName in Mn&&(!n._def.checks||!n._def.checks.length))){const n=t.reduce((r,a)=>{const i=Mn[a._def.typeName];return i&&!r.includes(i)?[...r,i]:r},[]);return{type:n.length>1?n:n[0]}}else if(t.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){const n=t.reduce((r,a)=>{const i=typeof a._def.value;switch(i){case"string":case"number":case"boolean":return[...r,i];case"bigint":return[...r,"integer"];case"object":if(a._def.value===null)return[...r,"null"];case"symbol":case"undefined":case"function":default:return r}},[]);if(n.length===t.length){const r=n.filter((a,i,o)=>o.indexOf(a)===i);return{type:r.length>1?r:r[0],enum:t.reduce((a,i)=>a.includes(i._def.value)?a:[...a,i._def.value],[])}}}else if(t.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((n,r)=>[...n,...r._def.values.filter(a=>!n.includes(a))],[])};return Br(s,e)}const Br=(s,e)=>{const t=(s.options instanceof Map?Array.from(s.options.values()):s.options).map((n,r)=>B(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${r}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return t.length?{anyOf:t}:void 0};function mc(s,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(s.innerType._def.typeName)&&(!s.innerType._def.checks||!s.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:Mn[s.innerType._def.typeName],nullable:!0}:{type:[Mn[s.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const n=B(s.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}const t=B(s.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function pc(s,e){const t={type:"number"};if(!s.checks)return t;for(const n of s.checks)switch(n.kind){case"int":t.type="integer",si(t,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?V(t,"minimum",n.value,n.message,e):V(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),V(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?V(t,"maximum",n.value,n.message,e):V(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),V(t,"maximum",n.value,n.message,e));break;case"multipleOf":V(t,"multipleOf",n.value,n.message,e);break}return t}function gc(s,e){return e.removeAdditionalStrategy==="strict"?s.catchall._def.typeName==="ZodNever"?s.unknownKeys!=="strict":B(s.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:s.catchall._def.typeName==="ZodNever"?s.unknownKeys==="passthrough":B(s.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function yc(s,e){const t={type:"object",...Object.entries(s.shape()).reduce((n,[r,a])=>{if(a===void 0||a._def===void 0)return n;const i=B(a._def,{...e,currentPath:[...e.currentPath,"properties",r],propertyPath:[...e.currentPath,"properties",r]});return i===void 0?n:{properties:{...n.properties,[r]:i},required:a.isOptional()&&!e.openaiStrictMode?n.required:[...n.required,r]}},{properties:{},required:[]}),additionalProperties:gc(s,e)};return t.required.length||delete t.required,t}const _c=(s,e)=>{var n;if(e.currentPath.toString()===((n=e.propertyPath)==null?void 0:n.toString()))return B(s.innerType._def,e);const t=B(s.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:{}},t]}:{}},bc=(s,e)=>{if(e.pipeStrategy==="input")return B(s.in._def,e);if(e.pipeStrategy==="output")return B(s.out._def,e);const t=B(s.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=B(s.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,n].filter(r=>r!==void 0)}};function xc(s,e){return B(s.type._def,e)}function vc(s,e){const n={type:"array",uniqueItems:!0,items:B(s.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return s.minSize&&V(n,"minItems",s.minSize.value,s.minSize.message,e),s.maxSize&&V(n,"maxItems",s.maxSize.value,s.maxSize.message,e),n}function wc(s,e){return s.rest?{type:"array",minItems:s.items.length,items:s.items.map((t,n)=>B(t._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((t,n)=>n===void 0?t:[...t,n],[]),additionalItems:B(s.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:s.items.length,maxItems:s.items.length,items:s.items.map((t,n)=>B(t._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((t,n)=>n===void 0?t:[...t,n],[])}}function kc(){return{not:{}}}function Sc(){return{}}const Ac=(s,e)=>B(s.innerType._def,e);function B(s,e,t=!1){var i;const n=e.seen.get(s);if(e.override){const o=(i=e.override)==null?void 0:i.call(e,s,e,n,t);if(o!==Fo)return o}if(n&&!t){const o=Cc(n,e);if(o!==void 0)return"$ref"in o&&e.seenRefs.add(o.$ref),o}const r={def:s,path:e.currentPath,jsonSchema:void 0};e.seen.set(s,r);const a=Rc(s,s.typeName,e,t);return a&&Tc(s,e,a),r.jsonSchema=a,a}const Cc=(s,e)=>{switch(e.$refStrategy){case"root":return{$ref:s.path.join("/")};case"extract-to-root":const t=s.path.slice(e.basePath.length+1).join("_");return t!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[t]=s.def),{$ref:[...e.basePath,e.definitionPath,t].join("/")};case"relative":return{$ref:Pc(e.currentPath,s.path)};case"none":case"seen":return s.path.length<e.currentPath.length&&s.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},Pc=(s,e)=>{let t=0;for(;t<s.length&&t<e.length&&s[t]===e[t];t++);return[(s.length-t).toString(),...e.slice(t)].join("/")},Rc=(s,e,t,n)=>{switch(e){case m.ZodString:return pi(s,t);case m.ZodNumber:return pc(s,t);case m.ZodObject:return yc(s,t);case m.ZodBigInt:return Kl(s,t);case m.ZodBoolean:return Ql();case m.ZodDate:return mi(s,t);case m.ZodUndefined:return kc();case m.ZodNull:return fc(t);case m.ZodArray:return Xl(s,t);case m.ZodUnion:case m.ZodDiscriminatedUnion:return hc(s,t);case m.ZodIntersection:return ic(s,t);case m.ZodTuple:return wc(s,t);case m.ZodRecord:return gi(s,t);case m.ZodLiteral:return oc(s,t);case m.ZodEnum:return rc(s);case m.ZodNativeEnum:return uc(s);case m.ZodNullable:return mc(s,t);case m.ZodOptional:return _c(s,t);case m.ZodMap:return cc(s,t);case m.ZodSet:return vc(s,t);case m.ZodLazy:return B(s.getter()._def,t);case m.ZodPromise:return xc(s,t);case m.ZodNaN:case m.ZodNever:return dc();case m.ZodEffects:return sc(s,t,n);case m.ZodAny:return Hl();case m.ZodUnknown:return Sc();case m.ZodDefault:return nc(s,t);case m.ZodBranded:return Yl(s,t);case m.ZodReadonly:return Ac(s,t);case m.ZodCatch:return ec(s,t);case m.ZodPipeline:return bc(s,t);case m.ZodFunction:case m.ZodVoid:case m.ZodSymbol:return;default:return(r=>{})()}},Tc=(s,e,t)=>(s.description&&(t.description=s.description,e.markdownDescription&&(t.markdownDescription=s.description)),t),Ec=(s,e)=>{const t=Do(e),n=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,r=B(s._def,n===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,n]},!1)??{},a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(r.title=a);const i=(()=>{if(Lo(t.definitions))return;const l={},c=new Set;for(let u=0;u<500;u++){const f=Object.entries(t.definitions).filter(([g])=>!c.has(g));if(f.length===0)break;for(const[g,_]of f)l[g]=B(Ss(_),{...t,currentPath:[...t.basePath,t.definitionPath,g]},!0)??{},c.add(g)}return l})(),o=n===void 0?i?{...r,[t.definitionPath]:i}:r:t.nameStrategy==="duplicate-ref"?{...r,...i||t.seenRefs.size?{[t.definitionPath]:{...i,...t.seenRefs.size?{[n]:r}:void 0}}:void 0}:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,n].join("/"),[t.definitionPath]:{...i,[n]:r}};return t.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":t.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};function Ic(s,e){return Ec(s,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function Nc(s,e,t){return go({type:"json_schema",json_schema:{...t,name:e,strict:!0,schema:Ic(s,{name:e})}},n=>s.parse(JSON.parse(n)))}const Oc=j.enum(["English","Hindi","Malayalam","Tamil","Telugu","Kannada","Arabic","Urdu","Samskritham","Polish","German","Gujarati","Chinese","Any/NA"]),$c=j.enum(["Male","Female","Both"]),jc=j.enum(["Offline","Online","Action","Art","Dance","Literacy","Music","Off Stage","On Stage","Oral","Others","Special","Written"]),Mc=j.enum(["Marks","Count","Rating out of 10","Range out of 10"]),Fc=j.enum(["Individual","Team"]),yi=j.enum(["Individual","Team","Any"]),Zc=j.enum(["First","Second","Third"]),Lc=j.object({RankTitle:Zc,ParticipantTypeTitle:yi,GroupGroupName:j.string().describe("Must be a valid group name as same as in the AgeBasedGroup, its only need if need some custom grade points for a group").optional(),CompetitionItemTitle:j.string().describe("Must be a valid competition name as same as in the CompetitionItems, its only need if need some custom grade points for a competition").optional(),Points:j.number().describe("Must be a valid number, if no points then keep 5 points for first, 3 points for second and 1 point for third")}),Dc=j.object({ParticipantTypeTitle:yi,GroupGroupName:j.string().describe("Must be a valid group name as same as in the AgeBasedGroup, its only need if need some custom grade points for a group").optional(),CompetitionItemTitle:j.string().describe("Must be a valid competition name as same as in the CompetitionItems, its only need if need some custom grade points for a competition").optional(),GradeName:j.string().describe("Must be a valid grade name like A, B, C, etc"),Points:j.number().describe("Must be a valid number, if no points then keep 5 points for A, 3 points for B and 1 point for C"),Value:j.number().describe("Must be a valid number, it represents how much score is need out of 10 to get this grade, if no grade then keep 6 for A, 5 for B and 4 for C")}),Bc=j.object({GroupName:j.string().describe("Must be the name of a age group or keep it as All Groups"),AgeFrom:j.number().describe("Must be a valid age or if no age group then keep it as 0").optional(),AgeTo:j.number().describe("Must be a valid age or if no age group then keep it as 100").optional()}),Uc=j.object({Title:j.string().describe("Must be a valid competition name like Dance, Singing, etc"),CategoryCategoryName:jc,ScoreLabelLabel:Mc}),Vc=j.object({ParticipantTypeTitle:Fc,GroupGroupName:j.string().describe("Must be a valid group name as same as in the AgeBasedGroup"),CompetitionItemTitle:j.string().describe("Must be a valid competition name as same as in the CompetitionItems"),LanguageLanguageName:Oc,GenderGenderTitle:$c,Remarks:j.string().nullable().optional().describe("Any remarks,rules or description, prize informations about the competition, and all other informations mentioned in the document should be added here related to this competition"),MaximumScore:j.number().optional(),MaximumCandidates:j.number().optional(),Fees:j.number().optional(),MaximumMinutes:j.number().optional(),MaximumSeconds:j.number().optional(),MinimumMinutes:j.number().optional(),MinimumSeconds:j.number().optional()}),zc=j.object({competitionsAssignedToGroup:j.array(Vc),competitionItems:j.array(Uc),ageWiseGroups:j.array(Bc),ranks:j.array(Lc),grades:j.array(Dc)});let Wc=document.getElementById("OpenAIKey").value;const Gc=new N({apiKey:Wc,dangerouslyAllowBrowser:!0});let Jc=`Generate competitions from the image.
Always try to translate the image text to English and generate the values.
Always try to keep generated values are exact as in the images.
Always try to find all competitions matching for all groups from the image.
Rules:
1. If there is seperate competitions based on gender, then create seperate rows in competitionStructureModel and add specific GenderName.
2. If there is seperate competitions based on language, then create seperate competitions and add LanguageName instead of using Any/NA.
3. On generate ranks and grades, if there a rank or grade not specifically mentioned for a particular group or competition, then keep value empty.
4. If there is no specific grades or ranks, mentioned then the arrays can be empty.
5 Dont assign any competitions or groups to ranks if there is no specific ranks for a group or competition. keep it as Any/NA.
`;const qc=async(s,e,t)=>{if(!(s!=null&&s.length)){alert("Please upload an image");return}try{let n=s.map(i=>({type:"image_url",image_url:{url:i.webUrl}}));const r=await Gc.beta.chat.completions.parse({model:"gpt-4o-2024-08-06",messages:[{role:"system",content:[{type:"text",text:Jc}]},{role:"user",content:[{type:"text",text:t},...n]}],response_format:Nc(zc,"allCompetitionsModel")});try{const i=r.choices[0].message.parsed;e(i)}catch(i){console.error("Error:",i);const o=r.choices[0].message.content;(o==null?void 0:o.length)>1&&o.indexOf("{")>=0&&e(JSON.parse(o))}const a=r.choices[0].message.parsed;e(a)}catch(n){console.error("Error:",n)}},_n=({heading:s,items:e,isLoading:t,columns:n})=>d.jsx(d.Fragment,{children:(e==null?void 0:e.length)>0&&d.jsxs("div",{className:"px-2 sm:px-4 lg:px-6 relative",children:[t&&d.jsx(Ts,{}),d.jsx("div",{className:"sm:flex sm:items-center",children:d.jsx("h1",{className:"text-sm font-semibold leading-6 text-gray-900",children:s})}),d.jsx("div",{className:"mt-4 flow-root",children:d.jsx("div",{className:"-mx-2 -my-1 overflow-x-auto sm:-mx-4 lg:-mx-6",children:d.jsx("div",{className:"inline-block min-w-full py-1 align-middle sm:px-4 lg:px-6",children:d.jsx("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsx("tr",{children:n.map(r=>d.jsx("th",{scope:"col",className:"py-2 pl-2 pr-1 text-left text-xs font-semibold text-gray-900 sm:pl-4",children:r.label},r.field))})}),d.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:e==null?void 0:e.map(r=>d.jsx("tr",{className:"divide-x divide-gray-200",children:n.map(a=>d.jsx("td",{className:"whitespace-nowrap px-1 py-2 text-xs text-gray-500",children:r[a.field]},a.field))},r.GroupName))})]})})})})})]})});function mu(){var U,I,O;const[s,e]=le.useState(localStorage.getItem("aiPrompt")||""),[t,n]=le.useState([]),[r,a]=le.useState(!1),[i,o]=le.useState(!1),[l,c]=le.useState([]),{control:u,getValues:f,setValue:g,formState:{errors:_}}=wi();let A=f();le.useEffect(()=>{let x=sessionStorage.getItem("competitionsGroups");x&&n(JSON.parse(x));let $=sessionStorage.getItem("images");$&&g("fileUploads",JSON.parse($));let T=sessionStorage.getItem("selectedCheckboxes");T&&c(JSON.parse(T))},[]);const k=async x=>{var $;($=x.competitionsAssignedToGroup)==null||$.forEach(T=>{T.Id||(T.Id=Qn())}),n(x),sessionStorage.setItem("competitionsGroups",JSON.stringify(x)),o(!1)},S=()=>{o(!0);const x=f("fileUploads");qc(x,k,s)},q=async()=>{if(o(!0),l.length>0){let x=t.competitionsAssignedToGroup.filter(T=>l.includes(T.Id)),$={...t,competitionsAssignedToGroup:x};await Si("/SetUpJson/InstallEventSettingsItems",$),$t.success("Competitions have been successfully installed"),setTimeout(()=>{window.top.location.href="/CompetitionStructure/Tab"},2e3),o(!1)}else $t.error("Please select at least one competition"),o(!1)},b=(x,$)=>{let T={...x,GenderGenderTitle:"Male",Id:Qn()},Z={...x,GenderGenderTitle:"Female",Id:Qn()},H=t.competitionsAssignedToGroup.slice(0,$),Y=t.competitionsAssignedToGroup.slice($+1);t.competitionsAssignedToGroup=[...H,T,Z,...Y],k({...t})},L=()=>{const x=t.competitionsAssignedToGroup.map($=>$.Id);c(r?[]:x),a(!r),sessionStorage.setItem("selectedCheckboxes",JSON.stringify(l))},R=x=>{l.includes(x)?c(l.filter($=>$.id!==x)):c([...l,x]),sessionStorage.setItem("selectedCheckboxes",JSON.stringify(l))};return d.jsxs("div",{children:[d.jsx("div",{children:d.jsxs("div",{className:"flex justify-center w-full flex-col place-items-center",children:[d.jsx(Ti,{label:"Upload Images Related to the competition",errors:_,control:u,validExtensions:["jpg","png","jpeg"],validExtensionsMimeTypes:["image/jpg","image/png","image/jpeg"],fieldName:"fileUploads",fileUploadUrl:"/uploadJson/UploadCandidateImage",editId:A==null?void 0:A.id,onChangeValidation:x=>{sessionStorage.setItem("images",JSON.stringify(x)),g("fileUploads",x)}}),d.jsxs("div",{className:"mt-4 px-10 flex flex-col w-full",children:[d.jsx("label",{htmlFor:"aiPrompt",className:"block text-sm font-semibold text-gray-700",children:"AI Prompt"}),d.jsx("textarea",{id:"aiPrompt",name:"aiPrompt",value:s,onChange:x=>{e(x.target.value),localStorage.setItem("aiPrompt",x.target.value)},rows:"4",className:"mt-1 min-w-full max-w-full block w-full shadow-sm sm:text-sm focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md",placeholder:"Enter the AI Prompt"})]}),d.jsx("button",{onClick:S,className:"mt-8 w-full max-w-72 rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Get Results"}),d.jsx("a",{href:"https://ilovepdf.com/pdf_to_jpg",target:"_blank",className:"text-sm text-blue-500 mt-2",rel:"noreferrer",children:"Donâ€™t have an Image to test? Click here to convert PDF to Image"})]})}),d.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[d.jsx("div",{className:"mt-8 flow-root",children:d.jsxs("div",{className:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:[d.jsxs("div",{className:"flex flex-row",children:[d.jsx(_n,{heading:"Age Wise Groups",items:t==null?void 0:t.ageWiseGroups,isLoading:i,columns:[{field:"GroupName",label:"Group Name"},{field:"AgeFrom",label:"Age From"},{field:"AgeTo",label:"Age To"}]}),d.jsx(_n,{heading:"Competition Items",items:t==null?void 0:t.competitionItems,isLoading:i,columns:[{field:"Title",label:"Title"},{field:"CategoryCategoryName",label:"Category"},{field:"ScoreLabelLabel",label:"Score By"}]}),d.jsx(_n,{heading:"Ranks",items:t==null?void 0:t.ranks,isLoading:i,columns:[{field:"ParticipantTypeTitle",label:"Participant Type"},{field:"GroupGroupName",label:"Group Name"},{field:"CompetitionItemTitle",label:"Competition Item"},{field:"RankTitle",label:"Rank Title"},{field:"Points",label:"Points"}]}),d.jsx(_n,{heading:"Grades",items:t==null?void 0:t.grades,isLoading:i,columns:[{field:"ParticipantTypeTitle",label:"Participant Type"},{field:"GroupGroupName",label:"Group Name"},{field:"CompetitionItemTitle",label:"Competition Item"},{field:"GradeName",label:"Grade Title"},{field:"Points",label:"Points"}]})]}),d.jsx("div",{className:"sm:flex sm:items-center px-10 mt-10",children:d.jsxs("div",{className:"sm:flex-auto",children:[d.jsx("h1",{className:"text-base font-semibold leading-6 text-gray-900",children:"Generated Competitions"}),d.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"A list of all AI generated competitions."})]})}),d.jsxs("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8 relative",children:[i&&d.jsx(Ts,{}),d.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"divide-x divide-gray-200",children:[d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-sm font-semibold text-gray-900 sm:pl-2",children:d.jsx("input",{id:"selectAll",name:"selectAll",type:"checkbox",checked:r,"aria-describedby":"selectAll-description",className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600",onChange:L})}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Participant Type"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Group Name"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Competition Name"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Language"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Gender"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Split Gender"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Remarks"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Maximum Score"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Maximum Candidates"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Fees"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Maximum Minutes"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Maximum Seconds"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Minimum Minutes"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Minimum Seconds"})]})}),((U=t==null?void 0:t.competitionsAssignedToGroup)==null?void 0:U.length)>0&&d.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:(I=t==null?void 0:t.competitionsAssignedToGroup)==null?void 0:I.map((x,$)=>d.jsxs("tr",{className:"divide-x divide-gray-200",children:[d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:d.jsx("input",{id:`checkbox${x.Id}`,name:`checkbox${x.Id}`,type:"checkbox",checked:l.includes(x.Id),"aria-describedby":`checkbox${$}-description`,className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600",onChange:()=>R(x.Id)})}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.ParticipantTypeTitle}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.GroupGroupName}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.CompetitionItemTitle}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.LanguageLanguageName}),d.jsxs("td",{className:"px-2 py-2 text-xs font-medium text-gray-900 flex justify-center ",children:[x.GenderGenderTitle," "]}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.GenderGenderTitle==="Both"?d.jsx("button",{onClick:()=>{b(x,$)},type:"button",className:"rounded-full bg-indigo-600 p-1 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:d.jsx(Ri,{"aria-hidden":"true",className:"h-5 w-5"})}):null}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.Remarks}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.MaximumScore}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.MaximumCandidates}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.Fees}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.MaximumMinutes}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.MaximumSeconds}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.MinimumMinutes}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.MinimumSeconds})]},x.Id))},(O=t==null?void 0:t.competitionsAssignedToGroup)==null?void 0:O.length)]})]})]})}),d.jsx("div",{className:"flex justify-center w-full flex-col place-items-center",children:d.jsx("button",{onClick:q,className:"mt-8 w-full max-w-72 rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600",children:"Submit"})})]})]})}export{mu as default};
