import{g as T,r as b,p as U,j as o,a as B}from"./mainweb-C6JrJL3J.js";import{R as k}from"./renderRegistrationForm-CqmnWXpt.js";import{p as G}from"./httpService-CeUJHI4W.js";import{F as I,U as O,a as M,S as V}from"./publicRegistrationHelper-Dt_qx8Ws.js";import{B as z}from"./box-65ijrKmm.js";import"./useBackend-Dz_4rZnj.js";import"./useConfirmation-DnFeVHcH.js";import"./utilities-CN4lTu6a.js";import"./renderComponents-PJSiDrXE.js";import"./validationMessage-B3CVAgHr.js";import"./index.esm-C3vRSTnz.js";import"./clsx-B-dksMZM.js";import"./ChevronRightIcon-DAQl4G34.js";import"./manageTeamParticipants-BxBTzrkA.js";import"./formSubmission-DkvHxirO.js";import"./modalForm-C_-GFvgH.js";import"./axios-CCb-kr4I.js";var A={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var g={}.hasOwnProperty;function x(){for(var n=[],h=0;h<arguments.length;h++){var r=arguments[h];if(r){var f=typeof r;if(f==="string"||f==="number")n.push(r);else if(Array.isArray(r)){if(r.length){var l=x.apply(null,r);l&&n.push(l)}}else if(f==="object"){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){n.push(r.toString());continue}for(var v in r)g.call(r,v)&&r[v]&&n.push(v)}}}return n.join(" ")}e.exports?(x.default=x,e.exports=x):window.classNames=x})()})(A);var _=A.exports;const m=T(_);let q=({selectedParticipantDetails:e,participantType:g,setAllowEdit:x,setOpen:n,setFilter:h})=>{var j,i,S,N,a,p,y,R,C;const[r,f]=b.useState(!1),[l,v]=b.useState(""),[d,t]=b.useState("Pending"),J=(s,u)=>{t(u),f(!0)},E=()=>{var s;if(t(d),l.trim()){v(""),f(!1);let u=U((s=e==null?void 0:e.user)==null?void 0:s.JsonSettings);u||(u={}),u.ApprovalStatus=d,u.ReviewComments||(u.ReviewComments=[]),u.ReviewComments.push({Comment:l,Status:d,Date:new Date().toISOString()}),d==="Reviewed"&&(u.FinishedSteps=!1);let F={ParticipantType:g,UserRoleId:e.user.Candidate,TeamId:e.user.Team,JsonSettings:JSON.stringify(u)};G("/UsersRolesJson/Approve",F).then(H=>{B.success("Review submitted successfully and emailed to the user."),x(!1),n(!1),h(!0)})}else alert("Please add a comment before submitting.")};let w=[];if((j=e==null?void 0:e.user)!=null&&j.JsonSettings){let s=U((i=e==null?void 0:e.user)==null?void 0:i.JsonSettings);s!=null&&s.ReviewComments&&(w=s==null?void 0:s.ReviewComments)}return o.jsxs("div",{className:"border-b border-gray-200 pb-5 bg-white flex flex-1 flex-col pr-10",children:[o.jsxs("div",{className:"sm:flex sm:items-baseline sm:justify-between",children:[o.jsxs("div",{className:"sm:w-0 sm:flex-1",children:[((S=e==null?void 0:e.user)==null?void 0:S.UserName)&&o.jsxs(o.Fragment,{children:[o.jsx("h1",{id:"message-heading",className:"text-base font-semibold text-gray-900",children:(N=e==null?void 0:e.user)==null?void 0:N.UserName}),o.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(a=e==null?void 0:e.user)==null?void 0:a.Email}),o.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(p=e==null?void 0:e.user)==null?void 0:p.UserMobile}),o.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(y=e==null?void 0:e.user)==null?void 0:y.UserDobString})]}),((R=e==null?void 0:e.user)==null?void 0:R.TeamTeamName)&&o.jsx(o.Fragment,{children:o.jsx("h1",{id:"message-heading",className:"text-base font-semibold text-gray-900",children:(C=e==null?void 0:e.user)==null?void 0:C.TeamTeamName})}),o.jsxs("button",{className:"inline-flex items-center gap-x-1.5 px-10 rounded-md bg-blue-600 mt-5  py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600",onClick:()=>x(!0),children:[o.jsx(I,{className:"h-5 w-5 inline-block -mt-0.5 mr-0 "}),"Edit"]})]}),o.jsxs("div",{className:"mt-4 flex flex-col space-y-4",children:[o.jsx(O,{person:e==null?void 0:e.user}),o.jsx(M,{onClick:J,person:e==null?void 0:e.user})]})]}),o.jsxs("div",{children:[o.jsx("div",{children:w.map((s,u)=>o.jsx("div",{className:"mt-2 flex flex-col relative",children:o.jsx("div",{className:m("border-l-4 p-4",(s==null?void 0:s.Status)==="Reviewed"?"border-yellow-400 bg-yellow-50":(s==null?void 0:s.Status)==="Approved"?"border-green-400 bg-green-50":"border-red-400 bg-red-50"),children:o.jsx("div",{className:"flex",children:o.jsxs("div",{className:"ml-3 flex-1",children:[o.jsx("h4",{className:m("text-lg font-bold",(s==null?void 0:s.Status)==="Reviewed"?"text-yellow-700":(s==null?void 0:s.Status)==="Approved"?"text-green-700":"text-red-700"),children:s==null?void 0:s.Status}),o.jsx("p",{className:m("text-sm",(s==null?void 0:s.Status)==="Reviewed"?"text-yellow-700":(s==null?void 0:s.Status)==="Approved"?"text-green-700":"text-red-700"),children:(s==null?void 0:s.Comment)??s}),o.jsx("p",{className:m("font-medium text-right",(s==null?void 0:s.Status)==="Reviewed"?"text-yellow-700":(s==null?void 0:s.Status)==="Approved"?"text-green-700":"text-red-700"),children:s==null?void 0:s.Date})]})})})},u))}),r&&o.jsx("div",{className:"mt-2 flex flex-col relative",children:o.jsxs(z,{heading:"Please enter the reason for change status to "+d,childrenClasses:"flex flex-col mt-4 relative",children:[o.jsxs("div",{className:"rounded-lg bg-white outline outline-1 -outline-offset-1 outline-gray-300 focus-within:outline focus-within:outline-2 focus-within:-outline-offset-2 focus-within:outline-indigo-600",children:[o.jsx("label",{htmlFor:"comment",className:"sr-only",children:"Add your comment..."}),o.jsx("textarea",{id:"comment",name:"comment",rows:3,placeholder:"Add your comment..., The comment will be sent to the user via email.",className:"block w-full rounded-lg resize-none bg-transparent px-3 py-1.5 text-base text-gray-900 placeholder:text-gray-400 focus:outline focus:outline-0 sm:text-sm/6",defaultValue:"",value:l,onChange:s=>v(s.target.value)})]}),o.jsxs("div",{className:"absolute inset-x-0 bottom-0 flex justify-between py-2 pl-3 pr-2",children:[o.jsx("div",{className:"flex items-center space-x-5"}),o.jsx("div",{className:"shrink-0",children:o.jsx(V,{onClick:E,currentReviewStatus:d})})]})]})})]})]})};function ns({participantType:e,candidateId:g,onClickReview:x,setFilter:n,selectedParticipantDetails:h,setOpen:r}){let[f,l]=b.useState(!1);return o.jsx(k,{view:"participationDetails",getEvets:"/EventJson/Get",allowEdit:f,getUserRoles:"/UsersRolesPlusUsersJson/Get",getTeams:"/CompetitionParticipantsTeamsJson/Get",getUsers:"/UsersRolesPlusUsersJson/Get",customComponents:o.jsx(q,{participantType:e,selectedParticipantDetails:h,setFilter:n,setOpen:r,setAllowEdit:l}),getParticipants:"/CoordinatorJson/GetParticipants",closeModel:()=>{r(!1)},participantTypeInt:e,candidateId:g,setActiveTab:()=>{}})}export{ns as default};
