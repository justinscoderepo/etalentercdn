import{r as o,d as Se,p,j as t,L as be,g as we,_ as je}from"./mainweb-CyT4_DCY.js";import{B as se}from"./box-DLH01Mh2.js";import{M as Ce}from"./modalForm-5bwaZjsS.js";import{F as Ne}from"./formSubmission-BZ4Wp0tm.js";import{u as D,i as ye}from"./useBackend-DeM8wbzk.js";import{r as Re,e as Je,g as Te,a as Ue,u as Ae,F as Ee,U as ce,b as Fe,S as Be}from"./publicRegistrationHelper-DwhQUHKV.js";import{R as Le}from"./renderRegistrationForm-BZprBBdT.js";import{p as Oe}from"./httpService-o7fg2Wgi.js";import"./utilities-CN4lTu6a.js";import"./dialog-DZTZ9oI4.js";import"./manageTeamParticipants-D1HKRKEY.js";import"./index.esm-CRF5AhAB.js";import"./renderComponents-DlVXM2oP.js";import"./validationMessage-7YvkxHvH.js";import"./clsx-B-dksMZM.js";import"./CheckIcon-BWFZV_O5.js";import"./index-BtuGy7By.js";import"./useConfirmation-1hJWNC0P.js";import"./TrashIcon-Dmv3rAkN.js";function Ge({title:s,titleId:x,...n},i){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":x},n),s?o.createElement("title",{id:x},s):null,o.createElement("path",{fillRule:"evenodd",d:"M7.875 1.5C6.839 1.5 6 2.34 6 3.375v2.99c-.426.053-.851.11-1.274.174-1.454.218-2.476 1.483-2.476 2.917v6.294a3 3 0 0 0 3 3h.27l-.155 1.705A1.875 1.875 0 0 0 7.232 22.5h9.536a1.875 1.875 0 0 0 1.867-2.045l-.155-1.705h.27a3 3 0 0 0 3-3V9.456c0-1.434-1.022-2.7-2.476-2.917A48.716 48.716 0 0 0 18 6.366V3.375c0-1.036-.84-1.875-1.875-1.875h-8.25ZM16.5 6.205v-2.83A.375.375 0 0 0 16.125 3h-8.25a.375.375 0 0 0-.375.375v2.83a49.353 49.353 0 0 1 9 0Zm-.217 8.265c.178.018.317.16.333.337l.526 5.784a.375.375 0 0 1-.374.409H7.232a.375.375 0 0 1-.374-.409l.526-5.784a.373.373 0 0 1 .333-.337 41.741 41.741 0 0 1 8.566 0Zm.967-3.97a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H18a.75.75 0 0 1-.75-.75V10.5ZM15 9.75a.75.75 0 0 0-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 0 .75-.75V10.5a.75.75 0 0 0-.75-.75H15Z",clipRule:"evenodd"}))}const Ie=o.forwardRef(Ge);function ee({view:s,setActiveTab:x,getEvets:n,isCoordinatorView:i,setParticipantTypeInt:v,getParticipants:r,participantTypeInt:u,candidateId:d,closeModel:m,customComponents:b,allowEdit:f}){var Q,W,X,Y,K,P;let{user:h}=Se();h==null||h.RoleTitle,((Q=h==null?void 0:h.Email)==null?void 0:Q.indexOf("justnshalom"))!=-1;let[S,_]=o.useState(null),[w,B]=o.useState({}),[g,L]=o.useState(null),[y,O]=o.useState(!1),[U,G]=o.useState(null),[N,I]=o.useState([]),[e,a]=o.useState(u==1?"Individual":u==2?"Team":""),[k,re]=o.useState([...Re]);const{row:A,status:oe}=D(n||"/CandidateJson/GetEvents",{select:"AllowDisplayCompetitionOrder,Description,EVId,EndDateString,EventCategory,EventCategoryTitle,EventLogo,EventName,IdentityBackgroundImage,OrganizationLogo,OrganizationName,OrganizationShortName,StartDateString,Venue,JsonSettings",doCache:!0});let ne="finished",ae="finished",le="finished",{row:V,status:ie}=D(r||"/CandidateJson/GetParticipants",{deleteUrl:"/CandidateJson/RemoveUser",mandatoryParams:["participantType"],select:"participantList,userList,UserEmail,UserName,UserDobString,UserImage,UserMobile,UserPhone,Email,Group,Candidate,CandidateUser,JsonSettings,Gender,GroupName,Fees,TeamTeamName,Team,TeamStrength,TeamMembersList,TeamMembers,TeamStrength,CandidateIdentityNumber,TeamIdentityNumber,CompetitionOrder,CreatedBy,CreatedByUserName,ParticipationId,UserJsonSettings,TeamJsonSettings,Remarks,LevelSettings,RegistrationId",updateUrl:"/CandidateJson/UpdateParticipant",doCache:!0,filter:d?{Candidate:d,...u==1?{participantType:"1"}:u==2?{participantType:"2"}:{}}:{}}),ue=Je(V,d,S==null?void 0:S.UId,g==null?void 0:g.Team),{userRole:E,users:c,userData:R,teamData:J}=ue;if(S=S||R,g=g||J,c!=null&&c.length||(W=p(localStorage.user))==null||W.user,e=="Team"){let l=(X=p(localStorage.user))==null?void 0:X.user;l&&((Y=l==null?void 0:l.Email)==null?void 0:Y.indexOf("justnshalom"))==-1}y=ye(oe,ne,ae,le,ie)||y;let q=p(E==null?void 0:E.JsonSettings),de=p(R==null?void 0:R.JsonSettings),me=p(J==null?void 0:J.TeamJsonSettings);const M=A==null?void 0:A.JsonSettings,j=(M!=null&&M!=""?p(M):{components:{}}).components,H=Object.keys(j??{});let fe=p(w==null?void 0:w.JsonSettings),Z=(H==null?void 0:H.includes("Agreement"))&&((P=(K=j==null?void 0:j.Agreement)==null?void 0:K.filter(l=>{var C;return((C=l==null?void 0:l.validate)==null?void 0:C.required)&&!q[l.name]&&!fe[l.name]}))==null?void 0:P.length)==0;Z&&localStorage.setItem("isAgreementStepFilled","true"),localStorage.getItem("isAgreementStepFilled")=="true"&&(Z=!0);let $=Te(j,k,Z,e,c,{},s),T={},xe=!0,he=()=>{m&&m()};if(d&&!V)return t.jsx(be,{});let z=[];return $.forEach((l,C)=>{C%2===0&&z.push($.slice(C,C+2))}),console.log({splitBy2:z}),t.jsx("div",{children:t.jsx(Ce,{title:"Registration Form",description:"Please fill the form to register for the event",open:!0,customHeading:b||null,setOpen:()=>{he()},children:t.jsx(se,{heading:"",outerClasses:"relative w-full",headingClasses:"px-1 lg:px-4 print:hidden w-full",children:t.jsx("div",{className:"w-full mt-5 min-h-[1800px]  print:mt-0 flex flex-col",id:"registrationBox",children:z.map((l,C)=>t.jsx("div",{className:"flex w-full ",children:l.map((ge,pe)=>{T=ge,N=Ue(j,T);let ve=T?Ae(T.name,{},()=>{},()=>{},T,E,q,R,de,e,J,V,j,S,g,me,!1,w):{};return t.jsx("div",{className:"flex-1",children:t.jsx(Ne,{isCoordinatorView:i,participantType:e,isGuardianRegistration:!1,handleNext:()=>{},isSubmitted:xe,eventDetails:A,isPlayGround:!1,onChange:()=>{},data:ve,isLastStep:!1,existingComponents:N,selectedComponent:U,setSelectedComponent:()=>{},components:N,setComponents:()=>{}},pe)})})}))})})})})}var te={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(s){(function(){var x={}.hasOwnProperty;function n(){for(var i=[],v=0;v<arguments.length;v++){var r=arguments[v];if(r){var u=typeof r;if(u==="string"||u==="number")i.push(r);else if(Array.isArray(r)){if(r.length){var d=n.apply(null,r);d&&i.push(d)}}else if(u==="object"){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){i.push(r.toString());continue}for(var m in r)x.call(r,m)&&r[m]&&i.push(m)}}}return i.join(" ")}s.exports?(n.default=n,s.exports=n):window.classNames=n})()})(te);var ke=te.exports;const F=we(ke);let Ve=({selectedParticipantDetails:s,participantType:x,setAllowEdit:n,setOpen:i,setFilter:v,setPrint:r})=>{var B,g,L,y,O,U,G,N,I;const[u,d]=o.useState(!1),[m,b]=o.useState(""),[f,h]=o.useState("Pending"),S=(e,a)=>{h(a),d(!0)},_=()=>{var e;if(h(f),m.trim()){b(""),d(!1);let a=p((e=s==null?void 0:s.user)==null?void 0:e.JsonSettings);a||(a={}),a.ApprovalStatus=f,a.ReviewComments||(a.ReviewComments=[]),a.ReviewComments.push({Comment:m,Status:f,Date:new Date().toISOString()}),f==="Reviewed"&&(a.FinishedSteps=!1),f==="Approved"&&(a.FinishedSteps=!0);let k={ParticipantType:x,UserRoleId:s.user.Candidate,TeamId:s.user.Team,JsonSettings:JSON.stringify(a)};Oe("/UsersRolesJson/Approve",k).then(re=>{je.success("Review submitted successfully and emailed to the user."),n(!1),i(!1),v(!0)})}else alert("Please add a comment before submitting.")};let w=[];if((B=s==null?void 0:s.user)!=null&&B.JsonSettings){let e=p((g=s==null?void 0:s.user)==null?void 0:g.JsonSettings);e!=null&&e.ReviewComments&&(w=e==null?void 0:e.ReviewComments)}return t.jsxs("div",{className:"border-b border-gray-200 pb-5 bg-white flex flex-1 flex-col pr-10",children:[t.jsxs("div",{className:"sm:flex sm:items-baseline sm:justify-between",children:[t.jsxs("div",{className:"sm:w-0 sm:flex-1",children:[((L=s==null?void 0:s.user)==null?void 0:L.UserName)&&t.jsxs(t.Fragment,{children:[t.jsx("h1",{id:"message-heading",className:"text-base font-semibold text-gray-900",children:(y=s==null?void 0:s.user)==null?void 0:y.UserName}),t.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(O=s==null?void 0:s.user)==null?void 0:O.Email}),t.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(U=s==null?void 0:s.user)==null?void 0:U.UserMobile}),t.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(G=s==null?void 0:s.user)==null?void 0:G.UserDobString})]}),((N=s==null?void 0:s.user)==null?void 0:N.TeamTeamName)&&t.jsx(t.Fragment,{children:t.jsx("h1",{id:"message-heading",className:"text-base font-semibold text-gray-900",children:(I=s==null?void 0:s.user)==null?void 0:I.TeamTeamName})}),t.jsxs("button",{className:"inline-flex items-center print:hidden gap-x-1.5 px-10 rounded-md bg-blue-600 mt-5  py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600",onClick:()=>n(!0),children:[t.jsx(Ee,{className:"h-5 w-5 inline-block -mt-0.5 mr-0 "}),"Edit"]}),t.jsx("button",{onClick:()=>{r(!0)},className:"bg-darkprimary text-white px-10  ml-2 py-1.5 rounded-md print:hidden",children:t.jsx(Ie,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"mt-4 flex flex-col space-y-4 print:hidden",children:[t.jsx(ce,{person:s==null?void 0:s.user}),t.jsx(Fe,{onClick:S,person:s==null?void 0:s.user})]})]}),t.jsxs("div",{children:[t.jsx("div",{children:w.map((e,a)=>t.jsx("div",{className:"mt-2 flex flex-col relative",children:t.jsx("div",{className:F("border-l-4 p-4",(e==null?void 0:e.Status)==="Reviewed"?"border-yellow-400 bg-yellow-50":(e==null?void 0:e.Status)==="Approved"?"border-green-400 bg-green-50":"border-red-400 bg-red-50"),children:t.jsx("div",{className:"flex",children:t.jsxs("div",{className:"ml-3 flex-1",children:[t.jsx("h4",{className:F("text-lg font-bold",(e==null?void 0:e.Status)==="Reviewed"?"text-yellow-700":(e==null?void 0:e.Status)==="Approved"?"text-green-700":"text-red-700"),children:e==null?void 0:e.Status}),t.jsx("p",{className:F("text-sm",(e==null?void 0:e.Status)==="Reviewed"?"text-yellow-700":(e==null?void 0:e.Status)==="Approved"?"text-green-700":"text-red-700"),children:(e==null?void 0:e.Comment)??e}),t.jsx("p",{className:F("font-medium text-right",(e==null?void 0:e.Status)==="Reviewed"?"text-yellow-700":(e==null?void 0:e.Status)==="Approved"?"text-green-700":"text-red-700"),children:e==null?void 0:e.Date})]})})})},a))}),u&&t.jsx("div",{className:"mt-2 flex flex-col relative",children:t.jsxs(se,{heading:"Please enter the reason for change status to "+f,childrenClasses:"flex flex-col mt-4 relative",children:[t.jsxs("div",{className:"rounded-lg bg-white outline outline-1 -outline-offset-1 outline-gray-300 focus-within:outline focus-within:outline-2 focus-within:-outline-offset-2 focus-within:outline-indigo-600",children:[t.jsx("label",{htmlFor:"comment",className:"sr-only",children:"Add your comment..."}),t.jsx("textarea",{id:"comment",name:"comment",rows:3,placeholder:"Add your comment..., The comment will be sent to the user via email.",className:"block w-full rounded-lg resize-none bg-transparent px-3 py-1.5 text-base text-gray-900 placeholder:text-gray-400 focus:outline focus:outline-0 sm:text-sm/6",defaultValue:"",value:m,onChange:e=>b(e.target.value)})]}),t.jsxs("div",{className:"absolute inset-x-0 bottom-0 flex justify-between py-2 pl-3 pr-2",children:[t.jsx("div",{className:"flex items-center space-x-5"}),t.jsx("div",{className:"shrink-0",children:t.jsx(Be,{onClick:_,currentReviewStatus:f})})]})]})})]})]})};function ls({participantType:s,candidateId:x,isCoordinatorView:n,setFilter:i,selectedParticipantDetails:v,setOpen:r}){let[u,d]=o.useState(!1),[m,b]=o.useState(!1),f=m?ee:Le;return f=ee,t.jsx(f,{isCoordinatorView:!0,view:"participationDetails",getEvets:"/EventJson/Get",allowEdit:u,getUserRoles:"/UsersRolesPlusUsersJson/Get",getTeams:"/CompetitionParticipantsTeamsJson/Get",getUsers:"/UsersRolesPlusUsersJson/Get",customComponents:t.jsx(Ve,{setPrint:()=>{b(!0),setTimeout(()=>{window.print()},1e3)},participantType:s,selectedParticipantDetails:v,setFilter:i,setOpen:r,setAllowEdit:d}),getParticipants:"/CoordinatorJson/GetParticipants",closeModel:()=>{r(!1)},participantTypeInt:s,candidateId:x,setActiveTab:()=>{}})}export{ls as default};
