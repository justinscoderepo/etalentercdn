import{w as j,r as b,u as y,j as e,p as h,z as n,h as E}from"./main-CNSscFU3.js";import{O as P}from"./OldNewTabLayout-DAKerMOg.js";import{L as V}from"./layoutOuter-CjHNv3Q-.js";import{P as R}from"./pageHeader-BviPmS2t.js";import{u as N}from"./index.esm-BvGQvdKl.js";import{F as v}from"./PlusIcon-BC8dHdWY.js";import{F as S}from"./PencilIcon-CStVnGH1.js";import{F as w}from"./TrashIcon-DIfb6sVU.js";import{F as G}from"./TrophyIcon-BOAjOZem.js";import{d as g}from"./tabs-Dh3uZe1v.js";import"./navigationUtils-COqUZJOE.js";import"./use-resolve-button-type-DB-OXl8Z.js";import"./keyboard-yLUdGW0D.js";import"./use-is-mounted-Bjvfjb9Z.js";import"./hidden-76fBYmbG.js";function I(){const{eventDetails:d}=j(),[l,t]=b.useState(null),[i,r]=b.useState(!1),{rows:a=[],status:m,refetch:c}=y("/SetupJson/KeepScore",{filter:`EventCategory=${d?.EventCategoryId||0}&ScoreType=Rank`,select:"EventGradeId,RankTitle,BonusPoints,ParticipantType,Group,CompetitionItem,EventCategory"}),{register:u,handleSubmit:f,reset:x,formState:{errors:s}}=N(),p=async o=>{try{await h("/SetupJson/KeepScore",{...o,EventCategory:d?.EventCategoryId,ScoreType:"Rank"}),n.success("Rank saved successfully"),c(),x(),r(!1),t(null)}catch{n.error("Failed to save rank")}},C=async o=>{if(confirm("Are you sure you want to delete this rank?"))try{await h("/SetupJson/Remove",{EventGradeId:o}),n.success("Rank deleted successfully"),c()}catch{n.error("Failed to delete rank")}};return m==="loading"?e.jsx("div",{className:"text-center py-8",children:"Loading ranks..."}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-base font-medium text-onSurface",children:"Rank Management"}),e.jsxs("button",{onClick:()=>r(!i),className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover",children:[e.jsx(v,{className:"h-4 w-4"}),"New Rank"]})]}),i&&e.jsxs("div",{className:"bg-contentBgOuter p-4 rounded-lg border border-border shadow-sm mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-onSurface mb-4",children:"Add New Rank"}),e.jsxs("form",{onSubmit:f(p),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-onSurface mb-1",children:"Rank Title *"}),e.jsx("input",{type:"text",...u("RankTitle",{required:!0}),className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"E.g., First Place"}),s.RankTitle&&e.jsx("span",{className:"text-xs text-red-600",children:"This field is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-onSurface mb-1",children:"Bonus Points"}),e.jsx("input",{type:"number",...u("BonusPoints"),className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"E.g., 10"})]})]}),e.jsxs("div",{className:"flex justify-end gap-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{r(!1),x()},className:"inline-flex items-center gap-x-2 rounded-md bg-surfaceVariant px-4 py-2 text-sm font-semibold text-onSurfaceVariant shadow-sm hover:bg-surfaceCard",children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover",children:"Save Rank"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:a.length===0?e.jsx("div",{className:"text-center py-8 bg-surfaceCard rounded-lg border border-border",children:e.jsx("p",{className:"text-sm text-onSurfaceVariant",children:"No ranks configured yet. Add your first rank above."})}):a.map(o=>e.jsx("div",{className:"bg-contentBgOuter p-4 rounded-lg border border-border shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-onSurface",children:o.RankTitle}),o.BonusPoints&&e.jsxs("p",{className:"text-xs text-onSurfaceVariant mt-1",children:["Bonus Points: ",e.jsx("span",{className:"font-medium",children:o.BonusPoints})]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("button",{onClick:()=>t(o.EventGradeId),className:"p-1.5 text-primary hover:bg-primary/10 rounded-md",title:"Edit",children:e.jsx(S,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>C(o.EventGradeId),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(w,{className:"h-4 w-4"})})]})]})},o.EventGradeId))})]})}function F(){const{eventDetails:d}=j(),[l,t]=b.useState(!1),{rows:i=[],refetch:r}=y("/SetupJson/KeepScore",{filter:`EventCategory=${d?.EventCategoryId||0}&ScoreType=Grade`,select:"EventGradeId,GradeName,Value,BonusPoints,EventCategory"}),{register:a,handleSubmit:m,reset:c,formState:{errors:u}}=N(),f=async s=>{try{await h("/SetupJson/KeepScore",{...s,EventCategory:d?.EventCategoryId,ScoreType:"Grade"}),n.success("Grade saved successfully"),r(),c(),t(!1)}catch{n.error("Failed to save grade")}},x=async s=>{if(confirm("Are you sure you want to delete this grade?"))try{await h("/SetupJson/Remove",{EventGradeId:s}),n.success("Grade deleted successfully"),r()}catch{n.error("Failed to delete grade")}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-base font-medium text-onSurface",children:"Grade Management"}),e.jsxs("button",{onClick:()=>t(!l),className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover",children:[e.jsx(v,{className:"h-4 w-4"}),"New Grade"]})]}),l&&e.jsxs("div",{className:"bg-contentBgOuter p-4 rounded-lg border border-border shadow-sm mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-onSurface mb-4",children:"Add New Grade"}),e.jsxs("form",{onSubmit:m(f),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-onSurface mb-1",children:"Grade Name *"}),e.jsx("input",{type:"text",...a("GradeName",{required:!0}),className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"E.g., A+"}),u.GradeName&&e.jsx("span",{className:"text-xs text-red-600",children:"This field is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-onSurface mb-1",children:"Value/Percentage"}),e.jsx("input",{type:"number",step:"0.01",...a("Value"),className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"E.g., 95"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-onSurface mb-1",children:"Bonus Points"}),e.jsx("input",{type:"number",...a("BonusPoints"),className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"E.g., 5"})]})]}),e.jsxs("div",{className:"flex justify-end gap-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{t(!1),c()},className:"inline-flex items-center gap-x-2 rounded-md bg-surfaceVariant px-4 py-2 text-sm font-semibold text-onSurfaceVariant shadow-sm hover:bg-surfaceCard",children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover",children:"Save Grade"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.length===0?e.jsx("div",{className:"col-span-full text-center py-8 bg-surfaceCard rounded-lg border border-border",children:e.jsx("p",{className:"text-sm text-onSurfaceVariant",children:"No grades configured yet. Add your first grade above."})}):i.map(s=>e.jsxs("div",{className:"bg-contentBgOuter p-4 rounded-lg border border-border shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"text-base font-medium text-onSurface",children:s.GradeName}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("button",{className:"p-1.5 text-primary hover:bg-primary/10 rounded-md",title:"Edit",children:e.jsx(S,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>x(s.EventGradeId),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(w,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-1",children:[s.Value&&e.jsxs("p",{className:"text-xs text-onSurfaceVariant",children:["Value: ",e.jsxs("span",{className:"font-medium",children:[s.Value,"%"]})]}),s.BonusPoints&&e.jsxs("p",{className:"text-xs text-onSurfaceVariant",children:["Bonus: ",e.jsxs("span",{className:"font-medium",children:[s.BonusPoints," pts"]})]})]})]},s.EventGradeId))})]})}function B(){const{eventDetails:d}=j(),[l,t]=b.useState(!1),{rows:i=[],refetch:r}=y("/SetupJson/GetJudgesPointDetails",{filter:`EventCategory=${d?.EventCategoryId||0}`,select:"JudgesPointId,CriteriaName,MaximumPoints,CompetitionItem,EventCategory"}),{register:a,handleSubmit:m,reset:c,formState:{errors:u}}=N(),f=async s=>{try{await h("/SetupJson/KeepJudgesPointDetails",{...s,EventCategory:d?.EventCategoryId}),n.success("Criteria saved successfully"),r(),c(),t(!1)}catch{n.error("Failed to save criteria")}},x=async s=>{if(confirm("Are you sure you want to delete this criteria?"))try{await h("/SetupJson/RemoveJudgesPointDetails",{JudgesPointId:s}),n.success("Criteria deleted successfully"),r()}catch{n.error("Failed to delete criteria")}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-base font-medium text-onSurface",children:"Judges Rating Criteria"}),e.jsxs("button",{onClick:()=>t(!l),className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover",children:[e.jsx(v,{className:"h-4 w-4"}),"New Criteria"]})]}),l&&e.jsxs("div",{className:"bg-contentBgOuter p-4 rounded-lg border border-border shadow-sm mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-onSurface mb-4",children:"Add New Rating Criteria"}),e.jsxs("form",{onSubmit:m(f),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-onSurface mb-1",children:"Criteria Name *"}),e.jsx("input",{type:"text",...a("CriteriaName",{required:!0}),className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"E.g., Technical Skill"}),u.CriteriaName&&e.jsx("span",{className:"text-xs text-red-600",children:"This field is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-onSurface mb-1",children:"Maximum Points *"}),e.jsx("input",{type:"number",...a("MaximumPoints",{required:!0}),className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"E.g., 10"}),u.MaximumPoints&&e.jsx("span",{className:"text-xs text-red-600",children:"This field is required"})]})]}),e.jsxs("div",{className:"flex justify-end gap-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{t(!1),c()},className:"inline-flex items-center gap-x-2 rounded-md bg-surfaceVariant px-4 py-2 text-sm font-semibold text-onSurfaceVariant shadow-sm hover:bg-surfaceCard",children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover",children:"Save Criteria"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.length===0?e.jsx("div",{className:"col-span-full text-center py-8 bg-surfaceCard rounded-lg border border-border",children:e.jsx("p",{className:"text-sm text-onSurfaceVariant",children:"No judging criteria configured yet. Add your first criteria above."})}):i.map(s=>e.jsx("div",{className:"bg-contentBgOuter p-4 rounded-lg border border-border shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-onSurface",children:s.CriteriaName}),e.jsxs("p",{className:"text-xs text-onSurfaceVariant mt-1",children:["Maximum Points: ",e.jsx("span",{className:"font-medium",children:s.MaximumPoints})]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("button",{className:"p-1.5 text-primary hover:bg-primary/10 rounded-md",title:"Edit",children:e.jsx(S,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>x(s.JudgesPointId),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(w,{className:"h-4 w-4"})})]})]})},s.JudgesPointId))})]})}function X(){const[d,l]=b.useState(0),t=[{title:"New React View",active:!0},{title:"Old View",path:"/SetUp/ScoreSettings"}],i=[{name:"Rank",component:I},{name:"Grade",component:F},{name:"Judges Rating Criteria",component:B}];return e.jsx(P,{tabs:t,children:e.jsx(V,{children:e.jsxs("div",{className:"flex flex-col grow",children:[e.jsx(R,{heading:"Score Settings",subHeading:"Configure ranking, grading, and judging criteria for competitions",rightChildren:e.jsxs("div",{className:"flex items-center gap-x-2 text-gray-600",children:[e.jsx(G,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Scoring Configuration"})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs(g.Group,{selectedIndex:d,onChange:l,children:[e.jsx(g.List,{className:"flex space-x-1 rounded-xl bg-surfaceVariant p-1 mb-4",children:i.map((r,a)=>e.jsx(g,{className:({selected:m})=>E("w-full rounded-lg py-2.5 text-sm font-medium leading-5","ring-white ring-opacity-60 ring-offset-2 ring-offset-primary focus:outline-none focus:ring-2",m?"bg-white shadow text-primary":"text-gray-700 hover:bg-white/[0.12] hover:text-gray-900"),children:r.name},r.name))}),e.jsx(g.Panels,{children:i.map((r,a)=>e.jsx(g.Panel,{children:e.jsx(r.component,{})},a))})]})})]})})})}export{X as default};
