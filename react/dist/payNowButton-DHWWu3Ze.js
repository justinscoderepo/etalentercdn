import{r as a,j as e,_ as v}from"./mainweb-BW4Oeajf.js";import{c as E}from"./utilities-CN4lTu6a.js";import{V as H}from"./validationMessage-DwQWrdU3.js";import{F as P}from"./CheckCircleIcon-CG9WnSF6.js";import{F as M}from"./ExclamationTriangleIcon-DrPNENB_.js";function O({title:t,titleId:s,...l},i){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},l),t?a.createElement("title",{id:s},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const C=a.forwardRef(O),R=[{name:"PayPal",imageOnly:!1,icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-8 h-8 text-blue-600",children:e.jsx("path",{d:"M7.5 4.5c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h3.375l-.375 1.5H7.5c-.621 0-1.125.504-1.125 1.125S6.879 21 7.5 21h2.25l1.5-6h2.625c3.75 0 6-1.875 6-5.625 0-2.25-1.125-4.5-4.5-4.5H7.5zm0 1.5h7.125c2.25 0 3 .75 3 2.625 0 2.25-1.125 3-3.75 3H10.5l-.75 3H9l1.125-4.5H7.5c-.621 0-1.125-.504-1.125-1.125V5.625c0-.621.504-1.125 1.125-1.125z"})})},{name:"Stripe",imageOnly:!1,icon:e.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded text-white flex items-center justify-center font-bold text-sm",children:"S"})},{name:"Razorpay",imageOnly:!1,icon:e.jsx("div",{className:"w-8 h-8 bg-blue-800 rounded text-white flex items-center justify-center font-bold text-sm",children:"R"})},{name:"Paytm",imageOnly:!1,icon:e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded text-white flex items-center justify-center font-bold text-sm",children:"P"})},{name:"RoyalXpay",imageOnly:!0,imageUrl:"https://royalxpay.com/assets_frontend/images/RoyalXpay-whitewithtransparent.png",icon:e.jsx("div",{className:"bg-gray-800 px-4 pb-2 rounded",children:e.jsx("img",{src:"https://royalxpay.com/assets_frontend/images/RoyalXpay-whitewithtransparent.png",alt:"RoyalXpay",className:"w-full  h-10 object-contain"})})}],G=({gateway:t})=>{const s=R.find(l=>l.name===t);return s?s.icon:e.jsx(C,{className:"w-8 h-8 text-primary"})},A=({label:t,errors:s,register:l,formData:i,isPlayGround:p,onChangeValue:w,disabled:d,readOnly:y,optional:g,component:r})=>{console.log("PayNowButton props:",{label:t,errors:s,formData:i,isPlayGround:p,disabled:d,readOnly:y,optional:g,component:r});const n="paymentCompleted",[b,h]=a.useState(!1),c=r?.paymentGateway||"PayPal",o=r?.merchantId||"",x=r?.apiKey||"";r?.secretKey,r?.webhookUrl;let k=s?.[n],[F,f]=a.useState(k);a.useEffect(()=>{f(s?.[n])},[s?.[n]]);const I=async()=>{if(!(d||y)){h(!0);try{console.log("Payment Gateway:",c),console.log("Merchant ID:",o),console.log("API Key:",x),setTimeout(()=>{w&&w(n,!0),h(!1),f(""),v.success("Payment completed successfully!")},2e3)}catch(u){console.error("Payment failed:",u),h(!1),f("Payment failed. Please try again."),v.error("Payment failed. Please try again.")}}},m=i?.[n]===!0,j=d||y||b||!o||!x,N=R.find(u=>u.name===c)?.imageOnly||!1;return e.jsxs("div",{className:"sm:col-span-4 mb-4",children:[e.jsxs("div",{className:"block text-sm font-semibold leading-6 text-gray-900 mb-2",children:[t||"Payment Gateway",!g&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:"checkbox",...l(n,{required:!g}),checked:m,onChange:()=>{},className:"hidden"}),e.jsxs("div",{className:"mb-4 p-4 border border-gray-300 rounded-lg bg-gray-50",children:[e.jsxs("div",{className:`flex items-center mb-2 ${N?"justify-center":""}`,children:[e.jsx(G,{gateway:c}),!N&&e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:c})]}),o&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Merchant ID: ",o.replace(/.(?=.{4})/g,"*")]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{type:"button",onClick:I,disabled:j,className:E("inline-flex items-center justify-center gap-x-2 rounded-md px-6 py-2.5 text-sm font-semibold shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",m?"bg-green-600 text-white hover:bg-green-700 focus-visible:outline-green-600":j?"bg-gray-200 text-gray-700 cursor-not-allowed":"bg-primary text-white hover:bg-primaryHover focus-visible:outline-primary"),children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Processing..."]}):m?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"h-5 w-5"}),"Payment Completed"]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-5 w-5"}),"Pay Now"]})}),(!o||!x)&&!p&&e.jsxs("div",{className:"text-sm text-amber-600 bg-amber-50 p-2 rounded border border-amber-200",children:[e.jsx(M,{className:"h-4 w-4 inline mr-1"}),"Payment gateway not configured properly. Please configure in properties panel."]}),m&&e.jsxs("div",{className:"text-sm text-green-600 bg-green-50 p-2 rounded border border-green-200",children:[e.jsx(P,{className:"h-4 w-4 inline mr-1"}),"Payment has been completed successfully."]})]}),F&&e.jsx(H,{message:"Please complete the payment to proceed."})]})};export{A as default};
