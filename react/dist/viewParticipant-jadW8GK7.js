import{r as o,d as je,p as v,j as e,L as oe,g as Ne,_ as Ce}from"./mainweb-BRKLKJMh.js";import{B as ne}from"./box-CR0Lv_6d.js";import{M as ye}from"./modalForm-Cda4j6qg.js";import{F as Re}from"./formSubmission-CImmVYvd.js";import{u as re,i as Je}from"./useBackend-6yayV1Kw.js";import{r as ce,e as Te,g as Ue,a as Ae,u as Ee,F as Fe,U as Le,b as Be,S as Oe}from"./publicRegistrationHelper-DWQdn9Jw.js";import{R as Ge}from"./renderRegistrationForm-BPXWT1HE.js";import{p as Ie}from"./httpService-CBJKDQxX.js";import"./utilities-CN4lTu6a.js";import"./dialog-BTuHuBJv.js";import"./manageTeamParticipants-DKQlJ8_Y.js";import"./index.esm-CTyTwZBy.js";import"./renderComponents-Dex1a-uh.js";import"./validationMessage-CbEK-AIC.js";import"./clsx-B-dksMZM.js";import"./CheckIcon-Ciw7m5u-.js";import"./index-BtuGy7By.js";import"./useConfirmation-X-9k1u8j.js";import"./TrashIcon-oIqyrwHi.js";function ke({title:s,titleId:g,...i},u){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":g},i),s?o.createElement("title",{id:g},s):null,o.createElement("path",{fillRule:"evenodd",d:"M7.875 1.5C6.839 1.5 6 2.34 6 3.375v2.99c-.426.053-.851.11-1.274.174-1.454.218-2.476 1.483-2.476 2.917v6.294a3 3 0 0 0 3 3h.27l-.155 1.705A1.875 1.875 0 0 0 7.232 22.5h9.536a1.875 1.875 0 0 0 1.867-2.045l-.155-1.705h.27a3 3 0 0 0 3-3V9.456c0-1.434-1.022-2.7-2.476-2.917A48.716 48.716 0 0 0 18 6.366V3.375c0-1.036-.84-1.875-1.875-1.875h-8.25ZM16.5 6.205v-2.83A.375.375 0 0 0 16.125 3h-8.25a.375.375 0 0 0-.375.375v2.83a49.353 49.353 0 0 1 9 0Zm-.217 8.265c.178.018.317.16.333.337l.526 5.784a.375.375 0 0 1-.374.409H7.232a.375.375 0 0 1-.374-.409l.526-5.784a.373.373 0 0 1 .333-.337 41.741 41.741 0 0 1 8.566 0Zm.967-3.97a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H18a.75.75 0 0 1-.75-.75V10.5ZM15 9.75a.75.75 0 0 0-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 0 .75-.75V10.5a.75.75 0 0 0-.75-.75H15Z",clipRule:"evenodd"}))}const Me=o.forwardRef(ke);function Ve({view:s,setActiveTab:g,getEvets:i,isCoordinatorView:u,setParticipantTypeInt:h,getParticipants:r,participantTypeInt:n,candidateId:m,closeModel:f,customComponents:p,allowEdit:R}){var K,P,D,ee,se,te;let{user:a}=je();a==null||a.RoleTitle,((K=a==null?void 0:a.Email)==null?void 0:K.indexOf("justnshalom"))!=-1;let[x,$]=o.useState(null),[N,G]=o.useState({}),[S,I]=o.useState(null),[J,k]=o.useState(!1),[F,M]=o.useState(null),[C,V]=o.useState([]),[w,t]=o.useState(n==1?"Individual":n==2?"Team":""),[l,Q]=o.useState([...ce]);const{row:c,status:ie}=re(i||"/CandidateJson/GetEvents",{select:"AllowDisplayCompetitionOrder,Description,EVId,EndDateString,EventCategory,EventCategoryTitle,EventLogo,EventName,IdentityBackgroundImage,OrganizationLogo,OrganizationName,OrganizationShortName,StartDateString,Venue,JsonSettings",doCache:!0});let le="finished",ue="finished",de="finished",{row:H,status:me}=re(r||"/CandidateJson/GetParticipants",{deleteUrl:"/CandidateJson/RemoveUser",mandatoryParams:["participantType"],select:"participantList,userList,UserEmail,UserName,UserDobString,UserImage,UserMobile,UserPhone,Email,Group,Candidate,CandidateUser,JsonSettings,Gender,GroupName,Fees,TeamTeamName,Team,TeamStrength,TeamMembersList,TeamMembers,TeamStrength,CandidateIdentityNumber,TeamIdentityNumber,CompetitionOrder,CreatedBy,CreatedByUserName,ParticipationId,UserJsonSettings,TeamJsonSettings,Remarks,LevelSettings,RegistrationId",updateUrl:"/CandidateJson/UpdateParticipant",doCache:!0,filter:m?{Candidate:m,...n==1?{participantType:"1"}:n==2?{participantType:"2"}:{}}:{}}),fe=Te(H,m,x==null?void 0:x.UId,S==null?void 0:S.Team),{userRole:L,users:B,userData:T,teamData:U}=fe;if(x=x||T,S=S||U,B!=null&&B.length||(P=v(localStorage.user))==null||P.user,w=="Team"){let d=(D=v(localStorage.user))==null?void 0:D.user;d&&((ee=d==null?void 0:d.Email)==null?void 0:ee.indexOf("justnshalom"))==-1}J=Je(ie,le,ue,de,me)||J;let W=v(L==null?void 0:L.JsonSettings),xe=v(T==null?void 0:T.JsonSettings),he=v(U==null?void 0:U.TeamJsonSettings);const Z=c==null?void 0:c.JsonSettings,b=(Z!=null&&Z!=""?v(Z):{components:{}}).components,z=Object.keys(b??{});let ge=v(N==null?void 0:N.JsonSettings),_=(z==null?void 0:z.includes("Agreement"))&&((te=(se=b==null?void 0:b.Agreement)==null?void 0:se.filter(d=>{var q;return((q=d==null?void 0:d.validate)==null?void 0:q.required)&&!W[d.name]&&!ge[d.name]}))==null?void 0:te.length)==0;_&&localStorage.setItem("isAgreementStepFilled","true"),localStorage.getItem("isAgreementStepFilled")=="true"&&(_=!0);let j=Ue(b,l,_,w,B,{},s),A={},pe=!0,Se=()=>{f&&f()};if(m&&!H)return e.jsx(oe,{});let y=[],X=[];X.push(j[0]),y.push(X);let E=[];j.length>1&&E.push(j[1]),y.push(E),E=[],j.length>2&&E.push(j[2]),y.push(E);let Y=[];return j.length>3&&Y.push(j[3]),y.push(Y),console.log({splitBy2:y}),e.jsx("div",{children:e.jsx(ye,{title:"Registration Form",description:"Please fill the form to register for the event",open:!0,customHeading:p||null,setOpen:()=>{Se()},children:e.jsx(ne,{heading:"",outerClasses:"relative w-full",headingClasses:"px-1 lg:px-4 print:hidden w-full",children:e.jsx("div",{className:"w-full mt-5 min-h-[600px] print:mt-0 flex flex-col",id:"registrationBox",children:y.map((d,q)=>e.jsx("div",{className:"flex w-full flex-1 gap-x-8",children:d.map((ve,we)=>{A=ve,C=Ae(b,A);let be=A?Ee(A.name,{},()=>{},()=>{},A,L,W,T,xe,w,U,H,b,x,S,he,!1,N):{};return e.jsx("div",{className:"flex-1",children:e.jsx(Re,{isPrint:!0,isCoordinatorView:u,participantType:w,isGuardianRegistration:!1,handleNext:()=>{},isSubmitted:pe,eventDetails:c,isPlayGround:!1,onChange:()=>{},data:be,isLastStep:!1,existingComponents:C,selectedComponent:F,setSelectedComponent:()=>{},components:C,setComponents:()=>{}},we)})})}))})})})})}var ae={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(s){(function(){var g={}.hasOwnProperty;function i(){for(var u=[],h=0;h<arguments.length;h++){var r=arguments[h];if(r){var n=typeof r;if(n==="string"||n==="number")u.push(r);else if(Array.isArray(r)){if(r.length){var m=i.apply(null,r);m&&u.push(m)}}else if(n==="object"){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){u.push(r.toString());continue}for(var f in r)g.call(r,f)&&r[f]&&u.push(f)}}}return u.join(" ")}s.exports?(i.default=i,s.exports=i):window.classNames=i})()})(ae);var He=ae.exports;const O=Ne(He);let Ze=({selectedParticipantDetails:s,participantType:g,setAllowEdit:i,setOpen:u,setFilter:h,setPrint:r,eventDetails:n})=>{var S,I,J,k,F,M,C,V,w;const[m,f]=o.useState(!1),[p,R]=o.useState(""),[a,x]=o.useState("Pending"),$=(t,l)=>{x(l),f(!0)},N=()=>{var t;if(x(a),p.trim()){R(""),f(!1);let l=v((t=s==null?void 0:s.user)==null?void 0:t.JsonSettings);l||(l={}),l.ApprovalStatus=a,l.ReviewComments||(l.ReviewComments=[]),l.ReviewComments.push({Comment:p,Status:a,Date:new Date().toISOString()}),a==="Reviewed"&&(l.FinishedSteps=!1),a==="Approved"&&(l.FinishedSteps=!0);let Q={ParticipantType:g,UserRoleId:s.user.Candidate,TeamId:s.user.Team,JsonSettings:JSON.stringify(l)};Ie("/UsersRolesJson/Approve",Q).then(c=>{Ce.success("Review submitted successfully and emailed to the user."),i(!1),u(!1),h(!0)})}else alert("Please add a comment before submitting.")};let G=[];if((S=s==null?void 0:s.user)!=null&&S.JsonSettings){let t=v((I=s==null?void 0:s.user)==null?void 0:I.JsonSettings);t!=null&&t.ReviewComments&&(G=t==null?void 0:t.ReviewComments)}return e.jsxs("div",{className:"border-b border-gray-200 pb-5 bg-white flex flex-1 flex-col pr-10 print:pr-0",children:[e.jsxs("div",{className:"sm:flex flex-row sm:justify-between",children:[e.jsxs("div",{className:"sm:flex-1 gap-x-10",children:[((J=s==null?void 0:s.user)==null?void 0:J.UserName)&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{id:"message-heading",className:"text-base font-semibold text-gray-900",children:(k=s==null?void 0:s.user)==null?void 0:k.UserName}),e.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(F=s==null?void 0:s.user)==null?void 0:F.Email}),e.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(M=s==null?void 0:s.user)==null?void 0:M.UserMobile}),e.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(C=s==null?void 0:s.user)==null?void 0:C.UserDobString})]}),((V=s==null?void 0:s.user)==null?void 0:V.TeamTeamName)&&e.jsx(e.Fragment,{children:e.jsx("h1",{id:"message-heading",className:"text-base font-semibold text-gray-900",children:(w=s==null?void 0:s.user)==null?void 0:w.TeamTeamName})}),e.jsxs("button",{className:"inline-flex items-center print:hidden gap-x-1.5 px-10 rounded-md bg-blue-600 mt-5  py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600",onClick:()=>i(!0),children:[e.jsx(Fe,{className:"h-5 w-5 inline-block -mt-0.5 mr-0 "}),"Edit"]}),e.jsx("button",{onClick:()=>{r(!0)},className:"bg-darkprimary text-white px-10  ml-2 py-1.5 rounded-md print:hidden",children:e.jsx(Me,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"hidden print:flex  max-h-90  flex-col justify-items-end flex-wrap",children:[e.jsx("div",{className:"text-primary text-right",children:n==null?void 0:n.EventName}),e.jsx("div",{className:"justify-end flex",children:e.jsx("img",{src:n==null?void 0:n.EventLogo,alt:"logo",className:"max-h-16 w-auto"})})]}),e.jsxs("div",{className:"mt-4 flex flex-col space-y-4 print:hidden",children:[e.jsx(Le,{person:s==null?void 0:s.user}),e.jsx(Be,{onClick:$,person:s==null?void 0:s.user})]})]}),e.jsxs("div",{className:"print:hidden",children:[e.jsx("div",{children:G.map((t,l)=>e.jsx("div",{className:"mt-2 flex flex-col relative",children:e.jsx("div",{className:O("border-l-4 p-4",(t==null?void 0:t.Status)==="Reviewed"?"border-yellow-400 bg-yellow-50":(t==null?void 0:t.Status)==="Approved"?"border-green-400 bg-green-50":"border-red-400 bg-red-50"),children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h4",{className:O("text-lg font-bold",(t==null?void 0:t.Status)==="Reviewed"?"text-yellow-700":(t==null?void 0:t.Status)==="Approved"?"text-green-700":"text-red-700"),children:t==null?void 0:t.Status}),e.jsx("p",{className:O("text-sm",(t==null?void 0:t.Status)==="Reviewed"?"text-yellow-700":(t==null?void 0:t.Status)==="Approved"?"text-green-700":"text-red-700"),children:(t==null?void 0:t.Comment)??t}),e.jsx("p",{className:O("font-medium text-right",(t==null?void 0:t.Status)==="Reviewed"?"text-yellow-700":(t==null?void 0:t.Status)==="Approved"?"text-green-700":"text-red-700"),children:t==null?void 0:t.Date})]})})})},l))}),m&&e.jsx("div",{className:"mt-2 flex flex-col relative print:hidden",children:e.jsxs(ne,{heading:"Please enter the reason for change status to "+a,childrenClasses:"flex flex-col mt-4 relative",children:[e.jsxs("div",{className:"rounded-lg bg-white outline outline-1 -outline-offset-1 outline-gray-300 focus-within:outline focus-within:outline-2 focus-within:-outline-offset-2 focus-within:outline-indigo-600",children:[e.jsx("label",{htmlFor:"comment",className:"sr-only",children:"Add your comment..."}),e.jsx("textarea",{id:"comment",name:"comment",rows:3,placeholder:"Add your comment..., The comment will be sent to the user via email.",className:"block w-full rounded-lg resize-none bg-transparent px-3 py-1.5 text-base text-gray-900 placeholder:text-gray-400 focus:outline focus:outline-0 sm:text-sm/6",defaultValue:"",value:p,onChange:t=>R(t.target.value)})]}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 flex justify-between py-2 pl-3 pr-2",children:[e.jsx("div",{className:"flex items-center space-x-5"}),e.jsx("div",{className:"shrink-0",children:e.jsx(Oe,{onClick:N,currentReviewStatus:a})})]})]})})]})]})};function ds({participantType:s,candidateId:g,eventDetails:i,setFilter:u,selectedParticipantDetails:h,setOpen:r}){let[n,m]=o.useState(!1),[f,p]=o.useState(!1),[R,a]=o.useState(!1),x=f?Ve:Ge;return e.jsx(x,{isCoordinatorView:!0,view:"participationDetails",getEvets:"/EventJson/Get",allowEdit:n,getUserRoles:"/UsersRolesPlusUsersJson/Get",getTeams:"/CompetitionParticipantsTeamsJson/Get",getUsers:"/UsersRolesPlusUsersJson/Get",customComponents:e.jsxs(e.Fragment,{children:[R&&e.jsx(oe,{}),e.jsx(Ze,{setPrint:()=>{window.parent.document.title="Candiidate Details - "+h.user.UserName+" - "+h.user.UserDobString,p(!0),a(!0),window.onafterprint=()=>{p(!1)},setTimeout(()=>{a(!1)},2e3),setTimeout(()=>{window.print()},3e3)},participantType:s,eventDetails:i,selectedParticipantDetails:h,setFilter:u,setOpen:r,setAllowEdit:m})]}),getParticipants:"/CoordinatorJson/GetParticipants",closeModel:()=>{r(!1)},participantTypeInt:s,candidateId:g,setActiveTab:()=>{}})}export{ds as default};
