import{r as l,j as i,_ as C}from"./mainweb-D5YPUKxt.js";import{u as W}from"./index.esm-CYHtr21n.js";import{a as X}from"./httpService-BZNZpKpd.js";import{R as Y}from"./renderComponents-DxkXmBIH.js";function G({title:o,titleId:a,...f},u){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":a},f),o?l.createElement("title",{id:a},o):null,l.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z",clipRule:"evenodd"}))}const v=l.forwardRef(G);function P({title:o,titleId:a,...f},u){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":a},f),o?l.createElement("title",{id:a},o):null,l.createElement("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z",clipRule:"evenodd"}))}const oe=l.forwardRef(P),ae=({isGuardianRegistration:o,isCoordinatorView:a,participantType:f,isSubmitted:u,disableSaveLater:E,drop:S,data:r,isOver:q,selectedComponent:M,setSelectedComponent:T,components:n,setComponents:ee,handlePropertiesPanelChange:V,removeComponent:Z,isPlayGround:d,eventDetails:k,handleNext:A,isLastStep:D})=>{var N;let{user:m}=X();m==null||m.RoleTitle;let O=((N=m==null?void 0:m.Email)==null?void 0:N.indexOf("justnshalom"))!=-1;console.log({componentsFS:n});const{handleSubmit:B,register:H,unregister:U,control:_,clearErrors:z,reset:y,watch:K,getValues:p,setValue:g,trigger:ie,formState:{errors:L}}=W({defaultValues:{...r}});p();let[c,j]=l.useState({...r});l.useEffect(()=>{r&&(Object.keys(r).forEach(e=>{U(e),g(e,r[e])}),j({...r}))},[r]);const $=e=>{T(e)};let I=n.find(e=>e.name=="name"),J=n.find(e=>e.name=="teamName");const F=async(e,t)=>{if(window.scrollTo({top:0,behavior:"smooth"}),t===!0){if(I&&!["name","dobString"].every(s=>e[s])){C.error("Name and Date of Birth are required fields to save for later");return}if(J&&!["teamName"].every(s=>e[s])){C.error("Team Name is a required field to save for later");return}}await A(e,y,t===!0)},R=(e,t)=>{g(e,t),r&&(r[e]=t),j({...r})};let w=[...n];return c&&(n==null?void 0:n.length)>0&&!d&&(w=w.filter(e=>{var h;let t=(h=e.conditions)==null?void 0:h.filter(b=>b.key);return(t==null?void 0:t.length)>0?!!t.find(s=>{if(s.key){let Q=s.key.charAt(0).toLowerCase()+s.key.slice(1),x=c[s.key]||c[Q];if(x&&(x==null?void 0:x.toString())==s.value)return!0}}):!0})),i.jsx("div",{className:("flex-auto p-2 "+d,""),children:i.jsxs("form",{onSubmit:B(F),children:[i.jsx(Y,{isCoordinatorView:a,participantType:f,handlePropertiesChange:R,handlePropertiesPanelChange:V,formData:c,isPlayGround:d,onChangeValue:R,drop:S,isSubmitted:u,isOver:q,eventDetails:k,components:w,selectedComponent:M,handleSelect:$,register:H,getValues:p,errors:L,control:_,setValue:g,clearErrors:z,reset:y,watch:K,removeComponent:Z}),!d&&!u&&i.jsx("div",{className:"mb-2 w-full flex justify-end px-0",children:o?i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[i.jsx(v,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Register"]}):i.jsxs(i.Fragment,{children:[!O&&!E&&i.jsxs("button",{type:"button",onClick:()=>{F(p(),!0)},className:"inline-flex items-center gap-x-2  rounded-md bg-lime-800 px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-lime-950 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-lime-950 mr-3",children:[i.jsx(v,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Save for Later"]}),D?i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[i.jsx(v,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Submit"]}):i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[i.jsx(v,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Next"]})]})})]})})};export{ae as F,v as a,oe as b};
