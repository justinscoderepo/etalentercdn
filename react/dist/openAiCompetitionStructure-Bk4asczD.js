import{r as oe,j as d,L as ys,n as Et}from"./mainweb-DtXlEdl8.js";import{C as Wa,u as Ga}from"./index.esm-iYP3dv3w.js";import{u as Ja,p as qa}from"./httpService-pcgXm13d.js";import{c as zs}from"./utilities-CN4lTu6a.js";import{V as Ha}from"./validationMessage-Cdtkhy99.js";import{F as Xa}from"./XMarkIcon-BFWgRN2A.js";import{v as Ln}from"./v4-BKT09osN.js";import"./index-BtuGy7By.js";function Ka({title:s,titleId:e,...t},n){return oe.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},t),s?oe.createElement("title",{id:e},s):null,oe.createElement("path",{fillRule:"evenodd",d:"M10.53 3.47a.75.75 0 0 0-1.06 0L6.22 6.72a.75.75 0 0 0 1.06 1.06L10 5.06l2.72 2.72a.75.75 0 1 0 1.06-1.06l-3.25-3.25Zm-4.31 9.81 3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L10 14.94l-2.72-2.72a.75.75 0 0 0-1.06 1.06Z",clipRule:"evenodd"}))}const Qa=oe.forwardRef(Ka);function Ya({optional:s,control:e,fieldName:t,label:n,errors:r,enableCrop:a,onChangeValidation:i,viewOnly:o,aspect:l,disableRequiredsymbol:c,validVideoExtensions:u,validImageExtensions:f,validExtensions:g,rules:_,labelFont:A,fileUploadUrl:k,isImageOptimize:S}){let J=r==null?void 0:r[t],[b,$]=oe.useState(J);const[P,U]=oe.useState(!1);let[N,R]=oe.useState([]);oe.useEffect(()=>{$(r==null?void 0:r[t])},[r==null?void 0:r[t]]);function v(T,M){const q=T.split(","),Q=q[0].match(/:(.*?);/)[1],H=atob(q[1]);let we=H.length;const Yt=new Uint8Array(we);for(;we--;)Yt[we]=H.charCodeAt(we);return new File([Yt],M,{type:Q})}const I=async T=>{var M,q,Q;try{U(!0);let H=await Ja(`${k}`,T);(M=H==null?void 0:H.data)!=null&&M.Results&&(H.data?(N.push({filePath:H.data.Results,webUrl:`${H.data.Results}`}),R(N),i(N)):(Et.error("Failed to upload"),i([{filePath:"",webUrl:""}])),U(!1))}catch(H){Et.error((Q=(q=H==null?void 0:H.response)==null?void 0:q.data)==null?void 0:Q.message),i([{filePath:"",webUrl:""}])}U(!1)};return d.jsx("div",{className:"overflow-hidden min-h-64",children:P?d.jsx(ys,{}):d.jsx("div",{className:"",children:d.jsx("div",{children:d.jsx("div",{className:"",children:!o&&d.jsx(d.Fragment,{children:d.jsxs("div",{className:"my-5",children:[d.jsx("label",{htmlFor:t,className:zs(A||" text-sm text-center block font-medium text-gray-700 mb-1",b?"text-danger":"text-gray-400"),children:n||t}),_&&_.required&&!c?d.jsx("sup",{}):"",d.jsx(Wa,{name:t,control:e,rules:{required:!s},render:({field:T})=>{var M;return d.jsxs("div",{className:zs("flex flex-col p-10 w-full border-0 pt-4 border-b border-transparent bg-gray-100 focus:border-darkprimary focus:ring-0 sm:text-sm",b?"border-danger":"text-gray-200 border-purple-400"),children:[(M=T==null?void 0:T.value)!=null&&M.length?d.jsx(d.Fragment,{children:d.jsx("div",{className:"flex flex-1 w-full relative h-full  space-x-8  grow flex-row items-center rounded-lg tracking-wide overflow-x-scroll",children:T.value.map((q,Q)=>d.jsxs("div",{className:"relative flex flex-shrink-0",children:[d.jsx("img",{src:q.webUrl,alt:`Image ${Q}`,className:"max-h-100 flex w-96 mb-3 mr-3 nonselectable",draggable:!1}),d.jsx("div",{className:"absolute top-0 right-0  pt-2 pr-2 block",children:d.jsxs("button",{type:"button",className:"rounded-md bg-transparent text-shadow text-white hover:text-white focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 bg-lightcharcoal p-2 bg-opacity-90",onClick:()=>{setTimeout(()=>{N=N.filter((H,we)=>we!==Q),R(N),i(N)},100)},children:[d.jsx("span",{className:"sr-only",children:"Close"}),d.jsx(Xa,{className:"h-8 w-8 text-[#c5c5c5]","aria-hidden":"true"})]})})]},Q))})}):d.jsx(d.Fragment,{}),d.jsxs("label",{className:"w-100 relative h-full flex flex-col items-center rounded-lg tracking-wide cursor-pointer ",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-8 h-8 mt-8 text-primary",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z",className:"text-lightcharcoal"}),d.jsx("path",{className:"text-lightcharcoal",strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),d.jsx("span",{className:"mt-2 font-medium leading-normal text-primary mb-8",children:"Upload"}),d.jsx("input",{type:"file",className:"hidden",accept:"image/*",multiple:!0,onChange:async q=>{U(!0);const Q=Array.from(q.target.files);let H=0;if(Q.forEach(yt=>{H+=yt.size}),H/(1024*1024)>10){Et.error("Total file size should be lesser than 10MB."),U(!1);return}const Yt=Q.map(yt=>new Promise((Zn,Us)=>{const He=new FileReader;He.onload=function(en){Zn(en.target.result)},He.readAsDataURL(yt)}));Promise.all(Yt).then(yt=>{yt.forEach((Zn,Us)=>{const He=new FormData,en=Q[Us];let Xe,Ke;const _t=new Image;_t.src=Zn,_t.onload=async function(){if(S===!0){const bt=_t.height,vt=_t.width,tn=document.createElement("canvas"),Ua=tn.getContext("2d");if(bt>300&&vt>300)if(vt<bt){Xe=300;const Dn=vt/Xe;Ke=bt/Dn}else{Ke=300;const Dn=bt/Ke;Xe=vt/Dn}else Ke=bt,Xe=vt;tn.width=Xe,tn.height=Ke,Ua.drawImage(_t,0,0,Xe,Ke);const Va=tn.toDataURL("image/jpeg"),Vs=v(Va,en.name);let za=URL.createObjectURL(Vs);T.onChange([...T.value,za]),He.append("file",Vs)}else He.append("file",en);I(He)}})}),q.target.value=""}})]})]})}}),b&&d.jsx(Ha,{message:"This file is required"})]})})})})})})}let Ws=!1,Nt,gr,yr,Yn,_r,br,vr,xr,wr;function kr(s,e={auto:!1}){if(Ws)throw new Error(`you must \`import 'openai/shims/${s.kind}'\` before importing anything else from openai`);if(Nt)throw new Error(`can't \`import 'openai/shims/${s.kind}'\` after \`import 'openai/shims/${Nt}'\``);Ws=e.auto,Nt=s.kind,gr=s.fetch,s.Request,s.Response,s.Headers,yr=s.FormData,s.Blob,Yn=s.File,_r=s.ReadableStream,br=s.getMultipartRequestOptions,vr=s.getDefaultAgent,xr=s.fileFromPath,wr=s.isFsReadStream}class ei{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function Sr({manuallyImported:s}={}){const e=s?"You may need to use polyfills":"Add one of these imports before your first `import â€¦ from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,n,r,a;try{t=fetch,n=Request,r=Response,a=Headers}catch(i){throw new Error(`this environment is missing the following Web Fetch API type: ${i.message}. ${e}`)}return{kind:"web",fetch:t,Request:n,Response:r,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(i,o)=>({...o,body:new ei(i)}),getDefaultAgent:i=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:i=>!1}}kr(Sr({manuallyImported:!0}));const es="RFC3986",ts={RFC1738:s=>String(s).replace(/%20/g,"+"),RFC3986:s=>String(s)},ti="RFC1738",ni=Array.isArray,ke=(()=>{const s=[];for(let e=0;e<256;++e)s.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return s})(),Bn=1024,si=(s,e,t,n,r)=>{if(s.length===0)return s;let a=s;if(typeof s=="symbol"?a=Symbol.prototype.toString.call(s):typeof s!="string"&&(a=String(s)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let i="";for(let o=0;o<a.length;o+=Bn){const l=a.length>=Bn?a.slice(o,o+Bn):a,c=[];for(let u=0;u<l.length;++u){let f=l.charCodeAt(u);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||r===ti&&(f===40||f===41)){c[c.length]=l.charAt(u);continue}if(f<128){c[c.length]=ke[f];continue}if(f<2048){c[c.length]=ke[192|f>>6]+ke[128|f&63];continue}if(f<55296||f>=57344){c[c.length]=ke[224|f>>12]+ke[128|f>>6&63]+ke[128|f&63];continue}u+=1,f=65536+((f&1023)<<10|l.charCodeAt(u)&1023),c[c.length]=ke[240|f>>18]+ke[128|f>>12&63]+ke[128|f>>6&63]+ke[128|f&63]}i+=c.join("")}return i};function ri(s){return!s||typeof s!="object"?!1:!!(s.constructor&&s.constructor.isBuffer&&s.constructor.isBuffer(s))}function Gs(s,e){if(ni(s)){const t=[];for(let n=0;n<s.length;n+=1)t.push(e(s[n]));return t}return e(s)}const ai=Object.prototype.hasOwnProperty,Ar={brackets(s){return String(s)+"[]"},comma:"comma",indices(s,e){return String(s)+"["+e+"]"},repeat(s){return String(s)}},Se=Array.isArray,ii=Array.prototype.push,Cr=function(s,e){ii.apply(s,Se(e)?e:[e])},oi=Date.prototype.toISOString,K={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:si,encodeValuesOnly:!1,format:es,formatter:ts[es],indices:!1,serializeDate(s){return oi.call(s)},skipNulls:!1,strictNullHandling:!1};function li(s){return typeof s=="string"||typeof s=="number"||typeof s=="boolean"||typeof s=="symbol"||typeof s=="bigint"}const Un={};function Pr(s,e,t,n,r,a,i,o,l,c,u,f,g,_,A,k,S,J){let b=s,$=J,P=0,U=!1;for(;($=$.get(Un))!==void 0&&!U;){const T=$.get(s);if(P+=1,typeof T<"u"){if(T===P)throw new RangeError("Cyclic object value");U=!0}typeof $.get(Un)>"u"&&(P=0)}if(typeof c=="function"?b=c(e,b):b instanceof Date?b=g==null?void 0:g(b):t==="comma"&&Se(b)&&(b=Gs(b,function(T){return T instanceof Date?g==null?void 0:g(T):T})),b===null){if(a)return l&&!k?l(e,K.encoder,S,"key",_):e;b=""}if(li(b)||ri(b)){if(l){const T=k?e:l(e,K.encoder,S,"key",_);return[(A==null?void 0:A(T))+"="+(A==null?void 0:A(l(b,K.encoder,S,"value",_)))]}return[(A==null?void 0:A(e))+"="+(A==null?void 0:A(String(b)))]}const N=[];if(typeof b>"u")return N;let R;if(t==="comma"&&Se(b))k&&l&&(b=Gs(b,l)),R=[{value:b.length>0?b.join(",")||null:void 0}];else if(Se(c))R=c;else{const T=Object.keys(b);R=u?T.sort(u):T}const v=o?String(e).replace(/\./g,"%2E"):String(e),I=n&&Se(b)&&b.length===1?v+"[]":v;if(r&&Se(b)&&b.length===0)return I+"[]";for(let T=0;T<R.length;++T){const M=R[T],q=typeof M=="object"&&typeof M.value<"u"?M.value:b[M];if(i&&q===null)continue;const Q=f&&o?M.replace(/\./g,"%2E"):M,H=Se(b)?typeof t=="function"?t(I,Q):I:I+(f?"."+Q:"["+Q+"]");J.set(s,P);const we=new WeakMap;we.set(Un,J),Cr(N,Pr(q,H,t,n,r,a,i,o,t==="comma"&&k&&Se(b)?null:l,c,u,f,g,_,A,k,S,we))}return N}function ci(s=K){if(typeof s.allowEmptyArrays<"u"&&typeof s.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof s.encodeDotInKeys<"u"&&typeof s.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(s.encoder!==null&&typeof s.encoder<"u"&&typeof s.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=s.charset||K.charset;if(typeof s.charset<"u"&&s.charset!=="utf-8"&&s.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=es;if(typeof s.format<"u"){if(!ai.call(ts,s.format))throw new TypeError("Unknown format option provided.");t=s.format}const n=ts[t];let r=K.filter;(typeof s.filter=="function"||Se(s.filter))&&(r=s.filter);let a;if(s.arrayFormat&&s.arrayFormat in Ar?a=s.arrayFormat:"indices"in s?a=s.indices?"indices":"repeat":a=K.arrayFormat,"commaRoundTrip"in s&&typeof s.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const i=typeof s.allowDots>"u"?s.encodeDotInKeys?!0:K.allowDots:!!s.allowDots;return{addQueryPrefix:typeof s.addQueryPrefix=="boolean"?s.addQueryPrefix:K.addQueryPrefix,allowDots:i,allowEmptyArrays:typeof s.allowEmptyArrays=="boolean"?!!s.allowEmptyArrays:K.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof s.charsetSentinel=="boolean"?s.charsetSentinel:K.charsetSentinel,commaRoundTrip:!!s.commaRoundTrip,delimiter:typeof s.delimiter>"u"?K.delimiter:s.delimiter,encode:typeof s.encode=="boolean"?s.encode:K.encode,encodeDotInKeys:typeof s.encodeDotInKeys=="boolean"?s.encodeDotInKeys:K.encodeDotInKeys,encoder:typeof s.encoder=="function"?s.encoder:K.encoder,encodeValuesOnly:typeof s.encodeValuesOnly=="boolean"?s.encodeValuesOnly:K.encodeValuesOnly,filter:r,format:t,formatter:n,serializeDate:typeof s.serializeDate=="function"?s.serializeDate:K.serializeDate,skipNulls:typeof s.skipNulls=="boolean"?s.skipNulls:K.skipNulls,sort:typeof s.sort=="function"?s.sort:null,strictNullHandling:typeof s.strictNullHandling=="boolean"?s.strictNullHandling:K.strictNullHandling}}function ui(s,e={}){let t=s;const n=ci(e);let r,a;typeof n.filter=="function"?(a=n.filter,t=a("",t)):Se(n.filter)&&(a=n.filter,r=a);const i=[];if(typeof t!="object"||t===null)return"";const o=Ar[n.arrayFormat],l=o==="comma"&&n.commaRoundTrip;r||(r=Object.keys(t)),n.sort&&r.sort(n.sort);const c=new WeakMap;for(let g=0;g<r.length;++g){const _=r[g];n.skipNulls&&t[_]===null||Cr(i,Pr(t[_],_,o,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,c))}const u=i.join(n.delimiter);let f=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),u.length>0?f+u:""}const et="4.86.2";Nt||kr(Sr(),{auto:!0});class F extends Error{}class te extends F{constructor(e,t,n,r){super(`${te.makeMessage(e,t,n)}`),this.status=e,this.headers=r,this.request_id=r==null?void 0:r["x-request-id"],this.error=t;const a=t;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,t,n){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,n,r){if(!e||!r)return new En({message:n,cause:ss(t)});const a=t==null?void 0:t.error;return e===400?new Tr(e,a,n,r):e===401?new Er(e,a,n,r):e===403?new Nr(e,a,n,r):e===404?new Rr(e,a,n,r):e===409?new Ir(e,a,n,r):e===422?new Or(e,a,n,r):e===429?new jr(e,a,n,r):e>=500?new Mr(e,a,n,r):new te(e,a,n,r)}}class ye extends te{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class En extends te{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class _s extends En{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Tr extends te{}class Er extends te{}class Nr extends te{}class Rr extends te{}class Ir extends te{}class Or extends te{}class jr extends te{}class Mr extends te{}class $r extends F{constructor(){super("Could not parse response content as the length limit was reached")}}class Fr extends F{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var nn=function(s,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(s,t):r?r.value=t:e.set(s,t),t},Be=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},ce;class Nn{constructor(){ce.set(this,void 0),this.buffer=new Uint8Array,nn(this,ce,null,"f")}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let n=new Uint8Array(this.buffer.length+t.length);n.set(this.buffer),n.set(t,this.buffer.length),this.buffer=n;const r=[];let a;for(;(a=di(this.buffer,Be(this,ce,"f")))!=null;){if(a.carriage&&Be(this,ce,"f")==null){nn(this,ce,a.index,"f");continue}if(Be(this,ce,"f")!=null&&(a.index!==Be(this,ce,"f")+1||a.carriage)){r.push(this.decodeText(this.buffer.slice(0,Be(this,ce,"f")-1))),this.buffer=this.buffer.slice(Be(this,ce,"f")),nn(this,ce,null,"f");continue}const i=Be(this,ce,"f")!==null?a.preceding-1:a.preceding,o=this.decodeText(this.buffer.slice(0,i));r.push(o),this.buffer=this.buffer.slice(a.index),nn(this,ce,null,"f")}return r}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new F(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new F(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new F("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}ce=new WeakMap;Nn.NEWLINE_CHARS=new Set([`
`,"\r"]);Nn.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function di(s,e){for(let r=e??0;r<s.length;r++){if(s[r]===10)return{preceding:r,index:r+1,carriage:!1};if(s[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function fi(s){for(let n=0;n<s.length-1;n++){if(s[n]===10&&s[n+1]===10||s[n]===13&&s[n+1]===13)return n+2;if(s[n]===13&&s[n+1]===10&&n+3<s.length&&s[n+2]===13&&s[n+3]===10)return n+4}return-1}function Zr(s){if(s[Symbol.asyncIterator])return s;const e=s.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class Ce{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;async function*r(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let a=!1;try{for await(const i of hi(e,t))if(!a){if(i.data.startsWith("[DONE]")){a=!0;continue}if(i.event===null){let o;try{o=JSON.parse(i.data)}catch(l){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),l}if(o&&o.error)throw new te(void 0,o.error,void 0,void 0);yield o}else{let o;try{o=JSON.parse(i.data)}catch(l){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),l}if(i.event=="error")throw new te(void 0,o.error,o.message,void 0);yield{event:i.event,data:o}}}a=!0}catch(i){if(i instanceof Error&&i.name==="AbortError")return;throw i}finally{a||t.abort()}}return new Ce(r,t)}static fromReadableStream(e,t){let n=!1;async function*r(){const i=new Nn,o=Zr(e);for await(const l of o)for(const c of i.decode(l))yield c;for(const l of i.flush())yield l}async function*a(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let i=!1;try{for await(const o of r())i||o&&(yield JSON.parse(o));i=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{i||t.abort()}}return new Ce(a,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=a=>({next:()=>{if(a.length===0){const i=n.next();e.push(i),t.push(i)}return a.shift()}});return[new Ce(()=>r(e),this.controller),new Ce(()=>r(t),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new _r({async start(){t=e[Symbol.asyncIterator]()},async pull(r){try{const{value:a,done:i}=await t.next();if(i)return r.close();const o=n.encode(JSON.stringify(a)+`
`);r.enqueue(o)}catch(a){r.error(a)}},async cancel(){var r;await((r=t.return)==null?void 0:r.call(t))}})}}async function*hi(s,e){if(!s.body)throw e.abort(),new F("Attempted to iterate over a response with no body");const t=new pi,n=new Nn,r=Zr(s.body);for await(const a of mi(r))for(const i of n.decode(a)){const o=t.decode(i);o&&(yield o)}for(const a of n.flush()){const i=t.decode(a);i&&(yield i)}}async function*mi(s){let e=new Uint8Array;for await(const t of s){if(t==null)continue;const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let r=new Uint8Array(e.length+n.length);r.set(e),r.set(n,e.length),e=r;let a;for(;(a=fi(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class pi{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=gi(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function gi(s,e){const t=s.indexOf(e);return t!==-1?[s.substring(0,t),e,s.substring(t+e.length)]:[s,"",""]}const Dr=s=>s!=null&&typeof s=="object"&&typeof s.url=="string"&&typeof s.blob=="function",Lr=s=>s!=null&&typeof s=="object"&&typeof s.name=="string"&&typeof s.lastModified=="number"&&Rn(s),Rn=s=>s!=null&&typeof s=="object"&&typeof s.size=="number"&&typeof s.type=="string"&&typeof s.text=="function"&&typeof s.slice=="function"&&typeof s.arrayBuffer=="function",yi=s=>Lr(s)||Dr(s)||wr(s);async function Br(s,e,t){var r;if(s=await s,Lr(s))return s;if(Dr(s)){const a=await s.blob();e||(e=new URL(s.url).pathname.split(/[\\/]/).pop()??"unknown_file");const i=Rn(a)?[await a.arrayBuffer()]:[a];return new Yn(i,e,t)}const n=await _i(s);if(e||(e=vi(s)??"unknown_file"),!(t!=null&&t.type)){const a=(r=n[0])==null?void 0:r.type;typeof a=="string"&&(t={...t,type:a})}return new Yn(n,e,t)}async function _i(s){var t;let e=[];if(typeof s=="string"||ArrayBuffer.isView(s)||s instanceof ArrayBuffer)e.push(s);else if(Rn(s))e.push(await s.arrayBuffer());else if(xi(s))for await(const n of s)e.push(n);else throw new Error(`Unexpected data type: ${typeof s}; constructor: ${(t=s==null?void 0:s.constructor)==null?void 0:t.name}; props: ${bi(s)}`);return e}function bi(s){return`[${Object.getOwnPropertyNames(s).map(t=>`"${t}"`).join(", ")}]`}function vi(s){var e;return Vn(s.name)||Vn(s.filename)||((e=Vn(s.path))==null?void 0:e.split(/[\\/]/).pop())}const Vn=s=>{if(typeof s=="string")return s;if(typeof Buffer<"u"&&s instanceof Buffer)return String(s)},xi=s=>s!=null&&typeof s=="object"&&typeof s[Symbol.asyncIterator]=="function",Js=s=>s&&typeof s=="object"&&s.body&&s[Symbol.toStringTag]==="MultipartBody",ut=async s=>{const e=await wi(s.body);return br(e,s)},wi=async s=>{const e=new yr;return await Promise.all(Object.entries(s||{}).map(([t,n])=>ns(e,t,n))),e},ns=async(s,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")s.append(e,String(t));else if(yi(t)){const n=await Br(t);s.append(e,n)}else if(Array.isArray(t))await Promise.all(t.map(n=>ns(s,e+"[]",n)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([n,r])=>ns(s,`${e}[${n}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var at={},ki=function(s,e,t,n,r){if(typeof e=="function"?s!==e||!0:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(s,t),t},Si=function(s,e,t,n){if(typeof e=="function"?s!==e||!0:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},sn;async function Ur(s){const{response:e}=s;if(s.options.stream)return it("response",e.status,e.url,e.headers,e.body),s.options.__streamClass?s.options.__streamClass.fromSSEResponse(e,s.controller):Ce.fromSSEResponse(e,s.controller);if(e.status===204)return null;if(s.options.__binaryResponse)return e;const t=e.headers.get("content-type");if((t==null?void 0:t.includes("application/json"))||(t==null?void 0:t.includes("application/vnd.api+json"))){const a=await e.json();return it("response",e.status,e.url,e.headers,a),Vr(a,e)}const r=await e.text();return it("response",e.status,e.url,e.headers,r),r}function Vr(s,e){return!s||typeof s!="object"||Array.isArray(s)?s:Object.defineProperty(s,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class In extends Promise{constructor(e,t=Ur){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new In(this.responsePromise,async t=>Vr(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Ai{constructor({baseURL:e,maxRetries:t=2,timeout:n=6e5,httpAgent:r,fetch:a}){this.baseURL=e,this.maxRetries=zn("maxRetries",t),this.timeout=zn("timeout",n),this.httpAgent=r,this.fetch=a??gr}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Ri(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${Mi()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(async r=>{const a=r&&Rn(r==null?void 0:r.body)?new DataView(await r.body.arrayBuffer()):(r==null?void 0:r.body)instanceof DataView?r.body:(r==null?void 0:r.body)instanceof ArrayBuffer?new DataView(r.body):r&&ArrayBuffer.isView(r==null?void 0:r.body)?new DataView(r.body.buffer):r==null?void 0:r.body;return{method:e,path:t,...r,body:a}}))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){var A;e={...e};const{method:n,path:r,query:a,headers:i={}}=e,o=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:Js(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,l=this.calculateContentLength(o),c=this.buildURL(r,a);"timeout"in e&&zn("timeout",e.timeout),e.timeout=e.timeout??this.timeout;const u=e.httpAgent??this.httpAgent??vr(c),f=e.timeout+1e3;typeof((A=u==null?void 0:u.options)==null?void 0:A.timeout)=="number"&&f>(u.options.timeout??0)&&(u.options.timeout=f),this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const g=this.buildHeaders({options:e,headers:i,contentLength:l,retryCount:t});return{req:{method:n,...o&&{body:o},headers:g,...u&&{agent:u},signal:e.signal??null},url:c,timeout:e.timeout}}buildHeaders({options:e,headers:t,contentLength:n,retryCount:r}){const a={};n&&(a["content-length"]=n);const i=this.defaultHeaders(e);return Ks(a,i),Ks(a,t),Js(e.body)&&Nt!=="node"&&delete a["content-type"],an(i,"x-stainless-retry-count")===void 0&&an(t,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(r)),an(i,"x-stainless-timeout")===void 0&&an(t,"x-stainless-timeout")===void 0&&e.timeout&&(a["x-stainless-timeout"]=String(e.timeout)),this.validateHeaders(a,t),a}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,n,r){return te.generate(e,t,n,r)}request(e,t=null){return new In(this.makeRequest(e,t))}async makeRequest(e,t){var f,g;const n=await e,r=n.maxRetries??this.maxRetries;t==null&&(t=r),await this.prepareOptions(n);const{req:a,url:i,timeout:o}=this.buildRequest(n,{retryCount:r-t});if(await this.prepareRequest(a,{url:i,options:n}),it("request",i,n,a.headers),(f=n.signal)!=null&&f.aborted)throw new ye;const l=new AbortController,c=await this.fetchWithTimeout(i,a,o,l).catch(ss);if(c instanceof Error){if((g=n.signal)!=null&&g.aborted)throw new ye;if(t)return this.retryRequest(n,t);throw c.name==="AbortError"?new _s:new En({cause:c})}const u=Pi(c.headers);if(!c.ok){if(t&&this.shouldRetry(c)){const b=`retrying, ${t} attempts remaining`;return it(`response (error; ${b})`,c.status,i,u),this.retryRequest(n,t,u)}const _=await c.text().catch(b=>ss(b).message),A=Ii(_),k=A?void 0:_;throw it(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,c.status,i,u,k),this.makeStatusError(c.status,A,k,u)}return{response:c,options:n,controller:l}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new Ci(this,n,e)}buildURL(e,t){const n=ji(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return Wr(r)||(t={...r,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,n])=>typeof n<"u").map(([t,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(t)}=`;throw new F(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,n,r){const{signal:a,...i}=t||{};a&&a.addEventListener("abort",()=>r.abort());const o=setTimeout(()=>r.abort(),n),l={signal:r.signal,...i};return l.method&&(l.method=l.method.toUpperCase()),this.fetch.call(void 0,e,l).finally(()=>{clearTimeout(o)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,n){let r;const a=n==null?void 0:n["retry-after-ms"];if(a){const o=parseFloat(a);Number.isNaN(o)||(r=o)}const i=n==null?void 0:n["retry-after"];if(i&&!r){const o=parseFloat(i);Number.isNaN(o)?r=Date.parse(i)-Date.now():r=o*1e3}if(!(r&&0<=r&&r<60*1e3)){const o=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,o)}return await Jt(r),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,i=Math.min(.5*Math.pow(2,a),8),o=1-Math.random()*.25;return i*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${et}`}}class zr{constructor(e,t,n,r){sn.set(this,void 0),ki(this,sn,e),this.options=r,this.response=t,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new F("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[r,a]of n)e.url.searchParams.set(r,a);t.query=void 0,t.path=e.url.toString()}return await Si(this,sn,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(sn=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class Ci extends In{constructor(e,t,n){super(t,async r=>new n(e,r.response,await Ur(r),r.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const Pi=s=>new Proxy(Object.fromEntries(s.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}}),Ti={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},se=s=>typeof s=="object"&&s!==null&&!Wr(s)&&Object.keys(s).every(e=>Gr(Ti,e)),Ei=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":et,"X-Stainless-OS":Hs(Deno.build.os),"X-Stainless-Arch":qs(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":et,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":et,"X-Stainless-OS":Hs(process.platform),"X-Stainless-Arch":qs(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const s=Ni();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":et,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":et,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Ni(){if(typeof navigator>"u"||!navigator)return null;const s=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of s){const n=t.exec(navigator.userAgent);if(n){const r=n[1]||0,a=n[2]||0,i=n[3]||0;return{browser:e,version:`${r}.${a}.${i}`}}}return null}const qs=s=>s==="x32"?"x32":s==="x86_64"||s==="x64"?"x64":s==="arm"?"arm":s==="aarch64"||s==="arm64"?"arm64":s?`other:${s}`:"unknown",Hs=s=>(s=s.toLowerCase(),s.includes("ios")?"iOS":s==="android"?"Android":s==="darwin"?"MacOS":s==="win32"?"Windows":s==="freebsd"?"FreeBSD":s==="openbsd"?"OpenBSD":s==="linux"?"Linux":s?`Other:${s}`:"Unknown");let Xs;const Ri=()=>Xs??(Xs=Ei()),Ii=s=>{try{return JSON.parse(s)}catch{return}},Oi=/^[a-z][a-z0-9+.-]*:/i,ji=s=>Oi.test(s),Jt=s=>new Promise(e=>setTimeout(e,s)),zn=(s,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new F(`${s} must be an integer`);if(e<0)throw new F(`${s} must be a positive integer`);return e},ss=s=>{if(s instanceof Error)return s;if(typeof s=="object"&&s!==null)try{return new Error(JSON.stringify(s))}catch{}return new Error(s)},rn=s=>{var e,t,n,r;if(typeof process<"u")return((e=at==null?void 0:at[s])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(r=(n=(t=Deno.env)==null?void 0:t.get)==null?void 0:n.call(t,s))==null?void 0:r.trim()};function Wr(s){if(!s)return!0;for(const e in s)return!1;return!0}function Gr(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function Ks(s,e){for(const t in e){if(!Gr(e,t))continue;const n=t.toLowerCase();if(!n)continue;const r=e[t];r===null?delete s[n]:r!==void 0&&(s[n]=r)}}const Qs=new Set(["authorization","api-key"]);function it(s,...e){if(typeof process<"u"&&(at==null?void 0:at.DEBUG)==="true"){const t=e.map(n=>{if(!n)return n;if(n.headers){const a={...n,headers:{...n.headers}};for(const i in n.headers)Qs.has(i.toLowerCase())&&(a.headers[i]="REDACTED");return a}let r=null;for(const a in n)Qs.has(a.toLowerCase())&&(r??(r={...n}),r[a]="REDACTED");return r??n});console.log(`OpenAI:DEBUG:${s}`,...t)}}const Mi=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const e=Math.random()*16|0;return(s==="x"?e:e&3|8).toString(16)}),$i=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",Fi=s=>typeof(s==null?void 0:s.get)=="function",an=(s,e)=>{var n;const t=e.toLowerCase();if(Fi(s)){const r=((n=e[0])==null?void 0:n.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(a,i,o)=>i+o.toUpperCase());for(const a of[e,t,e.toUpperCase(),r]){const i=s.get(a);if(i)return i}}for(const[r,a]of Object.entries(s))if(r.toLowerCase()===t)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${e} header, using the first entry.`),a[0]):a};function Wn(s){return s!=null&&typeof s=="object"&&!Array.isArray(s)}class Zi extends zr{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class fe extends zr{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var n;const e=this.getPaginatedItems();if(!e.length)return null;const t=(n=e[e.length-1])==null?void 0:n.id;return t?{params:{after:t}}:null}}class B{constructor(e){this._client=e}}let Jr=class extends B{list(e,t={},n){return se(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,Di,{query:t,...n})}},On=class extends B{constructor(){super(...arguments),this.messages=new Jr(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,n){return this._client.post(`/chat/completions/${e}`,{body:t,...n})}list(e={},t){return se(e)?this.list({},e):this._client.getAPIList("/chat/completions",jn,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}};class jn extends fe{}class Di extends fe{}On.ChatCompletionsPage=jn;On.Messages=Jr;let Mn=class extends B{constructor(){super(...arguments),this.completions=new On(this._client)}};Mn.Completions=On;Mn.ChatCompletionsPage=jn;class qr extends B{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t==null?void 0:t.headers},__binaryResponse:!0})}}class Hr extends B{create(e,t){return this._client.post("/audio/transcriptions",ut({body:e,...t,__metadata:{model:e.model}}))}}class Xr extends B{create(e,t){return this._client.post("/audio/translations",ut({body:e,...t,__metadata:{model:e.model}}))}}class qt extends B{constructor(){super(...arguments),this.transcriptions=new Hr(this._client),this.translations=new Xr(this._client),this.speech=new qr(this._client)}}qt.Transcriptions=Hr;qt.Translations=Xr;qt.Speech=qr;class bs extends B{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return se(e)?this.list({},e):this._client.getAPIList("/batches",vs,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class vs extends fe{}bs.BatchesPage=vs;class xs extends B{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/assistants/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},t){return se(e)?this.list({},e):this._client.getAPIList("/assistants",ws,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class ws extends fe{}xs.AssistantsPage=ws;function Ys(s){return typeof s.parse=="function"}const ot=s=>(s==null?void 0:s.role)==="assistant",Kr=s=>(s==null?void 0:s.role)==="function",Qr=s=>(s==null?void 0:s.role)==="tool";var pe=function(s,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(s,t):r?r.value=t:e.set(s,t),t},W=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},rs,dn,fn,xt,wt,hn,kt,Re,St,yn,_n,tt,Yr;class ea{constructor(){rs.add(this),this.controller=new AbortController,dn.set(this,void 0),fn.set(this,()=>{}),xt.set(this,()=>{}),wt.set(this,void 0),hn.set(this,()=>{}),kt.set(this,()=>{}),Re.set(this,{}),St.set(this,!1),yn.set(this,!1),_n.set(this,!1),tt.set(this,!1),pe(this,dn,new Promise((e,t)=>{pe(this,fn,e,"f"),pe(this,xt,t,"f")}),"f"),pe(this,wt,new Promise((e,t)=>{pe(this,hn,e,"f"),pe(this,kt,t,"f")}),"f"),W(this,dn,"f").catch(()=>{}),W(this,wt,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},W(this,rs,"m",Yr).bind(this))},0)}_connected(){this.ended||(W(this,fn,"f").call(this),this._emit("connect"))}get ended(){return W(this,St,"f")}get errored(){return W(this,yn,"f")}get aborted(){return W(this,_n,"f")}abort(){this.controller.abort()}on(e,t){return(W(this,Re,"f")[e]||(W(this,Re,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=W(this,Re,"f")[e];if(!n)return this;const r=n.findIndex(a=>a.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(W(this,Re,"f")[e]||(W(this,Re,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{pe(this,tt,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,t)})}async done(){pe(this,tt,!0,"f"),await W(this,wt,"f")}_emit(e,...t){if(W(this,St,"f"))return;e==="end"&&(pe(this,St,!0,"f"),W(this,hn,"f").call(this));const n=W(this,Re,"f")[e];if(n&&(W(this,Re,"f")[e]=n.filter(r=>!r.once),n.forEach(({listener:r})=>r(...t))),e==="abort"){const r=t[0];!W(this,tt,"f")&&!(n!=null&&n.length)&&Promise.reject(r),W(this,xt,"f").call(this,r),W(this,kt,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=t[0];!W(this,tt,"f")&&!(n!=null&&n.length)&&Promise.reject(r),W(this,xt,"f").call(this,r),W(this,kt,"f").call(this,r),this._emit("end")}}_emitFinal(){}}dn=new WeakMap,fn=new WeakMap,xt=new WeakMap,wt=new WeakMap,hn=new WeakMap,kt=new WeakMap,Re=new WeakMap,St=new WeakMap,yn=new WeakMap,_n=new WeakMap,tt=new WeakMap,rs=new WeakSet,Yr=function(e){if(pe(this,yn,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new ye),e instanceof ye)return pe(this,_n,!0,"f"),this._emit("abort",e);if(e instanceof F)return this._emit("error",e);if(e instanceof Error){const t=new F(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new F(String(e)))};function Li(s,e){const t={...s};return Object.defineProperties(t,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),t}function ta(s){return(s==null?void 0:s.$brand)==="auto-parseable-response-format"}function Ht(s){return(s==null?void 0:s.$brand)==="auto-parseable-tool"}function Bi(s,e){return!e||!na(e)?{...s,choices:s.choices.map(t=>({...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:ks(s,e)}function ks(s,e){const t=s.choices.map(n=>{var r;if(n.finish_reason==="length")throw new $r;if(n.finish_reason==="content_filter")throw new Fr;return{...n,message:{...n.message,...n.message.tool_calls?{tool_calls:((r=n.message.tool_calls)==null?void 0:r.map(a=>Vi(e,a)))??void 0}:void 0,parsed:n.message.content&&!n.message.refusal?Ui(e,n.message.content):null}}});return{...s,choices:t}}function Ui(s,e){var t,n;return((t=s.response_format)==null?void 0:t.type)!=="json_schema"?null:((n=s.response_format)==null?void 0:n.type)==="json_schema"?"$parseRaw"in s.response_format?s.response_format.$parseRaw(e):JSON.parse(e):null}function Vi(s,e){var n;const t=(n=s.tools)==null?void 0:n.find(r=>{var a;return((a=r.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Ht(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function zi(s,e){var n;if(!s)return!1;const t=(n=s.tools)==null?void 0:n.find(r=>{var a;return((a=r.function)==null?void 0:a.name)===e.function.name});return Ht(t)||(t==null?void 0:t.function.strict)||!1}function na(s){var e;return ta(s.response_format)?!0:((e=s.tools)==null?void 0:e.some(t=>Ht(t)||t.type==="function"&&t.function.strict===!0))??!1}function Wi(s){for(const e of s??[]){if(e.type!=="function")throw new F(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new F(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var ie=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},ne,as,bn,is,os,ls,sa,cs;const er=10;class ra extends ea{constructor(){super(...arguments),ne.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var n;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(n=e.choices[0])==null?void 0:n.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(Kr(e)||Qr(e))&&e.content)this._emit("functionCallResult",e.content);else if(ot(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(ot(e)&&e.tool_calls)for(const n of e.tool_calls)n.type==="function"&&this._emit("functionCall",n.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new F("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),ie(this,ne,"m",as).call(this)}async finalMessage(){return await this.done(),ie(this,ne,"m",bn).call(this)}async finalFunctionCall(){return await this.done(),ie(this,ne,"m",is).call(this)}async finalFunctionCallResult(){return await this.done(),ie(this,ne,"m",os).call(this)}async totalUsage(){return await this.done(),ie(this,ne,"m",ls).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=ie(this,ne,"m",bn).call(this);t&&this._emit("finalMessage",t);const n=ie(this,ne,"m",as).call(this);n&&this._emit("finalContent",n);const r=ie(this,ne,"m",is).call(this);r&&this._emit("finalFunctionCall",r);const a=ie(this,ne,"m",os).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(i=>i.usage)&&this._emit("totalUsage",ie(this,ne,"m",ls).call(this))}async _createChatCompletion(e,t,n){const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ie(this,ne,"m",sa).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(ks(a,t))}async _runChatCompletion(e,t,n){for(const r of t.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){var g;const r="function",{function_call:a="auto",stream:i,...o}=t,l=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:c=er}=n||{},u={};for(const _ of t.functions)u[_.name||_.function.name]=_;const f=t.functions.map(_=>({name:_.name||_.function.name,parameters:_.parameters,description:_.description}));for(const _ of t.messages)this._addMessage(_,!1);for(let _=0;_<c;++_){const k=(g=(await this._createChatCompletion(e,{...o,function_call:a,functions:f,messages:[...this.messages]},n)).choices[0])==null?void 0:g.message;if(!k)throw new F("missing message in ChatCompletion response");if(!k.function_call)return;const{name:S,arguments:J}=k.function_call,b=u[S];if(b){if(l&&l!==S){const N=`Invalid function_call: ${JSON.stringify(S)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:r,name:S,content:N});continue}}else{const N=`Invalid function_call: ${JSON.stringify(S)}. Available options are: ${f.map(R=>JSON.stringify(R.name)).join(", ")}. Please try again`;this._addMessage({role:r,name:S,content:N});continue}let $;try{$=Ys(b)?await b.parse(J):J}catch(N){this._addMessage({role:r,name:S,content:N instanceof Error?N.message:String(N)});continue}const P=await b.function($,this),U=ie(this,ne,"m",cs).call(this,P);if(this._addMessage({role:r,name:S,content:U}),l)return}}async _runTools(e,t,n){var _,A,k;const r="tool",{tool_choice:a="auto",stream:i,...o}=t,l=typeof a!="string"&&((_=a==null?void 0:a.function)==null?void 0:_.name),{maxChatCompletions:c=er}=n||{},u=t.tools.map(S=>{if(Ht(S)){if(!S.$callback)throw new F("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:S.$callback,name:S.function.name,description:S.function.description||"",parameters:S.function.parameters,parse:S.$parseRaw,strict:!0}}}return S}),f={};for(const S of u)S.type==="function"&&(f[S.function.name||S.function.function.name]=S.function);const g="tools"in t?u.map(S=>S.type==="function"?{type:"function",function:{name:S.function.name||S.function.function.name,parameters:S.function.parameters,description:S.function.description,strict:S.function.strict}}:S):void 0;for(const S of t.messages)this._addMessage(S,!1);for(let S=0;S<c;++S){const b=(A=(await this._createChatCompletion(e,{...o,tool_choice:a,tools:g,messages:[...this.messages]},n)).choices[0])==null?void 0:A.message;if(!b)throw new F("missing message in ChatCompletion response");if(!((k=b.tool_calls)!=null&&k.length))return;for(const $ of b.tool_calls){if($.type!=="function")continue;const P=$.id,{name:U,arguments:N}=$.function,R=f[U];if(R){if(l&&l!==U){const M=`Invalid tool_call: ${JSON.stringify(U)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:r,tool_call_id:P,content:M});continue}}else{const M=`Invalid tool_call: ${JSON.stringify(U)}. Available options are: ${Object.keys(f).map(q=>JSON.stringify(q)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:P,content:M});continue}let v;try{v=Ys(R)?await R.parse(N):N}catch(M){const q=M instanceof Error?M.message:String(M);this._addMessage({role:r,tool_call_id:P,content:q});continue}const I=await R.function(v,this),T=ie(this,ne,"m",cs).call(this,I);if(this._addMessage({role:r,tool_call_id:P,content:T}),l)return}}}}ne=new WeakSet,as=function(){return ie(this,ne,"m",bn).call(this).content??null},bn=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(ot(t)){const{function_call:n,...r}=t,a={...r,content:t.content??null,refusal:t.refusal??null};return n&&(a.function_call=n),a}}throw new F("stream ended without producing a ChatCompletionMessage with role=assistant")},is=function(){var e,t;for(let n=this.messages.length-1;n>=0;n--){const r=this.messages[n];if(ot(r)&&(r!=null&&r.function_call))return r.function_call;if(ot(r)&&((e=r==null?void 0:r.tool_calls)!=null&&e.length))return(t=r.tool_calls.at(-1))==null?void 0:t.function}},os=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Kr(t)&&t.content!=null||Qr(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(n=>{var r;return n.role==="assistant"&&((r=n.tool_calls)==null?void 0:r.some(a=>a.type==="function"&&a.id===t.tool_call_id))}))return t.content}},ls=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},sa=function(e){if(e.n!=null&&e.n>1)throw new F("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},cs=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class It extends ra{static runFunctions(e,t,n){const r=new It,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,a)),r}static runTools(e,t,n){const r=new It,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}_addMessage(e,t=!0){super._addMessage(e,t),ot(e)&&e.content&&this._emit("content",e.content)}}const aa=1,ia=2,oa=4,la=8,ca=16,ua=32,da=64,fa=128,ha=256,ma=fa|ha,pa=ca|ua|ma|da,ga=aa|ia|pa,ya=oa|la,Gi=ga|ya,Y={STR:aa,NUM:ia,ARR:oa,OBJ:la,NULL:ca,BOOL:ua,NAN:da,INFINITY:fa,MINUS_INFINITY:ha,INF:ma,SPECIAL:pa,ATOM:ga,COLLECTION:ya,ALL:Gi};class Ji extends Error{}class qi extends Error{}function Hi(s,e=Y.ALL){if(typeof s!="string")throw new TypeError(`expecting str, got ${typeof s}`);if(!s.trim())throw new Error(`${s} is empty`);return Xi(s.trim(),e)}const Xi=(s,e)=>{const t=s.length;let n=0;const r=g=>{throw new Ji(`${g} at position ${n}`)},a=g=>{throw new qi(`${g} at position ${n}`)},i=()=>(f(),n>=t&&r("Unexpected end of input"),s[n]==='"'?o():s[n]==="{"?l():s[n]==="["?c():s.substring(n,n+4)==="null"||Y.NULL&e&&t-n<4&&"null".startsWith(s.substring(n))?(n+=4,null):s.substring(n,n+4)==="true"||Y.BOOL&e&&t-n<4&&"true".startsWith(s.substring(n))?(n+=4,!0):s.substring(n,n+5)==="false"||Y.BOOL&e&&t-n<5&&"false".startsWith(s.substring(n))?(n+=5,!1):s.substring(n,n+8)==="Infinity"||Y.INFINITY&e&&t-n<8&&"Infinity".startsWith(s.substring(n))?(n+=8,1/0):s.substring(n,n+9)==="-Infinity"||Y.MINUS_INFINITY&e&&1<t-n&&t-n<9&&"-Infinity".startsWith(s.substring(n))?(n+=9,-1/0):s.substring(n,n+3)==="NaN"||Y.NAN&e&&t-n<3&&"NaN".startsWith(s.substring(n))?(n+=3,NaN):u()),o=()=>{const g=n;let _=!1;for(n++;n<t&&(s[n]!=='"'||_&&s[n-1]==="\\");)_=s[n]==="\\"?!_:!1,n++;if(s.charAt(n)=='"')try{return JSON.parse(s.substring(g,++n-Number(_)))}catch(A){a(String(A))}else if(Y.STR&e)try{return JSON.parse(s.substring(g,n-Number(_))+'"')}catch{return JSON.parse(s.substring(g,s.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},l=()=>{n++,f();const g={};try{for(;s[n]!=="}";){if(f(),n>=t&&Y.OBJ&e)return g;const _=o();f(),n++;try{const A=i();Object.defineProperty(g,_,{value:A,writable:!0,enumerable:!0,configurable:!0})}catch(A){if(Y.OBJ&e)return g;throw A}f(),s[n]===","&&n++}}catch{if(Y.OBJ&e)return g;r("Expected '}' at end of object")}return n++,g},c=()=>{n++;const g=[];try{for(;s[n]!=="]";)g.push(i()),f(),s[n]===","&&n++}catch{if(Y.ARR&e)return g;r("Expected ']' at end of array")}return n++,g},u=()=>{if(n===0){s==="-"&&Y.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(s)}catch(_){if(Y.NUM&e)try{return s[s.length-1]==="."?JSON.parse(s.substring(0,s.lastIndexOf("."))):JSON.parse(s.substring(0,s.lastIndexOf("e")))}catch{}a(String(_))}}const g=n;for(s[n]==="-"&&n++;s[n]&&!",]}".includes(s[n]);)n++;n==t&&!(Y.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(s.substring(g,n))}catch{s.substring(g,n)==="-"&&Y.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(s.substring(g,s.lastIndexOf("e")))}catch(A){a(String(A))}}},f=()=>{for(;n<t&&` 
\r	`.includes(s[n]);)n++};return i()},tr=s=>Hi(s,Y.ALL^Y.NUM);var Qe=function(s,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(s,t):r?r.value=t:e.set(s,t),t},z=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},X,Ne,Ye,Me,Gn,on,Jn,qn,Hn,ln,Xn,nr;class Ot extends ra{constructor(e){super(),X.add(this),Ne.set(this,void 0),Ye.set(this,void 0),Me.set(this,void 0),Qe(this,Ne,e,"f"),Qe(this,Ye,[],"f")}get currentChatCompletionSnapshot(){return z(this,Me,"f")}static fromReadableStream(e){const t=new Ot(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,n){const r=new Ot(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,n){var i;super._createChatCompletion;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),z(this,X,"m",Gn).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const o of a)z(this,X,"m",Jn).call(this,o);if((i=a.controller.signal)!=null&&i.aborted)throw new ye;return this._addChatCompletion(z(this,X,"m",ln).call(this))}async _fromReadableStream(e,t){var i;const n=t==null?void 0:t.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),z(this,X,"m",Gn).call(this),this._connected();const r=Ce.fromReadableStream(e,this.controller);let a;for await(const o of r)a&&a!==o.id&&this._addChatCompletion(z(this,X,"m",ln).call(this)),z(this,X,"m",Jn).call(this,o),a=o.id;if((i=r.controller.signal)!=null&&i.aborted)throw new ye;return this._addChatCompletion(z(this,X,"m",ln).call(this))}[(Ne=new WeakMap,Ye=new WeakMap,Me=new WeakMap,X=new WeakSet,Gn=function(){this.ended||Qe(this,Me,void 0,"f")},on=function(t){let n=z(this,Ye,"f")[t.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},z(this,Ye,"f")[t.index]=n,n)},Jn=function(t){var r,a,i,o,l,c,u,f,g,_,A,k,S,J,b;if(this.ended)return;const n=z(this,X,"m",nr).call(this,t);this._emit("chunk",t,n);for(const $ of t.choices){const P=n.choices[$.index];$.delta.content!=null&&((r=P.message)==null?void 0:r.role)==="assistant"&&((a=P.message)!=null&&a.content)&&(this._emit("content",$.delta.content,P.message.content),this._emit("content.delta",{delta:$.delta.content,snapshot:P.message.content,parsed:P.message.parsed})),$.delta.refusal!=null&&((i=P.message)==null?void 0:i.role)==="assistant"&&((o=P.message)!=null&&o.refusal)&&this._emit("refusal.delta",{delta:$.delta.refusal,snapshot:P.message.refusal}),((l=$.logprobs)==null?void 0:l.content)!=null&&((c=P.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(u=$.logprobs)==null?void 0:u.content,snapshot:((f=P.logprobs)==null?void 0:f.content)??[]}),((g=$.logprobs)==null?void 0:g.refusal)!=null&&((_=P.message)==null?void 0:_.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(A=$.logprobs)==null?void 0:A.refusal,snapshot:((k=P.logprobs)==null?void 0:k.refusal)??[]});const U=z(this,X,"m",on).call(this,P);P.finish_reason&&(z(this,X,"m",Hn).call(this,P),U.current_tool_call_index!=null&&z(this,X,"m",qn).call(this,P,U.current_tool_call_index));for(const N of $.delta.tool_calls??[])U.current_tool_call_index!==N.index&&(z(this,X,"m",Hn).call(this,P),U.current_tool_call_index!=null&&z(this,X,"m",qn).call(this,P,U.current_tool_call_index)),U.current_tool_call_index=N.index;for(const N of $.delta.tool_calls??[]){const R=(S=P.message.tool_calls)==null?void 0:S[N.index];R!=null&&R.type&&((R==null?void 0:R.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(J=R.function)==null?void 0:J.name,index:N.index,arguments:R.function.arguments,parsed_arguments:R.function.parsed_arguments,arguments_delta:((b=N.function)==null?void 0:b.arguments)??""}):(R==null||R.type,void 0))}}},qn=function(t,n){var i,o,l;if(z(this,X,"m",on).call(this,t).done_tool_calls.has(n))return;const a=(i=t.message.tool_calls)==null?void 0:i[n];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const c=(l=(o=z(this,Ne,"f"))==null?void 0:o.tools)==null?void 0:l.find(u=>u.type==="function"&&u.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:n,arguments:a.function.arguments,parsed_arguments:Ht(c)?c.$parseRaw(a.function.arguments):c!=null&&c.function.strict?JSON.parse(a.function.arguments):null})}else a.type},Hn=function(t){var r,a;const n=z(this,X,"m",on).call(this,t);if(t.message.content&&!n.content_done){n.content_done=!0;const i=z(this,X,"m",Xn).call(this);this._emit("content.done",{content:t.message.content,parsed:i?i.$parseRaw(t.message.content):null})}t.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(r=t.logprobs)!=null&&r.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(a=t.logprobs)!=null&&a.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},ln=function(){if(this.ended)throw new F("stream has ended, this shouldn't happen");const t=z(this,Me,"f");if(!t)throw new F("request ended without sending any chunks");return Qe(this,Me,void 0,"f"),Qe(this,Ye,[],"f"),Ki(t,z(this,Ne,"f"))},Xn=function(){var n;const t=(n=z(this,Ne,"f"))==null?void 0:n.response_format;return ta(t)?t:null},nr=function(t){var n,r,a,i;let o=z(this,Me,"f");const{choices:l,...c}=t;o?Object.assign(o,c):o=Qe(this,Me,{...c,choices:[]},"f");for(const{delta:u,finish_reason:f,index:g,logprobs:_=null,...A}of t.choices){let k=o.choices[g];if(k||(k=o.choices[g]={finish_reason:f,index:g,message:{},logprobs:_,...A}),_)if(!k.logprobs)k.logprobs=Object.assign({},_);else{const{content:N,refusal:R,...v}=_;Object.assign(k.logprobs,v),N&&((n=k.logprobs).content??(n.content=[]),k.logprobs.content.push(...N)),R&&((r=k.logprobs).refusal??(r.refusal=[]),k.logprobs.refusal.push(...R))}if(f&&(k.finish_reason=f,z(this,Ne,"f")&&na(z(this,Ne,"f")))){if(f==="length")throw new $r;if(f==="content_filter")throw new Fr}if(Object.assign(k,A),!u)continue;const{content:S,refusal:J,function_call:b,role:$,tool_calls:P,...U}=u;if(Object.assign(k.message,U),J&&(k.message.refusal=(k.message.refusal||"")+J),$&&(k.message.role=$),b&&(k.message.function_call?(b.name&&(k.message.function_call.name=b.name),b.arguments&&((a=k.message.function_call).arguments??(a.arguments=""),k.message.function_call.arguments+=b.arguments)):k.message.function_call=b),S&&(k.message.content=(k.message.content||"")+S,!k.message.refusal&&z(this,X,"m",Xn).call(this)&&(k.message.parsed=tr(k.message.content))),P){k.message.tool_calls||(k.message.tool_calls=[]);for(const{index:N,id:R,type:v,function:I,...T}of P){const M=(i=k.message.tool_calls)[N]??(i[N]={});Object.assign(M,T),R&&(M.id=R),v&&(M.type=v),I&&(M.function??(M.function={name:I.name??"",arguments:""})),I!=null&&I.name&&(M.function.name=I.name),I!=null&&I.arguments&&(M.function.arguments+=I.arguments,zi(z(this,Ne,"f"),M)&&(M.function.parsed_arguments=tr(M.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,i)=>t.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Ce(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Ki(s,e){const{id:t,choices:n,created:r,model:a,system_fingerprint:i,...o}=s,l={...o,id:t,choices:n.map(({message:c,finish_reason:u,index:f,logprobs:g,..._})=>{if(!u)throw new F(`missing finish_reason for choice ${f}`);const{content:A=null,function_call:k,tool_calls:S,...J}=c,b=c.role;if(!b)throw new F(`missing role for choice ${f}`);if(k){const{arguments:$,name:P}=k;if($==null)throw new F(`missing function_call.arguments for choice ${f}`);if(!P)throw new F(`missing function_call.name for choice ${f}`);return{..._,message:{content:A,function_call:{arguments:$,name:P},role:b,refusal:c.refusal??null},finish_reason:u,index:f,logprobs:g}}return S?{..._,index:f,finish_reason:u,logprobs:g,message:{...J,role:b,content:A,refusal:c.refusal??null,tool_calls:S.map(($,P)=>{const{function:U,type:N,id:R,...v}=$,{arguments:I,name:T,...M}=U||{};if(R==null)throw new F(`missing choices[${f}].tool_calls[${P}].id
${cn(s)}`);if(N==null)throw new F(`missing choices[${f}].tool_calls[${P}].type
${cn(s)}`);if(T==null)throw new F(`missing choices[${f}].tool_calls[${P}].function.name
${cn(s)}`);if(I==null)throw new F(`missing choices[${f}].tool_calls[${P}].function.arguments
${cn(s)}`);return{...v,id:R,type:N,function:{...M,name:T,arguments:I}}})}}:{..._,message:{...J,content:A,role:b,refusal:c.refusal??null},finish_reason:u,index:f,logprobs:g}}),created:r,model:a,object:"chat.completion",...i?{system_fingerprint:i}:{}};return Bi(l,e)}function cn(s){return JSON.stringify(s)}class lt extends Ot{static fromReadableStream(e){const t=new lt(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,n){const r=new lt(null),a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,a)),r}static runTools(e,t,n){const r=new lt(t),a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}}let _a=class extends B{parse(e,t){return Wi(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(n=>ks(n,e))}runFunctions(e,t){return e.stream?lt.runFunctions(this._client,e,t):It.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?lt.runTools(this._client,e,t):It.runTools(this._client,e,t)}stream(e,t){return Ot.createChatCompletion(this._client,e,t)}};class us extends B{constructor(){super(...arguments),this.completions=new _a(this._client)}}(function(s){s.Completions=_a})(us||(us={}));class ba extends B{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Ss extends B{constructor(){super(...arguments),this.sessions=new ba(this._client)}}Ss.Sessions=ba;var w=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},le=function(s,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(s,t):r?r.value=t:e.set(s,t),t},ee,ds,Ae,mn,ge,ze,st,Ve,vn,ue,pn,gn,Rt,At,Ct,sr,rr,ar,ir,or,lr,cr;class _e extends ea{constructor(){super(...arguments),ee.add(this),ds.set(this,[]),Ae.set(this,{}),mn.set(this,{}),ge.set(this,void 0),ze.set(this,void 0),st.set(this,void 0),Ve.set(this,void 0),vn.set(this,void 0),ue.set(this,void 0),pn.set(this,void 0),gn.set(this,void 0),Rt.set(this,void 0)}[(ds=new WeakMap,Ae=new WeakMap,mn=new WeakMap,ge=new WeakMap,ze=new WeakMap,st=new WeakMap,Ve=new WeakMap,vn=new WeakMap,ue=new WeakMap,pn=new WeakMap,gn=new WeakMap,Rt=new WeakMap,ee=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,i)=>t.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new _e;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var a;const n=t==null?void 0:t.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=Ce.fromReadableStream(e,this.controller);for await(const i of r)w(this,ee,"m",At).call(this,i);if((a=r.controller.signal)!=null&&a.aborted)throw new ye;return this._addRun(w(this,ee,"m",Ct).call(this))}toReadableStream(){return new Ce(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,r,a){const i=new _e;return i._run(()=>i._runToolAssistantStream(e,t,n,r,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,t,n,r,a){var c;const i=a==null?void 0:a.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},l=await e.submitToolOutputs(t,n,o,{...a,signal:this.controller.signal});this._connected();for await(const u of l)w(this,ee,"m",At).call(this,u);if((c=l.controller.signal)!=null&&c.aborted)throw new ye;return this._addRun(w(this,ee,"m",Ct).call(this))}static createThreadAssistantStream(e,t,n){const r=new _e;return r._run(()=>r._threadAssistantStream(e,t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,n,r){const a=new _e;return a._run(()=>a._runAssistantStream(e,t,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return w(this,pn,"f")}currentRun(){return w(this,gn,"f")}currentMessageSnapshot(){return w(this,ge,"f")}currentRunStepSnapshot(){return w(this,Rt,"f")}async finalRunSteps(){return await this.done(),Object.values(w(this,Ae,"f"))}async finalMessages(){return await this.done(),Object.values(w(this,mn,"f"))}async finalRun(){if(await this.done(),!w(this,ze,"f"))throw Error("Final run was not received.");return w(this,ze,"f")}async _createThreadAssistantStream(e,t,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},i=await e.createAndRun(a,{...n,signal:this.controller.signal});this._connected();for await(const l of i)w(this,ee,"m",At).call(this,l);if((o=i.controller.signal)!=null&&o.aborted)throw new ye;return this._addRun(w(this,ee,"m",Ct).call(this))}async _createAssistantStream(e,t,n,r){var l;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},o=await e.create(t,i,{...r,signal:this.controller.signal});this._connected();for await(const c of o)w(this,ee,"m",At).call(this,c);if((l=o.controller.signal)!=null&&l.aborted)throw new ye;return this._addRun(w(this,ee,"m",Ct).call(this))}static accumulateDelta(e,t){for(const[n,r]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let a=e[n];if(a==null){e[n]=r;continue}if(n==="index"||n==="type"){e[n]=r;continue}if(typeof a=="string"&&typeof r=="string")a+=r;else if(typeof a=="number"&&typeof r=="number")a+=r;else if(Wn(a)&&Wn(r))a=this.accumulateDelta(a,r);else if(Array.isArray(a)&&Array.isArray(r)){if(a.every(i=>typeof i=="string"||typeof i=="number")){a.push(...r);continue}for(const i of r){if(!Wn(i))throw new Error(`Expected array delta entry to be an object but got: ${i}`);const o=i.index;if(o==null)throw console.error(i),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const l=a[o];l==null?a.push(i):a[o]=this.accumulateDelta(l,i)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${r}, accValue: ${a}`);e[n]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,r){return await this._createAssistantStream(t,e,n,r)}async _runToolAssistantStream(e,t,n,r,a){return await this._createToolAssistantStream(n,e,t,r,a)}}At=function(e){if(!this.ended)switch(le(this,pn,e,"f"),w(this,ee,"m",ar).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":w(this,ee,"m",cr).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":w(this,ee,"m",rr).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":w(this,ee,"m",sr).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Ct=function(){if(this.ended)throw new F("stream has ended, this shouldn't happen");if(!w(this,ze,"f"))throw Error("Final run has not been received");return w(this,ze,"f")},sr=function(e){const[t,n]=w(this,ee,"m",or).call(this,e,w(this,ge,"f"));le(this,ge,t,"f"),w(this,mn,"f")[t.id]=t;for(const r of n){const a=t.content[r.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let a=r.text,i=t.content[r.index];if(i&&i.type=="text")this._emit("textDelta",a,i.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=w(this,st,"f")){if(w(this,Ve,"f"))switch(w(this,Ve,"f").type){case"text":this._emit("textDone",w(this,Ve,"f").text,w(this,ge,"f"));break;case"image_file":this._emit("imageFileDone",w(this,Ve,"f").image_file,w(this,ge,"f"));break}le(this,st,r.index,"f")}le(this,Ve,t.content[r.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(w(this,st,"f")!==void 0){const r=e.data.content[w(this,st,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,w(this,ge,"f"));break;case"text":this._emit("textDone",r.text,w(this,ge,"f"));break}}w(this,ge,"f")&&this._emit("messageDone",e.data),le(this,ge,void 0,"f")}},rr=function(e){const t=w(this,ee,"m",ir).call(this,e);switch(le(this,Rt,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of n.step_details.tool_calls)a.index==w(this,vn,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(w(this,ue,"f")&&this._emit("toolCallDone",w(this,ue,"f")),le(this,vn,a.index,"f"),le(this,ue,t.step_details.tool_calls[a.index],"f"),w(this,ue,"f")&&this._emit("toolCallCreated",w(this,ue,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":le(this,Rt,void 0,"f"),e.data.step_details.type=="tool_calls"&&w(this,ue,"f")&&(this._emit("toolCallDone",w(this,ue,"f")),le(this,ue,void 0,"f")),this._emit("runStepDone",e.data,t);break}},ar=function(e){w(this,ds,"f").push(e),this._emit("event",e)},ir=function(e){switch(e.event){case"thread.run.step.created":return w(this,Ae,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=w(this,Ae,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const r=_e.accumulateDelta(t,n.delta);w(this,Ae,"f")[e.data.id]=r}return w(this,Ae,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":w(this,Ae,"f")[e.data.id]=e.data;break}if(w(this,Ae,"f")[e.data.id])return w(this,Ae,"f")[e.data.id];throw new Error("No snapshot available")},or=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const a of r.delta.content)if(a.index in t.content){let i=t.content[a.index];t.content[a.index]=w(this,ee,"m",lr).call(this,a,i)}else t.content[a.index]=a,n.push(a);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},lr=function(e,t){return _e.accumulateDelta(t,e)},cr=function(e){switch(le(this,gn,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":le(this,ze,e.data,"f"),w(this,ue,"f")&&(this._emit("toolCallDone",w(this,ue,"f")),le(this,ue,void 0,"f"));break}};class As extends B{create(e,t,n){return this._client.post(`/threads/${e}/messages`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/messages/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,t={},n){return se(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,Cs,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t,n){return this._client.delete(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Cs extends fe{}As.MessagesPage=Cs;class Ps extends B{retrieve(e,t,n,r={},a){return se(r)?this.retrieve(e,t,n,{},r):this._client.get(`/threads/${e}/runs/${t}/steps/${n}`,{query:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e,t,n={},r){return se(n)?this.list(e,t,{},n):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,Ts,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Ts extends fe{}Ps.RunStepsPage=Ts;class Xt extends B{constructor(){super(...arguments),this.steps=new Ps(this._client)}create(e,t,n){const{include:r,...a}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:r},body:a,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:t.stream??!1})}retrieve(e,t,n){return this._client.get(`/threads/${e}/runs/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,t={},n){return se(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,Es,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,t,n){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}createAndStream(e,t,n){return _e.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){const r={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:a,response:i}=await this.retrieve(e,t,{...n,headers:{...n==null?void 0:n.headers,...r}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(n!=null&&n.pollIntervalMs)o=n.pollIntervalMs;else{const l=i.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await Jt(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,n){return _e.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,t,n,r){const a=await this.submitToolOutputs(e,t,n,r);return await this.poll(e,a.id,r)}submitToolOutputsStream(e,t,n,r){return _e.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,r)}}class Es extends fe{}Xt.RunsPage=Es;Xt.Steps=Ps;Xt.RunStepsPage=Ts;class mt extends B{constructor(){super(...arguments),this.runs=new Xt(this._client),this.messages=new As(this._client)}create(e={},t){return se(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/threads/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return _e.createThreadAssistantStream(e,this._client.beta.threads,t)}}mt.Runs=Xt;mt.RunsPage=Es;mt.Messages=As;mt.MessagesPage=Cs;const Qi=async s=>{const e=await Promise.allSettled(s),t=e.filter(r=>r.status==="rejected");if(t.length){for(const r of t)console.error(r.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const n=[];for(const r of e)r.status==="fulfilled"&&n.push(r.value);return n};let Ns=class extends B{create(e,t,n){return this._client.post(`/vector_stores/${e}/files`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e,t={},n){return se(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,$n,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t,n){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}async poll(e,t,n){const r={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const a=await this.retrieve(e,t,{...n,headers:r}).withResponse(),i=a.data;switch(i.status){case"in_progress":let o=5e3;if(n!=null&&n.pollIntervalMs)o=n.pollIntervalMs;else{const l=a.response.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await Jt(o);break;case"failed":case"completed":return i}}}async upload(e,t,n){const r=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,t,n){const r=await this.upload(e,t,n);return await this.poll(e,r.id,n)}};class $n extends fe{}Ns.VectorStoreFilesPage=$n;class va extends B{create(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t);return await this.poll(e,r.id,n)}listFiles(e,t,n={},r){return se(n)?this.listFiles(e,t,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,$n,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async poll(e,t,n){const r={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:a,response:i}=await this.retrieve(e,t,{...n,headers:r}).withResponse();switch(a.status){case"in_progress":let o=5e3;if(n!=null&&n.pollIntervalMs)o=n.pollIntervalMs;else{const l=i.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(o=c)}}await Jt(o);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},r){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(r==null?void 0:r.maxConcurrency)??5,i=Math.min(a,t.length),o=this._client,l=t.values(),c=[...n];async function u(g){for(let _ of g){const A=await o.files.create({file:_,purpose:"assistants"},r);c.push(A.id)}}const f=Array(i).fill(l).map(u);return await Qi(f),await this.createAndPoll(e,{file_ids:c})}}class pt extends B{constructor(){super(...arguments),this.files=new Ns(this._client),this.fileBatches=new va(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/vector_stores/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},t){return se(e)?this.list({},e):this._client.getAPIList("/vector_stores",Rs,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Rs extends fe{}pt.VectorStoresPage=Rs;pt.Files=Ns;pt.VectorStoreFilesPage=$n;pt.FileBatches=va;class Le extends B{constructor(){super(...arguments),this.realtime=new Ss(this._client),this.vectorStores=new pt(this._client),this.chat=new us(this._client),this.assistants=new xs(this._client),this.threads=new mt(this._client)}}Le.Realtime=Ss;Le.VectorStores=pt;Le.VectorStoresPage=Rs;Le.Assistants=xs;Le.AssistantsPage=ws;Le.Threads=mt;class xa extends B{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class wa extends B{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}class Is extends B{create(e,t){return this._client.post("/files",ut({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return se(e)?this.list({},e):this._client.getAPIList("/files",Os,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t==null?void 0:t.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=30*60*1e3}={}){const r=new Set(["processed","error","deleted"]),a=Date.now();let i=await this.retrieve(e);for(;!i.status||!r.has(i.status);)if(await Jt(t),i=await this.retrieve(e),Date.now()-a>n)throw new _s({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return i}}class Os extends fe{}Is.FileObjectsPage=Os;class js extends B{list(e,t={},n){return se(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Ms,{query:t,...n})}}class Ms extends fe{}js.FineTuningJobCheckpointsPage=Ms;class gt extends B{constructor(){super(...arguments),this.checkpoints=new js(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return se(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",$s,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return se(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Fs,{query:t,...n})}}class $s extends fe{}class Fs extends fe{}gt.FineTuningJobsPage=$s;gt.FineTuningJobEventsPage=Fs;gt.Checkpoints=js;gt.FineTuningJobCheckpointsPage=Ms;class Kt extends B{constructor(){super(...arguments),this.jobs=new gt(this._client)}}Kt.Jobs=gt;Kt.FineTuningJobsPage=$s;Kt.FineTuningJobEventsPage=Fs;class ka extends B{createVariation(e,t){return this._client.post("/images/variations",ut({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",ut({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class Zs extends B{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Ds,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class Ds extends Zi{}Zs.ModelsPage=Ds;class Sa extends B{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class Aa extends B{create(e,t,n){return this._client.post(`/uploads/${e}/parts`,ut({body:t,...n}))}}class Ls extends B{constructor(){super(...arguments),this.parts=new Aa(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(`/uploads/${e}/complete`,{body:t,...n})}}Ls.Parts=Aa;var Ca;class Z extends Ai{constructor({baseURL:e=rn("OPENAI_BASE_URL"),apiKey:t=rn("OPENAI_API_KEY"),organization:n=rn("OPENAI_ORG_ID")??null,project:r=rn("OPENAI_PROJECT_ID")??null,...a}={}){if(t===void 0)throw new F("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const i={apiKey:t,organization:n,project:r,...a,baseURL:e||"https://api.openai.com/v1"};if(!i.dangerouslyAllowBrowser&&$i())throw new F(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:i.baseURL,timeout:i.timeout??6e5,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new xa(this),this.chat=new Mn(this),this.embeddings=new wa(this),this.files=new Is(this),this.images=new ka(this),this.audio=new qt(this),this.moderations=new Sa(this),this.models=new Zs(this),this.fineTuning=new Kt(this),this.beta=new Le(this),this.batches=new bs(this),this.uploads=new Ls(this),this._options=i,this.apiKey=t,this.organization=n,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return ui(e,{arrayFormat:"brackets"})}}Ca=Z;Z.OpenAI=Ca;Z.DEFAULT_TIMEOUT=6e5;Z.OpenAIError=F;Z.APIError=te;Z.APIConnectionError=En;Z.APIConnectionTimeoutError=_s;Z.APIUserAbortError=ye;Z.NotFoundError=Rr;Z.ConflictError=Ir;Z.RateLimitError=jr;Z.BadRequestError=Tr;Z.AuthenticationError=Er;Z.InternalServerError=Mr;Z.PermissionDeniedError=Nr;Z.UnprocessableEntityError=Or;Z.toFile=Br;Z.fileFromPath=xr;Z.Completions=xa;Z.Chat=Mn;Z.ChatCompletionsPage=jn;Z.Embeddings=wa;Z.Files=Is;Z.FileObjectsPage=Os;Z.Images=ka;Z.Audio=qt;Z.Moderations=Sa;Z.Models=Zs;Z.ModelsPage=Ds;Z.FineTuning=Kt;Z.Beta=Le;Z.Batches=bs;Z.BatchesPage=vs;Z.Uploads=Ls;const Yi=Symbol("Let zodToJsonSchema decide on which parser to use"),ur={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},eo=s=>typeof s=="string"?{...ur,basePath:["#"],definitions:{},name:s}:{...ur,basePath:["#"],definitions:{},...s},fs=s=>"_def"in s?s._def:s;function to(s){if(!s)return!0;for(const e in s)return!1;return!0}const no=s=>{const e=eo(s),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:t,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([n,r])=>[fs(r),{def:fs(r),path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};function Pa(s,e,t,n){n!=null&&n.errorMessages&&t&&(s.errorMessage={...s.errorMessage,[e]:t})}function V(s,e,t,n,r){s[e]=t,Pa(s,e,n,r)}var D;(function(s){s.assertEqual=r=>r;function e(r){}s.assertIs=e;function t(r){throw new Error}s.assertNever=t,s.arrayToEnum=r=>{const a={};for(const i of r)a[i]=i;return a},s.getValidEnumValues=r=>{const a=s.objectKeys(r).filter(o=>typeof r[r[o]]!="number"),i={};for(const o of a)i[o]=r[o];return s.objectValues(i)},s.objectValues=r=>s.objectKeys(r).map(function(a){return r[a]}),s.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const a=[];for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&a.push(i);return a},s.find=(r,a)=>{for(const i of r)if(a(i))return i},s.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function n(r,a=" | "){return r.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}s.joinValues=n,s.jsonStringifyReplacer=(r,a)=>typeof a=="bigint"?a.toString():a})(D||(D={}));var hs;(function(s){s.mergeShapes=(e,t)=>({...e,...t})})(hs||(hs={}));const y=D.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Oe=s=>{switch(typeof s){case"undefined":return y.undefined;case"string":return y.string;case"number":return isNaN(s)?y.nan:y.number;case"boolean":return y.boolean;case"function":return y.function;case"bigint":return y.bigint;case"symbol":return y.symbol;case"object":return Array.isArray(s)?y.array:s===null?y.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?y.promise:typeof Map<"u"&&s instanceof Map?y.map:typeof Set<"u"&&s instanceof Set?y.set:typeof Date<"u"&&s instanceof Date?y.date:y.object;default:return y.unknown}},h=D.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),so=s=>JSON.stringify(s,null,2).replace(/"([^"]+)":/g,"$1:");class de extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},n={_errors:[]},r=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(r);else if(i.code==="invalid_return_type")r(i.returnTypeError);else if(i.code==="invalid_arguments")r(i.argumentsError);else if(i.path.length===0)n._errors.push(t(i));else{let o=n,l=0;for(;l<i.path.length;){const c=i.path[l];l===i.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(t(i))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return r(this),n}static assert(e){if(!(e instanceof de))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,D.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}de.create=s=>new de(s);const dt=(s,e)=>{let t;switch(s.code){case h.invalid_type:s.received===y.undefined?t="Required":t=`Expected ${s.expected}, received ${s.received}`;break;case h.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(s.expected,D.jsonStringifyReplacer)}`;break;case h.unrecognized_keys:t=`Unrecognized key(s) in object: ${D.joinValues(s.keys,", ")}`;break;case h.invalid_union:t="Invalid input";break;case h.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${D.joinValues(s.options)}`;break;case h.invalid_enum_value:t=`Invalid enum value. Expected ${D.joinValues(s.options)}, received '${s.received}'`;break;case h.invalid_arguments:t="Invalid function arguments";break;case h.invalid_return_type:t="Invalid function return type";break;case h.invalid_date:t="Invalid date";break;case h.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(t=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?t=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?t=`Invalid input: must end with "${s.validation.endsWith}"`:D.assertNever(s.validation):s.validation!=="regex"?t=`Invalid ${s.validation}`:t="Invalid";break;case h.too_small:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:t="Invalid input";break;case h.too_big:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?t=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:t="Invalid input";break;case h.custom:t="Invalid input";break;case h.invalid_intersection_types:t="Intersection results could not be merged";break;case h.not_multiple_of:t=`Number must be a multiple of ${s.multipleOf}`;break;case h.not_finite:t="Number must be finite";break;default:t=e.defaultError,D.assertNever(s)}return{message:t}};let Ta=dt;function ro(s){Ta=s}function xn(){return Ta}const wn=s=>{const{data:e,path:t,errorMaps:n,issueData:r}=s,a=[...t,...r.path||[]],i={...r,path:a};if(r.message!==void 0)return{...r,path:a,message:r.message};let o="";const l=n.filter(c=>!!c).slice().reverse();for(const c of l)o=c(i,{data:e,defaultError:o}).message;return{...r,path:a,message:o}},ao=[];function p(s,e){const t=xn(),n=wn({issueData:e,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,t,t===dt?void 0:dt].filter(r=>!!r)});s.common.issues.push(n)}class re{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if(r.status==="aborted")return C;r.status==="dirty"&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const r of t){const a=await r.key,i=await r.value;n.push({key:a,value:i})}return re.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:a,value:i}=r;if(a.status==="aborted"||i.status==="aborted")return C;a.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof i.value<"u"||r.alwaysSet)&&(n[a.value]=i.value)}return{status:e.value,value:n}}}const C=Object.freeze({status:"aborted"}),rt=s=>({status:"dirty",value:s}),ae=s=>({status:"valid",value:s}),ms=s=>s.status==="aborted",ps=s=>s.status==="dirty",Ge=s=>s.status==="valid",jt=s=>typeof Promise<"u"&&s instanceof Promise;function kn(s,e,t,n){if(typeof e=="function"?s!==e||!0:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(s)}function Ea(s,e,t,n,r){if(typeof e=="function"?s!==e||!0:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(s,t),t}var x;(function(s){s.errToObj=e=>typeof e=="string"?{message:e}:e||{},s.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(x||(x={}));var Pt,Tt;class Te{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const dr=(s,e)=>{if(Ge(e))return{success:!0,data:e.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new de(s.common.issues);return this._error=t,this._error}}};function E(s){if(!s)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:r}=s;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(i,o)=>{var l,c;const{message:u}=s;return i.code==="invalid_enum_value"?{message:u??o.defaultError}:typeof o.data>"u"?{message:(l=u??n)!==null&&l!==void 0?l:o.defaultError}:i.code!=="invalid_type"?{message:o.defaultError}:{message:(c=u??t)!==null&&c!==void 0?c:o.defaultError}},description:r}}class j{get description(){return this._def.description}_getType(e){return Oe(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Oe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new re,ctx:{common:e.parent.common,data:e.data,parsedType:Oe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(jt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oe(e)},a=this._parseSync({data:e,path:r.path,parent:r});return dr(r,a)}"~validate"(e){var t,n;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oe(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:r});return Ge(a)?{value:a.value}:{issues:r.common.issues}}catch(a){!((n=(t=a==null?void 0:a.message)===null||t===void 0?void 0:t.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(a=>Ge(a)?{value:a.value}:{issues:r.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Oe(e)},r=this._parse({data:e,path:n.path,parent:n}),a=await(jt(r)?r:Promise.resolve(r));return dr(n,a)}refine(e,t){const n=r=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,a)=>{const i=e(r),o=()=>a.addIssue({code:h.custom,...n(r)});return typeof Promise<"u"&&i instanceof Promise?i.then(l=>l?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,t){return this._refinement((n,r)=>e(n)?!0:(r.addIssue(typeof t=="function"?t(n,r):t),!1))}_refinement(e){return new xe({schema:this,typeName:m.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Pe.create(this,this._def)}nullable(){return De.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ve.create(this)}promise(){return ht.create(this,this._def)}or(e){return Zt.create([this,e],this._def)}and(e){return Dt.create(this,e,this._def)}transform(e){return new xe({...E(this._def),schema:this,typeName:m.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new zt({...E(this._def),innerType:this,defaultValue:t,typeName:m.ZodDefault})}brand(){return new Bs({typeName:m.ZodBranded,type:this,...E(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Wt({...E(this._def),innerType:this,catchValue:t,typeName:m.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Qt.create(this,e)}readonly(){return Gt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const io=/^c[^\s-]{8,}$/i,oo=/^[0-9a-z]+$/,lo=/^[0-9A-HJKMNP-TV-Z]{26}$/i,co=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,uo=/^[a-z0-9_-]{21}$/i,fo=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ho=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,mo=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,po="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Kn;const go=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,yo=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,_o=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,bo=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,vo=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,xo=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Na="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",wo=new RegExp(`^${Na}$`);function Ra(s){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return s.precision?e=`${e}\\.\\d{${s.precision}}`:s.precision==null&&(e=`${e}(\\.\\d+)?`),e}function ko(s){return new RegExp(`^${Ra(s)}$`)}function Ia(s){let e=`${Na}T${Ra(s)}`;const t=[];return t.push(s.local?"Z?":"Z"),s.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function So(s,e){return!!((e==="v4"||!e)&&go.test(s)||(e==="v6"||!e)&&_o.test(s))}function Ao(s,e){if(!fo.test(s))return!1;try{const[t]=s.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),r=JSON.parse(atob(n));return!(typeof r!="object"||r===null||!r.typ||!r.alg||e&&r.alg!==e)}catch{return!1}}function Co(s,e){return!!((e==="v4"||!e)&&yo.test(s)||(e==="v6"||!e)&&bo.test(s))}class be extends j{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==y.string){const a=this._getOrReturnCtx(e);return p(a,{code:h.invalid_type,expected:y.string,received:a.parsedType}),C}const n=new re;let r;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(r=this._getOrReturnCtx(e,r),p(r,{code:h.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(r=this._getOrReturnCtx(e,r),p(r,{code:h.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const i=e.data.length>a.value,o=e.data.length<a.value;(i||o)&&(r=this._getOrReturnCtx(e,r),i?p(r,{code:h.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&p(r,{code:h.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")mo.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"email",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Kn||(Kn=new RegExp(po,"u")),Kn.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"emoji",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")co.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"uuid",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")uo.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"nanoid",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")io.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"cuid",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")oo.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"cuid2",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")lo.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"ulid",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),p(r,{validation:"url",code:h.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"regex",code:h.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(r=this._getOrReturnCtx(e,r),p(r,{code:h.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(r=this._getOrReturnCtx(e,r),p(r,{code:h.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(r=this._getOrReturnCtx(e,r),p(r,{code:h.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?Ia(a).test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{code:h.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?wo.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{code:h.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?ko(a).test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{code:h.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?ho.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"duration",code:h.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?So(e.data,a.version)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"ip",code:h.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?Ao(e.data,a.alg)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"jwt",code:h.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?Co(e.data,a.version)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"cidr",code:h.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?vo.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"base64",code:h.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?xo.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"base64url",code:h.invalid_string,message:a.message}),n.dirty()):D.assertNever(a);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(r=>e.test(r),{validation:t,code:h.invalid_string,...x.errToObj(n)})}_addCheck(e){return new be({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...x.errToObj(e)})}url(e){return this._addCheck({kind:"url",...x.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...x.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...x.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...x.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...x.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...x.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...x.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...x.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...x.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...x.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...x.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...x.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...x.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...x.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...x.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...x.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...x.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...x.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...x.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...x.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...x.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...x.errToObj(t)})}nonempty(e){return this.min(1,x.errToObj(e))}trim(){return new be({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new be({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new be({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}be.create=s=>{var e;return new be({checks:[],typeName:m.ZodString,coerce:(e=s==null?void 0:s.coerce)!==null&&e!==void 0?e:!1,...E(s)})};function Po(s,e){const t=(s.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,r=t>n?t:n,a=parseInt(s.toFixed(r).replace(".","")),i=parseInt(e.toFixed(r).replace(".",""));return a%i/Math.pow(10,r)}class $e extends j{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==y.number){const a=this._getOrReturnCtx(e);return p(a,{code:h.invalid_type,expected:y.number,received:a.parsedType}),C}let n;const r=new re;for(const a of this._def.checks)a.kind==="int"?D.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),p(n,{code:h.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),p(n,{code:h.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),p(n,{code:h.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):a.kind==="multipleOf"?Po(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),p(n,{code:h.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),p(n,{code:h.not_finite,message:a.message}),r.dirty()):D.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,x.toString(t))}gt(e,t){return this.setLimit("min",e,!1,x.toString(t))}lte(e,t){return this.setLimit("max",e,!0,x.toString(t))}lt(e,t){return this.setLimit("max",e,!1,x.toString(t))}setLimit(e,t,n,r){return new $e({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:x.toString(r)}]})}_addCheck(e){return new $e({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:x.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:x.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:x.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:x.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:x.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:x.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:x.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:x.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:x.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&D.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}$e.create=s=>new $e({checks:[],typeName:m.ZodNumber,coerce:(s==null?void 0:s.coerce)||!1,...E(s)});class Fe extends j{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==y.bigint)return this._getInvalidInput(e);let n;const r=new re;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),p(n,{code:h.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),p(n,{code:h.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),p(n,{code:h.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):D.assertNever(a);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return p(t,{code:h.invalid_type,expected:y.bigint,received:t.parsedType}),C}gte(e,t){return this.setLimit("min",e,!0,x.toString(t))}gt(e,t){return this.setLimit("min",e,!1,x.toString(t))}lte(e,t){return this.setLimit("max",e,!0,x.toString(t))}lt(e,t){return this.setLimit("max",e,!1,x.toString(t))}setLimit(e,t,n,r){return new Fe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:x.toString(r)}]})}_addCheck(e){return new Fe({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:x.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:x.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:x.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:x.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:x.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Fe.create=s=>{var e;return new Fe({checks:[],typeName:m.ZodBigInt,coerce:(e=s==null?void 0:s.coerce)!==null&&e!==void 0?e:!1,...E(s)})};class Mt extends j{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==y.boolean){const n=this._getOrReturnCtx(e);return p(n,{code:h.invalid_type,expected:y.boolean,received:n.parsedType}),C}return ae(e.data)}}Mt.create=s=>new Mt({typeName:m.ZodBoolean,coerce:(s==null?void 0:s.coerce)||!1,...E(s)});class Je extends j{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==y.date){const a=this._getOrReturnCtx(e);return p(a,{code:h.invalid_type,expected:y.date,received:a.parsedType}),C}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return p(a,{code:h.invalid_date}),C}const n=new re;let r;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(r=this._getOrReturnCtx(e,r),p(r,{code:h.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(r=this._getOrReturnCtx(e,r),p(r,{code:h.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):D.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Je({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:x.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:x.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Je.create=s=>new Je({checks:[],coerce:(s==null?void 0:s.coerce)||!1,typeName:m.ZodDate,...E(s)});class Sn extends j{_parse(e){if(this._getType(e)!==y.symbol){const n=this._getOrReturnCtx(e);return p(n,{code:h.invalid_type,expected:y.symbol,received:n.parsedType}),C}return ae(e.data)}}Sn.create=s=>new Sn({typeName:m.ZodSymbol,...E(s)});class $t extends j{_parse(e){if(this._getType(e)!==y.undefined){const n=this._getOrReturnCtx(e);return p(n,{code:h.invalid_type,expected:y.undefined,received:n.parsedType}),C}return ae(e.data)}}$t.create=s=>new $t({typeName:m.ZodUndefined,...E(s)});class Ft extends j{_parse(e){if(this._getType(e)!==y.null){const n=this._getOrReturnCtx(e);return p(n,{code:h.invalid_type,expected:y.null,received:n.parsedType}),C}return ae(e.data)}}Ft.create=s=>new Ft({typeName:m.ZodNull,...E(s)});class ft extends j{constructor(){super(...arguments),this._any=!0}_parse(e){return ae(e.data)}}ft.create=s=>new ft({typeName:m.ZodAny,...E(s)});class We extends j{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ae(e.data)}}We.create=s=>new We({typeName:m.ZodUnknown,...E(s)});class je extends j{_parse(e){const t=this._getOrReturnCtx(e);return p(t,{code:h.invalid_type,expected:y.never,received:t.parsedType}),C}}je.create=s=>new je({typeName:m.ZodNever,...E(s)});class An extends j{_parse(e){if(this._getType(e)!==y.undefined){const n=this._getOrReturnCtx(e);return p(n,{code:h.invalid_type,expected:y.void,received:n.parsedType}),C}return ae(e.data)}}An.create=s=>new An({typeName:m.ZodVoid,...E(s)});class ve extends j{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==y.array)return p(t,{code:h.invalid_type,expected:y.array,received:t.parsedType}),C;if(r.exactLength!==null){const i=t.data.length>r.exactLength.value,o=t.data.length<r.exactLength.value;(i||o)&&(p(t,{code:i?h.too_big:h.too_small,minimum:o?r.exactLength.value:void 0,maximum:i?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(p(t,{code:h.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(p(t,{code:h.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((i,o)=>r.type._parseAsync(new Te(t,i,t.path,o)))).then(i=>re.mergeArray(n,i));const a=[...t.data].map((i,o)=>r.type._parseSync(new Te(t,i,t.path,o)));return re.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new ve({...this._def,minLength:{value:e,message:x.toString(t)}})}max(e,t){return new ve({...this._def,maxLength:{value:e,message:x.toString(t)}})}length(e,t){return new ve({...this._def,exactLength:{value:e,message:x.toString(t)}})}nonempty(e){return this.min(1,e)}}ve.create=(s,e)=>new ve({type:s,minLength:null,maxLength:null,exactLength:null,typeName:m.ZodArray,...E(e)});function nt(s){if(s instanceof G){const e={};for(const t in s.shape){const n=s.shape[t];e[t]=Pe.create(nt(n))}return new G({...s._def,shape:()=>e})}else return s instanceof ve?new ve({...s._def,type:nt(s.element)}):s instanceof Pe?Pe.create(nt(s.unwrap())):s instanceof De?De.create(nt(s.unwrap())):s instanceof Ee?Ee.create(s.items.map(e=>nt(e))):s}class G extends j{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=D.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==y.object){const c=this._getOrReturnCtx(e);return p(c,{code:h.invalid_type,expected:y.object,received:c.parsedType}),C}const{status:n,ctx:r}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof je&&this._def.unknownKeys==="strip"))for(const c in r.data)i.includes(c)||o.push(c);const l=[];for(const c of i){const u=a[c],f=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Te(r,f,r.path,c)),alwaysSet:c in r.data})}if(this._def.catchall instanceof je){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of o)l.push({key:{status:"valid",value:u},value:{status:"valid",value:r.data[u]}});else if(c==="strict")o.length>0&&(p(r,{code:h.unrecognized_keys,keys:o}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of o){const f=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Te(r,f,r.path,u)),alwaysSet:u in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const f=await u.key,g=await u.value;c.push({key:f,value:g,alwaysSet:u.alwaysSet})}return c}).then(c=>re.mergeObjectSync(n,c)):re.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return x.errToObj,new G({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var r,a,i,o;const l=(i=(a=(r=this._def).errorMap)===null||a===void 0?void 0:a.call(r,t,n).message)!==null&&i!==void 0?i:n.defaultError;return t.code==="unrecognized_keys"?{message:(o=x.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new G({...this._def,unknownKeys:"strip"})}passthrough(){return new G({...this._def,unknownKeys:"passthrough"})}extend(e){return new G({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new G({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:m.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new G({...this._def,catchall:e})}pick(e){const t={};return D.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new G({...this._def,shape:()=>t})}omit(e){const t={};return D.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new G({...this._def,shape:()=>t})}deepPartial(){return nt(this)}partial(e){const t={};return D.objectKeys(this.shape).forEach(n=>{const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()}),new G({...this._def,shape:()=>t})}required(e){const t={};return D.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof Pe;)a=a._def.innerType;t[n]=a}}),new G({...this._def,shape:()=>t})}keyof(){return Oa(D.objectKeys(this.shape))}}G.create=(s,e)=>new G({shape:()=>s,unknownKeys:"strip",catchall:je.create(),typeName:m.ZodObject,...E(e)});G.strictCreate=(s,e)=>new G({shape:()=>s,unknownKeys:"strict",catchall:je.create(),typeName:m.ZodObject,...E(e)});G.lazycreate=(s,e)=>new G({shape:s,unknownKeys:"strip",catchall:je.create(),typeName:m.ZodObject,...E(e)});class Zt extends j{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function r(a){for(const o of a)if(o.result.status==="valid")return o.result;for(const o of a)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const i=a.map(o=>new de(o.ctx.common.issues));return p(t,{code:h.invalid_union,unionErrors:i}),C}if(t.common.async)return Promise.all(n.map(async a=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(r);{let a;const i=[];for(const l of n){const c={...t,common:{...t.common,issues:[]},parent:null},u=l._parseSync({data:t.data,path:t.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!a&&(a={result:u,ctx:c}),c.common.issues.length&&i.push(c.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(l=>new de(l));return p(t,{code:h.invalid_union,unionErrors:o}),C}}get options(){return this._def.options}}Zt.create=(s,e)=>new Zt({options:s,typeName:m.ZodUnion,...E(e)});const Ie=s=>s instanceof Bt?Ie(s.schema):s instanceof xe?Ie(s.innerType()):s instanceof Ut?[s.value]:s instanceof Ze?s.options:s instanceof Vt?D.objectValues(s.enum):s instanceof zt?Ie(s._def.innerType):s instanceof $t?[void 0]:s instanceof Ft?[null]:s instanceof Pe?[void 0,...Ie(s.unwrap())]:s instanceof De?[null,...Ie(s.unwrap())]:s instanceof Bs||s instanceof Gt?Ie(s.unwrap()):s instanceof Wt?Ie(s._def.innerType):[];class Fn extends j{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==y.object)return p(t,{code:h.invalid_type,expected:y.object,received:t.parsedType}),C;const n=this.discriminator,r=t.data[n],a=this.optionsMap.get(r);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(p(t,{code:h.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),C)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const a of t){const i=Ie(a.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of i){if(r.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);r.set(o,a)}}return new Fn({typeName:m.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...E(n)})}}function gs(s,e){const t=Oe(s),n=Oe(e);if(s===e)return{valid:!0,data:s};if(t===y.object&&n===y.object){const r=D.objectKeys(e),a=D.objectKeys(s).filter(o=>r.indexOf(o)!==-1),i={...s,...e};for(const o of a){const l=gs(s[o],e[o]);if(!l.valid)return{valid:!1};i[o]=l.data}return{valid:!0,data:i}}else if(t===y.array&&n===y.array){if(s.length!==e.length)return{valid:!1};const r=[];for(let a=0;a<s.length;a++){const i=s[a],o=e[a],l=gs(i,o);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return t===y.date&&n===y.date&&+s==+e?{valid:!0,data:s}:{valid:!1}}class Dt extends j{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(a,i)=>{if(ms(a)||ms(i))return C;const o=gs(a.value,i.value);return o.valid?((ps(a)||ps(i))&&t.dirty(),{status:t.value,value:o.data}):(p(n,{code:h.invalid_intersection_types}),C)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,i])=>r(a,i)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Dt.create=(s,e,t)=>new Dt({left:s,right:e,typeName:m.ZodIntersection,...E(t)});class Ee extends j{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==y.array)return p(n,{code:h.invalid_type,expected:y.array,received:n.parsedType}),C;if(n.data.length<this._def.items.length)return p(n,{code:h.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),C;!this._def.rest&&n.data.length>this._def.items.length&&(p(n,{code:h.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...n.data].map((i,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new Te(n,i,n.path,o)):null}).filter(i=>!!i);return n.common.async?Promise.all(a).then(i=>re.mergeArray(t,i)):re.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new Ee({...this._def,rest:e})}}Ee.create=(s,e)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ee({items:s,typeName:m.ZodTuple,rest:null,...E(e)})};class Lt extends j{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==y.object)return p(n,{code:h.invalid_type,expected:y.object,received:n.parsedType}),C;const r=[],a=this._def.keyType,i=this._def.valueType;for(const o in n.data)r.push({key:a._parse(new Te(n,o,n.path,o)),value:i._parse(new Te(n,n.data[o],n.path,o)),alwaysSet:o in n.data});return n.common.async?re.mergeObjectAsync(t,r):re.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof j?new Lt({keyType:e,valueType:t,typeName:m.ZodRecord,...E(n)}):new Lt({keyType:be.create(),valueType:e,typeName:m.ZodRecord,...E(t)})}}class Cn extends j{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==y.map)return p(n,{code:h.invalid_type,expected:y.map,received:n.parsedType}),C;const r=this._def.keyType,a=this._def.valueType,i=[...n.data.entries()].map(([o,l],c)=>({key:r._parse(new Te(n,o,n.path,[c,"key"])),value:a._parse(new Te(n,l,n.path,[c,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of i){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return C;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(c.value,u.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const l of i){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return C;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(c.value,u.value)}return{status:t.value,value:o}}}}Cn.create=(s,e,t)=>new Cn({valueType:e,keyType:s,typeName:m.ZodMap,...E(t)});class qe extends j{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==y.set)return p(n,{code:h.invalid_type,expected:y.set,received:n.parsedType}),C;const r=this._def;r.minSize!==null&&n.data.size<r.minSize.value&&(p(n,{code:h.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&n.data.size>r.maxSize.value&&(p(n,{code:h.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const a=this._def.valueType;function i(l){const c=new Set;for(const u of l){if(u.status==="aborted")return C;u.status==="dirty"&&t.dirty(),c.add(u.value)}return{status:t.value,value:c}}const o=[...n.data.values()].map((l,c)=>a._parse(new Te(n,l,n.path,c)));return n.common.async?Promise.all(o).then(l=>i(l)):i(o)}min(e,t){return new qe({...this._def,minSize:{value:e,message:x.toString(t)}})}max(e,t){return new qe({...this._def,maxSize:{value:e,message:x.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}qe.create=(s,e)=>new qe({valueType:s,minSize:null,maxSize:null,typeName:m.ZodSet,...E(e)});class ct extends j{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==y.function)return p(t,{code:h.invalid_type,expected:y.function,received:t.parsedType}),C;function n(o,l){return wn({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,xn(),dt].filter(c=>!!c),issueData:{code:h.invalid_arguments,argumentsError:l}})}function r(o,l){return wn({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,xn(),dt].filter(c=>!!c),issueData:{code:h.invalid_return_type,returnTypeError:l}})}const a={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof ht){const o=this;return ae(async function(...l){const c=new de([]),u=await o._def.args.parseAsync(l,a).catch(_=>{throw c.addIssue(n(l,_)),c}),f=await Reflect.apply(i,this,u);return await o._def.returns._def.type.parseAsync(f,a).catch(_=>{throw c.addIssue(r(f,_)),c})})}else{const o=this;return ae(function(...l){const c=o._def.args.safeParse(l,a);if(!c.success)throw new de([n(l,c.error)]);const u=Reflect.apply(i,this,c.data),f=o._def.returns.safeParse(u,a);if(!f.success)throw new de([r(u,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ct({...this._def,args:Ee.create(e).rest(We.create())})}returns(e){return new ct({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new ct({args:e||Ee.create([]).rest(We.create()),returns:t||We.create(),typeName:m.ZodFunction,...E(n)})}}class Bt extends j{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Bt.create=(s,e)=>new Bt({getter:s,typeName:m.ZodLazy,...E(e)});class Ut extends j{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return p(t,{received:t.data,code:h.invalid_literal,expected:this._def.value}),C}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ut.create=(s,e)=>new Ut({value:s,typeName:m.ZodLiteral,...E(e)});function Oa(s,e){return new Ze({values:s,typeName:m.ZodEnum,...E(e)})}class Ze extends j{constructor(){super(...arguments),Pt.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return p(t,{expected:D.joinValues(n),received:t.parsedType,code:h.invalid_type}),C}if(kn(this,Pt)||Ea(this,Pt,new Set(this._def.values)),!kn(this,Pt).has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return p(t,{received:t.data,code:h.invalid_enum_value,options:n}),C}return ae(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ze.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ze.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}Pt=new WeakMap;Ze.create=Oa;class Vt extends j{constructor(){super(...arguments),Tt.set(this,void 0)}_parse(e){const t=D.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==y.string&&n.parsedType!==y.number){const r=D.objectValues(t);return p(n,{expected:D.joinValues(r),received:n.parsedType,code:h.invalid_type}),C}if(kn(this,Tt)||Ea(this,Tt,new Set(D.getValidEnumValues(this._def.values))),!kn(this,Tt).has(e.data)){const r=D.objectValues(t);return p(n,{received:n.data,code:h.invalid_enum_value,options:r}),C}return ae(e.data)}get enum(){return this._def.values}}Tt=new WeakMap;Vt.create=(s,e)=>new Vt({values:s,typeName:m.ZodNativeEnum,...E(e)});class ht extends j{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==y.promise&&t.common.async===!1)return p(t,{code:h.invalid_type,expected:y.promise,received:t.parsedType}),C;const n=t.parsedType===y.promise?t.data:Promise.resolve(t.data);return ae(n.then(r=>this._def.type.parseAsync(r,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ht.create=(s,e)=>new ht({type:s,typeName:m.ZodPromise,...E(e)});class xe extends j{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===m.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:i=>{p(n,i),i.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),r.type==="preprocess"){const i=r.transform(n.data,a);if(n.common.async)return Promise.resolve(i).then(async o=>{if(t.value==="aborted")return C;const l=await this._def.schema._parseAsync({data:o,path:n.path,parent:n});return l.status==="aborted"?C:l.status==="dirty"||t.value==="dirty"?rt(l.value):l});{if(t.value==="aborted")return C;const o=this._def.schema._parseSync({data:i,path:n.path,parent:n});return o.status==="aborted"?C:o.status==="dirty"||t.value==="dirty"?rt(o.value):o}}if(r.type==="refinement"){const i=o=>{const l=r.refinement(o,a);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?C:(o.status==="dirty"&&t.dirty(),i(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?C:(o.status==="dirty"&&t.dirty(),i(o.value).then(()=>({status:t.value,value:o.value}))))}if(r.type==="transform")if(n.common.async===!1){const i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ge(i))return i;const o=r.transform(i.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(i=>Ge(i)?Promise.resolve(r.transform(i.value,a)).then(o=>({status:t.value,value:o})):i);D.assertNever(r)}}xe.create=(s,e,t)=>new xe({schema:s,typeName:m.ZodEffects,effect:e,...E(t)});xe.createWithPreprocess=(s,e,t)=>new xe({schema:e,effect:{type:"preprocess",transform:s},typeName:m.ZodEffects,...E(t)});class Pe extends j{_parse(e){return this._getType(e)===y.undefined?ae(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Pe.create=(s,e)=>new Pe({innerType:s,typeName:m.ZodOptional,...E(e)});class De extends j{_parse(e){return this._getType(e)===y.null?ae(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}De.create=(s,e)=>new De({innerType:s,typeName:m.ZodNullable,...E(e)});class zt extends j{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===y.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}zt.create=(s,e)=>new zt({innerType:s,typeName:m.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...E(e)});class Wt extends j{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return jt(r)?r.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new de(n.common.issues)},input:n.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new de(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Wt.create=(s,e)=>new Wt({innerType:s,typeName:m.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...E(e)});class Pn extends j{_parse(e){if(this._getType(e)!==y.nan){const n=this._getOrReturnCtx(e);return p(n,{code:h.invalid_type,expected:y.nan,received:n.parsedType}),C}return{status:"valid",value:e.data}}}Pn.create=s=>new Pn({typeName:m.ZodNaN,...E(s)});const To=Symbol("zod_brand");class Bs extends j{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Qt extends j{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?C:a.status==="dirty"?(t.dirty(),rt(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const r=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return r.status==="aborted"?C:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:n.path,parent:n})}}static create(e,t){return new Qt({in:e,out:t,typeName:m.ZodPipeline})}}class Gt extends j{_parse(e){const t=this._def.innerType._parse(e),n=r=>(Ge(r)&&(r.value=Object.freeze(r.value)),r);return jt(t)?t.then(r=>n(r)):n(t)}unwrap(){return this._def.innerType}}Gt.create=(s,e)=>new Gt({innerType:s,typeName:m.ZodReadonly,...E(e)});function fr(s,e){const t=typeof s=="function"?s(e):typeof s=="string"?{message:s}:s;return typeof t=="string"?{message:t}:t}function ja(s,e={},t){return s?ft.create().superRefine((n,r)=>{var a,i;const o=s(n);if(o instanceof Promise)return o.then(l=>{var c,u;if(!l){const f=fr(e,n),g=(u=(c=f.fatal)!==null&&c!==void 0?c:t)!==null&&u!==void 0?u:!0;r.addIssue({code:"custom",...f,fatal:g})}});if(!o){const l=fr(e,n),c=(i=(a=l.fatal)!==null&&a!==void 0?a:t)!==null&&i!==void 0?i:!0;r.addIssue({code:"custom",...l,fatal:c})}}):ft.create()}const Eo={object:G.lazycreate};var m;(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(m||(m={}));const No=(s,e={message:`Input not instance of ${s.name}`})=>ja(t=>t instanceof s,e),Ma=be.create,$a=$e.create,Ro=Pn.create,Io=Fe.create,Fa=Mt.create,Oo=Je.create,jo=Sn.create,Mo=$t.create,$o=Ft.create,Fo=ft.create,Zo=We.create,Do=je.create,Lo=An.create,Bo=ve.create,Uo=G.create,Vo=G.strictCreate,zo=Zt.create,Wo=Fn.create,Go=Dt.create,Jo=Ee.create,qo=Lt.create,Ho=Cn.create,Xo=qe.create,Ko=ct.create,Qo=Bt.create,Yo=Ut.create,el=Ze.create,tl=Vt.create,nl=ht.create,hr=xe.create,sl=Pe.create,rl=De.create,al=xe.createWithPreprocess,il=Qt.create,ol=()=>Ma().optional(),ll=()=>$a().optional(),cl=()=>Fa().optional(),ul={string:s=>be.create({...s,coerce:!0}),number:s=>$e.create({...s,coerce:!0}),boolean:s=>Mt.create({...s,coerce:!0}),bigint:s=>Fe.create({...s,coerce:!0}),date:s=>Je.create({...s,coerce:!0})},dl=C;var O=Object.freeze({__proto__:null,defaultErrorMap:dt,setErrorMap:ro,getErrorMap:xn,makeIssue:wn,EMPTY_PATH:ao,addIssueToContext:p,ParseStatus:re,INVALID:C,DIRTY:rt,OK:ae,isAborted:ms,isDirty:ps,isValid:Ge,isAsync:jt,get util(){return D},get objectUtil(){return hs},ZodParsedType:y,getParsedType:Oe,ZodType:j,datetimeRegex:Ia,ZodString:be,ZodNumber:$e,ZodBigInt:Fe,ZodBoolean:Mt,ZodDate:Je,ZodSymbol:Sn,ZodUndefined:$t,ZodNull:Ft,ZodAny:ft,ZodUnknown:We,ZodNever:je,ZodVoid:An,ZodArray:ve,ZodObject:G,ZodUnion:Zt,ZodDiscriminatedUnion:Fn,ZodIntersection:Dt,ZodTuple:Ee,ZodRecord:Lt,ZodMap:Cn,ZodSet:qe,ZodFunction:ct,ZodLazy:Bt,ZodLiteral:Ut,ZodEnum:Ze,ZodNativeEnum:Vt,ZodPromise:ht,ZodEffects:xe,ZodTransformer:xe,ZodOptional:Pe,ZodNullable:De,ZodDefault:zt,ZodCatch:Wt,ZodNaN:Pn,BRAND:To,ZodBranded:Bs,ZodPipeline:Qt,ZodReadonly:Gt,custom:ja,Schema:j,ZodSchema:j,late:Eo,get ZodFirstPartyTypeKind(){return m},coerce:ul,any:Fo,array:Bo,bigint:Io,boolean:Fa,date:Oo,discriminatedUnion:Wo,effect:hr,enum:el,function:Ko,instanceof:No,intersection:Go,lazy:Qo,literal:Yo,map:Ho,nan:Ro,nativeEnum:tl,never:Do,null:$o,nullable:rl,number:$a,object:Uo,oboolean:cl,onumber:ll,optional:sl,ostring:ol,pipeline:il,preprocess:al,promise:nl,record:qo,set:Xo,strictObject:Vo,string:Ma,symbol:jo,transformer:hr,tuple:Jo,undefined:Mo,union:zo,unknown:Zo,void:Lo,NEVER:dl,ZodIssueCode:h,quotelessJson:so,ZodError:de});function fl(){return{}}function hl(s,e){var n,r;const t={type:"array"};return((r=(n=s.type)==null?void 0:n._def)==null?void 0:r.typeName)!==m.ZodAny&&(t.items=L(s.type._def,{...e,currentPath:[...e.currentPath,"items"]})),s.minLength&&V(t,"minItems",s.minLength.value,s.minLength.message,e),s.maxLength&&V(t,"maxItems",s.maxLength.value,s.maxLength.message,e),s.exactLength&&(V(t,"minItems",s.exactLength.value,s.exactLength.message,e),V(t,"maxItems",s.exactLength.value,s.exactLength.message,e)),t}function ml(s,e){const t={type:"integer",format:"int64"};if(!s.checks)return t;for(const n of s.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?V(t,"minimum",n.value,n.message,e):V(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),V(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?V(t,"maximum",n.value,n.message,e):V(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),V(t,"maximum",n.value,n.message,e));break;case"multipleOf":V(t,"multipleOf",n.value,n.message,e);break}return t}function pl(){return{type:"boolean"}}function gl(s,e){return L(s.type._def,e)}const yl=(s,e)=>L(s.innerType._def,e);function Za(s,e,t){const n=t??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((r,a)=>Za(s,e,r))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return _l(s,e)}}const _l=(s,e)=>{const t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(const n of s.checks)switch(n.kind){case"min":V(t,"minimum",n.value,n.message,e);break;case"max":V(t,"maximum",n.value,n.message,e);break}return t};function bl(s,e){return{...L(s.innerType._def,e),default:s.defaultValue()}}function vl(s,e,t){return e.effectStrategy==="input"?L(s.schema._def,e,t):{}}function xl(s){return{type:"string",enum:[...s.values]}}const wl=s=>"type"in s&&s.type==="string"?!1:"allOf"in s;function kl(s,e){const t=[L(s.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),L(s.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const r=[];return t.forEach(a=>{if(wl(a))r.push(...a.allOf),a.unevaluatedProperties===void 0&&(n=void 0);else{let i=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:o,...l}=a;i=l}else n=void 0;r.push(i)}}),r.length?{allOf:r,...n}:void 0}function Sl(s,e){const t=typeof s.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(s.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[s.value]}:{type:t==="bigint"?"integer":t,const:s.value}}let Qn;const Ue={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Qn===void 0&&(Qn=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Qn),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function Da(s,e){const t={type:"string"};function n(r){return e.patternStrategy==="escape"?Al(r):r}if(s.checks)for(const r of s.checks)switch(r.kind){case"min":V(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,r.value):r.value,r.message,e);break;case"max":V(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":he(t,"email",r.message,e);break;case"format:idn-email":he(t,"idn-email",r.message,e);break;case"pattern:zod":me(t,Ue.email,r.message,e);break}break;case"url":he(t,"uri",r.message,e);break;case"uuid":he(t,"uuid",r.message,e);break;case"regex":me(t,r.regex,r.message,e);break;case"cuid":me(t,Ue.cuid,r.message,e);break;case"cuid2":me(t,Ue.cuid2,r.message,e);break;case"startsWith":me(t,RegExp(`^${n(r.value)}`),r.message,e);break;case"endsWith":me(t,RegExp(`${n(r.value)}$`),r.message,e);break;case"datetime":he(t,"date-time",r.message,e);break;case"date":he(t,"date",r.message,e);break;case"time":he(t,"time",r.message,e);break;case"duration":he(t,"duration",r.message,e);break;case"length":V(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,r.value):r.value,r.message,e),V(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,r.value):r.value,r.message,e);break;case"includes":{me(t,RegExp(n(r.value)),r.message,e);break}case"ip":{r.version!=="v6"&&he(t,"ipv4",r.message,e),r.version!=="v4"&&he(t,"ipv6",r.message,e);break}case"emoji":me(t,Ue.emoji,r.message,e);break;case"ulid":{me(t,Ue.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{he(t,"binary",r.message,e);break}case"contentEncoding:base64":{V(t,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{me(t,Ue.base64,r.message,e);break}}break}case"nanoid":me(t,Ue.nanoid,r.message,e)}return t}const Al=s=>Array.from(s).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),he=(s,e,t,n)=>{var r;s.format||(r=s.anyOf)!=null&&r.some(a=>a.format)?(s.anyOf||(s.anyOf=[]),s.format&&(s.anyOf.push({format:s.format,...s.errorMessage&&n.errorMessages&&{errorMessage:{format:s.errorMessage.format}}}),delete s.format,s.errorMessage&&(delete s.errorMessage.format,Object.keys(s.errorMessage).length===0&&delete s.errorMessage)),s.anyOf.push({format:e,...t&&n.errorMessages&&{errorMessage:{format:t}}})):V(s,"format",e,t,n)},me=(s,e,t,n)=>{var r;s.pattern||(r=s.allOf)!=null&&r.some(a=>a.pattern)?(s.allOf||(s.allOf=[]),s.pattern&&(s.allOf.push({pattern:s.pattern,...s.errorMessage&&n.errorMessages&&{errorMessage:{pattern:s.errorMessage.pattern}}}),delete s.pattern,s.errorMessage&&(delete s.errorMessage.pattern,Object.keys(s.errorMessage).length===0&&delete s.errorMessage)),s.allOf.push({pattern:mr(e,n),...t&&n.errorMessages&&{errorMessage:{pattern:t}}})):V(s,"pattern",mr(e,n),t,n)},mr=(s,e)=>{var c;const t=typeof s=="function"?s():s;if(!e.applyRegexFlags||!t.flags)return t.source;const n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=n.i?t.source.toLowerCase():t.source;let a="",i=!1,o=!1,l=!1;for(let u=0;u<r.length;u++){if(i){a+=r[u],i=!1;continue}if(n.i){if(o){if(r[u].match(/[a-z]/)){l?(a+=r[u],a+=`${r[u-2]}-${r[u]}`.toUpperCase(),l=!1):r[u+1]==="-"&&((c=r[u+2])!=null&&c.match(/[a-z]/))?(a+=r[u],l=!0):a+=`${r[u]}${r[u].toUpperCase()}`;continue}}else if(r[u].match(/[a-z]/)){a+=`[${r[u]}${r[u].toUpperCase()}]`;continue}}if(n.m){if(r[u]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[u]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[u]==="."){a+=o?`${r[u]}\r
`:`[${r[u]}\r
]`;continue}a+=r[u],r[u]==="\\"?i=!0:o&&r[u]==="]"?o=!1:!o&&r[u]==="["&&(o=!0)}try{const u=new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return a};function La(s,e){var n,r,a,i;if(e.target==="openApi3"&&((n=s.keyType)==null?void 0:n._def.typeName)===m.ZodEnum)return{type:"object",required:s.keyType._def.values,properties:s.keyType._def.values.reduce((o,l)=>({...o,[l]:L(s.valueType._def,{...e,currentPath:[...e.currentPath,"properties",l]})??{}}),{}),additionalProperties:!1};const t={type:"object",additionalProperties:L(s.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return t;if(((r=s.keyType)==null?void 0:r._def.typeName)===m.ZodString&&((a=s.keyType._def.checks)!=null&&a.length)){const o=Object.entries(Da(s.keyType._def,e)).reduce((l,[c,u])=>c==="type"?l:{...l,[c]:u},{});return{...t,propertyNames:o}}else if(((i=s.keyType)==null?void 0:i._def.typeName)===m.ZodEnum)return{...t,propertyNames:{enum:s.keyType._def.values}};return t}function Cl(s,e){if(e.mapStrategy==="record")return La(s,e);const t=L(s.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=L(s.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,n],minItems:2,maxItems:2}}}function Pl(s){const e=s.values,n=Object.keys(s.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),r=Array.from(new Set(n.map(a=>typeof a)));return{type:r.length===1?r[0]==="string"?"string":"number":["string","number"],enum:n}}function Tl(){return{not:{}}}function El(s){return s.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Tn={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Nl(s,e){if(e.target==="openApi3")return pr(s,e);const t=s.options instanceof Map?Array.from(s.options.values()):s.options;if(t.every(n=>n._def.typeName in Tn&&(!n._def.checks||!n._def.checks.length))){const n=t.reduce((r,a)=>{const i=Tn[a._def.typeName];return i&&!r.includes(i)?[...r,i]:r},[]);return{type:n.length>1?n:n[0]}}else if(t.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){const n=t.reduce((r,a)=>{const i=typeof a._def.value;switch(i){case"string":case"number":case"boolean":return[...r,i];case"bigint":return[...r,"integer"];case"object":if(a._def.value===null)return[...r,"null"];case"symbol":case"undefined":case"function":default:return r}},[]);if(n.length===t.length){const r=n.filter((a,i,o)=>o.indexOf(a)===i);return{type:r.length>1?r:r[0],enum:t.reduce((a,i)=>a.includes(i._def.value)?a:[...a,i._def.value],[])}}}else if(t.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((n,r)=>[...n,...r._def.values.filter(a=>!n.includes(a))],[])};return pr(s,e)}const pr=(s,e)=>{const t=(s.options instanceof Map?Array.from(s.options.values()):s.options).map((n,r)=>L(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${r}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return t.length?{anyOf:t}:void 0};function Rl(s,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(s.innerType._def.typeName)&&(!s.innerType._def.checks||!s.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:Tn[s.innerType._def.typeName],nullable:!0}:{type:[Tn[s.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const n=L(s.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}const t=L(s.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function Il(s,e){const t={type:"number"};if(!s.checks)return t;for(const n of s.checks)switch(n.kind){case"int":t.type="integer",Pa(t,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?V(t,"minimum",n.value,n.message,e):V(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),V(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?V(t,"maximum",n.value,n.message,e):V(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),V(t,"maximum",n.value,n.message,e));break;case"multipleOf":V(t,"multipleOf",n.value,n.message,e);break}return t}function Ol(s,e){return e.removeAdditionalStrategy==="strict"?s.catchall._def.typeName==="ZodNever"?s.unknownKeys!=="strict":L(s.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:s.catchall._def.typeName==="ZodNever"?s.unknownKeys==="passthrough":L(s.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function jl(s,e){const t={type:"object",...Object.entries(s.shape()).reduce((n,[r,a])=>{if(a===void 0||a._def===void 0)return n;const i=L(a._def,{...e,currentPath:[...e.currentPath,"properties",r],propertyPath:[...e.currentPath,"properties",r]});return i===void 0?n:{properties:{...n.properties,[r]:i},required:a.isOptional()&&!e.openaiStrictMode?n.required:[...n.required,r]}},{properties:{},required:[]}),additionalProperties:Ol(s,e)};return t.required.length||delete t.required,t}const Ml=(s,e)=>{var n;if(e.currentPath.toString()===((n=e.propertyPath)==null?void 0:n.toString()))return L(s.innerType._def,e);const t=L(s.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:{}},t]}:{}},$l=(s,e)=>{if(e.pipeStrategy==="input")return L(s.in._def,e);if(e.pipeStrategy==="output")return L(s.out._def,e);const t=L(s.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=L(s.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,n].filter(r=>r!==void 0)}};function Fl(s,e){return L(s.type._def,e)}function Zl(s,e){const n={type:"array",uniqueItems:!0,items:L(s.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return s.minSize&&V(n,"minItems",s.minSize.value,s.minSize.message,e),s.maxSize&&V(n,"maxItems",s.maxSize.value,s.maxSize.message,e),n}function Dl(s,e){return s.rest?{type:"array",minItems:s.items.length,items:s.items.map((t,n)=>L(t._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((t,n)=>n===void 0?t:[...t,n],[]),additionalItems:L(s.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:s.items.length,maxItems:s.items.length,items:s.items.map((t,n)=>L(t._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((t,n)=>n===void 0?t:[...t,n],[])}}function Ll(){return{not:{}}}function Bl(){return{}}const Ul=(s,e)=>L(s.innerType._def,e);function L(s,e,t=!1){var i;const n=e.seen.get(s);if(e.override){const o=(i=e.override)==null?void 0:i.call(e,s,e,n,t);if(o!==Yi)return o}if(n&&!t){const o=Vl(n,e);if(o!==void 0)return"$ref"in o&&e.seenRefs.add(o.$ref),o}const r={def:s,path:e.currentPath,jsonSchema:void 0};e.seen.set(s,r);const a=Wl(s,s.typeName,e,t);return a&&Gl(s,e,a),r.jsonSchema=a,a}const Vl=(s,e)=>{switch(e.$refStrategy){case"root":return{$ref:s.path.join("/")};case"extract-to-root":const t=s.path.slice(e.basePath.length+1).join("_");return t!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[t]=s.def),{$ref:[...e.basePath,e.definitionPath,t].join("/")};case"relative":return{$ref:zl(e.currentPath,s.path)};case"none":case"seen":return s.path.length<e.currentPath.length&&s.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},zl=(s,e)=>{let t=0;for(;t<s.length&&t<e.length&&s[t]===e[t];t++);return[(s.length-t).toString(),...e.slice(t)].join("/")},Wl=(s,e,t,n)=>{switch(e){case m.ZodString:return Da(s,t);case m.ZodNumber:return Il(s,t);case m.ZodObject:return jl(s,t);case m.ZodBigInt:return ml(s,t);case m.ZodBoolean:return pl();case m.ZodDate:return Za(s,t);case m.ZodUndefined:return Ll();case m.ZodNull:return El(t);case m.ZodArray:return hl(s,t);case m.ZodUnion:case m.ZodDiscriminatedUnion:return Nl(s,t);case m.ZodIntersection:return kl(s,t);case m.ZodTuple:return Dl(s,t);case m.ZodRecord:return La(s,t);case m.ZodLiteral:return Sl(s,t);case m.ZodEnum:return xl(s);case m.ZodNativeEnum:return Pl(s);case m.ZodNullable:return Rl(s,t);case m.ZodOptional:return Ml(s,t);case m.ZodMap:return Cl(s,t);case m.ZodSet:return Zl(s,t);case m.ZodLazy:return L(s.getter()._def,t);case m.ZodPromise:return Fl(s,t);case m.ZodNaN:case m.ZodNever:return Tl();case m.ZodEffects:return vl(s,t,n);case m.ZodAny:return fl();case m.ZodUnknown:return Bl();case m.ZodDefault:return bl(s,t);case m.ZodBranded:return gl(s,t);case m.ZodReadonly:return Ul(s,t);case m.ZodCatch:return yl(s,t);case m.ZodPipeline:return $l(s,t);case m.ZodFunction:case m.ZodVoid:case m.ZodSymbol:return;default:return(r=>{})()}},Gl=(s,e,t)=>(s.description&&(t.description=s.description,e.markdownDescription&&(t.markdownDescription=s.description)),t),Jl=(s,e)=>{const t=no(e),n=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,r=L(s._def,n===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,n]},!1)??{},a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(r.title=a);const i=(()=>{if(to(t.definitions))return;const l={},c=new Set;for(let u=0;u<500;u++){const f=Object.entries(t.definitions).filter(([g])=>!c.has(g));if(f.length===0)break;for(const[g,_]of f)l[g]=L(fs(_),{...t,currentPath:[...t.basePath,t.definitionPath,g]},!0)??{},c.add(g)}return l})(),o=n===void 0?i?{...r,[t.definitionPath]:i}:r:t.nameStrategy==="duplicate-ref"?{...r,...i||t.seenRefs.size?{[t.definitionPath]:{...i,...t.seenRefs.size?{[n]:r}:void 0}}:void 0}:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,n].join("/"),[t.definitionPath]:{...i,[n]:r}};return t.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":t.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};function ql(s,e){return Jl(s,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function Hl(s,e,t){return Li({type:"json_schema",json_schema:{...t,name:e,strict:!0,schema:ql(s,{name:e})}},n=>s.parse(JSON.parse(n)))}const Xl=O.enum(["English","Hindi","Malayalam","Tamil","Telugu","Kannada","Arabic","Urdu","Samskritham","Polish","German","Gujarati","Chinese","Any/NA"]),Kl=O.enum(["Male","Female","Both"]),Ql=O.enum(["Offline","Online","Action","Art","Dance","Literacy","Music","Off Stage","On Stage","Oral","Others","Special","Written"]),Yl=O.enum(["Marks","Count","Rating out of 10","Range out of 10"]),ec=O.enum(["Individual","Team"]),Ba=O.enum(["Individual","Team","Any"]),tc=O.enum(["First","Second","Third"]),nc=O.object({RankTitle:tc,ParticipantTypeTitle:Ba,GroupGroupName:O.string().describe("Must be a valid group name as same as in the AgeBasedGroup, its only need if need some custom grade points for a group").optional(),CompetitionItemTitle:O.string().describe("Must be a valid competition name as same as in the CompetitionItems, its only need if need some custom grade points for a competition").optional(),Points:O.number().describe("Must be a valid number, if no points then keep 5 points for first, 3 points for second and 1 point for third")}),sc=O.object({ParticipantTypeTitle:Ba,GroupGroupName:O.string().describe("Must be a valid group name as same as in the AgeBasedGroup, its only need if need some custom grade points for a group").optional(),CompetitionItemTitle:O.string().describe("Must be a valid competition name as same as in the CompetitionItems, its only need if need some custom grade points for a competition").optional(),GradeName:O.string().describe("Must be a valid grade name like A, B, C, etc"),Points:O.number().describe("Must be a valid number, if no points then keep 5 points for A, 3 points for B and 1 point for C"),Value:O.number().describe("Must be a valid number, it represents how much score is need out of 10 to get this grade, if no grade then keep 6 for A, 5 for B and 4 for C")}),rc=O.object({GroupName:O.string().describe("Must be the name of a age group or keep it as All Groups"),AgeFrom:O.number().describe("Must be a valid age or if no age group then keep it as 0").optional(),AgeTo:O.number().describe("Must be a valid age or if no age group then keep it as 100").optional()}),ac=O.object({Title:O.string().describe("Must be a valid competition name like Dance, Singing, etc"),CategoryCategoryName:Ql,ScoreLabelLabel:Yl}),ic=O.object({ParticipantTypeTitle:ec,GroupGroupName:O.string().describe("Must be a valid group name as same as in the AgeBasedGroup"),CompetitionItemTitle:O.string().describe("Must be a valid competition name as same as in the CompetitionItems"),LanguageLanguageName:Xl,GenderGenderTitle:Kl,Remarks:O.string().nullable().optional().describe("Any remarks,rules or description, prize informations about the competition, and all other informations mentioned in the document should be added here related to this competition"),MaximumScore:O.number().optional(),MaximumCandidates:O.number().optional(),Fees:O.number().optional(),MaximumMinutes:O.number().optional(),MaximumSeconds:O.number().optional(),MinimumMinutes:O.number().optional(),MinimumSeconds:O.number().optional()}),oc=O.object({competitionsAssignedToGroup:O.array(ic),competitionItems:O.array(ac),ageWiseGroups:O.array(rc),ranks:O.array(nc),grades:O.array(sc)});let lc=document.getElementById("OpenAIKey").value;const cc=new Z({apiKey:lc,dangerouslyAllowBrowser:!0});let uc=`Generate competitions from the image.
Always try to translate the image text to English and generate the values.
Always try to keep generated values are exact as in the images.
Always try to find all competitions matching for all groups from the image.
Rules:
1. If there is seperate competitions based on gender, then create seperate rows in competitionStructureModel and add specific GenderName.
2. If there is seperate competitions based on language, then create seperate competitions and add LanguageName instead of using Any/NA.
3. On generate ranks and grades, if there a rank or grade not specifically mentioned for a particular group or competition, then keep value empty.
4. If there is no specific grades or ranks, mentioned then the arrays can be empty.
5 Dont assign any competitions or groups to ranks if there is no specific ranks for a group or competition. keep it as Any/NA.
`;const dc=async(s,e,t)=>{if(!(s!=null&&s.length)){alert("Please upload an image");return}try{let n=s.map(i=>({type:"image_url",image_url:{url:i.webUrl}}));const r=await cc.beta.chat.completions.parse({model:"gpt-4o-2024-08-06",messages:[{role:"system",content:[{type:"text",text:uc}]},{role:"user",content:[{type:"text",text:t},...n]}],response_format:Hl(oc,"allCompetitionsModel")});try{const i=r.choices[0].message.parsed;e(i)}catch(i){console.error("Error:",i);const o=r.choices[0].message.content;(o==null?void 0:o.length)>1&&o.indexOf("{")>=0&&e(JSON.parse(o))}const a=r.choices[0].message.parsed;e(a)}catch(n){console.error("Error:",n)}},un=({heading:s,items:e,isLoading:t,columns:n})=>d.jsx(d.Fragment,{children:(e==null?void 0:e.length)>0&&d.jsxs("div",{className:"px-2 sm:px-4 lg:px-6 relative",children:[t&&d.jsx(ys,{}),d.jsx("div",{className:"sm:flex sm:items-center",children:d.jsx("h1",{className:"text-sm font-semibold leading-6 text-gray-900",children:s})}),d.jsx("div",{className:"mt-4 flow-root",children:d.jsx("div",{className:"-mx-2 -my-1 overflow-x-auto sm:-mx-4 lg:-mx-6",children:d.jsx("div",{className:"inline-block min-w-full py-1 align-middle sm:px-4 lg:px-6",children:d.jsx("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsx("tr",{children:n.map(r=>d.jsx("th",{scope:"col",className:"py-2 pl-2 pr-1 text-left text-xs font-semibold text-gray-900 sm:pl-4",children:r.label},r.field))})}),d.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:e==null?void 0:e.map(r=>d.jsx("tr",{className:"divide-x divide-gray-200",children:n.map(a=>d.jsx("td",{className:"whitespace-nowrap px-1 py-2 text-xs text-gray-500",children:r[a.field]},a.field))},r.GroupName))})]})})})})})]})});function Ec(){var U,N,R;const[s,e]=oe.useState(localStorage.getItem("aiPrompt")||""),[t,n]=oe.useState([]),[r,a]=oe.useState(!1),[i,o]=oe.useState(!1),[l,c]=oe.useState([]),{control:u,getValues:f,setValue:g,formState:{errors:_}}=Ga();let A=f();oe.useEffect(()=>{let v=sessionStorage.getItem("competitionsGroups");v&&n(JSON.parse(v));let I=sessionStorage.getItem("images");I&&g("fileUploads",JSON.parse(I));let T=sessionStorage.getItem("selectedCheckboxes");T&&c(JSON.parse(T))},[]);const k=async v=>{var I;(I=v.competitionsAssignedToGroup)==null||I.forEach(T=>{T.Id||(T.Id=Ln())}),n(v),sessionStorage.setItem("competitionsGroups",JSON.stringify(v)),o(!1)},S=()=>{o(!0);const v=f("fileUploads");dc(v,k,s)},J=async()=>{if(o(!0),l.length>0){let v=t.competitionsAssignedToGroup.filter(T=>l.includes(T.Id)),I={...t,competitionsAssignedToGroup:v};await qa("/SetUpJson/InstallEventSettingsItems",I),Et.success("Competitions have been successfully installed"),setTimeout(()=>{window.top.location.href="/CompetitionStructure/Tab"},2e3),o(!1)}else Et.error("Please select at least one competition"),o(!1)},b=(v,I)=>{let T={...v,GenderGenderTitle:"Male",Id:Ln()},M={...v,GenderGenderTitle:"Female",Id:Ln()},q=t.competitionsAssignedToGroup.slice(0,I),Q=t.competitionsAssignedToGroup.slice(I+1);t.competitionsAssignedToGroup=[...q,T,M,...Q],k({...t})},$=()=>{const v=t.competitionsAssignedToGroup.map(I=>I.Id);c(r?[]:v),a(!r),sessionStorage.setItem("selectedCheckboxes",JSON.stringify(l))},P=v=>{l.includes(v)?c(l.filter(I=>I.id!==v)):c([...l,v]),sessionStorage.setItem("selectedCheckboxes",JSON.stringify(l))};return d.jsxs("div",{children:[d.jsx("div",{children:d.jsxs("div",{className:"flex justify-center w-full flex-col place-items-center",children:[d.jsx(Ya,{label:"Upload Images Related to the competition",errors:_,control:u,validExtensions:["jpg","png","jpeg"],validExtensionsMimeTypes:["image/jpg","image/png","image/jpeg"],fieldName:"fileUploads",fileUploadUrl:"/uploadJson/UploadCandidateImage",editId:A==null?void 0:A.id,onChangeValidation:v=>{sessionStorage.setItem("images",JSON.stringify(v)),g("fileUploads",v)}}),d.jsxs("div",{className:"mt-4 px-10 flex flex-col w-full",children:[d.jsx("label",{htmlFor:"aiPrompt",className:"block text-sm font-semibold text-gray-700",children:"AI Prompt"}),d.jsx("textarea",{id:"aiPrompt",name:"aiPrompt",value:s,onChange:v=>{e(v.target.value),localStorage.setItem("aiPrompt",v.target.value)},rows:"4",className:"mt-1 min-w-full max-w-full block w-full shadow-sm sm:text-sm focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md",placeholder:"Enter the AI Prompt"})]}),d.jsx("button",{onClick:S,className:"mt-8 w-full max-w-72 rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Get Results"}),d.jsx("a",{href:"https://ilovepdf.com/pdf_to_jpg",target:"_blank",className:"text-sm text-blue-500 mt-2",rel:"noreferrer",children:"Donâ€™t have an Image to test? Click here to convert PDF to Image"})]})}),d.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[d.jsx("div",{className:"mt-8 flow-root",children:d.jsxs("div",{className:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:[d.jsxs("div",{className:"flex flex-row",children:[d.jsx(un,{heading:"Age Wise Groups",items:t==null?void 0:t.ageWiseGroups,isLoading:i,columns:[{field:"GroupName",label:"Group Name"},{field:"AgeFrom",label:"Age From"},{field:"AgeTo",label:"Age To"}]}),d.jsx(un,{heading:"Competition Items",items:t==null?void 0:t.competitionItems,isLoading:i,columns:[{field:"Title",label:"Title"},{field:"CategoryCategoryName",label:"Category"},{field:"ScoreLabelLabel",label:"Score By"}]}),d.jsx(un,{heading:"Ranks",items:t==null?void 0:t.ranks,isLoading:i,columns:[{field:"ParticipantTypeTitle",label:"Participant Type"},{field:"GroupGroupName",label:"Group Name"},{field:"CompetitionItemTitle",label:"Competition Item"},{field:"RankTitle",label:"Rank Title"},{field:"Points",label:"Points"}]}),d.jsx(un,{heading:"Grades",items:t==null?void 0:t.grades,isLoading:i,columns:[{field:"ParticipantTypeTitle",label:"Participant Type"},{field:"GroupGroupName",label:"Group Name"},{field:"CompetitionItemTitle",label:"Competition Item"},{field:"GradeName",label:"Grade Title"},{field:"Points",label:"Points"}]})]}),d.jsx("div",{className:"sm:flex sm:items-center px-10 mt-10",children:d.jsxs("div",{className:"sm:flex-auto",children:[d.jsx("h1",{className:"text-base font-semibold leading-6 text-gray-900",children:"Generated Competitions"}),d.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"A list of all AI generated competitions."})]})}),d.jsxs("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8 relative",children:[i&&d.jsx(ys,{}),d.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"divide-x divide-gray-200",children:[d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-sm font-semibold text-gray-900 sm:pl-2",children:d.jsx("input",{id:"selectAll",name:"selectAll",type:"checkbox",checked:r,"aria-describedby":"selectAll-description",className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600",onChange:$})}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Participant Type"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Group Name"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Competition Name"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Language"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Gender"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Split Gender"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Remarks"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Maximum Score"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Maximum Candidates"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Fees"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Maximum Minutes"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Maximum Seconds"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Minimum Minutes"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Minimum Seconds"})]})}),((U=t==null?void 0:t.competitionsAssignedToGroup)==null?void 0:U.length)>0&&d.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:(N=t==null?void 0:t.competitionsAssignedToGroup)==null?void 0:N.map((v,I)=>d.jsxs("tr",{className:"divide-x divide-gray-200",children:[d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:d.jsx("input",{id:`checkbox${v.Id}`,name:`checkbox${v.Id}`,type:"checkbox",checked:l.includes(v.Id),"aria-describedby":`checkbox${I}-description`,className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600",onChange:()=>P(v.Id)})}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:v.ParticipantTypeTitle}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:v.GroupGroupName}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:v.CompetitionItemTitle}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:v.LanguageLanguageName}),d.jsxs("td",{className:"px-2 py-2 text-xs font-medium text-gray-900 flex justify-center ",children:[v.GenderGenderTitle," "]}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:v.GenderGenderTitle==="Both"?d.jsx("button",{onClick:()=>{b(v,I)},type:"button",className:"rounded-full bg-indigo-600 p-1 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:d.jsx(Qa,{"aria-hidden":"true",className:"h-5 w-5"})}):null}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:v.Remarks}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:v.MaximumScore}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:v.MaximumCandidates}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:v.Fees}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:v.MaximumMinutes}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:v.MaximumSeconds}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:v.MinimumMinutes}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:v.MinimumSeconds})]},v.Id))},(R=t==null?void 0:t.competitionsAssignedToGroup)==null?void 0:R.length)]})]})]})}),d.jsx("div",{className:"flex justify-center w-full flex-col place-items-center",children:d.jsx("button",{onClick:J,className:"mt-8 w-full max-w-72 rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600",children:"Submit"})})]})]})}export{Ec as default};
