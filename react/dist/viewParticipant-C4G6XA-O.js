import{r as n,d as je,p as v,j as s,L as ae,g as Ne,_ as Ce}from"./mainweb-WagFbMDz.js";import{B as le}from"./box-Uy20Etau.js";import{M as ye}from"./modalForm-D5-fIRsD.js";import{F as Re}from"./formSubmission-CaDeYYIJ.js";import{u as ne,i as Je}from"./useBackend-CfiUHlkf.js";import{r as Te,e as Ue,g as Ae,a as Ee,u as Fe,F as Le,U as Be,b as Ie,S as Oe}from"./publicRegistrationHelper-jQN12eNS.js";import{R as Ge}from"./renderRegistrationForm-dduiSLgT.js";import{p as ce}from"./httpService-b3ozdr94.js";import"./utilities-CN4lTu6a.js";import"./dialog-CW8LZ7Oe.js";import"./manageTeamParticipants-BU1Mlxvs.js";import"./index.esm-ujY08QgP.js";import"./renderComponents-DMsIMPPW.js";import"./validationMessage-CdX4lFm3.js";import"./clsx-B-dksMZM.js";import"./computeTotalAmount-BYoi1Q88.js";import"./index-BtuGy7By.js";import"./useConfirmation-AvW96R2f.js";import"./TrashIcon-CmmdnrFW.js";function ke({title:e,titleId:g,...i},u){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:u,"aria-labelledby":g},i),e?n.createElement("title",{id:g},e):null,n.createElement("path",{fillRule:"evenodd",d:"M7.875 1.5C6.839 1.5 6 2.34 6 3.375v2.99c-.426.053-.851.11-1.274.174-1.454.218-2.476 1.483-2.476 2.917v6.294a3 3 0 0 0 3 3h.27l-.155 1.705A1.875 1.875 0 0 0 7.232 22.5h9.536a1.875 1.875 0 0 0 1.867-2.045l-.155-1.705h.27a3 3 0 0 0 3-3V9.456c0-1.434-1.022-2.7-2.476-2.917A48.716 48.716 0 0 0 18 6.366V3.375c0-1.036-.84-1.875-1.875-1.875h-8.25ZM16.5 6.205v-2.83A.375.375 0 0 0 16.125 3h-8.25a.375.375 0 0 0-.375.375v2.83a49.353 49.353 0 0 1 9 0Zm-.217 8.265c.178.018.317.16.333.337l.526 5.784a.375.375 0 0 1-.374.409H7.232a.375.375 0 0 1-.374-.409l.526-5.784a.373.373 0 0 1 .333-.337 41.741 41.741 0 0 1 8.566 0Zm.967-3.97a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H18a.75.75 0 0 1-.75-.75V10.5ZM15 9.75a.75.75 0 0 0-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 0 .75-.75V10.5a.75.75 0 0 0-.75-.75H15Z",clipRule:"evenodd"}))}const Me=n.forwardRef(ke);function Ve({view:e,setActiveTab:g,getEvets:i,isCoordinatorView:u,setParticipantTypeInt:h,getParticipants:r,participantTypeInt:a,candidateId:m,closeModel:f,customComponents:p,allowEdit:R}){var D,ee,se,te,re,oe;let{user:l}=je();l==null||l.RoleTitle,((D=l==null?void 0:l.Email)==null?void 0:D.indexOf("justnshalom"))!=-1;let[x,W]=n.useState(null),[N,G]=n.useState({}),[S,c]=n.useState(null),[J,k]=n.useState(!1),[F,M]=n.useState(null),[C,V]=n.useState([]),[w,H]=n.useState(a==1?"Individual":a==2?"Team":""),[L,t]=n.useState([...Te]);const{row:o,status:Z}=ne(i||"/CandidateJson/GetEvents",{select:"AllowDisplayCompetitionOrder,Description,EVId,EndDateString,EventCategory,EventCategoryTitle,EventLogo,EventName,IdentityBackgroundImage,OrganizationLogo,OrganizationName,OrganizationShortName,StartDateString,Venue,JsonSettings",doCache:!0});let X="finished",ue="finished",de="finished",{row:z,status:me}=ne(r||"/CandidateJson/GetParticipants",{deleteUrl:"/CandidateJson/RemoveUser",mandatoryParams:["participantType"],select:"participantList,userList,UserEmail,UserName,UserDobString,UserImage,UserMobile,UserPhone,Email,Group,Candidate,CandidateUser,JsonSettings,Gender,GroupName,Fees,TeamTeamName,Team,TeamStrength,TeamMembersList,TeamMembers,TeamStrength,CandidateIdentityNumber,TeamIdentityNumber,CompetitionOrder,CreatedBy,CreatedByUserName,ParticipationId,UserJsonSettings,TeamJsonSettings,Remarks,LevelSettings,RegistrationId",updateUrl:"/CandidateJson/UpdateParticipant",doCache:!0,filter:m?{Candidate:m,...a==1?{participantType:"1"}:a==2?{participantType:"2"}:{}}:{}}),fe=Ue(z,m,x==null?void 0:x.UId,S==null?void 0:S.Team),{userRole:B,users:I,userData:T,teamData:U}=fe;if(x=x||T,S=S||U,I!=null&&I.length||(ee=v(localStorage.user))==null||ee.user,w=="Team"){let d=(se=v(localStorage.user))==null?void 0:se.user;d&&((te=d==null?void 0:d.Email)==null?void 0:te.indexOf("justnshalom"))==-1}J=Je(Z,X,ue,de,me)||J;let Y=v(B==null?void 0:B.JsonSettings),xe=v(T==null?void 0:T.JsonSettings),he=v(U==null?void 0:U.TeamJsonSettings);const _=o==null?void 0:o.JsonSettings,b=(_!=null&&_!=""?v(_):{components:{}}).components,q=Object.keys(b??{});let ge=v(N==null?void 0:N.JsonSettings),$=(q==null?void 0:q.includes("Agreement"))&&((oe=(re=b==null?void 0:b.Agreement)==null?void 0:re.filter(d=>{var Q;return((Q=d==null?void 0:d.validate)==null?void 0:Q.required)&&!Y[d.name]&&!ge[d.name]}))==null?void 0:oe.length)==0;$&&localStorage.setItem("isAgreementStepFilled","true"),localStorage.getItem("isAgreementStepFilled")=="true"&&($=!0);let j=Ae(b,L,$,w,I,{},e),A={},pe=!0,Se=()=>{f&&f()};if(m&&!z)return s.jsx(ae,{});let y=[],K=[];K.push(j[0]),y.push(K);let E=[];j.length>1&&E.push(j[1]),y.push(E),E=[],j.length>2&&E.push(j[2]),y.push(E);let P=[];return j.length>3&&P.push(j[3]),y.push(P),console.log({splitBy2:y}),s.jsx("div",{children:s.jsx(ye,{title:"Registration Form",description:"Please fill the form to register for the event",open:!0,customHeading:p||null,setOpen:()=>{Se()},children:s.jsx(le,{heading:"",outerClasses:"relative w-full",headingClasses:"px-1 lg:px-4 print:hidden w-full",children:s.jsx("div",{className:"w-full mt-5 min-h-[600px] print:mt-0 flex flex-col",id:"registrationBox",children:y.map((d,Q)=>s.jsx("div",{className:"flex w-full flex-1 gap-x-8",children:d.map((ve,we)=>{A=ve,C=Ee(b,A);let be=A?Fe(A.name,{},()=>{},()=>{},A,B,Y,T,xe,w,U,z,b,x,S,he,!1,N):{};return s.jsx("div",{className:"flex-1",children:s.jsx(Re,{isPrint:!0,isCoordinatorView:u,participantType:w,isGuardianRegistration:!1,handleNext:()=>{},isSubmitted:pe,eventDetails:o,isPlayGround:!1,onChange:()=>{},data:be,isLastStep:!1,existingComponents:C,selectedComponent:F,setSelectedComponent:()=>{},components:C,setComponents:()=>{}},we)})})}))})})})})}var ie={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var g={}.hasOwnProperty;function i(){for(var u=[],h=0;h<arguments.length;h++){var r=arguments[h];if(r){var a=typeof r;if(a==="string"||a==="number")u.push(r);else if(Array.isArray(r)){if(r.length){var m=i.apply(null,r);m&&u.push(m)}}else if(a==="object"){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){u.push(r.toString());continue}for(var f in r)g.call(r,f)&&r[f]&&u.push(f)}}}return u.join(" ")}e.exports?(i.default=i,e.exports=i):window.classNames=i})()})(ie);var He=ie.exports;const O=Ne(He);let Ze=({selectedParticipantDetails:e,participantType:g,setAllowEdit:i,setOpen:u,setFilter:h,setPrint:r,eventDetails:a})=>{var S,c,J,k,F,M,C,V,w,H,L;const[m,f]=n.useState(!1),[p,R]=n.useState(""),[l,x]=n.useState("Pending"),W=(t,o)=>{x(o),f(!0)},N=()=>{var t;if(x(l),p.trim()){R(""),f(!1);let o=v((t=e==null?void 0:e.user)==null?void 0:t.JsonSettings);o||(o={}),o.ApprovalStatus=l,o.ReviewComments||(o.ReviewComments=[]),o.ReviewComments.push({Comment:p,Status:l,Date:new Date().toISOString()}),l==="Reviewed"&&(o.FinishedSteps=!1),l==="Approved"&&(o.FinishedSteps=!0);let Z={ParticipantType:g,UserRoleId:e.user.Candidate,TeamId:e.user.Team,JsonSettings:JSON.stringify(o)};ce("/UsersRolesJson/Approve",Z).then(X=>{Ce.success("Review submitted successfully and emailed to the user."),i(!1),u(!1),h(!0)})}else alert("Please add a comment before submitting.")};let G=[];if((S=e==null?void 0:e.user)!=null&&S.JsonSettings){let t=v((c=e==null?void 0:e.user)==null?void 0:c.JsonSettings);t!=null&&t.ReviewComments&&(G=t==null?void 0:t.ReviewComments)}return s.jsxs("div",{className:"border-b border-gray-200 pb-5 bg-white flex flex-1 flex-col pr-10 print:pr-0",children:[s.jsxs("div",{className:"sm:flex flex-row sm:justify-between",children:[s.jsxs("div",{className:"sm:flex-1 gap-x-10",children:[((J=e==null?void 0:e.user)==null?void 0:J.UserName)&&s.jsxs(s.Fragment,{children:[s.jsxs("h1",{id:"message-heading",className:"text-base font-semibold text-gray-900",children:[(k=e==null?void 0:e.user)==null?void 0:k.CandidateIdentityNumber," - ",(F=e==null?void 0:e.user)==null?void 0:F.UserName]}),s.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(M=e==null?void 0:e.user)==null?void 0:M.Email}),s.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(C=e==null?void 0:e.user)==null?void 0:C.UserMobile}),s.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(V=e==null?void 0:e.user)==null?void 0:V.UserDobString})]}),((w=e==null?void 0:e.user)==null?void 0:w.TeamTeamName)&&s.jsx(s.Fragment,{children:s.jsxs("h1",{id:"message-heading",className:"text-base font-semibold text-gray-900",children:[(H=e==null?void 0:e.user)==null?void 0:H.TeamIdentityNumber," -",(L=e==null?void 0:e.user)==null?void 0:L.TeamTeamName]})}),s.jsxs("button",{className:"inline-flex items-center print:hidden gap-x-1.5 px-10 rounded-md bg-blue-600 mt-5  py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600",onClick:()=>i(!0),children:[s.jsx(Le,{className:"h-5 w-5 inline-block -mt-0.5 mr-0 "}),"Edit"]}),s.jsx("button",{onClick:()=>{r(!0)},className:"bg-darkprimary text-white px-10  ml-2 py-1.5 rounded-md print:hidden",children:s.jsx(Me,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"hidden print:flex  max-h-90  flex-col justify-items-end flex-wrap",children:[s.jsx("div",{className:"text-primary text-right",children:a==null?void 0:a.EventName}),s.jsx("div",{className:"justify-end flex",children:s.jsx("img",{src:a==null?void 0:a.EventLogo,alt:"logo",className:"max-h-16 w-auto"})})]}),s.jsxs("div",{className:"mt-4 flex flex-col space-y-4 print:hidden",children:[s.jsx(Be,{person:e==null?void 0:e.user}),s.jsx(Ie,{onClick:W,person:e==null?void 0:e.user})]})]}),s.jsxs("div",{className:"print:hidden",children:[s.jsx("div",{children:G.map((t,o)=>s.jsx("div",{className:"mt-2 flex flex-col relative",children:s.jsx("div",{className:O("border-l-4 p-4",(t==null?void 0:t.Status)==="Reviewed"?"border-yellow-400 bg-yellow-50":(t==null?void 0:t.Status)==="Approved"?"border-green-400 bg-green-50":"border-red-400 bg-red-50"),children:s.jsx("div",{className:"flex",children:s.jsxs("div",{className:"ml-3 flex-1",children:[s.jsx("h4",{className:O("text-lg font-bold",(t==null?void 0:t.Status)==="Reviewed"?"text-yellow-700":(t==null?void 0:t.Status)==="Approved"?"text-green-700":"text-red-700"),children:t==null?void 0:t.Status}),s.jsx("p",{className:O("text-sm",(t==null?void 0:t.Status)==="Reviewed"?"text-yellow-700":(t==null?void 0:t.Status)==="Approved"?"text-green-700":"text-red-700"),children:(t==null?void 0:t.Comment)??t}),s.jsx("p",{className:O("font-medium text-right",(t==null?void 0:t.Status)==="Reviewed"?"text-yellow-700":(t==null?void 0:t.Status)==="Approved"?"text-green-700":"text-red-700"),children:t==null?void 0:t.Date})]})})})},o))}),m&&s.jsx("div",{className:"mt-2 flex flex-col relative print:hidden",children:s.jsxs(le,{heading:"Please enter the reason for change status to "+l,childrenClasses:"flex flex-col mt-4 relative",children:[s.jsxs("div",{className:"rounded-lg bg-white outline outline-1 -outline-offset-1 outline-gray-300 focus-within:outline focus-within:outline-2 focus-within:-outline-offset-2 focus-within:outline-indigo-600",children:[s.jsx("label",{htmlFor:"comment",className:"sr-only",children:"Add your comment..."}),s.jsx("textarea",{id:"comment",name:"comment",rows:3,placeholder:"Add your comment..., The comment will be sent to the user via email.",className:"block w-full rounded-lg resize-none bg-transparent px-3 py-1.5 text-base text-gray-900 placeholder:text-gray-400 focus:outline focus:outline-0 sm:text-sm/6",defaultValue:"",value:p,onChange:t=>R(t.target.value)})]}),s.jsxs("div",{className:"absolute inset-x-0 bottom-0 flex justify-between py-2 pl-3 pr-2",children:[s.jsx("div",{className:"flex items-center space-x-5"}),s.jsx("div",{className:"shrink-0",children:s.jsx(Oe,{onClick:N,currentReviewStatus:l})})]})]})})]})]})};function ds({participantType:e,candidateId:g,eventDetails:i,setFilter:u,selectedParticipantDetails:h,setOpen:r}){let[a,m]=n.useState(!1),[f,p]=n.useState(!1),[R,l]=n.useState(!1),x=f?Ve:Ge;return s.jsx(x,{isCoordinatorView:!0,view:"participationDetails",getEvets:"/EventJson/Get",allowEdit:a,getUserRoles:"/UsersRolesPlusUsersJson/Get",getTeams:"/CompetitionParticipantsTeamsJson/Get",getUsers:"/UsersRolesPlusUsersJson/Get",customComponents:s.jsxs(s.Fragment,{children:[R&&s.jsx(ae,{}),s.jsx(Ze,{setPrint:()=>{window.parent.document.title="Candiidate Details - "+h.user.UserName+" - "+h.user.UserDobString,p(!0),l(!0),window.onafterprint=()=>{p(!1)},setTimeout(()=>{l(!1)},2e3),setTimeout(()=>{window.print()},3e3)},participantType:e,eventDetails:i,selectedParticipantDetails:h,setFilter:u,setOpen:r,setAllowEdit:m})]}),getParticipants:"/CoordinatorJson/GetParticipants",closeModel:()=>{r(!1)},participantTypeInt:e,candidateId:g,setActiveTab:()=>{}})}export{ds as default};
