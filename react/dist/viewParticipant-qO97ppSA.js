import{r as i,f as pe,p as w,j as e,L as K,R as $,b as Q,g as ge,_ as fe}from"./mainweb-C-fYIVSe.js";import{B as W}from"./box-8Vs7llda.js";import{u as Z,i as he}from"./useBackend-JnmMr3HB.js";import{r as xe,e as Se,g as ve,a as be,u as we,U as je,b as Ce,S as Ne}from"./publicRegistrationHelper-Cu-fE6fi.js";import{R as ye}from"./renderRegistrationForm-tfj2V5oP.js";import{p as Re}from"./httpService-fNHmhpQ8.js";import{F as Ue}from"./PencilIcon-C19UkucN.js";import"./utilities-CN4lTu6a.js";import"./useConfirmation-C16HC6cK.js";import"./dialog-BRCG_XkL.js";import"./keyboard-Co2Qh0Xo.js";import"./CheckIcon-s0s2yF0U.js";import"./index.modern-LU3-dINH.js";import"./dateHelper-YDrGqKPT.js";import"./CalendarDateRangeIcon-1ytQnhqY.js";import"./ChevronRightIcon-CNEYZHfs.js";import"./TrashIcon-B-NjqM4y.js";import"./UserGroupIcon-lsQA3Zy8.js";import"./index-t--hEgTQ.js";function Te({title:s,titleId:h,...r},m){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":h},r),s?i.createElement("title",{id:h},s):null,i.createElement("path",{fillRule:"evenodd",d:"M7.875 1.5C6.839 1.5 6 2.34 6 3.375v2.99c-.426.053-.851.11-1.274.174-1.454.218-2.476 1.483-2.476 2.917v6.294a3 3 0 0 0 3 3h.27l-.155 1.705A1.875 1.875 0 0 0 7.232 22.5h9.536a1.875 1.875 0 0 0 1.867-2.045l-.155-1.705h.27a3 3 0 0 0 3-3V9.456c0-1.434-1.022-2.7-2.476-2.917A48.716 48.716 0 0 0 18 6.366V3.375c0-1.036-.84-1.875-1.875-1.875h-8.25ZM16.5 6.205v-2.83A.375.375 0 0 0 16.125 3h-8.25a.375.375 0 0 0-.375.375v2.83a49.353 49.353 0 0 1 9 0Zm-.217 8.265c.178.018.317.16.333.337l.526 5.784a.375.375 0 0 1-.374.409H7.232a.375.375 0 0 1-.374-.409l.526-5.784a.373.373 0 0 1 .333-.337 41.741 41.741 0 0 1 8.566 0Zm.967-3.97a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H18a.75.75 0 0 1-.75-.75V10.5ZM15 9.75a.75.75 0 0 0-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 0 .75-.75V10.5a.75.75 0 0 0-.75-.75H15Z",clipRule:"evenodd"}))}const Je=i.forwardRef(Te),Ee=$.lazy(()=>Q(()=>import("./formSubmission-3WFpUY30.js"),[])),Ae=$.lazy(()=>Q(()=>import("./modalForm-DeXzKW5P.js"),[]));function Fe({view:s,setActiveTab:h,getEvets:r,isCoordinatorView:m,setParticipantTypeInt:c,getParticipants:a,participantTypeInt:u,candidateId:d,closeModel:p,customComponents:j,allowEdit:R}){let{user:x}=pe()||{};x?.RoleTitle,x?.Email?.indexOf("justnshalom")!=-1;let[l,I]=i.useState(null),[A,k]=i.useState({}),[C,t]=i.useState(null),[S,g]=i.useState(!1),[L,U]=i.useState(null),[v,T]=i.useState([]),[N,Ge]=i.useState(u==1?"Individual":u==2?"Team":""),[X,Oe]=i.useState([...xe]);const{row:V,status:Y}=Z(r||"/CandidateJson/GetEvents",{select:"AllowDisplayCompetitionOrder,Description,EVId,EndDateString,EventCategory,EventCategoryTitle,EventLogo,EventName,IdentityBackgroundImage,OrganizationLogo,OrganizationName,OrganizationShortName,StartDateString,Venue,JsonSettings",doCache:!0});let ee="finished",te="finished",se="finished",{row:B,status:ae}=Z(a||"/CandidateJson/GetParticipants",{deleteUrl:"/CandidateJson/RemoveUser",mandatoryParams:["participantType"],select:"participantList,userList,UserEmail,UserName,UserDobString,UserImage,UserMobile,UserPhone,Email,Group,Candidate,CandidateUser,JsonSettings,Gender,GroupName,Fees,TeamTeamName,Team,TeamStrength,TeamMembersList,TeamMembers,TeamStrength,CandidateIdentityNumber,TeamIdentityNumber,CompetitionOrder,CreatedBy,CreatedByUserName,ParticipationId,UserJsonSettings,TeamJsonSettings,Remarks,LevelSettings,RegistrationId",updateUrl:"/CandidateJson/UpdateParticipant",doCache:!0,filter:d?{Candidate:d,...u==1?{participantType:"1"}:u==2?{participantType:"2"}:{}}:{}}),ne=Se(B,d,l?.UId,C?.Team),{userRole:M,users:z,userData:G,teamData:O}=ne;if(l=l||G,C=C||O,z?.length||w(localStorage.user)?.user,N=="Team"){let n=w(localStorage.user)?.user;n&&n?.Email?.indexOf("justnshalom")==-1}S=he(Y,ee,te,se,ae)||S;let H=w(M?.JsonSettings),ie=w(G?.JsonSettings),re=w(O?.TeamJsonSettings);const P=V?.JsonSettings,J=(P!=null&&P!=""?w(P):{components:{}}).components,oe=Object.keys(J??{});let le=w(A?.JsonSettings),_=oe?.includes("Agreement")&&J?.Agreement?.filter(n=>n?.validate?.required&&!H[n.name]&&!le[n.name])?.length==0;_&&localStorage.setItem("isAgreementStepFilled","true"),localStorage.getItem("isAgreementStepFilled")=="true"&&(_=!0);let o=ve(J,X,_,N,z,{},s),E={},me=!0,ue=()=>{p&&p()};if(d&&!B)return e.jsx(K,{});let f=[];if(N=="Individual"){let n=[];n.push(o[0]),f.push(n);let b=[];o.length>1&&b.push(o[1]),f.push(b),b=[],o.length>2&&b.push(o[2]),f.push(b);let y=[];o.length>3&&y.push(o[3]),f.push(y)}else{let n=[];o.length>2&&n.push(o[2]),f.push(n),n=[],o.length>3&&n.push(o[3]),f.push(n);let b=[];o.length>4&&b.push(o[4]),f.push(b);let y=[];o.length>5&&y.push(o[5]),f.push(y)}return console.log({splitBy2:f}),e.jsx("div",{children:e.jsx(Ae,{title:"Registration Form",description:"Please fill the form to register for the event",open:!0,customHeading:j||null,setOpen:()=>{ue()},children:e.jsx(W,{heading:"",outerClasses:"relative w-full",headingClasses:"px-1 lg:px-4 print:hidden w-full",children:e.jsx("div",{className:"w-full mt-5 min-h-[600px] print:mt-0 flex flex-col",id:"registrationBox",children:f.map((n,b)=>e.jsx("div",{className:"flex w-full flex-1 gap-x-8",children:n.map((y,de)=>{E=y,v=be(J,E);let ce=E?we(E.name,{},()=>{},()=>{},E,M,H,G,ie,N,O,B,J,l,C,re,!1,A):{};return e.jsx("div",{className:"flex-1",children:e.jsx(Ee,{isPrint:!0,isCoordinatorView:m,participantType:N,isGuardianRegistration:!1,handleNext:()=>{},isSubmitted:me,eventDetails:V,isPlayGround:!1,onChange:()=>{},data:ce,isLastStep:!1,existingComponents:v,selectedComponent:L,setSelectedComponent:()=>{},components:v,setComponents:()=>{}},de)})})}))})})})})}var D={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var q;function Ie(){return q||(q=1,(function(s){(function(){var h={}.hasOwnProperty;function r(){for(var m=[],c=0;c<arguments.length;c++){var a=arguments[c];if(a){var u=typeof a;if(u==="string"||u==="number")m.push(a);else if(Array.isArray(a)){if(a.length){var d=r.apply(null,a);d&&m.push(d)}}else if(u==="object"){if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]")){m.push(a.toString());continue}for(var p in a)h.call(a,p)&&a[p]&&m.push(p)}}}return m.join(" ")}s.exports?(r.default=r,s.exports=r):window.classNames=r})()})(D)),D.exports}var Le=Ie();const F=ge(Le);let Be=({selectedParticipantDetails:s,participantType:h,setAllowEdit:r,setOpen:m,setFilter:c,setPrint:a,eventDetails:u})=>{let d=localStorage.getItem("siteConfig")?JSON.parse(localStorage.getItem("siteConfig")):{};const[p,j]=i.useState(!1),[R,x]=i.useState(""),[l,I]=i.useState("Pending"),A=(t,S)=>{let g="";if(console.log("selectedParticipantDetails",t),S==="Approved"){g="Thank you for your registration, "+t?.UserName+`
`,g+="Based on your date of birth ("+t?.UserDobString+"), you have been assigned to the "+t?.GroupName+` age group and successfully registered for the following competitions:
`;let L=t?.participatingCompetitions,U={};L?.forEach(v=>{let T=v?.GroupName;U[T]||(U[T]=[]),U[T].push(v)});for(const v in U)g+=`
`+v+` Group
`,U[v].forEach((T,N)=>{g+=N+1+" - "+T?.Title+`
`});g+=`
Please login with the credentials sent in your email to see candidate details and participation informations under the Participation tab. 
`,g+="Login: "+d?.emailConfigSiteUrl+`
`}console.log("mailComment",g),x(g),I(S),j(!0)},k=()=>{if(I(l),R.trim()){x(""),j(!1);let t=w(s?.user?.JsonSettings);t||(t={}),t.ApprovalStatus=l,t.ReviewComments||(t.ReviewComments=[]),t.ReviewComments.push({Comment:R,Status:l,Date:new Date().toISOString()}),l==="Reviewed"&&(t.FinishedSteps=!1),l==="Approved"&&(t.FinishedSteps=!0);let S={ParticipantType:h,UserRoleId:s.user.Candidate,TeamId:s.user.Team,JsonSettings:JSON.stringify(t)};Re("/UsersRolesJson/Approve",S).then(g=>{fe.success("Review submitted successfully and emailed to the user."),r(!1),m(!1),c(!0)})}else alert("Please add a comment before submitting.")};let C=[];if(s?.user?.JsonSettings){let t=w(s?.user?.JsonSettings);t?.ReviewComments&&(C=t?.ReviewComments)}return e.jsxs("div",{className:"border-b border-gray-200 pb-5 bg-white flex flex-1 flex-col pr-10 print:pr-0",children:[e.jsxs("div",{className:"sm:flex flex-row sm:justify-between",children:[e.jsxs("div",{className:"sm:flex-1 gap-x-10",children:[s?.user?.UserName&&e.jsxs(e.Fragment,{children:[e.jsxs("h1",{id:"message-heading",className:"text-base font-semibold text-gray-900",children:[s?.user?.CandidateIdentityNumber," - ",s?.user?.UserName]}),e.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:s?.user?.Email}),e.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:s?.user?.UserMobile}),e.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:s?.user?.UserDobString})]}),s?.user?.TeamTeamName&&e.jsx(e.Fragment,{children:e.jsxs("h1",{id:"message-heading",className:"text-base font-semibold text-gray-900",children:[s?.user?.TeamIdentityNumber," -",s?.user?.TeamTeamName]})}),e.jsxs("button",{className:"inline-flex items-center print:hidden gap-x-1.5 px-10 rounded-md bg-blue-600 mt-5  py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600",onClick:()=>r(!0),children:[e.jsx(Ue,{className:"h-5 w-5 inline-block -mt-0.5 mr-0 "}),"Edit"]}),e.jsx("button",{onClick:()=>{a(!0)},className:"bg-darkprimary text-white px-10  ml-2 py-1.5 rounded-md print:hidden",children:e.jsx(Je,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"hidden print:flex  max-h-90  flex-col justify-items-end flex-wrap",children:[e.jsx("div",{className:"text-primary text-right",children:u?.EventName}),e.jsx("div",{className:"justify-end flex",children:e.jsx("img",{src:u?.EventLogo,alt:"logo",className:"max-h-16 w-auto"})})]}),e.jsxs("div",{className:"mt-4 flex flex-col space-y-4 print:hidden",children:[e.jsx(je,{person:s?.user}),e.jsx(Ce,{onClick:A,person:s?.user})]})]}),e.jsxs("div",{className:"print:hidden",children:[e.jsx("div",{children:C.map((t,S)=>e.jsx("div",{className:"mt-2 flex flex-col relative",children:e.jsx("div",{className:F("border-l-4 p-4",t?.Status==="Reviewed"?"border-yellow-400 bg-yellow-50":t?.Status==="Approved"?"border-green-400 bg-green-50":"border-red-400 bg-red-50"),children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("h4",{className:F("text-lg font-bold",t?.Status==="Reviewed"?"text-yellow-700":t?.Status==="Approved"?"text-green-700":"text-red-700"),children:t?.Status}),e.jsx("p",{className:F("text-sm whitespace-pre-line",t?.Status==="Reviewed"?"text-yellow-700":t?.Status==="Approved"?"text-green-700":"text-red-700"),children:t?.Comment??t}),e.jsx("p",{className:F("font-medium text-right ",t?.Status==="Reviewed"?"text-yellow-700":t?.Status==="Approved"?"text-green-700":"text-red-700"),children:t?.Date})]})})})},S))}),p&&e.jsx("div",{className:"mt-2 flex flex-col relative print:hidden",children:e.jsxs(W,{heading:"Please enter the reason for change status to "+l,childrenClasses:"flex flex-col mt-4 relative",children:[e.jsxs("div",{className:"rounded-lg bg-white outline outline-1 -outline-offset-1 outline-gray-300 focus-within:outline focus-within:outline-2 focus-within:-outline-offset-2 focus-within:outline-indigo-600",children:[e.jsx("label",{htmlFor:"comment",className:"sr-only",children:"Add your comment..."}),e.jsx("textarea",{id:"comment",name:"comment",rows:6,placeholder:"Add your comment..., The comment will be sent to the user via email.",className:"block w-full rounded-lg resize-none bg-transparent px-3 py-1.5 text-base text-gray-900 placeholder:text-gray-400 focus:outline focus:outline-0 sm:text-sm/6",value:R,onChange:t=>x(t.target.value)})]}),e.jsxs("div",{className:" inset-x-0 bottom-0 flex justify-between py-2 pl-3 pr-2",children:[e.jsx("div",{className:"flex items-center space-x-5"}),e.jsx("div",{className:"shrink-0",children:e.jsx(Ne,{onClick:k,currentReviewStatus:l})})]})]})})]})]})};function it({participantType:s,candidateId:h,eventDetails:r,setFilter:m,selectedParticipantDetails:c,setOpen:a}){let[u,d]=i.useState(!1),[p,j]=i.useState(!1),[R,x]=i.useState(!1),l=p?Fe:ye;return e.jsx(l,{isCoordinatorView:!0,view:"participationDetails",getEvets:"/EventJson/Get",allowEdit:u,getUserRoles:"/UsersRolesPlusUsersJson/Get",getTeams:"/CompetitionParticipantsTeamsJson/Get",getUsers:"/UsersRolesPlusUsersJson/Get",customComponents:e.jsxs(e.Fragment,{children:[R&&e.jsx(K,{}),e.jsx(Be,{setPrint:()=>{window.parent.document.title="Candiidate Details - "+c.user.UserName+" - "+c.user.UserDobString,j(!0),x(!0),window.onafterprint=()=>{j(!1)},setTimeout(()=>{x(!1)},2e3),setTimeout(()=>{window.print()},3e3)},participantType:s,eventDetails:r,selectedParticipantDetails:c,setFilter:m,setOpen:a,setAllowEdit:d})]}),getParticipants:"/CoordinatorJson/GetParticipants",closeModel:()=>{a(!1)},participantTypeInt:s,candidateId:h,setActiveTab:()=>{}})}export{it as default};
