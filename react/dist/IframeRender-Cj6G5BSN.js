import{r as o,j as e}from"./main-pxHJVgAj.js";import{O}from"./OldNewTabLayout-zq0mC2SZ.js";import{d as R,b as N}from"./index-DnBI3Rer.js";const k=({url:c,title:r="Loading...",className:x="reactIframeLayout",id:d="mvc-iframe",onLoad:h,fallbackUrl:m,isNewPageAvailable:w=!1})=>{const b=R(),[f,p]=o.useState(""),[i,a]=o.useState(!0),[n,l]=o.useState(!1),L=t=>{if(w){const s=t,u=t+"Old";return{isOldNewLayout:!0,tabs:[{title:"New Page",path:N(s)},{title:"Old Page",active:!0,path:N(u)}]}}return{isOldNewLayout:!1}};o.useEffect(()=>{let t=c;t||(t=b.pathname);const s=I(t);p(s),a(!0),l(!1)},[c,r]);const I=t=>{let s=t;s=s.replace(/^\/v2/,""),s=s.replace("/index.html",""),s=s.replace(/\/Render([A-Z])/g,"/$1"),s=s.replace(/\/index\.html$/,""),s=s.replace(/\/$/,""),s.startsWith("/")||(s="/"+s);const u=s.includes("?")?"&":"?";return s+=`${u}IsInIframe=true`,s},g=()=>{a(!1),l(!1),h&&h()},y=()=>{a(!1),l(!0),m&&f!==m&&(p(m),a(!0),l(!1))},v=()=>{a(!0),l(!1);const t=document.getElementById(d);t&&(t.src=t.src)},E=c||b.pathname,j=L(E);return j.isOldNewLayout?e.jsx(O,{tabs:j.tabs,children:e.jsxs("div",{className:"relative w-full h-full",children:[i&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50 z-10",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),e.jsx("span",{className:"text-sm text-gray-600",children:r})]})}),n&&!i&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50 z-10",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("div",{className:"text-red-500 text-4xl mb-3",children:"⚠️"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to load page"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"The requested page could not be loaded."}),e.jsxs("button",{onClick:v,className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"refresh"}),"Retry"]})]})}),e.jsx("iframe",{id:d,className:`${x} w-full h-full border-0`,src:f,title:r,onLoad:g,onError:y,style:{minHeight:"calc(100vh - 2.5rem)",display:n?"none":"block"}})]})}):e.jsxs("div",{className:"relative w-full h-full",children:[i&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50 z-10",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),e.jsx("span",{className:"text-sm text-gray-600",children:r})]})}),n&&!i&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50 z-10",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("div",{className:"text-red-500 text-4xl mb-3",children:"⚠️"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to load page"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"The requested page could not be loaded."}),e.jsxs("button",{onClick:v,className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"refresh"}),"Retry"]})]})}),e.jsx("iframe",{id:d,className:`${x} w-full h-full border-0`,src:f,title:r,onLoad:g,onError:y,style:{minHeight:"calc(100vh - 2.5rem)",display:n?"none":"block"}})]})};export{k as default};
