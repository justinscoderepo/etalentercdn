import{r as i,j as r}from"./mainweb-PKBDKZun.js";import{u as K}from"./XMarkIcon-2QaQqb7-.js";import{R as L}from"./renderComponents-DjnE-Elm.js";function q({title:l,titleId:n,...e},c){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":n},e),l?i.createElement("title",{id:n},l):null,i.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z",clipRule:"evenodd"}))}const y=i.forwardRef(q),W=({isSubmitted:l,drop:n,data:e,isOver:c,selectedComponent:j,setSelectedComponent:C,components:a,setComponents:I,handlePropertiesPanelChange:E,removeComponent:S,isPlayGround:u,eventDetails:N,handleNext:R,isLastStep:F})=>{const{handleSubmit:k,register:V,unregister:M,control:D,clearErrors:H,reset:b,watch:O,getValues:p,setValue:h,trigger:J,formState:{errors:Z}}=K({defaultValues:{...e}});p();let[f,d]=i.useState({...e});i.useEffect(()=>{e&&(Object.keys(e).forEach(t=>{M(t),h(t,e[t])}),d({...e}))},[e]);const z=t=>{C(t)},A=async t=>{await R(t,b)},g=(t,s)=>{h(t,s),e&&(e[t]=s),d({...e})};let x=[...a];return f&&(a==null?void 0:a.length)>0&&!u&&(x=x.filter(t=>{var v;let s=(v=t.conditions)==null?void 0:v.filter(w=>w.key);return(s==null?void 0:s.length)>0?!!s.find(o=>{if(o.key){let B=o.key.charAt(0).toLowerCase()+o.key.slice(1),m=f[o.key]||f[B];if(m&&(m==null?void 0:m.toString())==o.value)return!0}}):!0})),r.jsx("div",{className:("flex-auto p-2 "+u,""),children:r.jsxs("form",{onSubmit:k(A),children:[r.jsx(L,{handlePropertiesChange:g,handlePropertiesPanelChange:E,formData:f,isPlayGround:u,onChangeValue:g,drop:n,isSubmitted:l,isOver:c,eventDetails:N,components:x,selectedComponent:j,handleSelect:z,register:V,getValues:p,errors:Z,control:D,setValue:h,clearErrors:H,reset:b,watch:O,removeComponent:S}),!u&&!l&&r.jsx("div",{className:"mb-2 w-full flex justify-end px-8",children:F?r.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[r.jsx(y,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Submit"]}):r.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[r.jsx(y,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Next"]})})]})})};export{W as F,y as a};
