import{r as N,j as f,R as x,b as S}from"./mainweb-wDBYFFVh.js";import{u as O}from"./useBackend-I2PQF5ic.js";import"./httpService-CaB-7Nhf.js";import"./index-t--hEgTQ.js";const j=x.lazy(()=>S(()=>import("./selectBox-B3GAmd7a.js"),[])),y=({fieldName:n,levels:L,placeholder:d,errors:a,register:c,formData:o,disabled:u,onChange:m})=>{let s=a==null?void 0:a[n],[p,e]=N.useState(s);N.useEffect(()=>{e(a==null?void 0:a[n])},[a==null?void 0:a[n]]);let[t,g]=N.useState({});const{rows:l}=O("/CandidateJson/GetSubOrganizations",{sort:{sortOrder:"DESC",sortColumn:"id"},limit:1e5,doCache:!0,select:"Name,Id,CompetitionLevel,CompetitionLevelLevelName,ParentOrganization"});let{refactoredGroups:v}=o?_(l,o,t,L):{refactoredGroups:{}};return N.useEffect(()=>{o&&l&&L.forEach(i=>{let r=n+"."+i.LevelName;if(m){let C=i.LevelName.charAt(0).toLowerCase()+i.LevelName.slice(1),h=o[C],E=o[r];h&&!E&&m(r,h)}})},[L,o,l]),f.jsx("div",{className:"grid grid-cols-2 gap-4",children:L.map(i=>f.jsx("div",{children:f.jsx(j,{fieldName:n+"."+i.LevelName,label:i.LevelName,placeholder:d,disabled:u,errors:a,register:c,formData:o,optional:!1,onChange:r=>{t[i.LevelName]=r.target.value,g({...t});let C=i.LevelName.charAt(0).toLowerCase()+i.LevelName.slice(1);m(C,r.target.value),m(n+"."+i.LevelName,r.target.value),e("")},options:v[i.LevelName],optionKey:"Id",optionText:"Name"})},i.LevelName))})};function _(n,L,d,a){let c=n!=null&&n.length?[...n]:[],o=c&&(c==null?void 0:c.length)>0?c.reduce((e,t)=>(e[t.CompetitionLevelLevelName]=e[t.CompetitionLevelLevelName]||[],e[t.CompetitionLevelLevelName].push(t),e),Object.create(null)):{},u="",m=!0,s={};L&&Object.keys(L).forEach(e=>{let t=e.charAt(0).toUpperCase()+e.slice(1);s[t]=L[e]});let p={};return a==null||a.forEach(e=>{var l;let t={...s,...d};u?p[e.LevelName]=(l=o[e.LevelName])==null?void 0:l.filter(v=>v.ParentOrganization==(t==null?void 0:t[u])):m?p[e.LevelName]=o[e.LevelName]:p[e.LevelName]=[],(t==null?void 0:t[e.LevelName])&&(u=e.LevelName),m=!1}),{refactoredGroups:p}}export{_ as ExtractLevelKeys,y as default};
