import{r as a,j as s,R as v,_ as j,a as C}from"./mainweb-DaDb-qUF.js";import{s as R,w as N,i as E,u as T,a as b,r as _,b as A,c as S}from"./useDragDropManager-Clj-9Zyx.js";import{i as D}from"./index-adFGxSE_.js";import{v as k}from"./v4-BKT09osN.js";function H({title:r,titleId:e,...t},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},t),r?a.createElement("title",{id:e},r):null,a.createElement("path",{fillRule:"evenodd",d:"M7.502 6h7.128A3.375 3.375 0 0 1 18 9.375v9.375a3 3 0 0 0 3-3V6.108c0-1.505-1.125-2.811-2.664-2.94a48.972 48.972 0 0 0-.673-.05A3 3 0 0 0 15 1.5h-1.5a3 3 0 0 0-2.663 1.618c-.225.015-.45.032-.673.05C8.662 3.295 7.554 4.542 7.502 6ZM13.5 3A1.5 1.5 0 0 0 12 4.5h4.5A1.5 1.5 0 0 0 15 3h-1.5Z",clipRule:"evenodd"}),a.createElement("path",{fillRule:"evenodd",d:"M3 9.375C3 8.339 3.84 7.5 4.875 7.5h9.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V9.375Zm9.586 4.594a.75.75 0 0 0-1.172-.938l-2.476 3.096-.908-.907a.75.75 0 0 0-1.06 1.06l1.5 1.5a.75.75 0 0 0 1.116-.062l3-3.75Z",clipRule:"evenodd"}))}const F=a.forwardRef(H);function P({title:r,titleId:e,...t},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},t),r?a.createElement("title",{id:e},r):null,a.createElement("path",{d:"M7.5 3.375c0-1.036.84-1.875 1.875-1.875h.375a3.75 3.75 0 0 1 3.75 3.75v1.875C13.5 8.161 14.34 9 15.375 9h1.875A3.75 3.75 0 0 1 21 12.75v3.375C21 17.16 20.16 18 19.125 18h-9.75A1.875 1.875 0 0 1 7.5 16.125V3.375Z"}),a.createElement("path",{d:"M15 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 17.25 7.5h-1.875A.375.375 0 0 1 15 7.125V5.25ZM4.875 6H6v10.125A3.375 3.375 0 0 0 9.375 19.5H16.5v1.125c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V7.875C3 6.839 3.84 6 4.875 6Z"}))}const V=a.forwardRef(P);let x=!1;class Z{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;D(!x,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return x=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{x=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}class B{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!R(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=N({dropTarget:(t,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,E(t)?this.dropTargetRef=t:this.dropTargetNode=t,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function L(r){return a.useMemo(()=>r.hooks.dropTarget(),[r])}function z(r){const e=T(),t=a.useMemo(()=>new B(e.getBackend()),[e]);return b(()=>(t.dropTargetOptions=r||null,t.reconnect(),()=>t.disconnectDropTarget()),[r]),t}function J(){const r=T();return a.useMemo(()=>new Z(r),[r])}function q(r){const{accept:e}=r;return a.useMemo(()=>(D(r.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class G{canDrop(){const e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function Y(r,e){const t=a.useMemo(()=>new G(r,e),[e]);return a.useEffect(()=>{t.spec=r},[r]),t}function $(r,e,t){const n=T(),l=Y(r,e),g=q(r);b(function(){const[m,f]=_(g,l,n);return e.receiveHandlerId(m),t.receiveHandlerId(m),f},[n,e,l,t,g.map(p=>p.toString()).join("|")])}function K(r,e){const t=A(r),n=J(),l=z(t.options);return $(t,n,l),[S(t.collect,n,l),L(l)]}const Q=v.lazy(()=>C(()=>import("./formSubmission-DCdPaWI8.js"),[])),U=v.lazy(()=>C(()=>import("./sidebar-6GjKfDnq.js"),[])),re=({existingComponents:r,onChange:e,firstComponentId:t})=>{const[n,l]=a.useState([]),[g,p]=a.useState(null);a.useEffect(()=>{r!=null&&r.length?l(r):l([])},[t]);const[{isOver:m},f]=K({accept:"FORM_ITEM",drop:o=>I(o),collect:o=>({isOver:!!o.isOver()})}),u=o=>{l(o),e(o)},I=o=>{var c=o.label+" "+n.length,d=o.label.toLowerCase().replace(/ /g,"_")+"_"+n.length;const i={...o,id:k(),label:c,name:d,class:"",options:[],conditions:[],validate:{}};i.index=n.length+1;let h=[...n,i];u(h),p(i)},O=o=>{let c=n.filter(d=>d.id!==o);c.forEach((d,i)=>{d.index=i+1}),u(c)},w=o=>{let d=n.map(i=>i.id===o.id?o:i).sort((i,h)=>i.index-h.index);d.forEach((i,h)=>{i.index=h+1}),u(d)};let M=o=>{navigator.clipboard.writeText(o)},y=o=>{let c=JSON.parse(o);u(c)};return console.log({componentsFB:n}),s.jsx("div",{className:"flex flex-col grow",children:s.jsx("div",{className:"bg-gray-1",children:s.jsx("div",{className:"mx-auto",children:s.jsxs("div",{className:"flex gap-4 ",children:[s.jsxs("div",{className:"relative lg:row-span-2",children:[s.jsx("div",{className:"absolute inset-px rounded-lg bg-white lg:rounded-l-[1rem]"}),s.jsx("div",{className:"relative flex h-full flex-col overflow-hidden rounded-[calc(theme(borderRadius.md)+1px)] lg:rounded-l-[calc(1rem+1px)]",children:s.jsx(U,{})}),s.jsx("div",{className:"pointer-events-none absolute inset-px rounded-lg shadow ring-1 ring-black/5 lg:rounded-l-[1rem]"})]}),s.jsxs("div",{className:"relative grow flex-1 mr-[290px]",children:[s.jsx("div",{className:"absolute inset-px rounded-lg bg-white max-lg:rounded-t-[1rem]"}),s.jsxs("div",{className:"relative flex h-full flex-col  rounded-[calc(theme(borderRadius.md)+1px)] max-lg:rounded-t-[calc(1rem+1px)]",children:[s.jsx("div",{className:"flex flex-col md:flex-row bg-gray-50 rounded-md p-4",children:s.jsxs("div",{className:"flex-1 flex space-x-1 justify-end",children:[s.jsxs("button",{type:"button",className:"bg-violet-950 rounded-md hover:bg-darkprimary text-white text-xs font-medium justify-items-center items-center py-2 px-4 flex space-x-1",onClick:()=>{M(JSON.stringify(n)),j.success("Form copied to clipboard")},children:[s.jsx(V,{className:"h-5 w-5"})," Copy"]}),s.jsxs("button",{type:"button",className:"bg-blue-900 rounded-md hover:bg-darkprimary text-white text-xs font-medium justify-items-center items-center py-2 px-4 flex space-x-1",onClick:()=>{navigator.clipboard.readText().then(o=>{y(o)})},children:[s.jsx(F,{className:"h-5 w-5"})," Paste"]})]})}),s.jsx(Q,{isPlayGround:!0,drop:f,isOver:m,components:n,removeComponent:O,handlePropertiesPanelChange:w,setComponents:u,selectedComponent:g,setSelectedComponent:p})]}),s.jsx("div",{className:"pointer-events-none absolute inset-px rounded-lg shadow ring-1 ring-black/5 max-lg:rounded-t-[1rem]"})]})]})})})})};export{re as default};
