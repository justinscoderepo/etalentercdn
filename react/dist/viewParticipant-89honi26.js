import{r as n,e as be,p as y,j as t,L as ie,R as ue,b as de,g as je,_ as Ne}from"./mainweb-DLytOzeA.js";import{B as me}from"./box-CSre7cpv.js";import{u as le,i as ye}from"./useBackend-DQtjNKWe.js";import{r as Ce,e as Re,g as Te,a as Ue,u as Je,U as Ee,b as Ae,S as ce}from"./publicRegistrationHelper-rR_ed_3i.js";import{R as Fe}from"./renderRegistrationForm-BUtH7rDJ.js";import{p as Ie}from"./httpService-Dtbvl9Ps.js";import{F as Le}from"./PencilIcon-DriL9zMZ.js";import"./utilities-CN4lTu6a.js";import"./useConfirmation-DntyYy5X.js";import"./dialog-ggJXrdBE.js";import"./keyboard-DtRAc72Y.js";import"./CheckIcon-irlFAkRU.js";import"./index.modern-t_6isRa7.js";import"./dateHelper-oCfVqLRq.js";import"./CalendarDateRangeIcon-CZmYKdyT.js";import"./ChevronRightIcon-GxfB0Yv_.js";import"./TrashIcon-COqmq09_.js";import"./index-t--hEgTQ.js";function Be({title:s,titleId:b,...u},m){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":b},u),s?n.createElement("title",{id:b},s):null,n.createElement("path",{fillRule:"evenodd",d:"M7.875 1.5C6.839 1.5 6 2.34 6 3.375v2.99c-.426.053-.851.11-1.274.174-1.454.218-2.476 1.483-2.476 2.917v6.294a3 3 0 0 0 3 3h.27l-.155 1.705A1.875 1.875 0 0 0 7.232 22.5h9.536a1.875 1.875 0 0 0 1.867-2.045l-.155-1.705h.27a3 3 0 0 0 3-3V9.456c0-1.434-1.022-2.7-2.476-2.917A48.716 48.716 0 0 0 18 6.366V3.375c0-1.036-.84-1.875-1.875-1.875h-8.25ZM16.5 6.205v-2.83A.375.375 0 0 0 16.125 3h-8.25a.375.375 0 0 0-.375.375v2.83a49.353 49.353 0 0 1 9 0Zm-.217 8.265c.178.018.317.16.333.337l.526 5.784a.375.375 0 0 1-.374.409H7.232a.375.375 0 0 1-.374-.409l.526-5.784a.373.373 0 0 1 .333-.337 41.741 41.741 0 0 1 8.566 0Zm.967-3.97a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H18a.75.75 0 0 1-.75-.75V10.5ZM15 9.75a.75.75 0 0 0-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 0 .75-.75V10.5a.75.75 0 0 0-.75-.75H15Z",clipRule:"evenodd"}))}const Ge=n.forwardRef(Be),Oe=ue.lazy(()=>de(()=>import("./formSubmission-CVcPzjSy.js"),[])),_e=ue.lazy(()=>de(()=>import("./modalForm-B_nUZsYA.js"),[]));function ke({view:s,setActiveTab:b,getEvets:u,isCoordinatorView:m,setParticipantTypeInt:S,getParticipants:o,participantTypeInt:a,candidateId:h,closeModel:v,customComponents:C,allowEdit:E}){var se,te,re,oe,ne,ae;let{user:f}=be()||{};f==null||f.RoleTitle,((se=f==null?void 0:f.Email)==null?void 0:se.indexOf("justnshalom"))!=-1;let[l,z]=n.useState(null),[A,D]=n.useState({}),[j,H]=n.useState(null),[I,Z]=n.useState(!1),[O,q]=n.useState(null),[c,$]=n.useState([]),[R,Q]=n.useState(a==1?"Individual":a==2?"Team":""),[_,W]=n.useState([...Ce]);const{row:e,status:i}=le(u||"/CandidateJson/GetEvents",{select:"AllowDisplayCompetitionOrder,Description,EVId,EndDateString,EventCategory,EventCategoryTitle,EventLogo,EventName,IdentityBackgroundImage,OrganizationLogo,OrganizationName,OrganizationShortName,StartDateString,Venue,JsonSettings",doCache:!0});let g="finished",F="finished",T="finished",{row:p,status:N}=le(o||"/CandidateJson/GetParticipants",{deleteUrl:"/CandidateJson/RemoveUser",mandatoryParams:["participantType"],select:"participantList,userList,UserEmail,UserName,UserDobString,UserImage,UserMobile,UserPhone,Email,Group,Candidate,CandidateUser,JsonSettings,Gender,GroupName,Fees,TeamTeamName,Team,TeamStrength,TeamMembersList,TeamMembers,TeamStrength,CandidateIdentityNumber,TeamIdentityNumber,CompetitionOrder,CreatedBy,CreatedByUserName,ParticipationId,UserJsonSettings,TeamJsonSettings,Remarks,LevelSettings,RegistrationId",updateUrl:"/CandidateJson/UpdateParticipant",doCache:!0,filter:h?{Candidate:h,...a==1?{participantType:"1"}:a==2?{participantType:"2"}:{}}:{}}),X=Re(p,h,l==null?void 0:l.UId,j==null?void 0:j.Team),{userRole:k,users:V,userData:L,teamData:B}=X;if(l=l||L,j=j||B,V!=null&&V.length||(te=y(localStorage.user))==null||te.user,R=="Team"){let r=(re=y(localStorage.user))==null?void 0:re.user;r&&((oe=r==null?void 0:r.Email)==null?void 0:oe.indexOf("justnshalom"))==-1}I=ye(i,g,F,T,N)||I;let ee=y(k==null?void 0:k.JsonSettings),fe=y(L==null?void 0:L.JsonSettings),ge=y(B==null?void 0:B.TeamJsonSettings);const Y=e==null?void 0:e.JsonSettings,U=(Y!=null&&Y!=""?y(Y):{components:{}}).components,K=Object.keys(U??{});let xe=y(A==null?void 0:A.JsonSettings),P=(K==null?void 0:K.includes("Agreement"))&&((ae=(ne=U==null?void 0:U.Agreement)==null?void 0:ne.filter(r=>{var x;return((x=r==null?void 0:r.validate)==null?void 0:x.required)&&!ee[r.name]&&!xe[r.name]}))==null?void 0:ae.length)==0;P&&localStorage.setItem("isAgreementStepFilled","true"),localStorage.getItem("isAgreementStepFilled")=="true"&&(P=!0);let d=Te(U,_,P,R,V,{},s),G={},pe=!0,Se=()=>{v&&v()};if(h&&!p)return t.jsx(ie,{});let w=[];if(R=="Individual"){let r=[];r.push(d[0]),w.push(r);let x=[];d.length>1&&x.push(d[1]),w.push(x),x=[],d.length>2&&x.push(d[2]),w.push(x);let J=[];d.length>3&&J.push(d[3]),w.push(J)}else{let r=[];d.length>2&&r.push(d[2]),w.push(r),r=[],d.length>3&&r.push(d[3]),w.push(r);let x=[];d.length>4&&x.push(d[4]),w.push(x);let J=[];d.length>5&&J.push(d[5]),w.push(J)}return console.log({splitBy2:w}),t.jsx("div",{children:t.jsx(_e,{title:"Registration Form",description:"Please fill the form to register for the event",open:!0,customHeading:C||null,setOpen:()=>{Se()},children:t.jsx(me,{heading:"",outerClasses:"relative w-full",headingClasses:"px-1 lg:px-4 print:hidden w-full",children:t.jsx("div",{className:"w-full mt-5 min-h-[600px] print:mt-0 flex flex-col",id:"registrationBox",children:w.map((r,x)=>t.jsx("div",{className:"flex w-full flex-1 gap-x-8",children:r.map((J,ve)=>{G=J,c=Ue(U,G);let we=G?Je(G.name,{},()=>{},()=>{},G,k,ee,L,fe,R,B,p,U,l,j,ge,!1,A):{};return t.jsx("div",{className:"flex-1",children:t.jsx(Oe,{isPrint:!0,isCoordinatorView:m,participantType:R,isGuardianRegistration:!1,handleNext:()=>{},isSubmitted:pe,eventDetails:e,isPlayGround:!1,onChange:()=>{},data:we,isLastStep:!1,existingComponents:c,selectedComponent:O,setSelectedComponent:()=>{},components:c,setComponents:()=>{}},ve)})})}))})})})})}var he={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(s){(function(){var b={}.hasOwnProperty;function u(){for(var m=[],S=0;S<arguments.length;S++){var o=arguments[S];if(o){var a=typeof o;if(a==="string"||a==="number")m.push(o);else if(Array.isArray(o)){if(o.length){var h=u.apply(null,o);h&&m.push(h)}}else if(a==="object"){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){m.push(o.toString());continue}for(var v in o)b.call(o,v)&&o[v]&&m.push(v)}}}return m.join(" ")}s.exports?(u.default=u,s.exports=u):window.classNames=u})()})(he);var Ve=he.exports;const M=je(Ve);let Me=({selectedParticipantDetails:s,participantType:b,setAllowEdit:u,setOpen:m,setFilter:S,setPrint:o,eventDetails:a})=>{var H,I,Z,O,q,c,$,R,Q,_,W;let h=localStorage.getItem("siteConfig")?JSON.parse(localStorage.getItem("siteConfig")):{};const[v,C]=n.useState(!1),[E,f]=n.useState(""),[l,z]=n.useState("Pending"),A=(e,i)=>{let g="";if(console.log("selectedParticipantDetails",e),i==="Approved"){g="Thank you for your registration, "+(e==null?void 0:e.UserName)+`
`,g+="Based on your date of birth ("+(e==null?void 0:e.UserDobString)+"), you have been assigned to the "+(e==null?void 0:e.GroupName)+` age group and successfully registered for the following competitions:
`;let F=e==null?void 0:e.participatingCompetitions,T={};F==null||F.forEach(p=>{let N=p==null?void 0:p.GroupName;T[N]||(T[N]=[]),T[N].push(p)});for(const p in T)g+=`
`+p+` Group
`,T[p].forEach((N,X)=>{g+=X+1+" - "+(N==null?void 0:N.Title)+`
`});g+=`
Please login with the credentials sent in your email to see candidate details and participation informations under the Participation tab. 
`,g+="Login: "+(h==null?void 0:h.emailConfigSiteUrl)+`
`}console.log("mailComment",g),f(g),z(i),C(!0)},D=()=>{var e;if(z(l),E.trim()){f(""),C(!1);let i=y((e=s==null?void 0:s.user)==null?void 0:e.JsonSettings);i||(i={}),i.ApprovalStatus=l,i.ReviewComments||(i.ReviewComments=[]),i.ReviewComments.push({Comment:E,Status:l,Date:new Date().toISOString()}),l==="Reviewed"&&(i.FinishedSteps=!1),l==="Approved"&&(i.FinishedSteps=!0);let g={ParticipantType:b,UserRoleId:s.user.Candidate,TeamId:s.user.Team,JsonSettings:JSON.stringify(i)};Ie("/UsersRolesJson/Approve",g).then(F=>{Ne.success("Review submitted successfully and emailed to the user."),u(!1),m(!1),S(!0)})}else alert("Please add a comment before submitting.")};let j=[];if((H=s==null?void 0:s.user)!=null&&H.JsonSettings){let e=y((I=s==null?void 0:s.user)==null?void 0:I.JsonSettings);e!=null&&e.ReviewComments&&(j=e==null?void 0:e.ReviewComments)}return t.jsxs("div",{className:"border-b border-gray-200 pb-5 bg-white flex flex-1 flex-col pr-10 print:pr-0",children:[t.jsxs("div",{className:"sm:flex flex-row sm:justify-between",children:[t.jsxs("div",{className:"sm:flex-1 gap-x-10",children:[((Z=s==null?void 0:s.user)==null?void 0:Z.UserName)&&t.jsxs(t.Fragment,{children:[t.jsxs("h1",{id:"message-heading",className:"text-base font-semibold text-gray-900",children:[(O=s==null?void 0:s.user)==null?void 0:O.CandidateIdentityNumber," - ",(q=s==null?void 0:s.user)==null?void 0:q.UserName]}),t.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(c=s==null?void 0:s.user)==null?void 0:c.Email}),t.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:($=s==null?void 0:s.user)==null?void 0:$.UserMobile}),t.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(R=s==null?void 0:s.user)==null?void 0:R.UserDobString})]}),((Q=s==null?void 0:s.user)==null?void 0:Q.TeamTeamName)&&t.jsx(t.Fragment,{children:t.jsxs("h1",{id:"message-heading",className:"text-base font-semibold text-gray-900",children:[(_=s==null?void 0:s.user)==null?void 0:_.TeamIdentityNumber," -",(W=s==null?void 0:s.user)==null?void 0:W.TeamTeamName]})}),t.jsxs("button",{className:"inline-flex items-center print:hidden gap-x-1.5 px-10 rounded-md bg-blue-600 mt-5  py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600",onClick:()=>u(!0),children:[t.jsx(Le,{className:"h-5 w-5 inline-block -mt-0.5 mr-0 "}),"Edit"]}),t.jsx("button",{onClick:()=>{o(!0)},className:"bg-darkprimary text-white px-10  ml-2 py-1.5 rounded-md print:hidden",children:t.jsx(Ge,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"hidden print:flex  max-h-90  flex-col justify-items-end flex-wrap",children:[t.jsx("div",{className:"text-primary text-right",children:a==null?void 0:a.EventName}),t.jsx("div",{className:"justify-end flex",children:t.jsx("img",{src:a==null?void 0:a.EventLogo,alt:"logo",className:"max-h-16 w-auto"})})]}),t.jsxs("div",{className:"mt-4 flex flex-col space-y-4 print:hidden",children:[t.jsx(Ee,{person:s==null?void 0:s.user}),t.jsx(Ae,{onClick:A,person:s==null?void 0:s.user})]})]}),t.jsxs("div",{className:"print:hidden",children:[t.jsx("div",{children:j.map((e,i)=>t.jsx("div",{className:"mt-2 flex flex-col relative",children:t.jsx("div",{className:M("border-l-4 p-4",(e==null?void 0:e.Status)==="Reviewed"?"border-yellow-400 bg-yellow-50":(e==null?void 0:e.Status)==="Approved"?"border-green-400 bg-green-50":"border-red-400 bg-red-50"),children:t.jsx("div",{className:"flex",children:t.jsxs("div",{className:"ml-3 flex-1",children:[t.jsx("h4",{className:M("text-lg font-bold",(e==null?void 0:e.Status)==="Reviewed"?"text-yellow-700":(e==null?void 0:e.Status)==="Approved"?"text-green-700":"text-red-700"),children:e==null?void 0:e.Status}),t.jsx("p",{className:M("text-sm whitespace-pre-line",(e==null?void 0:e.Status)==="Reviewed"?"text-yellow-700":(e==null?void 0:e.Status)==="Approved"?"text-green-700":"text-red-700"),children:(e==null?void 0:e.Comment)??e}),t.jsx("p",{className:M("font-medium text-right ",(e==null?void 0:e.Status)==="Reviewed"?"text-yellow-700":(e==null?void 0:e.Status)==="Approved"?"text-green-700":"text-red-700"),children:e==null?void 0:e.Date})]})})})},i))}),v&&t.jsx("div",{className:"mt-2 flex flex-col relative print:hidden",children:t.jsxs(me,{heading:"Please enter the reason for change status to "+l,childrenClasses:"flex flex-col mt-4 relative",children:[t.jsxs("div",{className:"rounded-lg bg-white outline outline-1 -outline-offset-1 outline-gray-300 focus-within:outline focus-within:outline-2 focus-within:-outline-offset-2 focus-within:outline-indigo-600",children:[t.jsx("label",{htmlFor:"comment",className:"sr-only",children:"Add your comment..."}),t.jsx("textarea",{id:"comment",name:"comment",rows:6,placeholder:"Add your comment..., The comment will be sent to the user via email.",className:"block w-full rounded-lg resize-none bg-transparent px-3 py-1.5 text-base text-gray-900 placeholder:text-gray-400 focus:outline focus:outline-0 sm:text-sm/6",value:E,onChange:e=>f(e.target.value)})]}),t.jsxs("div",{className:" inset-x-0 bottom-0 flex justify-between py-2 pl-3 pr-2",children:[t.jsx("div",{className:"flex items-center space-x-5"}),t.jsx("div",{className:"shrink-0",children:t.jsx(ce,{onClick:D,currentReviewStatus:l})})]})]})})]})]})};function is({participantType:s,candidateId:b,eventDetails:u,setFilter:m,selectedParticipantDetails:S,setOpen:o}){let[a,h]=n.useState(!1),[v,C]=n.useState(!1),[E,f]=n.useState(!1),l=v?ke:Fe;return t.jsx(l,{isCoordinatorView:!0,view:"participationDetails",getEvets:"/EventJson/Get",allowEdit:a,getUserRoles:"/UsersRolesPlusUsersJson/Get",getTeams:"/CompetitionParticipantsTeamsJson/Get",getUsers:"/UsersRolesPlusUsersJson/Get",customComponents:t.jsxs(t.Fragment,{children:[E&&t.jsx(ie,{}),t.jsx(Me,{setPrint:()=>{window.parent.document.title="Candiidate Details - "+S.user.UserName+" - "+S.user.UserDobString,C(!0),f(!0),window.onafterprint=()=>{C(!1)},setTimeout(()=>{f(!1)},2e3),setTimeout(()=>{window.print()},3e3)},participantType:s,eventDetails:u,selectedParticipantDetails:S,setFilter:m,setOpen:o,setAllowEdit:h})]}),getParticipants:"/CoordinatorJson/GetParticipants",closeModel:()=>{o(!1)},participantTypeInt:s,candidateId:b,setActiveTab:()=>{}})}export{is as default};
