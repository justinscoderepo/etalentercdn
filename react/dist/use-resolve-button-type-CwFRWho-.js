import{R as q,r as l}from"./mainweb-aVLmWqsU.js";import{p as J,o as G,c as Q}from"./keyboard-BOx9uGmO.js";const B=typeof document<"u"?q.useLayoutEffect:()=>{};function Z(e){const n=l.useRef(null);return B(()=>{n.current=e},[e]),l.useCallback((...t)=>{const r=n.current;return r==null?void 0:r(...t)},[])}const m=e=>{var n;return(n=e==null?void 0:e.ownerDocument)!==null&&n!==void 0?n:document},h=e=>e&&"window"in e&&e.window===e?e:m(e).defaultView||window;function ee(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function te(e){return ee(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let ne=!1;function A(){return ne}function R(e,n){if(!A())return n&&e?e.contains(n):!1;if(!e||!n)return!1;let t=n;for(;t!==null;){if(t===e)return!0;t.tagName==="SLOT"&&t.assignedSlot?t=t.assignedSlot.parentNode:te(t)?t=t.host:t=t.parentNode}return!1}const x=(e=document)=>{var n;if(!A())return e.activeElement;let t=e.activeElement;for(;t&&"shadowRoot"in t&&(!((n=t.shadowRoot)===null||n===void 0)&&n.activeElement);)t=t.shadowRoot.activeElement;return t};function O(e){return A()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function re(e){var n;return typeof window>"u"||window.navigator==null?!1:((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent)}function oe(e){var n;return typeof window<"u"&&window.navigator!=null?e.test(((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.platform)||window.navigator.platform):!1}function _(e){let n=null;return()=>(n==null&&(n=e()),n)}const ie=_(function(){return oe(/^Mac/i)}),ae=_(function(){return re(/Android/i)});function V(){let e=l.useRef(new Map),n=l.useCallback((o,a,s,i)=>{let u=i!=null&&i.once?(...d)=>{e.current.delete(s),s(...d)}:s;e.current.set(s,{type:a,eventTarget:o,fn:u,options:i}),o.addEventListener(a,u,i)},[]),t=l.useCallback((o,a,s,i)=>{var u;let d=((u=e.current.get(s))===null||u===void 0?void 0:u.fn)||s;o.removeEventListener(a,d,i),e.current.delete(s)},[]),r=l.useCallback(()=>{e.current.forEach((o,a)=>{t(o.eventTarget,o.type,a,o.options)})},[t]);return l.useEffect(()=>r,[r]),{addGlobalListener:n,removeGlobalListener:t,removeAllGlobalListeners:r}}function ue(e){return e.mozInputSource===0&&e.isTrusted?!0:ae()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}class K{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(n,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=n}}function N(e){let n=l.useRef({isFocused:!1,observer:null});B(()=>{const r=n.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let t=Z(r=>{e==null||e(r)});return l.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){n.current.isFocused=!0;let o=r.target,a=s=>{n.current.isFocused=!1,o.disabled&&t(new K("blur",s)),n.current.observer&&(n.current.observer.disconnect(),n.current.observer=null)};o.addEventListener("focusout",a,{once:!0}),n.current.observer=new MutationObserver(()=>{if(n.current.isFocused&&o.disabled){var s;(s=n.current.observer)===null||s===void 0||s.disconnect();let i=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:i})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:i}))}}),n.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[t])}let se=!1,y=null,C=new Set,T=new Map,w=!1,S=!1;const le={Tab:!0,Escape:!0};function W(e,n){for(let t of C)t(e,n)}function ce(e){return!(e.metaKey||!ie()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function F(e){w=!0,ce(e)&&(y="keyboard",W("keyboard",e))}function v(e){y="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(w=!0,W("pointer",e))}function j(e){ue(e)&&(w=!0,y="virtual")}function U(e){e.target===window||e.target===document||se||!e.isTrusted||(!w&&!S&&(y="virtual",W("virtual",e)),w=!1,S=!1)}function Y(){w=!1,S=!0}function k(e){if(typeof window>"u"||T.get(h(e)))return;const n=h(e),t=m(e);let r=n.HTMLElement.prototype.focus;n.HTMLElement.prototype.focus=function(){w=!0,r.apply(this,arguments)},t.addEventListener("keydown",F,!0),t.addEventListener("keyup",F,!0),t.addEventListener("click",j,!0),n.addEventListener("focus",U,!0),n.addEventListener("blur",Y,!1),typeof PointerEvent<"u"?(t.addEventListener("pointerdown",v,!0),t.addEventListener("pointermove",v,!0),t.addEventListener("pointerup",v,!0)):(t.addEventListener("mousedown",v,!0),t.addEventListener("mousemove",v,!0),t.addEventListener("mouseup",v,!0)),n.addEventListener("beforeunload",()=>{X(e)},{once:!0}),T.set(n,{focus:r})}const X=(e,n)=>{const t=h(e),r=m(e);n&&r.removeEventListener("DOMContentLoaded",n),T.has(t)&&(t.HTMLElement.prototype.focus=T.get(t).focus,r.removeEventListener("keydown",F,!0),r.removeEventListener("keyup",F,!0),r.removeEventListener("click",j,!0),t.removeEventListener("focus",U,!0),t.removeEventListener("blur",Y,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",v,!0),r.removeEventListener("pointermove",v,!0),r.removeEventListener("pointerup",v,!0)):(r.removeEventListener("mousedown",v,!0),r.removeEventListener("mousemove",v,!0),r.removeEventListener("mouseup",v,!0)),T.delete(t))};function de(e){const n=m(e);let t;return n.readyState!=="loading"?k(e):(t=()=>{k(e)},n.addEventListener("DOMContentLoaded",t)),()=>X(e,t)}typeof document<"u"&&de();function z(){return y!=="pointer"}const fe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function ve(e,n,t){let r=m(t==null?void 0:t.target);const o=typeof window<"u"?h(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,a=typeof window<"u"?h(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,s=typeof window<"u"?h(t==null?void 0:t.target).HTMLElement:HTMLElement,i=typeof window<"u"?h(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return e=e||r.activeElement instanceof o&&!fe.has(r.activeElement.type)||r.activeElement instanceof a||r.activeElement instanceof s&&r.activeElement.isContentEditable,!(e&&n==="keyboard"&&t instanceof i&&!le[t.key])}function be(e,n,t){k(),l.useEffect(()=>{let r=(o,a)=>{ve(!!(t!=null&&t.isTextInput),o,a)&&e(z())};return C.add(r),()=>{C.delete(r)}},n)}function pe(e){let{isDisabled:n,onFocus:t,onBlur:r,onFocusChange:o}=e;const a=l.useCallback(u=>{if(u.target===u.currentTarget)return r&&r(u),o&&o(!1),!0},[r,o]),s=N(a),i=l.useCallback(u=>{const d=m(u.target),p=d?x(d):x();u.target===u.currentTarget&&p===O(u.nativeEvent)&&(t&&t(u),o&&o(!0),s(u))},[o,t,s]);return{focusProps:{onFocus:!n&&(t||o||r)?i:void 0,onBlur:!n&&(r||o)?a:void 0}}}function $e(e){let{isDisabled:n,onBlurWithin:t,onFocusWithin:r,onFocusWithinChange:o}=e,a=l.useRef({isFocusWithin:!1}),{addGlobalListener:s,removeAllGlobalListeners:i}=V(),u=l.useCallback(f=>{f.currentTarget.contains(f.target)&&a.current.isFocusWithin&&!f.currentTarget.contains(f.relatedTarget)&&(a.current.isFocusWithin=!1,i(),t&&t(f),o&&o(!1))},[t,o,a,i]),d=N(u),p=l.useCallback(f=>{if(!f.currentTarget.contains(f.target))return;const E=m(f.target),b=x(E);if(!a.current.isFocusWithin&&b===O(f.nativeEvent)){r&&r(f),o&&o(!0),a.current.isFocusWithin=!0,d(f);let $=f.currentTarget;s(E,"focus",c=>{if(a.current.isFocusWithin&&!R($,c.target)){let g=new K("blur",new E.defaultView.FocusEvent("blur",{relatedTarget:c.target}));g.target=$,g.currentTarget=$,u(g)}},{capture:!0})}},[r,o,d,s,u]);return n?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:p,onBlur:u}}}let P=!1,M=0;function D(){P=!0,setTimeout(()=>{P=!1},50)}function I(e){e.pointerType==="touch"&&D()}function ge(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",I):document.addEventListener("touchend",D),M++,()=>{M--,!(M>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",I):document.removeEventListener("touchend",D))}}function Te(e){let{onHoverStart:n,onHoverChange:t,onHoverEnd:r,isDisabled:o}=e,[a,s]=l.useState(!1),i=l.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;l.useEffect(ge,[]);let{addGlobalListener:u,removeAllGlobalListeners:d}=V(),{hoverProps:p,triggerHoverEnd:f}=l.useMemo(()=>{let E=(c,g)=>{if(i.pointerType=g,o||g==="touch"||i.isHovered||!c.currentTarget.contains(c.target))return;i.isHovered=!0;let L=c.currentTarget;i.target=L,u(m(c.target),"pointerover",H=>{i.isHovered&&i.target&&!R(i.target,H.target)&&b(H,H.pointerType)},{capture:!0}),n&&n({type:"hoverstart",target:L,pointerType:g}),t&&t(!0),s(!0)},b=(c,g)=>{let L=i.target;i.pointerType="",i.target=null,!(g==="touch"||!i.isHovered||!L)&&(i.isHovered=!1,d(),r&&r({type:"hoverend",target:L,pointerType:g}),t&&t(!1),s(!1))},$={};return typeof PointerEvent<"u"?($.onPointerEnter=c=>{P&&c.pointerType==="mouse"||E(c,c.pointerType)},$.onPointerLeave=c=>{!o&&c.currentTarget.contains(c.target)&&b(c,c.pointerType)}):($.onTouchStart=()=>{i.ignoreEmulatedMouseEvents=!0},$.onMouseEnter=c=>{!i.ignoreEmulatedMouseEvents&&!P&&E(c,"mouse"),i.ignoreEmulatedMouseEvents=!1},$.onMouseLeave=c=>{!o&&c.currentTarget.contains(c.target)&&b(c,"mouse")}),{hoverProps:$,triggerHoverEnd:b}},[n,t,r,o,i,u,d]);return l.useEffect(()=>{o&&f({currentTarget:i.target},i.pointerType)},[o]),{hoverProps:p,isHovered:a}}function ye(e={}){let{autoFocus:n=!1,isTextInput:t,within:r}=e,o=l.useRef({isFocused:!1,isFocusVisible:n||z()}),[a,s]=l.useState(!1),[i,u]=l.useState(()=>o.current.isFocused&&o.current.isFocusVisible),d=l.useCallback(()=>u(o.current.isFocused&&o.current.isFocusVisible),[]),p=l.useCallback(b=>{o.current.isFocused=b,s(b),d()},[d]);be(b=>{o.current.isFocusVisible=b,d()},[],{isTextInput:t});let{focusProps:f}=pe({isDisabled:r,onFocusChange:p}),{focusWithinProps:E}=$e({isDisabled:!r,onFocusWithinChange:p});return{isFocused:a,isFocusVisible:i,focusProps:r?E:f}}function Ee(e){let n=e.width/2,t=e.height/2;return{top:e.clientY-t,right:e.clientX+n,bottom:e.clientY+t,left:e.clientX-n}}function me(e,n){return!(!e||!n||e.right<n.left||e.left>n.right||e.bottom<n.top||e.top>n.bottom)}function Fe({disabled:e=!1}={}){let n=l.useRef(null),[t,r]=l.useState(!1),o=J(),a=G(()=>{n.current=null,r(!1),o.dispose()}),s=G(i=>{if(o.dispose(),n.current===null){n.current=i.currentTarget,r(!0);{let u=Q(i.currentTarget);o.addEventListener(u,"pointerup",a,!1),o.addEventListener(u,"pointermove",d=>{if(n.current){let p=Ee(d);r(me(p,n.current.getBoundingClientRect()))}},!1),o.addEventListener(u,"pointercancel",a,!1)}}});return{pressed:t,pressProps:e?{}:{onPointerDown:s,onPointerUp:a,onClick:a}}}function Pe(e){let n=e.parentElement,t=null;for(;n&&!(n instanceof HTMLFieldSetElement);)n instanceof HTMLLegendElement&&(t=n),n=n.parentElement;let r=(n==null?void 0:n.getAttribute("disabled"))==="";return r&&he(t)?!1:r}function he(e){if(!e)return!1;let n=e.previousElementSibling;for(;n!==null;){if(n instanceof HTMLLegendElement)return!1;n=n.previousElementSibling}return!0}function He(e,n){return l.useMemo(()=>{var t;if(e.type)return e.type;let r=(t=e.as)!=null?t:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||(n==null?void 0:n.tagName)==="BUTTON"&&!n.hasAttribute("type"))return"button"},[e.type,e.as,n])}export{ye as $,Te as a,He as e,Pe as r,Fe as w};
