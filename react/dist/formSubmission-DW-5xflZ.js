import{G as ie,r as S,q as se,j as s,k as te,_ as re,z as q}from"./main-Drm7RnIU.js";import{u as le}from"./index.esm-CHsF6MNA.js";import{F as d}from"./CheckCircleIcon-CZh1FXG-.js";const oe=te.lazy(()=>re(()=>import("./renderComponents-C5UhnniP.js"),[])),be=({isGuardianRegistration:E,isCoordinatorView:C,participantType:I,isSubmitted:v,disableSaveLater:_,drop:k,data:t,isOver:T,selectedComponent:V,setSelectedComponent:A,components:o,setComponents:ae,handlePropertiesPanelChange:z,removeComponent:D,isPlayGround:n,eventDetails:b,handleNext:M,isLastStep:H,isPrint:J})=>{let{user:c}=ie();c?.RoleTitle;let O=c?.Email?.indexOf("justnshalom")!=-1;console.log({componentsFS:o});const{handleSubmit:L,register:U,unregister:B,control:K,clearErrors:Y,reset:y,watch:P,getValues:g,setValue:h,trigger:ne,formState:{errors:Q}}=le({defaultValues:{...t}});g();let[r,w]=S.useState({...t});S.useEffect(()=>{t&&(Object.keys(t).forEach(e=>{B(e),h(e,t[e])}),w({...t}))},[t]);const W=e=>{A(e)};let X=o.find(e=>e.name=="name"),Z=o.find(e=>e.name=="teamName");const N=async(e,l)=>{if(window.scrollTo({top:0,behavior:"smooth"}),l===!0){if(X&&!["name","dobString"].every(a=>e[a])){q.error("Name and Date of Birth are required fields to save for later");return}if(Z&&!["teamName"].every(a=>e[a])){q.error("Team Name is a required field to save for later");return}}await M(e,y,l===!0)},j=(e,l)=>{h(e,l),t&&(t[e]=l),w({...t})};let x=[...o];return r&&o?.length>0&&!n&&(x=x.filter(e=>{let l=e.conditions?.filter(u=>u.key);return l?.length>0?!!l.every(i=>{if(i.key){if(i.key==="IsValidRegistrationId"){const R=(b?.JsonSettings?se(b.JsonSettings):null)?.AdditionalSettings?.EligibleRegistrationNumbers;console.log({formData:r});const $=r.registrationId||r.RegistrationId;let m=R?.find(f=>f.RegistrationNumber===($??"-"));if(!m&&r.teamMembers?.length>0)for(let f of r.teamMembers){const G=f.registrationId||f.RegistrationId,F=R?.find(ee=>ee.RegistrationNumber===(G??"-"));if(F){m=F;break}}return i.value==="true"||i.value==="Yes"||i.value==="1"?!!m:i.value==="false"||i.value==="No"||i.value==="0"?!m:!1}let a=i.key.charAt(0).toLowerCase()+i.key.slice(1),p=r[i.key]||r[a];if((p||p===!1)&&p?.toString()==i.value)return i.value==!1,!0}return!1}):!0})),s.jsx("div",{className:("flex-auto p-2 "+n,""),children:s.jsxs("form",{onSubmit:L(N),children:[s.jsx(oe,{isPrint:J,user:c,isCoordinatorView:C,participantType:I,handlePropertiesChange:j,handlePropertiesPanelChange:z,formData:r,isPlayGround:n,onChangeValue:j,drop:k,isSubmitted:v,isOver:T,eventDetails:b,components:x,selectedComponent:V,handleSelect:W,register:U,getValues:g,errors:Q,control:K,setValue:h,clearErrors:Y,reset:y,watch:P,removeComponent:D}),!n&&!v&&s.jsx("div",{className:"mb-2 w-full flex justify-end px-0",children:E?s.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[s.jsx(d,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Register"]}):s.jsxs(s.Fragment,{children:[!O&&!_&&s.jsxs("button",{type:"button",onClick:()=>{N(g(),!0)},className:"inline-flex items-center gap-x-2  rounded-md bg-lime-800 px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-lime-950 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-lime-950 mr-3",children:[s.jsx(d,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Save for Later"]}),H?s.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[s.jsx(d,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Submit"]}):s.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[s.jsx(d,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Next"]})]})})]})})};export{be as default};
