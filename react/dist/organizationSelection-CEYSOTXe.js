import{u as O,r as v,j as h,R as j,b as _}from"./mainweb-B3f5xuV1.js";import{u as b}from"./useBackend-KW2yy6WC.js";import"./httpService-BY4bSVIk.js";import"./index-t--hEgTQ.js";const z=j.lazy(()=>_(()=>import("./selectBox-BfZHpIM9.js"),[])),P=({fieldName:o,placeholder:u,errors:l,register:m,formData:i,disabled:L,onChange:n})=>{let p=l==null?void 0:l[o],{user:d}=O(),{EventLevels:r}=d,e=(r==null?void 0:r.filter(a=>a.Order!=1))||[],[t,g]=v.useState(p);v.useEffect(()=>{g(l==null?void 0:l[o])},[l==null?void 0:l[o]]);let[c,f]=v.useState({});const{rows:N}=b("/CandidateJson/GetSubOrganizations",{sort:{sortOrder:"DESC",sortColumn:"id"},limit:1e5,doCache:!0,select:"Name,Id,CompetitionLevel,CompetitionLevelLevelName,ParentOrganization"});console.log({locals:N});let{refactoredGroups:E}=i?F(N,i,c,e):{refactoredGroups:{}};return v.useEffect(()=>{i&&N&&e.forEach(a=>{let s=o+"."+a.LevelName;if(n){let C=a.LevelName.charAt(0).toLowerCase()+a.LevelName.slice(1),x=i[C],S=i[s];x&&!S&&n(s,x)}})},[e,i,N]),console.log({levels:e}),h.jsx("div",{className:e.length>1?"grid grid-cols-2 gap-4":"grid grid-cols-1",children:e.map(a=>h.jsx("div",{children:h.jsx(z,{fieldName:o+"."+a.LevelName,label:a.LevelName,placeholder:u,disabled:L,errors:l,register:m,formData:i,optional:!1,onChange:s=>{c[a.LevelName]=s.target.value,f({...c});let C=a.LevelName.charAt(0).toLowerCase()+a.LevelName.slice(1);n(C,s.target.value),n(o+"."+a.LevelName,s.target.value),g("")},options:E[a.LevelName],optionKey:"Id",optionText:"Name"})},a.LevelName))})};function F(o,u,l,m){let i=o!=null&&o.length?[...o]:[],L=i&&(i==null?void 0:i.length)>0?i.reduce((e,t)=>(e[t.CompetitionLevelLevelName]=e[t.CompetitionLevelLevelName]||[],e[t.CompetitionLevelLevelName].push(t),e),Object.create(null)):{},n="",p=!0,d={};u&&Object.keys(u).forEach(e=>{let t=e.charAt(0).toUpperCase()+e.slice(1);d[t]=u[e]});let r={};return m==null||m.forEach(e=>{var c;let t={...d,...l};n?r[e.LevelName]=(c=L[e.LevelName])==null?void 0:c.filter(f=>f.ParentOrganization==(t==null?void 0:t[n])):p?r[e.LevelName]=L[e.LevelName]:r[e.LevelName]=[],(t==null?void 0:t[e.LevelName])&&(n=e.LevelName),p=!1}),{refactoredGroups:r}}export{F as ExtractLevelKeys,P as default};
