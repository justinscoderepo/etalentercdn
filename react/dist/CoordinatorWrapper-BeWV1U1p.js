import{g as p}from"./coordinatorRouter-DPV5w4KB.js";import{u as j,r as s,j as e,L as h,_ as R}from"./main-CNwsE70q.js";import{c as b,R as y}from"./index-C2b8_KXo.js";import{w as v}from"./wrapRoutesWithPropsCapture-BpfQmzWJ.js";import"./layoutUtils-DXAITOJv.js";const g=s.lazy(()=>R(()=>import("./index-sUpmpSDK.js"),[])),E=(i,r)=>({user:o,...w})=>{const l=j(),[c,d]=s.useState(null);if(!l||l.isReady===!1)return e.jsx(h,{from:`${r}-ContextLoading`,info:"Loading context..."});const a=s.useMemo(()=>({UId:o?.UId,Role:o?.Role}),[o?.UId,o?.Role]),u=s.useMemo(()=>{try{if(d(null),typeof i!="function")throw new Error(`getRoutes is not a function: ${typeof i}`);const t=i(o,l);if(!t||!Array.isArray(t))throw console.error(`${r} - getRoutes returned invalid data:`,t),new Error(`Invalid routes returned from ${r}: ${typeof t}`);t.length===0&&(console.warn(`${r} - No routes returned for user role:`,a?.Role),t.push({path:"*",element:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-yellow-600 mb-4",children:"No Routes Available"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No routes defined for your role"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Role: ",a?.Role]})]})})}));const x=t.find(n=>!n.path||!n.element);if(x)throw console.error(`${r} - Invalid route structure:`,x),new Error("Route missing path or element property");const f=v(t).map(n=>({...n,errorElement:n.errorElement||e.jsx(g,{})})),m=b(f,{future:{v7_normalizeFormMethod:!0,v7_startTransition:!0}});if(!m)throw new Error("createBrowserRouter returned null/undefined");return m}catch(t){return console.error(`${r} - Error creating router:`,t),d(t.message),null}},[a,l,i,r]);return c?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Router Initialization Error"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:[r," failed to initialize"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:c}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Reload Application"})]})}):u?e.jsx(s.Suspense,{fallback:e.jsx(h,{from:`${r}-Router`}),children:e.jsx(y,{router:u})}):(console.error(`${r} - Router is null/undefined, cannot render RouterProvider`),e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Router Not Available"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Router instance is null or undefined"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Wrapper: ",r]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Reload Application"})]})}))},W=E(p,"CoordinatorWrapper");export{W as default};
