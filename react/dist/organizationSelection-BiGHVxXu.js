import{G as _,r as p,u as j,j as f,i as z,_ as F}from"./main-DfzvjSql.js";const G=z.lazy(()=>F(()=>import("./selectBox-CtgYidvH.js"),[])),A=({fieldName:l,label:c,placeholder:d,errors:i,register:u,formData:a,disabled:L,onChange:s})=>{let v=i?.[l],{user:o}=_(),{EventLevels:e}=o??{},t=e?.filter(r=>r.Order!=1)||[],[E,m]=p.useState(v);p.useEffect(()=>{m(i?.[l])},[i?.[l]]);let[N,x]=p.useState({});const{rows:g}=j("/CandidateJson/GetSubOrganizations",{sort:{sortOrder:"DESC",sortColumn:"id"},limit:1e5,doCache:!0,select:"Name,Id,CompetitionLevel,CompetitionLevelLevelName,ParentOrganization"});let{refactoredGroups:O}=a?b(g,a,N,t):{refactoredGroups:{}};return p.useEffect(()=>{a&&g&&t.forEach(r=>{let n=l+"."+r.LevelName;if(s){let C=r.LevelName.charAt(0).toLowerCase()+r.LevelName.slice(1),h=a[C],S=a[n];h&&!S&&s(n,h)}})},[t,a,g]),f.jsx("div",{className:t.length>1?"grid grid-cols-2 gap-4":"grid grid-cols-1",children:t.map(r=>f.jsx("div",{children:f.jsx(G,{fieldName:l+"."+r.LevelName,label:r.Order==2?c:r.LevelName,placeholder:d,disabled:L,errors:i,register:u,formData:a,optional:!1,onChange:n=>{N[r.LevelName]=n.target.value,x({...N});let C=r.LevelName.charAt(0).toLowerCase()+r.LevelName.slice(1);s(C,n.target.value),s(l+"."+r.LevelName,n.target.value),m("")},options:O[r.LevelName],optionKey:"Id",optionText:"Name"})},r.LevelName))})};function b(l,c,d,i){let u=l?.length?[...l]:[],a=u&&u?.length>0?u.reduce((e,t)=>(e[t.CompetitionLevelLevelName]=e[t.CompetitionLevelLevelName]||[],e[t.CompetitionLevelLevelName].push(t),e),Object.create(null)):{},L="",s=!0,v={};c&&Object.keys(c).forEach(e=>{let t=e.charAt(0).toUpperCase()+e.slice(1);v[t]=c[e]});let o={};return i?.forEach(e=>{let t={...v,...d};L?o[e.LevelName]=a[e.LevelName]?.filter(m=>m.ParentOrganization==t?.[L]):s?o[e.LevelName]=a[e.LevelName]:o[e.LevelName]=[],t?.[e.LevelName]&&(L=e.LevelName),s=!1}),{refactoredGroups:o}}export{b as ExtractLevelKeys,A as default};
