import{r as a,j as i,a as R}from"./mainweb-iPQZqjH7.js";import{u as J}from"./XMarkIcon-YXuxXLEM.js";import{a as Q}from"./httpService-DIV4c0N3.js";import{R as W}from"./renderComponents-CIzvxpQn.js";function X({title:u,titleId:n,...x},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},x),u?a.createElement("title",{id:n},u):null,a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z",clipRule:"evenodd"}))}const h=a.forwardRef(X),re=({isGuardianRegistration:u,isSubmitted:n,drop:x,data:r,isOver:C,selectedComponent:S,setSelectedComponent:q,components:l,setComponents:Y,handlePropertiesPanelChange:E,removeComponent:k,isPlayGround:m,eventDetails:D,handleNext:T,isLastStep:V})=>{var N;let{user:o}=Q();o==null||o.RoleTitle;let H=((N=o==null?void 0:o.Email)==null?void 0:N.indexOf("justnshalom"))!=-1;console.log({componentsFS:l});const{handleSubmit:M,register:O,unregister:B,control:U,clearErrors:Z,reset:w,watch:z,getValues:p,setValue:v,trigger:$,formState:{errors:A}}=J({defaultValues:{...r}});p();let[f,y]=a.useState({...r});a.useEffect(()=>{r&&(Object.keys(r).forEach(e=>{B(e),v(e,r[e])}),y({...r}))},[r]);const K=e=>{q(e)};let L=l.find(e=>e.name=="name"),_=l.find(e=>e.name=="teamName");const j=async(e,t)=>{if(window.scrollTo({top:0,behavior:"smooth"}),t){if(L&&!["name","dobString"].every(s=>e[s])){R.error("Name and Date of Birth are required fields to save for later");return}if(_&&!["teamName"].every(s=>e[s])){R.error("Team Name is a required field to save for later");return}}await T(e,w,t===!0)},F=(e,t)=>{v(e,t),r&&(r[e]=t),y({...r})};let g=[...l];return f&&(l==null?void 0:l.length)>0&&!m&&(g=g.filter(e=>{var d;let t=(d=e.conditions)==null?void 0:d.filter(c=>c.key);return(t==null?void 0:t.length)>0?!!t.find(s=>{if(s.key){let I=s.key.charAt(0).toLowerCase()+s.key.slice(1),b=f[s.key]||f[I];if(b&&(b==null?void 0:b.toString())==s.value)return!0}}):!0})),i.jsx("div",{className:("flex-auto p-2 "+m,""),children:i.jsxs("form",{onSubmit:M(j),children:[i.jsx(W,{handlePropertiesChange:F,handlePropertiesPanelChange:E,formData:f,isPlayGround:m,onChangeValue:F,drop:x,isSubmitted:n,isOver:C,eventDetails:D,components:g,selectedComponent:S,handleSelect:K,register:O,getValues:p,errors:A,control:U,setValue:v,clearErrors:Z,reset:w,watch:z,removeComponent:k}),!m&&!n&&i.jsx("div",{className:"mb-2 w-full flex justify-end px-0",children:u?i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[i.jsx(h,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Register"]}):i.jsxs(i.Fragment,{children:[!H&&i.jsxs("button",{type:"button",onClick:()=>{j(p(),!0)},className:"inline-flex items-center gap-x-2  rounded-md bg-lime-800 px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-lime-950 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-lime-950 mr-3",children:[i.jsx(h,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Save for Later"]}),V?i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[i.jsx(h,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Submit"]}):i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[i.jsx(h,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Next"]})]})})]})})};export{re as F,h as a};
