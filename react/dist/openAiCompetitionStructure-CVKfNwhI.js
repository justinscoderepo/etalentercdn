import{r as ie,j as d,L as us,n as Pt}from"./mainweb-CdfhwmyC.js";import{C as $a,F as Za,u as Da}from"./XMarkIcon-BmiE9oqP.js";import{u as La,p as Fa}from"./httpService-DfVVWKLf.js";import{c as Zs}from"./utilities-CN4lTu6a.js";import{V as Ba}from"./validationMessage-KiSdHV0m.js";import{v as On}from"./v4-DvF23Exx.js";import"./axios-CCb-kr4I.js";function Ua({title:s,titleId:e,...t},n){return ie.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":e},t),s?ie.createElement("title",{id:e},s):null,ie.createElement("path",{fillRule:"evenodd",d:"M10.53 3.47a.75.75 0 0 0-1.06 0L6.22 6.72a.75.75 0 0 0 1.06 1.06L10 5.06l2.72 2.72a.75.75 0 1 0 1.06-1.06l-3.25-3.25Zm-4.31 9.81 3.25 3.25a.75.75 0 0 0 1.06 0l3.25-3.25a.75.75 0 1 0-1.06-1.06L10 14.94l-2.72-2.72a.75.75 0 0 0-1.06 1.06Z",clipRule:"evenodd"}))}const Va=ie.forwardRef(Ua);function Wa({optional:s,control:e,fieldName:t,label:n,errors:r,enableCrop:a,onChangeValidation:i,viewOnly:o,aspect:c,disableRequiredsymbol:l,validVideoExtensions:u,validImageExtensions:f,validExtensions:g,rules:_,labelFont:C,fileUploadUrl:v,isImageOptimize:S}){let q=r==null?void 0:r[t],[b,$]=ie.useState(q);const[P,B]=ie.useState(!1);let[N,R]=ie.useState([]);ie.useEffect(()=>{$(r==null?void 0:r[t])},[r==null?void 0:r[t]]);function x(T,M){const J=T.split(","),Q=J[0].match(/:(.*?);/)[1],H=atob(J[1]);let ve=H.length;const Qt=new Uint8Array(ve);for(;ve--;)Qt[ve]=H.charCodeAt(ve);return new File([Qt],M,{type:Q})}const I=async T=>{var M,J,Q;try{B(!0);let H=await La(`${v}`,T);(M=H==null?void 0:H.data)!=null&&M.Results&&(H.data?(N.push({filePath:H.data.Results,webUrl:`${H.data.Results}`}),R(N),i(N)):(Pt.error("Failed to upload"),i([{filePath:"",webUrl:""}])),B(!1))}catch(H){Pt.error((Q=(J=H==null?void 0:H.response)==null?void 0:J.data)==null?void 0:Q.message),i([{filePath:"",webUrl:""}])}B(!1)};return d.jsx("div",{className:"overflow-hidden min-h-64",children:P?d.jsx(us,{}):d.jsx("div",{className:"",children:d.jsx("div",{children:d.jsx("div",{className:"",children:!o&&d.jsx(d.Fragment,{children:d.jsxs("div",{className:"my-5",children:[d.jsx("label",{htmlFor:t,className:Zs(C||" text-sm text-center block font-medium text-gray-700 mb-1",b?"text-danger":"text-gray-400"),children:n||t}),_&&_.required&&!l?d.jsx("sup",{}):"",d.jsx($a,{name:t,control:e,rules:{required:!s},render:({field:T})=>{var M;return d.jsxs("div",{className:Zs("flex flex-col p-10 w-full border-0 pt-4 border-b border-transparent bg-gray-100 focus:border-darkprimary focus:ring-0 sm:text-sm",b?"border-danger":"text-gray-200 border-purple-400"),children:[(M=T==null?void 0:T.value)!=null&&M.length?d.jsx(d.Fragment,{children:d.jsx("div",{className:"flex flex-1 w-full relative h-full  space-x-8  grow flex-row items-center rounded-lg tracking-wide overflow-x-scroll",children:T.value.map((J,Q)=>d.jsxs("div",{className:"relative flex flex-shrink-0",children:[d.jsx("img",{src:J.webUrl,alt:`Image ${Q}`,className:"max-h-100 flex w-96 mb-3 mr-3 nonselectable",draggable:!1}),d.jsx("div",{className:"absolute top-0 right-0  pt-2 pr-2 block",children:d.jsxs("button",{type:"button",className:"rounded-md bg-transparent text-shadow text-white hover:text-white focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 bg-lightcharcoal p-2 bg-opacity-90",onClick:()=>{setTimeout(()=>{N=N.filter((H,ve)=>ve!==Q),R(N),i(N)},100)},children:[d.jsx("span",{className:"sr-only",children:"Close"}),d.jsx(Za,{className:"h-8 w-8 text-[#c5c5c5]","aria-hidden":"true"})]})})]},Q))})}):d.jsx(d.Fragment,{}),d.jsxs("label",{className:"w-100 relative h-full flex flex-col items-center rounded-lg tracking-wide cursor-pointer ",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-8 h-8 mt-8 text-primary",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z",className:"text-lightcharcoal"}),d.jsx("path",{className:"text-lightcharcoal",strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),d.jsx("span",{className:"mt-2 font-medium leading-normal text-primary mb-8",children:"Upload"}),d.jsx("input",{type:"file",className:"hidden",accept:"image/*",multiple:!0,onChange:async J=>{B(!0);const Q=Array.from(J.target.files);let H=0;if(Q.forEach(pt=>{H+=pt.size}),H/(1024*1024)>10){Pt.error("Total file size should be lesser than 10MB."),B(!1);return}const Qt=Q.map(pt=>new Promise((Rn,Ms)=>{const qe=new FileReader;qe.onload=function(Yt){Rn(Yt.target.result)},qe.readAsDataURL(pt)}));Promise.all(Qt).then(pt=>{pt.forEach((Rn,Ms)=>{const qe=new FormData,Yt=Q[Ms];let Je,He;const gt=new Image;gt.src=Rn,gt.onload=async function(){if(S===!0){const yt=gt.height,_t=gt.width,en=document.createElement("canvas"),Oa=en.getContext("2d");if(yt>300&&_t>300)if(_t<yt){Je=300;const In=_t/Je;He=yt/In}else{He=300;const In=yt/He;Je=_t/In}else He=yt,Je=_t;en.width=Je,en.height=He,Oa.drawImage(gt,0,0,Je,He);const ja=en.toDataURL("image/jpeg"),$s=x(ja,Yt.name);let Ma=URL.createObjectURL($s);T.onChange([...T.value,Ma]),qe.append("file",$s)}else qe.append("file",Yt);I(qe)}})}),J.target.value=""}})]})]})}}),b&&d.jsx(Ba,{message:"This file is required"})]})})})})})})}let Ds=!1,Tt,lr,cr,Gn,ur,dr,fr,hr,mr;function pr(s,e={auto:!1}){if(Ds)throw new Error(`you must \`import 'openai/shims/${s.kind}'\` before importing anything else from openai`);if(Tt)throw new Error(`can't \`import 'openai/shims/${s.kind}'\` after \`import 'openai/shims/${Tt}'\``);Ds=e.auto,Tt=s.kind,lr=s.fetch,s.Request,s.Response,s.Headers,cr=s.FormData,s.Blob,Gn=s.File,ur=s.ReadableStream,dr=s.getMultipartRequestOptions,fr=s.getDefaultAgent,hr=s.fileFromPath,mr=s.isFsReadStream}class za{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function gr({manuallyImported:s}={}){const e=s?"You may need to use polyfills":"Add one of these imports before your first `import â€¦ from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,n,r,a;try{t=fetch,n=Request,r=Response,a=Headers}catch(i){throw new Error(`this environment is missing the following Web Fetch API type: ${i.message}. ${e}`)}return{kind:"web",fetch:t,Request:n,Response:r,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(i,o)=>({...o,body:new za(i)}),getDefaultAgent:i=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:i=>!1}}pr(gr({manuallyImported:!0}));const qn="RFC3986",Jn={RFC1738:s=>String(s).replace(/%20/g,"+"),RFC3986:s=>String(s)},Ga="RFC1738",qa=Array.isArray,we=(()=>{const s=[];for(let e=0;e<256;++e)s.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return s})(),jn=1024,Ja=(s,e,t,n,r)=>{if(s.length===0)return s;let a=s;if(typeof s=="symbol"?a=Symbol.prototype.toString.call(s):typeof s!="string"&&(a=String(s)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(o){return"%26%23"+parseInt(o.slice(2),16)+"%3B"});let i="";for(let o=0;o<a.length;o+=jn){const c=a.length>=jn?a.slice(o,o+jn):a,l=[];for(let u=0;u<c.length;++u){let f=c.charCodeAt(u);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||r===Ga&&(f===40||f===41)){l[l.length]=c.charAt(u);continue}if(f<128){l[l.length]=we[f];continue}if(f<2048){l[l.length]=we[192|f>>6]+we[128|f&63];continue}if(f<55296||f>=57344){l[l.length]=we[224|f>>12]+we[128|f>>6&63]+we[128|f&63];continue}u+=1,f=65536+((f&1023)<<10|c.charCodeAt(u)&1023),l[l.length]=we[240|f>>18]+we[128|f>>12&63]+we[128|f>>6&63]+we[128|f&63]}i+=l.join("")}return i};function Ha(s){return!s||typeof s!="object"?!1:!!(s.constructor&&s.constructor.isBuffer&&s.constructor.isBuffer(s))}function Ls(s,e){if(qa(s)){const t=[];for(let n=0;n<s.length;n+=1)t.push(e(s[n]));return t}return e(s)}const Xa=Object.prototype.hasOwnProperty,yr={brackets(s){return String(s)+"[]"},comma:"comma",indices(s,e){return String(s)+"["+e+"]"},repeat(s){return String(s)}},ke=Array.isArray,Ka=Array.prototype.push,_r=function(s,e){Ka.apply(s,ke(e)?e:[e])},Qa=Date.prototype.toISOString,K={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Ja,encodeValuesOnly:!1,format:qn,formatter:Jn[qn],indices:!1,serializeDate(s){return Qa.call(s)},skipNulls:!1,strictNullHandling:!1};function Ya(s){return typeof s=="string"||typeof s=="number"||typeof s=="boolean"||typeof s=="symbol"||typeof s=="bigint"}const Mn={};function br(s,e,t,n,r,a,i,o,c,l,u,f,g,_,C,v,S,q){let b=s,$=q,P=0,B=!1;for(;($=$.get(Mn))!==void 0&&!B;){const T=$.get(s);if(P+=1,typeof T<"u"){if(T===P)throw new RangeError("Cyclic object value");B=!0}typeof $.get(Mn)>"u"&&(P=0)}if(typeof l=="function"?b=l(e,b):b instanceof Date?b=g==null?void 0:g(b):t==="comma"&&ke(b)&&(b=Ls(b,function(T){return T instanceof Date?g==null?void 0:g(T):T})),b===null){if(a)return c&&!v?c(e,K.encoder,S,"key",_):e;b=""}if(Ya(b)||Ha(b)){if(c){const T=v?e:c(e,K.encoder,S,"key",_);return[(C==null?void 0:C(T))+"="+(C==null?void 0:C(c(b,K.encoder,S,"value",_)))]}return[(C==null?void 0:C(e))+"="+(C==null?void 0:C(String(b)))]}const N=[];if(typeof b>"u")return N;let R;if(t==="comma"&&ke(b))v&&c&&(b=Ls(b,c)),R=[{value:b.length>0?b.join(",")||null:void 0}];else if(ke(l))R=l;else{const T=Object.keys(b);R=u?T.sort(u):T}const x=o?String(e).replace(/\./g,"%2E"):String(e),I=n&&ke(b)&&b.length===1?x+"[]":x;if(r&&ke(b)&&b.length===0)return I+"[]";for(let T=0;T<R.length;++T){const M=R[T],J=typeof M=="object"&&typeof M.value<"u"?M.value:b[M];if(i&&J===null)continue;const Q=f&&o?M.replace(/\./g,"%2E"):M,H=ke(b)?typeof t=="function"?t(I,Q):I:I+(f?"."+Q:"["+Q+"]");q.set(s,P);const ve=new WeakMap;ve.set(Mn,q),_r(N,br(J,H,t,n,r,a,i,o,t==="comma"&&v&&ke(b)?null:c,l,u,f,g,_,C,v,S,ve))}return N}function ei(s=K){if(typeof s.allowEmptyArrays<"u"&&typeof s.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof s.encodeDotInKeys<"u"&&typeof s.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(s.encoder!==null&&typeof s.encoder<"u"&&typeof s.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=s.charset||K.charset;if(typeof s.charset<"u"&&s.charset!=="utf-8"&&s.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=qn;if(typeof s.format<"u"){if(!Xa.call(Jn,s.format))throw new TypeError("Unknown format option provided.");t=s.format}const n=Jn[t];let r=K.filter;(typeof s.filter=="function"||ke(s.filter))&&(r=s.filter);let a;if(s.arrayFormat&&s.arrayFormat in yr?a=s.arrayFormat:"indices"in s?a=s.indices?"indices":"repeat":a=K.arrayFormat,"commaRoundTrip"in s&&typeof s.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const i=typeof s.allowDots>"u"?s.encodeDotInKeys?!0:K.allowDots:!!s.allowDots;return{addQueryPrefix:typeof s.addQueryPrefix=="boolean"?s.addQueryPrefix:K.addQueryPrefix,allowDots:i,allowEmptyArrays:typeof s.allowEmptyArrays=="boolean"?!!s.allowEmptyArrays:K.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof s.charsetSentinel=="boolean"?s.charsetSentinel:K.charsetSentinel,commaRoundTrip:!!s.commaRoundTrip,delimiter:typeof s.delimiter>"u"?K.delimiter:s.delimiter,encode:typeof s.encode=="boolean"?s.encode:K.encode,encodeDotInKeys:typeof s.encodeDotInKeys=="boolean"?s.encodeDotInKeys:K.encodeDotInKeys,encoder:typeof s.encoder=="function"?s.encoder:K.encoder,encodeValuesOnly:typeof s.encodeValuesOnly=="boolean"?s.encodeValuesOnly:K.encodeValuesOnly,filter:r,format:t,formatter:n,serializeDate:typeof s.serializeDate=="function"?s.serializeDate:K.serializeDate,skipNulls:typeof s.skipNulls=="boolean"?s.skipNulls:K.skipNulls,sort:typeof s.sort=="function"?s.sort:null,strictNullHandling:typeof s.strictNullHandling=="boolean"?s.strictNullHandling:K.strictNullHandling}}function ti(s,e={}){let t=s;const n=ei(e);let r,a;typeof n.filter=="function"?(a=n.filter,t=a("",t)):ke(n.filter)&&(a=n.filter,r=a);const i=[];if(typeof t!="object"||t===null)return"";const o=yr[n.arrayFormat],c=o==="comma"&&n.commaRoundTrip;r||(r=Object.keys(t)),n.sort&&r.sort(n.sort);const l=new WeakMap;for(let g=0;g<r.length;++g){const _=r[g];n.skipNulls&&t[_]===null||_r(i,br(t[_],_,o,c,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,l))}const u=i.join(n.delimiter);let f=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),u.length>0?f+u:""}const Qe="4.71.1";Tt||pr(gr(),{auto:!0});class Z extends Error{}class te extends Z{constructor(e,t,n,r){super(`${te.makeMessage(e,t,n)}`),this.status=e,this.headers=r,this.request_id=r==null?void 0:r["x-request-id"];const a=t;this.error=a,this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,t,n){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,n,r){if(!e)return new An({message:n,cause:Xn(t)});const a=t==null?void 0:t.error;return e===400?new xr(e,a,n,r):e===401?new vr(e,a,n,r):e===403?new wr(e,a,n,r):e===404?new kr(e,a,n,r):e===409?new Sr(e,a,n,r):e===422?new Cr(e,a,n,r):e===429?new Ar(e,a,n,r):e>=500?new Pr(e,a,n,r):new te(e,a,n,r)}}class pe extends te{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class An extends te{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,t&&(this.cause=t)}}class ds extends An{constructor({message:e}={}){super({message:e??"Request timed out."})}}class xr extends te{constructor(){super(...arguments),this.status=400}}class vr extends te{constructor(){super(...arguments),this.status=401}}class wr extends te{constructor(){super(...arguments),this.status=403}}class kr extends te{constructor(){super(...arguments),this.status=404}}class Sr extends te{constructor(){super(...arguments),this.status=409}}class Cr extends te{constructor(){super(...arguments),this.status=422}}class Ar extends te{constructor(){super(...arguments),this.status=429}}class Pr extends te{}class Tr extends Z{constructor(){super("Could not parse response content as the length limit was reached")}}class Er extends Z{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Ve{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const n=Ve.NEWLINE_CHARS.has(t[t.length-1]||"");let r=t.split(Ve.NEWLINE_REGEXP);return n&&r.pop(),r.length===1&&!n?(this.buffer.push(r[0]),[]):(this.buffer.length>0&&(r=[this.buffer.join("")+r[0],...r.slice(1)],this.buffer=[]),n||(this.buffer=[r.pop()||""]),r)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Z(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Z(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Z("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}Ve.NEWLINE_CHARS=new Set([`
`,"\r"]);Ve.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class Ce{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;async function*r(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let a=!1;try{for await(const i of ni(e,t))if(!a){if(i.data.startsWith("[DONE]")){a=!0;continue}if(i.event===null){let o;try{o=JSON.parse(i.data)}catch(c){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),c}if(o&&o.error)throw new te(void 0,o.error,void 0,void 0);yield o}else{let o;try{o=JSON.parse(i.data)}catch(c){throw console.error("Could not parse message into JSON:",i.data),console.error("From chunk:",i.raw),c}if(i.event=="error")throw new te(void 0,o.error,o.message,void 0);yield{event:i.event,data:o}}}a=!0}catch(i){if(i instanceof Error&&i.name==="AbortError")return;throw i}finally{a||t.abort()}}return new Ce(r,t)}static fromReadableStream(e,t){let n=!1;async function*r(){const i=new Ve,o=Nr(e);for await(const c of o)for(const l of i.decode(c))yield l;for(const c of i.flush())yield c}async function*a(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let i=!1;try{for await(const o of r())i||o&&(yield JSON.parse(o));i=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{i||t.abort()}}return new Ce(a,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=a=>({next:()=>{if(a.length===0){const i=n.next();e.push(i),t.push(i)}return a.shift()}});return[new Ce(()=>r(e),this.controller),new Ce(()=>r(t),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new ur({async start(){t=e[Symbol.asyncIterator]()},async pull(r){try{const{value:a,done:i}=await t.next();if(i)return r.close();const o=n.encode(JSON.stringify(a)+`
`);r.enqueue(o)}catch(a){r.error(a)}},async cancel(){var r;await((r=t.return)==null?void 0:r.call(t))}})}}async function*ni(s,e){if(!s.body)throw e.abort(),new Z("Attempted to iterate over a response with no body");const t=new ai,n=new Ve,r=Nr(s.body);for await(const a of si(r))for(const i of n.decode(a)){const o=t.decode(i);o&&(yield o)}for(const a of n.flush()){const i=t.decode(a);i&&(yield i)}}async function*si(s){let e=new Uint8Array;for await(const t of s){if(t==null)continue;const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let r=new Uint8Array(e.length+n.length);r.set(e),r.set(n,e.length),e=r;let a;for(;(a=ri(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}function ri(s){for(let n=0;n<s.length-2;n++){if(s[n]===10&&s[n+1]===10||s[n]===13&&s[n+1]===13)return n+2;if(s[n]===13&&s[n+1]===10&&n+3<s.length&&s[n+2]===13&&s[n+3]===10)return n+4}return-1}class ai{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=ii(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function ii(s,e){const t=s.indexOf(e);return t!==-1?[s.substring(0,t),e,s.substring(t+e.length)]:[s,"",""]}function Nr(s){if(s[Symbol.asyncIterator])return s;const e=s.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const Rr=s=>s!=null&&typeof s=="object"&&typeof s.url=="string"&&typeof s.blob=="function",Ir=s=>s!=null&&typeof s=="object"&&typeof s.name=="string"&&typeof s.lastModified=="number"&&Pn(s),Pn=s=>s!=null&&typeof s=="object"&&typeof s.size=="number"&&typeof s.type=="string"&&typeof s.text=="function"&&typeof s.slice=="function"&&typeof s.arrayBuffer=="function",oi=s=>Ir(s)||Rr(s)||mr(s);async function Or(s,e,t){var r;if(s=await s,Ir(s))return s;if(Rr(s)){const a=await s.blob();e||(e=new URL(s.url).pathname.split(/[\\/]/).pop()??"unknown_file");const i=Pn(a)?[await a.arrayBuffer()]:[a];return new Gn(i,e,t)}const n=await li(s);if(e||(e=ui(s)??"unknown_file"),!(t!=null&&t.type)){const a=(r=n[0])==null?void 0:r.type;typeof a=="string"&&(t={...t,type:a})}return new Gn(n,e,t)}async function li(s){var t;let e=[];if(typeof s=="string"||ArrayBuffer.isView(s)||s instanceof ArrayBuffer)e.push(s);else if(Pn(s))e.push(await s.arrayBuffer());else if(di(s))for await(const n of s)e.push(n);else throw new Error(`Unexpected data type: ${typeof s}; constructor: ${(t=s==null?void 0:s.constructor)==null?void 0:t.name}; props: ${ci(s)}`);return e}function ci(s){return`[${Object.getOwnPropertyNames(s).map(t=>`"${t}"`).join(", ")}]`}function ui(s){var e;return $n(s.name)||$n(s.filename)||((e=$n(s.path))==null?void 0:e.split(/[\\/]/).pop())}const $n=s=>{if(typeof s=="string")return s;if(typeof Buffer<"u"&&s instanceof Buffer)return String(s)},di=s=>s!=null&&typeof s=="object"&&typeof s[Symbol.asyncIterator]=="function",Fs=s=>s&&typeof s=="object"&&s.body&&s[Symbol.toStringTag]==="MultipartBody",lt=async s=>{const e=await fi(s.body);return dr(e,s)},fi=async s=>{const e=new cr;return await Promise.all(Object.entries(s||{}).map(([t,n])=>Hn(e,t,n))),e},Hn=async(s,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")s.append(e,String(t));else if(oi(t)){const n=await Or(t);s.append(e,n)}else if(Array.isArray(t))await Promise.all(t.map(n=>Hn(s,e+"[]",n)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([n,r])=>Hn(s,`${e}[${n}]`,r)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var st={},hi=function(s,e,t,n,r){if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(s,t),t},mi=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},tn;async function jr(s){const{response:e}=s;if(s.options.stream)return rt("response",e.status,e.url,e.headers,e.body),s.options.__streamClass?s.options.__streamClass.fromSSEResponse(e,s.controller):Ce.fromSSEResponse(e,s.controller);if(e.status===204)return null;if(s.options.__binaryResponse)return e;const t=e.headers.get("content-type");if((t==null?void 0:t.includes("application/json"))||(t==null?void 0:t.includes("application/vnd.api+json"))){const a=await e.json();return rt("response",e.status,e.url,e.headers,a),Mr(a,e)}const r=await e.text();return rt("response",e.status,e.url,e.headers,r),r}function Mr(s,e){return!s||typeof s!="object"||Array.isArray(s)?s:Object.defineProperty(s,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class Tn extends Promise{constructor(e,t=jr){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new Tn(this.responsePromise,async t=>Mr(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class pi{constructor({baseURL:e,maxRetries:t=2,timeout:n=6e5,httpAgent:r,fetch:a}){this.baseURL=e,this.maxRetries=Zn("maxRetries",t),this.timeout=Zn("timeout",n),this.httpAgent=r,this.fetch=a??lr}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...vi(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${Ci()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(async r=>{const a=r&&Pn(r==null?void 0:r.body)?new DataView(await r.body.arrayBuffer()):(r==null?void 0:r.body)instanceof DataView?r.body:(r==null?void 0:r.body)instanceof ArrayBuffer?new DataView(r.body):r&&ArrayBuffer.isView(r==null?void 0:r.body)?new DataView(r.body.buffer):r==null?void 0:r.body;return{method:e,path:t,...r,body:a}}))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){var v;const{method:n,path:r,query:a,headers:i={}}=e,o=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:Fs(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,c=this.calculateContentLength(o),l=this.buildURL(r,a);"timeout"in e&&Zn("timeout",e.timeout);const u=e.timeout??this.timeout,f=e.httpAgent??this.httpAgent??fr(l),g=u+1e3;typeof((v=f==null?void 0:f.options)==null?void 0:v.timeout)=="number"&&g>(f.options.timeout??0)&&(f.options.timeout=g),this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const _=this.buildHeaders({options:e,headers:i,contentLength:c,retryCount:t});return{req:{method:n,...o&&{body:o},headers:_,...f&&{agent:f},signal:e.signal??null},url:l,timeout:u}}buildHeaders({options:e,headers:t,contentLength:n,retryCount:r}){const a={};n&&(a["content-length"]=n);const i=this.defaultHeaders(e);return Ws(a,i),Ws(a,t),Fs(e.body)&&Tt!=="node"&&delete a["content-type"],zs(i,"x-stainless-retry-count")===void 0&&zs(t,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(r)),this.validateHeaders(a,t),a}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,n,r){return te.generate(e,t,n,r)}request(e,t=null){return new Tn(this.makeRequest(e,t))}async makeRequest(e,t){var f,g;const n=await e,r=n.maxRetries??this.maxRetries;t==null&&(t=r),await this.prepareOptions(n);const{req:a,url:i,timeout:o}=this.buildRequest(n,{retryCount:r-t});if(await this.prepareRequest(a,{url:i,options:n}),rt("request",i,n,a.headers),(f=n.signal)!=null&&f.aborted)throw new pe;const c=new AbortController,l=await this.fetchWithTimeout(i,a,o,c).catch(Xn);if(l instanceof Error){if((g=n.signal)!=null&&g.aborted)throw new pe;if(t)return this.retryRequest(n,t);throw l.name==="AbortError"?new ds:new An({cause:l})}const u=yi(l.headers);if(!l.ok){if(t&&this.shouldRetry(l)){const b=`retrying, ${t} attempts remaining`;return rt(`response (error; ${b})`,l.status,i,u),this.retryRequest(n,t,u)}const _=await l.text().catch(b=>Xn(b).message),C=wi(_),v=C?void 0:_;throw rt(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,l.status,i,u,v),this.makeStatusError(l.status,C,v,u)}return{response:l,options:n,controller:c}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new gi(this,n,e)}buildURL(e,t){const n=Si(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return Zr(r)||(t={...r,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,n])=>typeof n<"u").map(([t,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(t)}=`;throw new Z(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,n,r){const{signal:a,...i}=t||{};a&&a.addEventListener("abort",()=>r.abort());const o=setTimeout(()=>r.abort(),n);return this.getRequestClient().fetch.call(void 0,e,{signal:r.signal,...i}).finally(()=>{clearTimeout(o)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,n){let r;const a=n==null?void 0:n["retry-after-ms"];if(a){const o=parseFloat(a);Number.isNaN(o)||(r=o)}const i=n==null?void 0:n["retry-after"];if(i&&!r){const o=parseFloat(i);Number.isNaN(o)?r=Date.parse(i)-Date.now():r=o*1e3}if(!(r&&0<=r&&r<60*1e3)){const o=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,o)}return await Gt(r),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,i=Math.min(.5*Math.pow(2,a),8),o=1-Math.random()*.25;return i*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Qe}`}}class $r{constructor(e,t,n,r){tn.set(this,void 0),hi(this,tn,e),this.options=r,this.response=t,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new Z("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[r,a]of n)e.url.searchParams.set(r,a);t.query=void 0,t.path=e.url.toString()}return await mi(this,tn,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(tn=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class gi extends Tn{constructor(e,t,n){super(t,async r=>new n(e,r.response,await jr(r),r.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const yi=s=>new Proxy(Object.fromEntries(s.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}}),_i={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},oe=s=>typeof s=="object"&&s!==null&&!Zr(s)&&Object.keys(s).every(e=>Dr(_i,e)),bi=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qe,"X-Stainless-OS":Us(Deno.build.os),"X-Stainless-Arch":Bs(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qe,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qe,"X-Stainless-OS":Us(process.platform),"X-Stainless-Arch":Bs(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const s=xi();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qe,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qe,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function xi(){if(typeof navigator>"u"||!navigator)return null;const s=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of s){const n=t.exec(navigator.userAgent);if(n){const r=n[1]||0,a=n[2]||0,i=n[3]||0;return{browser:e,version:`${r}.${a}.${i}`}}}return null}const Bs=s=>s==="x32"?"x32":s==="x86_64"||s==="x64"?"x64":s==="arm"?"arm":s==="aarch64"||s==="arm64"?"arm64":s?`other:${s}`:"unknown",Us=s=>(s=s.toLowerCase(),s.includes("ios")?"iOS":s==="android"?"Android":s==="darwin"?"MacOS":s==="win32"?"Windows":s==="freebsd"?"FreeBSD":s==="openbsd"?"OpenBSD":s==="linux"?"Linux":s?`Other:${s}`:"Unknown");let Vs;const vi=()=>Vs??(Vs=bi()),wi=s=>{try{return JSON.parse(s)}catch{return}},ki=new RegExp("^(?:[a-z]+:)?//","i"),Si=s=>ki.test(s),Gt=s=>new Promise(e=>setTimeout(e,s)),Zn=(s,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Z(`${s} must be an integer`);if(e<0)throw new Z(`${s} must be a positive integer`);return e},Xn=s=>{if(s instanceof Error)return s;if(typeof s=="object"&&s!==null)try{return new Error(JSON.stringify(s))}catch{}return new Error(s)},nn=s=>{var e,t,n,r;if(typeof process<"u")return((e=st==null?void 0:st[s])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(r=(n=(t=Deno.env)==null?void 0:t.get)==null?void 0:n.call(t,s))==null?void 0:r.trim()};function Zr(s){if(!s)return!0;for(const e in s)return!1;return!0}function Dr(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function Ws(s,e){for(const t in e){if(!Dr(e,t))continue;const n=t.toLowerCase();if(!n)continue;const r=e[t];r===null?delete s[n]:r!==void 0&&(s[n]=r)}}function rt(s,...e){typeof process<"u"&&(st==null?void 0:st.DEBUG)==="true"&&console.log(`OpenAI:DEBUG:${s}`,...e)}const Ci=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const e=Math.random()*16|0;return(s==="x"?e:e&3|8).toString(16)}),Ai=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",Pi=s=>typeof(s==null?void 0:s.get)=="function",zs=(s,e)=>{var n;const t=e.toLowerCase();if(Pi(s)){const r=((n=e[0])==null?void 0:n.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(a,i,o)=>i+o.toUpperCase());for(const a of[e,t,e.toUpperCase(),r]){const i=s.get(a);if(i)return i}}for(const[r,a]of Object.entries(s))if(r.toLowerCase()===t)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${e} header, using the first entry.`),a[0]):a};function Dn(s){return s!=null&&typeof s=="object"&&!Array.isArray(s)}class Ti extends $r{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class xe extends $r{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var n;const e=this.getPaginatedItems();if(!e.length)return null;const t=(n=e[e.length-1])==null?void 0:n.id;return t?{params:{after:t}}:null}}class V{constructor(e){this._client=e}}let Lr=class extends V{create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}},fs=class extends V{constructor(){super(...arguments),this.completions=new Lr(this._client)}};fs.Completions=Lr;class Fr extends V{create(e,t){return this._client.post("/audio/speech",{body:e,...t,__binaryResponse:!0})}}class Br extends V{create(e,t){return this._client.post("/audio/transcriptions",lt({body:e,...t}))}}class Ur extends V{create(e,t){return this._client.post("/audio/translations",lt({body:e,...t}))}}class qt extends V{constructor(){super(...arguments),this.transcriptions=new Br(this._client),this.translations=new Ur(this._client),this.speech=new Fr(this._client)}}qt.Transcriptions=Br;qt.Translations=Ur;qt.Speech=Fr;class hs extends V{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return oe(e)?this.list({},e):this._client.getAPIList("/batches",ms,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class ms extends xe{}hs.BatchesPage=ms;class ps extends V{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/assistants/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},t){return oe(e)?this.list({},e):this._client.getAPIList("/assistants",gs,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class gs extends xe{}ps.AssistantsPage=gs;function Gs(s){return typeof s.parse=="function"}const at=s=>(s==null?void 0:s.role)==="assistant",Vr=s=>(s==null?void 0:s.role)==="function",Wr=s=>(s==null?void 0:s.role)==="tool";var he=function(s,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(s,t):r?r.value=t:e.set(s,t),t},z=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},Kn,ln,cn,bt,xt,un,vt,Ne,wt,mn,pn,Ye,zr;class Gr{constructor(){Kn.add(this),this.controller=new AbortController,ln.set(this,void 0),cn.set(this,()=>{}),bt.set(this,()=>{}),xt.set(this,void 0),un.set(this,()=>{}),vt.set(this,()=>{}),Ne.set(this,{}),wt.set(this,!1),mn.set(this,!1),pn.set(this,!1),Ye.set(this,!1),he(this,ln,new Promise((e,t)=>{he(this,cn,e,"f"),he(this,bt,t,"f")}),"f"),he(this,xt,new Promise((e,t)=>{he(this,un,e,"f"),he(this,vt,t,"f")}),"f"),z(this,ln,"f").catch(()=>{}),z(this,xt,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},z(this,Kn,"m",zr).bind(this))},0)}_connected(){this.ended||(z(this,cn,"f").call(this),this._emit("connect"))}get ended(){return z(this,wt,"f")}get errored(){return z(this,mn,"f")}get aborted(){return z(this,pn,"f")}abort(){this.controller.abort()}on(e,t){return(z(this,Ne,"f")[e]||(z(this,Ne,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=z(this,Ne,"f")[e];if(!n)return this;const r=n.findIndex(a=>a.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(z(this,Ne,"f")[e]||(z(this,Ne,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{he(this,Ye,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,t)})}async done(){he(this,Ye,!0,"f"),await z(this,xt,"f")}_emit(e,...t){if(z(this,wt,"f"))return;e==="end"&&(he(this,wt,!0,"f"),z(this,un,"f").call(this));const n=z(this,Ne,"f")[e];if(n&&(z(this,Ne,"f")[e]=n.filter(r=>!r.once),n.forEach(({listener:r})=>r(...t))),e==="abort"){const r=t[0];!z(this,Ye,"f")&&!(n!=null&&n.length)&&Promise.reject(r),z(this,bt,"f").call(this,r),z(this,vt,"f").call(this,r),this._emit("end");return}if(e==="error"){const r=t[0];!z(this,Ye,"f")&&!(n!=null&&n.length)&&Promise.reject(r),z(this,bt,"f").call(this,r),z(this,vt,"f").call(this,r),this._emit("end")}}_emitFinal(){}}ln=new WeakMap,cn=new WeakMap,bt=new WeakMap,xt=new WeakMap,un=new WeakMap,vt=new WeakMap,Ne=new WeakMap,wt=new WeakMap,mn=new WeakMap,pn=new WeakMap,Ye=new WeakMap,Kn=new WeakSet,zr=function(e){if(he(this,mn,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new pe),e instanceof pe)return he(this,pn,!0,"f"),this._emit("abort",e);if(e instanceof Z)return this._emit("error",e);if(e instanceof Error){const t=new Z(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Z(String(e)))};function Ei(s,e){const t={...s};return Object.defineProperties(t,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),t}function qr(s){return(s==null?void 0:s.$brand)==="auto-parseable-response-format"}function Jt(s){return(s==null?void 0:s.$brand)==="auto-parseable-tool"}function Ni(s,e){return!e||!Jr(e)?{...s,choices:s.choices.map(t=>({...t,message:{...t.message,parsed:null,tool_calls:t.message.tool_calls??[]}}))}:ys(s,e)}function ys(s,e){const t=s.choices.map(n=>{var r;if(n.finish_reason==="length")throw new Tr;if(n.finish_reason==="content_filter")throw new Er;return{...n,message:{...n.message,tool_calls:((r=n.message.tool_calls)==null?void 0:r.map(a=>Ii(e,a)))??[],parsed:n.message.content&&!n.message.refusal?Ri(e,n.message.content):null}}});return{...s,choices:t}}function Ri(s,e){var t,n;return((t=s.response_format)==null?void 0:t.type)!=="json_schema"?null:((n=s.response_format)==null?void 0:n.type)==="json_schema"?"$parseRaw"in s.response_format?s.response_format.$parseRaw(e):JSON.parse(e):null}function Ii(s,e){var n;const t=(n=s.tools)==null?void 0:n.find(r=>{var a;return((a=r.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Jt(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function Oi(s,e){var n;if(!s)return!1;const t=(n=s.tools)==null?void 0:n.find(r=>{var a;return((a=r.function)==null?void 0:a.name)===e.function.name});return Jt(t)||(t==null?void 0:t.function.strict)||!1}function Jr(s){var e;return qr(s.response_format)?!0:((e=s.tools)==null?void 0:e.some(t=>Jt(t)||t.type==="function"&&t.function.strict===!0))??!1}function ji(s){for(const e of s??[]){if(e.type!=="function")throw new Z(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Z(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var ae=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},ne,Qn,gn,Yn,es,ts,Hr,ns;const qs=10;class Xr extends Gr{constructor(){super(...arguments),ne.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var n;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(n=e.choices[0])==null?void 0:n.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(Vr(e)||Wr(e))&&e.content)this._emit("functionCallResult",e.content);else if(at(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(at(e)&&e.tool_calls)for(const n of e.tool_calls)n.type==="function"&&this._emit("functionCall",n.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Z("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),ae(this,ne,"m",Qn).call(this)}async finalMessage(){return await this.done(),ae(this,ne,"m",gn).call(this)}async finalFunctionCall(){return await this.done(),ae(this,ne,"m",Yn).call(this)}async finalFunctionCallResult(){return await this.done(),ae(this,ne,"m",es).call(this)}async totalUsage(){return await this.done(),ae(this,ne,"m",ts).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=ae(this,ne,"m",gn).call(this);t&&this._emit("finalMessage",t);const n=ae(this,ne,"m",Qn).call(this);n&&this._emit("finalContent",n);const r=ae(this,ne,"m",Yn).call(this);r&&this._emit("finalFunctionCall",r);const a=ae(this,ne,"m",es).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(i=>i.usage)&&this._emit("totalUsage",ae(this,ne,"m",ts).call(this))}async _createChatCompletion(e,t,n){const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),ae(this,ne,"m",Hr).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(ys(a,t))}async _runChatCompletion(e,t,n){for(const r of t.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){var g;const r="function",{function_call:a="auto",stream:i,...o}=t,c=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:l=qs}=n||{},u={};for(const _ of t.functions)u[_.name||_.function.name]=_;const f=t.functions.map(_=>({name:_.name||_.function.name,parameters:_.parameters,description:_.description}));for(const _ of t.messages)this._addMessage(_,!1);for(let _=0;_<l;++_){const v=(g=(await this._createChatCompletion(e,{...o,function_call:a,functions:f,messages:[...this.messages]},n)).choices[0])==null?void 0:g.message;if(!v)throw new Z("missing message in ChatCompletion response");if(!v.function_call)return;const{name:S,arguments:q}=v.function_call,b=u[S];if(b){if(c&&c!==S){const N=`Invalid function_call: ${JSON.stringify(S)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:r,name:S,content:N});continue}}else{const N=`Invalid function_call: ${JSON.stringify(S)}. Available options are: ${f.map(R=>JSON.stringify(R.name)).join(", ")}. Please try again`;this._addMessage({role:r,name:S,content:N});continue}let $;try{$=Gs(b)?await b.parse(q):q}catch(N){this._addMessage({role:r,name:S,content:N instanceof Error?N.message:String(N)});continue}const P=await b.function($,this),B=ae(this,ne,"m",ns).call(this,P);if(this._addMessage({role:r,name:S,content:B}),c)return}}async _runTools(e,t,n){var _,C,v;const r="tool",{tool_choice:a="auto",stream:i,...o}=t,c=typeof a!="string"&&((_=a==null?void 0:a.function)==null?void 0:_.name),{maxChatCompletions:l=qs}=n||{},u=t.tools.map(S=>{if(Jt(S)){if(!S.$callback)throw new Z("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:S.$callback,name:S.function.name,description:S.function.description||"",parameters:S.function.parameters,parse:S.$parseRaw,strict:!0}}}return S}),f={};for(const S of u)S.type==="function"&&(f[S.function.name||S.function.function.name]=S.function);const g="tools"in t?u.map(S=>S.type==="function"?{type:"function",function:{name:S.function.name||S.function.function.name,parameters:S.function.parameters,description:S.function.description,strict:S.function.strict}}:S):void 0;for(const S of t.messages)this._addMessage(S,!1);for(let S=0;S<l;++S){const b=(C=(await this._createChatCompletion(e,{...o,tool_choice:a,tools:g,messages:[...this.messages]},n)).choices[0])==null?void 0:C.message;if(!b)throw new Z("missing message in ChatCompletion response");if(!((v=b.tool_calls)!=null&&v.length))return;for(const $ of b.tool_calls){if($.type!=="function")continue;const P=$.id,{name:B,arguments:N}=$.function,R=f[B];if(R){if(c&&c!==B){const M=`Invalid tool_call: ${JSON.stringify(B)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:r,tool_call_id:P,content:M});continue}}else{const M=`Invalid tool_call: ${JSON.stringify(B)}. Available options are: ${Object.keys(f).map(J=>JSON.stringify(J)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:P,content:M});continue}let x;try{x=Gs(R)?await R.parse(N):N}catch(M){const J=M instanceof Error?M.message:String(M);this._addMessage({role:r,tool_call_id:P,content:J});continue}const I=await R.function(x,this),T=ae(this,ne,"m",ns).call(this,I);if(this._addMessage({role:r,tool_call_id:P,content:T}),c)return}}}}ne=new WeakSet,Qn=function(){return ae(this,ne,"m",gn).call(this).content??null},gn=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(at(t)){const{function_call:n,...r}=t,a={...r,content:t.content??null,refusal:t.refusal??null};return n&&(a.function_call=n),a}}throw new Z("stream ended without producing a ChatCompletionMessage with role=assistant")},Yn=function(){var e,t;for(let n=this.messages.length-1;n>=0;n--){const r=this.messages[n];if(at(r)&&(r!=null&&r.function_call))return r.function_call;if(at(r)&&((e=r==null?void 0:r.tool_calls)!=null&&e.length))return(t=r.tool_calls.at(-1))==null?void 0:t.function}},es=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Vr(t)&&t.content!=null||Wr(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(n=>{var r;return n.role==="assistant"&&((r=n.tool_calls)==null?void 0:r.some(a=>a.type==="function"&&a.id===t.tool_call_id))}))return t.content}},ts=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},Hr=function(e){if(e.n!=null&&e.n>1)throw new Z("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},ns=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Nt extends Xr{static runFunctions(e,t,n){const r=new Nt,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,a)),r}static runTools(e,t,n){const r=new Nt,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}_addMessage(e,t=!0){super._addMessage(e,t),at(e)&&e.content&&this._emit("content",e.content)}}const Kr=1,Qr=2,Yr=4,ea=8,ta=16,na=32,sa=64,ra=128,aa=256,ia=ra|aa,oa=ta|na|ia|sa,la=Kr|Qr|oa,ca=Yr|ea,Mi=la|ca,Y={STR:Kr,NUM:Qr,ARR:Yr,OBJ:ea,NULL:ta,BOOL:na,NAN:sa,INFINITY:ra,MINUS_INFINITY:aa,INF:ia,SPECIAL:oa,ATOM:la,COLLECTION:ca,ALL:Mi};class $i extends Error{}class Zi extends Error{}function Di(s,e=Y.ALL){if(typeof s!="string")throw new TypeError(`expecting str, got ${typeof s}`);if(!s.trim())throw new Error(`${s} is empty`);return Li(s.trim(),e)}const Li=(s,e)=>{const t=s.length;let n=0;const r=g=>{throw new $i(`${g} at position ${n}`)},a=g=>{throw new Zi(`${g} at position ${n}`)},i=()=>(f(),n>=t&&r("Unexpected end of input"),s[n]==='"'?o():s[n]==="{"?c():s[n]==="["?l():s.substring(n,n+4)==="null"||Y.NULL&e&&t-n<4&&"null".startsWith(s.substring(n))?(n+=4,null):s.substring(n,n+4)==="true"||Y.BOOL&e&&t-n<4&&"true".startsWith(s.substring(n))?(n+=4,!0):s.substring(n,n+5)==="false"||Y.BOOL&e&&t-n<5&&"false".startsWith(s.substring(n))?(n+=5,!1):s.substring(n,n+8)==="Infinity"||Y.INFINITY&e&&t-n<8&&"Infinity".startsWith(s.substring(n))?(n+=8,1/0):s.substring(n,n+9)==="-Infinity"||Y.MINUS_INFINITY&e&&1<t-n&&t-n<9&&"-Infinity".startsWith(s.substring(n))?(n+=9,-1/0):s.substring(n,n+3)==="NaN"||Y.NAN&e&&t-n<3&&"NaN".startsWith(s.substring(n))?(n+=3,NaN):u()),o=()=>{const g=n;let _=!1;for(n++;n<t&&(s[n]!=='"'||_&&s[n-1]==="\\");)_=s[n]==="\\"?!_:!1,n++;if(s.charAt(n)=='"')try{return JSON.parse(s.substring(g,++n-Number(_)))}catch(C){a(String(C))}else if(Y.STR&e)try{return JSON.parse(s.substring(g,n-Number(_))+'"')}catch{return JSON.parse(s.substring(g,s.lastIndexOf("\\"))+'"')}r("Unterminated string literal")},c=()=>{n++,f();const g={};try{for(;s[n]!=="}";){if(f(),n>=t&&Y.OBJ&e)return g;const _=o();f(),n++;try{const C=i();Object.defineProperty(g,_,{value:C,writable:!0,enumerable:!0,configurable:!0})}catch(C){if(Y.OBJ&e)return g;throw C}f(),s[n]===","&&n++}}catch{if(Y.OBJ&e)return g;r("Expected '}' at end of object")}return n++,g},l=()=>{n++;const g=[];try{for(;s[n]!=="]";)g.push(i()),f(),s[n]===","&&n++}catch{if(Y.ARR&e)return g;r("Expected ']' at end of array")}return n++,g},u=()=>{if(n===0){s==="-"&&Y.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(s)}catch(_){if(Y.NUM&e)try{return s[s.length-1]==="."?JSON.parse(s.substring(0,s.lastIndexOf("."))):JSON.parse(s.substring(0,s.lastIndexOf("e")))}catch{}a(String(_))}}const g=n;for(s[n]==="-"&&n++;s[n]&&!",]}".includes(s[n]);)n++;n==t&&!(Y.NUM&e)&&r("Unterminated number literal");try{return JSON.parse(s.substring(g,n))}catch{s.substring(g,n)==="-"&&Y.NUM&e&&r("Not sure what '-' is");try{return JSON.parse(s.substring(g,s.lastIndexOf("e")))}catch(C){a(String(C))}}},f=()=>{for(;n<t&&` 
\r	`.includes(s[n]);)n++};return i()},Js=s=>Di(s,Y.ALL^Y.NUM);var Xe=function(s,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(s,t):r?r.value=t:e.set(s,t),t},W=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},X,Ee,Ke,Oe,Ln,sn,Fn,Bn,Un,rn,Vn,Hs;class Rt extends Xr{constructor(e){super(),X.add(this),Ee.set(this,void 0),Ke.set(this,void 0),Oe.set(this,void 0),Xe(this,Ee,e,"f"),Xe(this,Ke,[],"f")}get currentChatCompletionSnapshot(){return W(this,Oe,"f")}static fromReadableStream(e){const t=new Rt(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,n){const r=new Rt(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,n){var i;super._createChatCompletion;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),W(this,X,"m",Ln).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const o of a)W(this,X,"m",Fn).call(this,o);if((i=a.controller.signal)!=null&&i.aborted)throw new pe;return this._addChatCompletion(W(this,X,"m",rn).call(this))}async _fromReadableStream(e,t){var i;const n=t==null?void 0:t.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),W(this,X,"m",Ln).call(this),this._connected();const r=Ce.fromReadableStream(e,this.controller);let a;for await(const o of r)a&&a!==o.id&&this._addChatCompletion(W(this,X,"m",rn).call(this)),W(this,X,"m",Fn).call(this,o),a=o.id;if((i=r.controller.signal)!=null&&i.aborted)throw new pe;return this._addChatCompletion(W(this,X,"m",rn).call(this))}[(Ee=new WeakMap,Ke=new WeakMap,Oe=new WeakMap,X=new WeakSet,Ln=function(){this.ended||Xe(this,Oe,void 0,"f")},sn=function(t){let n=W(this,Ke,"f")[t.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},W(this,Ke,"f")[t.index]=n,n)},Fn=function(t){var r,a,i,o,c,l,u,f,g,_,C,v,S,q,b;if(this.ended)return;const n=W(this,X,"m",Hs).call(this,t);this._emit("chunk",t,n);for(const $ of t.choices){const P=n.choices[$.index];$.delta.content!=null&&((r=P.message)==null?void 0:r.role)==="assistant"&&((a=P.message)!=null&&a.content)&&(this._emit("content",$.delta.content,P.message.content),this._emit("content.delta",{delta:$.delta.content,snapshot:P.message.content,parsed:P.message.parsed})),$.delta.refusal!=null&&((i=P.message)==null?void 0:i.role)==="assistant"&&((o=P.message)!=null&&o.refusal)&&this._emit("refusal.delta",{delta:$.delta.refusal,snapshot:P.message.refusal}),((c=$.logprobs)==null?void 0:c.content)!=null&&((l=P.message)==null?void 0:l.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(u=$.logprobs)==null?void 0:u.content,snapshot:((f=P.logprobs)==null?void 0:f.content)??[]}),((g=$.logprobs)==null?void 0:g.refusal)!=null&&((_=P.message)==null?void 0:_.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(C=$.logprobs)==null?void 0:C.refusal,snapshot:((v=P.logprobs)==null?void 0:v.refusal)??[]});const B=W(this,X,"m",sn).call(this,P);P.finish_reason&&(W(this,X,"m",Un).call(this,P),B.current_tool_call_index!=null&&W(this,X,"m",Bn).call(this,P,B.current_tool_call_index));for(const N of $.delta.tool_calls??[])B.current_tool_call_index!==N.index&&(W(this,X,"m",Un).call(this,P),B.current_tool_call_index!=null&&W(this,X,"m",Bn).call(this,P,B.current_tool_call_index)),B.current_tool_call_index=N.index;for(const N of $.delta.tool_calls??[]){const R=(S=P.message.tool_calls)==null?void 0:S[N.index];R!=null&&R.type&&((R==null?void 0:R.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(q=R.function)==null?void 0:q.name,index:N.index,arguments:R.function.arguments,parsed_arguments:R.function.parsed_arguments,arguments_delta:((b=N.function)==null?void 0:b.arguments)??""}):(R==null||R.type,void 0))}}},Bn=function(t,n){var i,o,c;if(W(this,X,"m",sn).call(this,t).done_tool_calls.has(n))return;const a=(i=t.message.tool_calls)==null?void 0:i[n];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const l=(c=(o=W(this,Ee,"f"))==null?void 0:o.tools)==null?void 0:c.find(u=>u.type==="function"&&u.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:n,arguments:a.function.arguments,parsed_arguments:Jt(l)?l.$parseRaw(a.function.arguments):l!=null&&l.function.strict?JSON.parse(a.function.arguments):null})}else a.type},Un=function(t){var r,a;const n=W(this,X,"m",sn).call(this,t);if(t.message.content&&!n.content_done){n.content_done=!0;const i=W(this,X,"m",Vn).call(this);this._emit("content.done",{content:t.message.content,parsed:i?i.$parseRaw(t.message.content):null})}t.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(r=t.logprobs)!=null&&r.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(a=t.logprobs)!=null&&a.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},rn=function(){if(this.ended)throw new Z("stream has ended, this shouldn't happen");const t=W(this,Oe,"f");if(!t)throw new Z("request ended without sending any chunks");return Xe(this,Oe,void 0,"f"),Xe(this,Ke,[],"f"),Fi(t,W(this,Ee,"f"))},Vn=function(){var n;const t=(n=W(this,Ee,"f"))==null?void 0:n.response_format;return qr(t)?t:null},Hs=function(t){var n,r,a,i;let o=W(this,Oe,"f");const{choices:c,...l}=t;o?Object.assign(o,l):o=Xe(this,Oe,{...l,choices:[]},"f");for(const{delta:u,finish_reason:f,index:g,logprobs:_=null,...C}of t.choices){let v=o.choices[g];if(v||(v=o.choices[g]={finish_reason:f,index:g,message:{},logprobs:_,...C}),_)if(!v.logprobs)v.logprobs=Object.assign({},_);else{const{content:N,refusal:R,...x}=_;Object.assign(v.logprobs,x),N&&((n=v.logprobs).content??(n.content=[]),v.logprobs.content.push(...N)),R&&((r=v.logprobs).refusal??(r.refusal=[]),v.logprobs.refusal.push(...R))}if(f&&(v.finish_reason=f,W(this,Ee,"f")&&Jr(W(this,Ee,"f")))){if(f==="length")throw new Tr;if(f==="content_filter")throw new Er}if(Object.assign(v,C),!u)continue;const{content:S,refusal:q,function_call:b,role:$,tool_calls:P,...B}=u;if(Object.assign(v.message,B),q&&(v.message.refusal=(v.message.refusal||"")+q),$&&(v.message.role=$),b&&(v.message.function_call?(b.name&&(v.message.function_call.name=b.name),b.arguments&&((a=v.message.function_call).arguments??(a.arguments=""),v.message.function_call.arguments+=b.arguments)):v.message.function_call=b),S&&(v.message.content=(v.message.content||"")+S,!v.message.refusal&&W(this,X,"m",Vn).call(this)&&(v.message.parsed=Js(v.message.content))),P){v.message.tool_calls||(v.message.tool_calls=[]);for(const{index:N,id:R,type:x,function:I,...T}of P){const M=(i=v.message.tool_calls)[N]??(i[N]={});Object.assign(M,T),R&&(M.id=R),x&&(M.type=x),I&&(M.function??(M.function={name:I.name??"",arguments:""})),I!=null&&I.name&&(M.function.name=I.name),I!=null&&I.arguments&&(M.function.arguments+=I.arguments,Oi(W(this,Ee,"f"),M)&&(M.function.parsed_arguments=Js(M.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,i)=>t.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Ce(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Fi(s,e){const{id:t,choices:n,created:r,model:a,system_fingerprint:i,...o}=s,c={...o,id:t,choices:n.map(({message:l,finish_reason:u,index:f,logprobs:g,..._})=>{if(!u)throw new Z(`missing finish_reason for choice ${f}`);const{content:C=null,function_call:v,tool_calls:S,...q}=l,b=l.role;if(!b)throw new Z(`missing role for choice ${f}`);if(v){const{arguments:$,name:P}=v;if($==null)throw new Z(`missing function_call.arguments for choice ${f}`);if(!P)throw new Z(`missing function_call.name for choice ${f}`);return{..._,message:{content:C,function_call:{arguments:$,name:P},role:b,refusal:l.refusal??null},finish_reason:u,index:f,logprobs:g}}return S?{..._,index:f,finish_reason:u,logprobs:g,message:{...q,role:b,content:C,refusal:l.refusal??null,tool_calls:S.map(($,P)=>{const{function:B,type:N,id:R,...x}=$,{arguments:I,name:T,...M}=B||{};if(R==null)throw new Z(`missing choices[${f}].tool_calls[${P}].id
${an(s)}`);if(N==null)throw new Z(`missing choices[${f}].tool_calls[${P}].type
${an(s)}`);if(T==null)throw new Z(`missing choices[${f}].tool_calls[${P}].function.name
${an(s)}`);if(I==null)throw new Z(`missing choices[${f}].tool_calls[${P}].function.arguments
${an(s)}`);return{...x,id:R,type:N,function:{...M,name:T,arguments:I}}})}}:{..._,message:{...q,content:C,role:b,refusal:l.refusal??null},finish_reason:u,index:f,logprobs:g}}),created:r,model:a,object:"chat.completion",...i?{system_fingerprint:i}:{}};return Ni(c,e)}function an(s){return JSON.stringify(s)}class it extends Rt{static fromReadableStream(e){const t=new it(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,n){const r=new it(null),a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,a)),r}static runTools(e,t,n){const r=new it(t),a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,a)),r}}let ua=class extends V{parse(e,t){return ji(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(n=>ys(n,e))}runFunctions(e,t){return e.stream?it.runFunctions(this._client,e,t):Nt.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?it.runTools(this._client,e,t):Nt.runTools(this._client,e,t)}stream(e,t){return Rt.createChatCompletion(this._client,e,t)}};class ss extends V{constructor(){super(...arguments),this.completions=new ua(this._client)}}(function(s){s.Completions=ua})(ss||(ss={}));var k=function(s,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(s):n?n.value:e.get(s)},le=function(s,e,t,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(s,t):r?r.value=t:e.set(s,t),t},ee,rs,Se,dn,me,Be,tt,Fe,yn,ce,fn,hn,Et,kt,St,Xs,Ks,Qs,Ys,er,tr,nr;class ge extends Gr{constructor(){super(...arguments),ee.add(this),rs.set(this,[]),Se.set(this,{}),dn.set(this,{}),me.set(this,void 0),Be.set(this,void 0),tt.set(this,void 0),Fe.set(this,void 0),yn.set(this,void 0),ce.set(this,void 0),fn.set(this,void 0),hn.set(this,void 0),Et.set(this,void 0)}[(rs=new WeakMap,Se=new WeakMap,dn=new WeakMap,me=new WeakMap,Be=new WeakMap,tt=new WeakMap,Fe=new WeakMap,yn=new WeakMap,ce=new WeakMap,fn=new WeakMap,hn=new WeakMap,Et=new WeakMap,ee=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",r=>{const a=t.shift();a?a.resolve(r):e.push(r)}),this.on("end",()=>{n=!0;for(const r of t)r.resolve(void 0);t.length=0}),this.on("abort",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),this.on("error",r=>{n=!0;for(const a of t)a.reject(r);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,i)=>t.push({resolve:a,reject:i})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new ge;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var a;const n=t==null?void 0:t.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=Ce.fromReadableStream(e,this.controller);for await(const i of r)k(this,ee,"m",kt).call(this,i);if((a=r.controller.signal)!=null&&a.aborted)throw new pe;return this._addRun(k(this,ee,"m",St).call(this))}toReadableStream(){return new Ce(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,r,a){const i=new ge;return i._run(()=>i._runToolAssistantStream(e,t,n,r,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createToolAssistantStream(e,t,n,r,a){var l;const i=a==null?void 0:a.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},c=await e.submitToolOutputs(t,n,o,{...a,signal:this.controller.signal});this._connected();for await(const u of c)k(this,ee,"m",kt).call(this,u);if((l=c.controller.signal)!=null&&l.aborted)throw new pe;return this._addRun(k(this,ee,"m",St).call(this))}static createThreadAssistantStream(e,t,n){const r=new ge;return r._run(()=>r._threadAssistantStream(e,t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,n,r){const a=new ge;return a._run(()=>a._runAssistantStream(e,t,n,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return k(this,fn,"f")}currentRun(){return k(this,hn,"f")}currentMessageSnapshot(){return k(this,me,"f")}currentRunStepSnapshot(){return k(this,Et,"f")}async finalRunSteps(){return await this.done(),Object.values(k(this,Se,"f"))}async finalMessages(){return await this.done(),Object.values(k(this,dn,"f"))}async finalRun(){if(await this.done(),!k(this,Be,"f"))throw Error("Final run was not received.");return k(this,Be,"f")}async _createThreadAssistantStream(e,t,n){var o;const r=n==null?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},i=await e.createAndRun(a,{...n,signal:this.controller.signal});this._connected();for await(const c of i)k(this,ee,"m",kt).call(this,c);if((o=i.controller.signal)!=null&&o.aborted)throw new pe;return this._addRun(k(this,ee,"m",St).call(this))}async _createAssistantStream(e,t,n,r){var c;const a=r==null?void 0:r.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},o=await e.create(t,i,{...r,signal:this.controller.signal});this._connected();for await(const l of o)k(this,ee,"m",kt).call(this,l);if((c=o.controller.signal)!=null&&c.aborted)throw new pe;return this._addRun(k(this,ee,"m",St).call(this))}static accumulateDelta(e,t){for(const[n,r]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let a=e[n];if(a==null){e[n]=r;continue}if(n==="index"||n==="type"){e[n]=r;continue}if(typeof a=="string"&&typeof r=="string")a+=r;else if(typeof a=="number"&&typeof r=="number")a+=r;else if(Dn(a)&&Dn(r))a=this.accumulateDelta(a,r);else if(Array.isArray(a)&&Array.isArray(r)){if(a.every(i=>typeof i=="string"||typeof i=="number")){a.push(...r);continue}for(const i of r){if(!Dn(i))throw new Error(`Expected array delta entry to be an object but got: ${i}`);const o=i.index;if(o==null)throw console.error(i),new Error("Expected array delta entry to have an `index` property");if(typeof o!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${o}`);const c=a[o];c==null?a.push(i):a[o]=this.accumulateDelta(c,i)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${r}, accValue: ${a}`);e[n]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,r){return await this._createAssistantStream(t,e,n,r)}async _runToolAssistantStream(e,t,n,r,a){return await this._createToolAssistantStream(n,e,t,r,a)}}kt=function(e){if(!this.ended)switch(le(this,fn,e,"f"),k(this,ee,"m",Qs).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":k(this,ee,"m",nr).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":k(this,ee,"m",Ks).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":k(this,ee,"m",Xs).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},St=function(){if(this.ended)throw new Z("stream has ended, this shouldn't happen");if(!k(this,Be,"f"))throw Error("Final run has not been received");return k(this,Be,"f")},Xs=function(e){const[t,n]=k(this,ee,"m",er).call(this,e,k(this,me,"f"));le(this,me,t,"f"),k(this,dn,"f")[t.id]=t;for(const r of n){const a=t.content[r.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const r of e.data.delta.content){if(r.type=="text"&&r.text){let a=r.text,i=t.content[r.index];if(i&&i.type=="text")this._emit("textDelta",a,i.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(r.index!=k(this,tt,"f")){if(k(this,Fe,"f"))switch(k(this,Fe,"f").type){case"text":this._emit("textDone",k(this,Fe,"f").text,k(this,me,"f"));break;case"image_file":this._emit("imageFileDone",k(this,Fe,"f").image_file,k(this,me,"f"));break}le(this,tt,r.index,"f")}le(this,Fe,t.content[r.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(k(this,tt,"f")!==void 0){const r=e.data.content[k(this,tt,"f")];if(r)switch(r.type){case"image_file":this._emit("imageFileDone",r.image_file,k(this,me,"f"));break;case"text":this._emit("textDone",r.text,k(this,me,"f"));break}}k(this,me,"f")&&this._emit("messageDone",e.data),le(this,me,void 0,"f")}},Ks=function(e){const t=k(this,ee,"m",Ys).call(this,e);switch(le(this,Et,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of n.step_details.tool_calls)a.index==k(this,yn,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(k(this,ce,"f")&&this._emit("toolCallDone",k(this,ce,"f")),le(this,yn,a.index,"f"),le(this,ce,t.step_details.tool_calls[a.index],"f"),k(this,ce,"f")&&this._emit("toolCallCreated",k(this,ce,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":le(this,Et,void 0,"f"),e.data.step_details.type=="tool_calls"&&k(this,ce,"f")&&(this._emit("toolCallDone",k(this,ce,"f")),le(this,ce,void 0,"f")),this._emit("runStepDone",e.data,t);break}},Qs=function(e){k(this,rs,"f").push(e),this._emit("event",e)},Ys=function(e){switch(e.event){case"thread.run.step.created":return k(this,Se,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=k(this,Se,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const r=ge.accumulateDelta(t,n.delta);k(this,Se,"f")[e.data.id]=r}return k(this,Se,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":k(this,Se,"f")[e.data.id]=e.data;break}if(k(this,Se,"f")[e.data.id])return k(this,Se,"f")[e.data.id];throw new Error("No snapshot available")},er=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const a of r.delta.content)if(a.index in t.content){let i=t.content[a.index];t.content[a.index]=k(this,ee,"m",tr).call(this,a,i)}else t.content[a.index]=a,n.push(a);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},tr=function(e,t){return ge.accumulateDelta(t,e)},nr=function(e){switch(le(this,hn,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":le(this,Be,e.data,"f"),k(this,ce,"f")&&(this._emit("toolCallDone",k(this,ce,"f")),le(this,ce,void 0,"f"));break}};class _s extends V{create(e,t,n){return this._client.post(`/threads/${e}/messages`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/messages/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,t={},n){return oe(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,bs,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t,n){return this._client.delete(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class bs extends xe{}_s.MessagesPage=bs;class xs extends V{retrieve(e,t,n,r={},a){return oe(r)?this.retrieve(e,t,n,{},r):this._client.get(`/threads/${e}/runs/${t}/steps/${n}`,{query:r,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e,t,n={},r){return oe(n)?this.list(e,t,{},n):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,vs,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class vs extends xe{}xs.RunStepsPage=vs;class Ht extends V{constructor(){super(...arguments),this.steps=new xs(this._client)}create(e,t,n){const{include:r,...a}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:r},body:a,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:t.stream??!1})}retrieve(e,t,n){return this._client.get(`/threads/${e}/runs/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e,t={},n){return oe(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,ws,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,t,n){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}createAndStream(e,t,n){return ge.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){const r={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:a,response:i}=await this.retrieve(e,t,{...n,headers:{...n==null?void 0:n.headers,...r}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let o=5e3;if(n!=null&&n.pollIntervalMs)o=n.pollIntervalMs;else{const c=i.headers.get("openai-poll-after-ms");if(c){const l=parseInt(c);isNaN(l)||(o=l)}}await Gt(o);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,n){return ge.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,t,n,r){const a=await this.submitToolOutputs(e,t,n,r);return await this.poll(e,a.id,r)}submitToolOutputsStream(e,t,n,r){return ge.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,r)}}class ws extends xe{}Ht.RunsPage=ws;Ht.Steps=xs;Ht.RunStepsPage=vs;class ft extends V{constructor(){super(...arguments),this.runs=new Ht(this._client),this.messages=new _s(this._client)}create(e={},t){return oe(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/threads/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return ge.createThreadAssistantStream(e,this._client.beta.threads,t)}}ft.Runs=Ht;ft.RunsPage=ws;ft.Messages=_s;ft.MessagesPage=bs;const Bi=async s=>{const e=await Promise.allSettled(s),t=e.filter(r=>r.status==="rejected");if(t.length){for(const r of t)console.error(r.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const n=[];for(const r of e)r.status==="fulfilled"&&n.push(r.value);return n};let ks=class extends V{create(e,t,n){return this._client.post(`/vector_stores/${e}/files`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e,t={},n){return oe(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,En,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t,n){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}async poll(e,t,n){const r={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const a=await this.retrieve(e,t,{...n,headers:r}).withResponse(),i=a.data;switch(i.status){case"in_progress":let o=5e3;if(n!=null&&n.pollIntervalMs)o=n.pollIntervalMs;else{const c=a.response.headers.get("openai-poll-after-ms");if(c){const l=parseInt(c);isNaN(l)||(o=l)}}await Gt(o);break;case"failed":case"completed":return i}}}async upload(e,t,n){const r=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,t,n){const r=await this.upload(e,t,n);return await this.poll(e,r.id,n)}};class En extends xe{}ks.VectorStoreFilesPage=En;class da extends V{create(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t);return await this.poll(e,r.id,n)}listFiles(e,t,n={},r){return oe(n)?this.listFiles(e,t,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,En,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async poll(e,t,n){const r={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:a,response:i}=await this.retrieve(e,t,{...n,headers:r}).withResponse();switch(a.status){case"in_progress":let o=5e3;if(n!=null&&n.pollIntervalMs)o=n.pollIntervalMs;else{const c=i.headers.get("openai-poll-after-ms");if(c){const l=parseInt(c);isNaN(l)||(o=l)}}await Gt(o);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},r){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(r==null?void 0:r.maxConcurrency)??5,i=Math.min(a,t.length),o=this._client,c=t.values(),l=[...n];async function u(g){for(let _ of g){const C=await o.files.create({file:_,purpose:"assistants"},r);l.push(C.id)}}const f=Array(i).fill(c).map(u);return await Bi(f),await this.createAndPoll(e,{file_ids:l})}}class ht extends V{constructor(){super(...arguments),this.files=new ks(this._client),this.fileBatches=new da(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/vector_stores/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},t){return oe(e)?this.list({},e):this._client.getAPIList("/vector_stores",Ss,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Ss extends xe{}ht.VectorStoresPage=Ss;ht.Files=ks;ht.VectorStoreFilesPage=En;ht.FileBatches=da;class Ge extends V{constructor(){super(...arguments),this.vectorStores=new ht(this._client),this.chat=new ss(this._client),this.assistants=new ps(this._client),this.threads=new ft(this._client)}}Ge.VectorStores=ht;Ge.VectorStoresPage=Ss;Ge.Assistants=ps;Ge.AssistantsPage=gs;Ge.Threads=ft;class fa extends V{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class ha extends V{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}class Cs extends V{create(e,t){return this._client.post("/files",lt({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return oe(e)?this.list({},e):this._client.getAPIList("/files",As,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/json",...t==null?void 0:t.headers}})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=30*60*1e3}={}){const r=new Set(["processed","error","deleted"]),a=Date.now();let i=await this.retrieve(e);for(;!i.status||!r.has(i.status);)if(await Gt(t),i=await this.retrieve(e),Date.now()-a>n)throw new ds({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return i}}class As extends xe{}Cs.FileObjectsPage=As;class Ps extends V{list(e,t={},n){return oe(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Ts,{query:t,...n})}}class Ts extends xe{}Ps.FineTuningJobCheckpointsPage=Ts;class mt extends V{constructor(){super(...arguments),this.checkpoints=new Ps(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return oe(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Es,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return oe(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Ns,{query:t,...n})}}class Es extends xe{}class Ns extends xe{}mt.FineTuningJobsPage=Es;mt.FineTuningJobEventsPage=Ns;mt.Checkpoints=Ps;mt.FineTuningJobCheckpointsPage=Ts;class Xt extends V{constructor(){super(...arguments),this.jobs=new mt(this._client)}}Xt.Jobs=mt;Xt.FineTuningJobsPage=Es;Xt.FineTuningJobEventsPage=Ns;class ma extends V{createVariation(e,t){return this._client.post("/images/variations",lt({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",lt({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class Rs extends V{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Is,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class Is extends Ti{}Rs.ModelsPage=Is;class pa extends V{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class ga extends V{create(e,t,n){return this._client.post(`/uploads/${e}/parts`,lt({body:t,...n}))}}class Os extends V{constructor(){super(...arguments),this.parts=new ga(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(`/uploads/${e}/complete`,{body:t,...n})}}Os.Parts=ga;var ya;class L extends pi{constructor({baseURL:e=nn("OPENAI_BASE_URL"),apiKey:t=nn("OPENAI_API_KEY"),organization:n=nn("OPENAI_ORG_ID")??null,project:r=nn("OPENAI_PROJECT_ID")??null,...a}={}){if(t===void 0)throw new Z("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const i={apiKey:t,organization:n,project:r,...a,baseURL:e||"https://api.openai.com/v1"};if(!i.dangerouslyAllowBrowser&&Ai())throw new Z(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:i.baseURL,timeout:i.timeout??6e5,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new fa(this),this.chat=new fs(this),this.embeddings=new ha(this),this.files=new Cs(this),this.images=new ma(this),this.audio=new qt(this),this.moderations=new pa(this),this.models=new Rs(this),this.fineTuning=new Xt(this),this.beta=new Ge(this),this.batches=new hs(this),this.uploads=new Os(this),this._options=i,this.apiKey=t,this.organization=n,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return ti(e,{arrayFormat:"brackets"})}}ya=L;L.OpenAI=ya;L.DEFAULT_TIMEOUT=6e5;L.OpenAIError=Z;L.APIError=te;L.APIConnectionError=An;L.APIConnectionTimeoutError=ds;L.APIUserAbortError=pe;L.NotFoundError=kr;L.ConflictError=Sr;L.RateLimitError=Ar;L.BadRequestError=xr;L.AuthenticationError=vr;L.InternalServerError=Pr;L.PermissionDeniedError=wr;L.UnprocessableEntityError=Cr;L.toFile=Or;L.fileFromPath=hr;L.Completions=fa;L.Chat=fs;L.Embeddings=ha;L.Files=Cs;L.FileObjectsPage=As;L.Images=ma;L.Audio=qt;L.Moderations=pa;L.Models=Rs;L.ModelsPage=Is;L.FineTuning=Xt;L.Beta=Ge;L.Batches=hs;L.BatchesPage=ms;L.Uploads=Os;const Ui=Symbol("Let zodToJsonSchema decide on which parser to use"),sr={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Vi=s=>typeof s=="string"?{...sr,basePath:["#"],definitions:{},name:s}:{...sr,basePath:["#"],definitions:{},...s},as=s=>"_def"in s?s._def:s;function Wi(s){if(!s)return!0;for(const e in s)return!1;return!0}const zi=s=>{const e=Vi(s),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:t,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([n,r])=>[as(r),{def:as(r),path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};function _a(s,e,t,n){n!=null&&n.errorMessages&&t&&(s.errorMessage={...s.errorMessage,[e]:t})}function U(s,e,t,n,r){s[e]=t,_a(s,e,n,r)}var D;(function(s){s.assertEqual=r=>r;function e(r){}s.assertIs=e;function t(r){throw new Error}s.assertNever=t,s.arrayToEnum=r=>{const a={};for(const i of r)a[i]=i;return a},s.getValidEnumValues=r=>{const a=s.objectKeys(r).filter(o=>typeof r[r[o]]!="number"),i={};for(const o of a)i[o]=r[o];return s.objectValues(i)},s.objectValues=r=>s.objectKeys(r).map(function(a){return r[a]}),s.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const a=[];for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&a.push(i);return a},s.find=(r,a)=>{for(const i of r)if(a(i))return i},s.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function n(r,a=" | "){return r.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}s.joinValues=n,s.jsonStringifyReplacer=(r,a)=>typeof a=="bigint"?a.toString():a})(D||(D={}));var is;(function(s){s.mergeShapes=(e,t)=>({...e,...t})})(is||(is={}));const y=D.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),je=s=>{switch(typeof s){case"undefined":return y.undefined;case"string":return y.string;case"number":return isNaN(s)?y.nan:y.number;case"boolean":return y.boolean;case"function":return y.function;case"bigint":return y.bigint;case"symbol":return y.symbol;case"object":return Array.isArray(s)?y.array:s===null?y.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?y.promise:typeof Map<"u"&&s instanceof Map?y.map:typeof Set<"u"&&s instanceof Set?y.set:typeof Date<"u"&&s instanceof Date?y.date:y.object;default:return y.unknown}},h=D.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Gi=s=>JSON.stringify(s,null,2).replace(/"([^"]+)":/g,"$1:");class ue extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(a){return a.message},n={_errors:[]},r=a=>{for(const i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(r);else if(i.code==="invalid_return_type")r(i.returnTypeError);else if(i.code==="invalid_arguments")r(i.argumentsError);else if(i.path.length===0)n._errors.push(t(i));else{let o=n,c=0;for(;c<i.path.length;){const l=i.path[c];c===i.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(t(i))):o[l]=o[l]||{_errors:[]},o=o[l],c++}}};return r(this),n}static assert(e){if(!(e instanceof ue))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,D.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}ue.create=s=>new ue(s);const ct=(s,e)=>{let t;switch(s.code){case h.invalid_type:s.received===y.undefined?t="Required":t=`Expected ${s.expected}, received ${s.received}`;break;case h.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(s.expected,D.jsonStringifyReplacer)}`;break;case h.unrecognized_keys:t=`Unrecognized key(s) in object: ${D.joinValues(s.keys,", ")}`;break;case h.invalid_union:t="Invalid input";break;case h.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${D.joinValues(s.options)}`;break;case h.invalid_enum_value:t=`Invalid enum value. Expected ${D.joinValues(s.options)}, received '${s.received}'`;break;case h.invalid_arguments:t="Invalid function arguments";break;case h.invalid_return_type:t="Invalid function return type";break;case h.invalid_date:t="Invalid date";break;case h.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(t=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?t=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?t=`Invalid input: must end with "${s.validation.endsWith}"`:D.assertNever(s.validation):s.validation!=="regex"?t=`Invalid ${s.validation}`:t="Invalid";break;case h.too_small:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:t="Invalid input";break;case h.too_big:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?t=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:t="Invalid input";break;case h.custom:t="Invalid input";break;case h.invalid_intersection_types:t="Intersection results could not be merged";break;case h.not_multiple_of:t=`Number must be a multiple of ${s.multipleOf}`;break;case h.not_finite:t="Number must be finite";break;default:t=e.defaultError,D.assertNever(s)}return{message:t}};let ba=ct;function qi(s){ba=s}function _n(){return ba}const bn=s=>{const{data:e,path:t,errorMaps:n,issueData:r}=s,a=[...t,...r.path||[]],i={...r,path:a};if(r.message!==void 0)return{...r,path:a,message:r.message};let o="";const c=n.filter(l=>!!l).slice().reverse();for(const l of c)o=l(i,{data:e,defaultError:o}).message;return{...r,path:a,message:o}},Ji=[];function p(s,e){const t=_n(),n=bn({issueData:e,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,t,t===ct?void 0:ct].filter(r=>!!r)});s.common.issues.push(n)}class se{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if(r.status==="aborted")return A;r.status==="dirty"&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const r of t){const a=await r.key,i=await r.value;n.push({key:a,value:i})}return se.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:a,value:i}=r;if(a.status==="aborted"||i.status==="aborted")return A;a.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof i.value<"u"||r.alwaysSet)&&(n[a.value]=i.value)}return{status:e.value,value:n}}}const A=Object.freeze({status:"aborted"}),nt=s=>({status:"dirty",value:s}),re=s=>({status:"valid",value:s}),os=s=>s.status==="aborted",ls=s=>s.status==="dirty",It=s=>s.status==="valid",Ot=s=>typeof Promise<"u"&&s instanceof Promise;function xn(s,e,t,n){if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(s)}function xa(s,e,t,n,r){if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(s,t),t}var w;(function(s){s.errToObj=e=>typeof e=="string"?{message:e}:e||{},s.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(w||(w={}));var Ct,At;class Pe{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const rr=(s,e)=>{if(It(e))return{success:!0,data:e.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ue(s.common.issues);return this._error=t,this._error}}};function E(s){if(!s)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:r}=s;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(i,o)=>{var c,l;const{message:u}=s;return i.code==="invalid_enum_value"?{message:u??o.defaultError}:typeof o.data>"u"?{message:(c=u??n)!==null&&c!==void 0?c:o.defaultError}:i.code!=="invalid_type"?{message:o.defaultError}:{message:(l=u??t)!==null&&l!==void 0?l:o.defaultError}},description:r}}class j{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return je(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:je(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new se,ctx:{common:e.parent.common,data:e.data,parsedType:je(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Ot(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:je(e)},a=this._parseSync({data:e,path:r.path,parent:r});return rr(r,a)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:je(e)},r=this._parse({data:e,path:n.path,parent:n}),a=await(Ot(r)?r:Promise.resolve(r));return rr(n,a)}refine(e,t){const n=r=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,a)=>{const i=e(r),o=()=>a.addIssue({code:h.custom,...n(r)});return typeof Promise<"u"&&i instanceof Promise?i.then(c=>c?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,t){return this._refinement((n,r)=>e(n)?!0:(r.addIssue(typeof t=="function"?t(n,r):t),!1))}_refinement(e){return new be({schema:this,typeName:m.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Ae.create(this,this._def)}nullable(){return De.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return _e.create(this,this._def)}promise(){return dt.create(this,this._def)}or(e){return Zt.create([this,e],this._def)}and(e){return Dt.create(this,e,this._def)}transform(e){return new be({...E(this._def),schema:this,typeName:m.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Vt({...E(this._def),innerType:this,defaultValue:t,typeName:m.ZodDefault})}brand(){return new js({typeName:m.ZodBranded,type:this,...E(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Wt({...E(this._def),innerType:this,catchValue:t,typeName:m.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Kt.create(this,e)}readonly(){return zt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Hi=/^c[^\s-]{8,}$/i,Xi=/^[0-9a-z]+$/,Ki=/^[0-9A-HJKMNP-TV-Z]{26}$/,Qi=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Yi=/^[a-z0-9_-]{21}$/i,eo=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,to=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,no="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Wn;const so=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ro=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ao=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,va="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",io=new RegExp(`^${va}$`);function wa(s){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return s.precision?e=`${e}\\.\\d{${s.precision}}`:s.precision==null&&(e=`${e}(\\.\\d+)?`),e}function oo(s){return new RegExp(`^${wa(s)}$`)}function ka(s){let e=`${va}T${wa(s)}`;const t=[];return t.push(s.local?"Z?":"Z"),s.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function lo(s,e){return!!((e==="v4"||!e)&&so.test(s)||(e==="v6"||!e)&&ro.test(s))}class ye extends j{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==y.string){const a=this._getOrReturnCtx(e);return p(a,{code:h.invalid_type,expected:y.string,received:a.parsedType}),A}const n=new se;let r;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(r=this._getOrReturnCtx(e,r),p(r,{code:h.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")e.data.length>a.value&&(r=this._getOrReturnCtx(e,r),p(r,{code:h.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const i=e.data.length>a.value,o=e.data.length<a.value;(i||o)&&(r=this._getOrReturnCtx(e,r),i?p(r,{code:h.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&p(r,{code:h.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")to.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"email",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")Wn||(Wn=new RegExp(no,"u")),Wn.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"emoji",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")Qi.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"uuid",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")Yi.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"nanoid",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")Hi.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"cuid",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")Xi.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"cuid2",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")Ki.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"ulid",code:h.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),p(r,{validation:"url",code:h.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"regex",code:h.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(r=this._getOrReturnCtx(e,r),p(r,{code:h.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(r=this._getOrReturnCtx(e,r),p(r,{code:h.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(r=this._getOrReturnCtx(e,r),p(r,{code:h.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?ka(a).test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{code:h.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?io.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{code:h.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?oo(a).test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{code:h.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?eo.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"duration",code:h.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?lo(e.data,a.version)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"ip",code:h.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?ao.test(e.data)||(r=this._getOrReturnCtx(e,r),p(r,{validation:"base64",code:h.invalid_string,message:a.message}),n.dirty()):D.assertNever(a);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(r=>e.test(r),{validation:t,code:h.invalid_string,...w.errToObj(n)})}_addCheck(e){return new ye({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...w.errToObj(e)})}url(e){return this._addCheck({kind:"url",...w.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...w.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...w.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...w.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...w.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...w.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...w.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...w.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...w.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...w.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...w.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...w.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...w.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...w.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...w.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...w.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...w.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...w.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...w.errToObj(t)})}nonempty(e){return this.min(1,w.errToObj(e))}trim(){return new ye({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ye({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ye({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}ye.create=s=>{var e;return new ye({checks:[],typeName:m.ZodString,coerce:(e=s==null?void 0:s.coerce)!==null&&e!==void 0?e:!1,...E(s)})};function co(s,e){const t=(s.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,r=t>n?t:n,a=parseInt(s.toFixed(r).replace(".","")),i=parseInt(e.toFixed(r).replace(".",""));return a%i/Math.pow(10,r)}class Me extends j{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==y.number){const a=this._getOrReturnCtx(e);return p(a,{code:h.invalid_type,expected:y.number,received:a.parsedType}),A}let n;const r=new se;for(const a of this._def.checks)a.kind==="int"?D.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),p(n,{code:h.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),p(n,{code:h.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),p(n,{code:h.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):a.kind==="multipleOf"?co(e.data,a.value)!==0&&(n=this._getOrReturnCtx(e,n),p(n,{code:h.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),p(n,{code:h.not_finite,message:a.message}),r.dirty()):D.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,w.toString(t))}gt(e,t){return this.setLimit("min",e,!1,w.toString(t))}lte(e,t){return this.setLimit("max",e,!0,w.toString(t))}lt(e,t){return this.setLimit("max",e,!1,w.toString(t))}setLimit(e,t,n,r){return new Me({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:w.toString(r)}]})}_addCheck(e){return new Me({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:w.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:w.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:w.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:w.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:w.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:w.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:w.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:w.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:w.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&D.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Me.create=s=>new Me({checks:[],typeName:m.ZodNumber,coerce:(s==null?void 0:s.coerce)||!1,...E(s)});class $e extends j{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==y.bigint){const a=this._getOrReturnCtx(e);return p(a,{code:h.invalid_type,expected:y.bigint,received:a.parsedType}),A}let n;const r=new se;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(n=this._getOrReturnCtx(e,n),p(n,{code:h.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(n=this._getOrReturnCtx(e,n),p(n,{code:h.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),r.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),p(n,{code:h.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):D.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,w.toString(t))}gt(e,t){return this.setLimit("min",e,!1,w.toString(t))}lte(e,t){return this.setLimit("max",e,!0,w.toString(t))}lt(e,t){return this.setLimit("max",e,!1,w.toString(t))}setLimit(e,t,n,r){return new $e({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:w.toString(r)}]})}_addCheck(e){return new $e({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:w.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:w.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:w.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:w.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:w.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}$e.create=s=>{var e;return new $e({checks:[],typeName:m.ZodBigInt,coerce:(e=s==null?void 0:s.coerce)!==null&&e!==void 0?e:!1,...E(s)})};class jt extends j{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==y.boolean){const n=this._getOrReturnCtx(e);return p(n,{code:h.invalid_type,expected:y.boolean,received:n.parsedType}),A}return re(e.data)}}jt.create=s=>new jt({typeName:m.ZodBoolean,coerce:(s==null?void 0:s.coerce)||!1,...E(s)});class We extends j{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==y.date){const a=this._getOrReturnCtx(e);return p(a,{code:h.invalid_type,expected:y.date,received:a.parsedType}),A}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return p(a,{code:h.invalid_date}),A}const n=new se;let r;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(r=this._getOrReturnCtx(e,r),p(r,{code:h.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(r=this._getOrReturnCtx(e,r),p(r,{code:h.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):D.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new We({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:w.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:w.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}We.create=s=>new We({checks:[],coerce:(s==null?void 0:s.coerce)||!1,typeName:m.ZodDate,...E(s)});class vn extends j{_parse(e){if(this._getType(e)!==y.symbol){const n=this._getOrReturnCtx(e);return p(n,{code:h.invalid_type,expected:y.symbol,received:n.parsedType}),A}return re(e.data)}}vn.create=s=>new vn({typeName:m.ZodSymbol,...E(s)});class Mt extends j{_parse(e){if(this._getType(e)!==y.undefined){const n=this._getOrReturnCtx(e);return p(n,{code:h.invalid_type,expected:y.undefined,received:n.parsedType}),A}return re(e.data)}}Mt.create=s=>new Mt({typeName:m.ZodUndefined,...E(s)});class $t extends j{_parse(e){if(this._getType(e)!==y.null){const n=this._getOrReturnCtx(e);return p(n,{code:h.invalid_type,expected:y.null,received:n.parsedType}),A}return re(e.data)}}$t.create=s=>new $t({typeName:m.ZodNull,...E(s)});class ut extends j{constructor(){super(...arguments),this._any=!0}_parse(e){return re(e.data)}}ut.create=s=>new ut({typeName:m.ZodAny,...E(s)});class Ue extends j{constructor(){super(...arguments),this._unknown=!0}_parse(e){return re(e.data)}}Ue.create=s=>new Ue({typeName:m.ZodUnknown,...E(s)});class Ie extends j{_parse(e){const t=this._getOrReturnCtx(e);return p(t,{code:h.invalid_type,expected:y.never,received:t.parsedType}),A}}Ie.create=s=>new Ie({typeName:m.ZodNever,...E(s)});class wn extends j{_parse(e){if(this._getType(e)!==y.undefined){const n=this._getOrReturnCtx(e);return p(n,{code:h.invalid_type,expected:y.void,received:n.parsedType}),A}return re(e.data)}}wn.create=s=>new wn({typeName:m.ZodVoid,...E(s)});class _e extends j{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==y.array)return p(t,{code:h.invalid_type,expected:y.array,received:t.parsedType}),A;if(r.exactLength!==null){const i=t.data.length>r.exactLength.value,o=t.data.length<r.exactLength.value;(i||o)&&(p(t,{code:i?h.too_big:h.too_small,minimum:o?r.exactLength.value:void 0,maximum:i?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(r.minLength!==null&&t.data.length<r.minLength.value&&(p(t,{code:h.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),r.maxLength!==null&&t.data.length>r.maxLength.value&&(p(t,{code:h.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((i,o)=>r.type._parseAsync(new Pe(t,i,t.path,o)))).then(i=>se.mergeArray(n,i));const a=[...t.data].map((i,o)=>r.type._parseSync(new Pe(t,i,t.path,o)));return se.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new _e({...this._def,minLength:{value:e,message:w.toString(t)}})}max(e,t){return new _e({...this._def,maxLength:{value:e,message:w.toString(t)}})}length(e,t){return new _e({...this._def,exactLength:{value:e,message:w.toString(t)}})}nonempty(e){return this.min(1,e)}}_e.create=(s,e)=>new _e({type:s,minLength:null,maxLength:null,exactLength:null,typeName:m.ZodArray,...E(e)});function et(s){if(s instanceof G){const e={};for(const t in s.shape){const n=s.shape[t];e[t]=Ae.create(et(n))}return new G({...s._def,shape:()=>e})}else return s instanceof _e?new _e({...s._def,type:et(s.element)}):s instanceof Ae?Ae.create(et(s.unwrap())):s instanceof De?De.create(et(s.unwrap())):s instanceof Te?Te.create(s.items.map(e=>et(e))):s}class G extends j{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=D.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==y.object){const l=this._getOrReturnCtx(e);return p(l,{code:h.invalid_type,expected:y.object,received:l.parsedType}),A}const{status:n,ctx:r}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof Ie&&this._def.unknownKeys==="strip"))for(const l in r.data)i.includes(l)||o.push(l);const c=[];for(const l of i){const u=a[l],f=r.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Pe(r,f,r.path,l)),alwaysSet:l in r.data})}if(this._def.catchall instanceof Ie){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:r.data[u]}});else if(l==="strict")o.length>0&&(p(r,{code:h.unrecognized_keys,keys:o}),n.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of o){const f=r.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Pe(r,f,r.path,u)),alwaysSet:u in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const f=await u.key,g=await u.value;l.push({key:f,value:g,alwaysSet:u.alwaysSet})}return l}).then(l=>se.mergeObjectSync(n,l)):se.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return w.errToObj,new G({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var r,a,i,o;const c=(i=(a=(r=this._def).errorMap)===null||a===void 0?void 0:a.call(r,t,n).message)!==null&&i!==void 0?i:n.defaultError;return t.code==="unrecognized_keys"?{message:(o=w.errToObj(e).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new G({...this._def,unknownKeys:"strip"})}passthrough(){return new G({...this._def,unknownKeys:"passthrough"})}extend(e){return new G({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new G({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:m.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new G({...this._def,catchall:e})}pick(e){const t={};return D.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new G({...this._def,shape:()=>t})}omit(e){const t={};return D.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new G({...this._def,shape:()=>t})}deepPartial(){return et(this)}partial(e){const t={};return D.objectKeys(this.shape).forEach(n=>{const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()}),new G({...this._def,shape:()=>t})}required(e){const t={};return D.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof Ae;)a=a._def.innerType;t[n]=a}}),new G({...this._def,shape:()=>t})}keyof(){return Sa(D.objectKeys(this.shape))}}G.create=(s,e)=>new G({shape:()=>s,unknownKeys:"strip",catchall:Ie.create(),typeName:m.ZodObject,...E(e)});G.strictCreate=(s,e)=>new G({shape:()=>s,unknownKeys:"strict",catchall:Ie.create(),typeName:m.ZodObject,...E(e)});G.lazycreate=(s,e)=>new G({shape:s,unknownKeys:"strip",catchall:Ie.create(),typeName:m.ZodObject,...E(e)});class Zt extends j{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function r(a){for(const o of a)if(o.result.status==="valid")return o.result;for(const o of a)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const i=a.map(o=>new ue(o.ctx.common.issues));return p(t,{code:h.invalid_union,unionErrors:i}),A}if(t.common.async)return Promise.all(n.map(async a=>{const i={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(r);{let a;const i=[];for(const c of n){const l={...t,common:{...t.common,issues:[]},parent:null},u=c._parseSync({data:t.data,path:t.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!a&&(a={result:u,ctx:l}),l.common.issues.length&&i.push(l.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(c=>new ue(c));return p(t,{code:h.invalid_union,unionErrors:o}),A}}get options(){return this._def.options}}Zt.create=(s,e)=>new Zt({options:s,typeName:m.ZodUnion,...E(e)});const Re=s=>s instanceof Ft?Re(s.schema):s instanceof be?Re(s.innerType()):s instanceof Bt?[s.value]:s instanceof Ze?s.options:s instanceof Ut?D.objectValues(s.enum):s instanceof Vt?Re(s._def.innerType):s instanceof Mt?[void 0]:s instanceof $t?[null]:s instanceof Ae?[void 0,...Re(s.unwrap())]:s instanceof De?[null,...Re(s.unwrap())]:s instanceof js||s instanceof zt?Re(s.unwrap()):s instanceof Wt?Re(s._def.innerType):[];class Nn extends j{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==y.object)return p(t,{code:h.invalid_type,expected:y.object,received:t.parsedType}),A;const n=this.discriminator,r=t.data[n],a=this.optionsMap.get(r);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(p(t,{code:h.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),A)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const a of t){const i=Re(a.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of i){if(r.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);r.set(o,a)}}return new Nn({typeName:m.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...E(n)})}}function cs(s,e){const t=je(s),n=je(e);if(s===e)return{valid:!0,data:s};if(t===y.object&&n===y.object){const r=D.objectKeys(e),a=D.objectKeys(s).filter(o=>r.indexOf(o)!==-1),i={...s,...e};for(const o of a){const c=cs(s[o],e[o]);if(!c.valid)return{valid:!1};i[o]=c.data}return{valid:!0,data:i}}else if(t===y.array&&n===y.array){if(s.length!==e.length)return{valid:!1};const r=[];for(let a=0;a<s.length;a++){const i=s[a],o=e[a],c=cs(i,o);if(!c.valid)return{valid:!1};r.push(c.data)}return{valid:!0,data:r}}else return t===y.date&&n===y.date&&+s==+e?{valid:!0,data:s}:{valid:!1}}class Dt extends j{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(a,i)=>{if(os(a)||os(i))return A;const o=cs(a.value,i.value);return o.valid?((ls(a)||ls(i))&&t.dirty(),{status:t.value,value:o.data}):(p(n,{code:h.invalid_intersection_types}),A)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,i])=>r(a,i)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Dt.create=(s,e,t)=>new Dt({left:s,right:e,typeName:m.ZodIntersection,...E(t)});class Te extends j{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==y.array)return p(n,{code:h.invalid_type,expected:y.array,received:n.parsedType}),A;if(n.data.length<this._def.items.length)return p(n,{code:h.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),A;!this._def.rest&&n.data.length>this._def.items.length&&(p(n,{code:h.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...n.data].map((i,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new Pe(n,i,n.path,o)):null}).filter(i=>!!i);return n.common.async?Promise.all(a).then(i=>se.mergeArray(t,i)):se.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new Te({...this._def,rest:e})}}Te.create=(s,e)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Te({items:s,typeName:m.ZodTuple,rest:null,...E(e)})};class Lt extends j{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==y.object)return p(n,{code:h.invalid_type,expected:y.object,received:n.parsedType}),A;const r=[],a=this._def.keyType,i=this._def.valueType;for(const o in n.data)r.push({key:a._parse(new Pe(n,o,n.path,o)),value:i._parse(new Pe(n,n.data[o],n.path,o)),alwaysSet:o in n.data});return n.common.async?se.mergeObjectAsync(t,r):se.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof j?new Lt({keyType:e,valueType:t,typeName:m.ZodRecord,...E(n)}):new Lt({keyType:ye.create(),valueType:e,typeName:m.ZodRecord,...E(t)})}}class kn extends j{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==y.map)return p(n,{code:h.invalid_type,expected:y.map,received:n.parsedType}),A;const r=this._def.keyType,a=this._def.valueType,i=[...n.data.entries()].map(([o,c],l)=>({key:r._parse(new Pe(n,o,n.path,[l,"key"])),value:a._parse(new Pe(n,c,n.path,[l,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of i){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return A;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(l.value,u.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const c of i){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return A;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(l.value,u.value)}return{status:t.value,value:o}}}}kn.create=(s,e,t)=>new kn({valueType:e,keyType:s,typeName:m.ZodMap,...E(t)});class ze extends j{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==y.set)return p(n,{code:h.invalid_type,expected:y.set,received:n.parsedType}),A;const r=this._def;r.minSize!==null&&n.data.size<r.minSize.value&&(p(n,{code:h.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),r.maxSize!==null&&n.data.size>r.maxSize.value&&(p(n,{code:h.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const a=this._def.valueType;function i(c){const l=new Set;for(const u of c){if(u.status==="aborted")return A;u.status==="dirty"&&t.dirty(),l.add(u.value)}return{status:t.value,value:l}}const o=[...n.data.values()].map((c,l)=>a._parse(new Pe(n,c,n.path,l)));return n.common.async?Promise.all(o).then(c=>i(c)):i(o)}min(e,t){return new ze({...this._def,minSize:{value:e,message:w.toString(t)}})}max(e,t){return new ze({...this._def,maxSize:{value:e,message:w.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ze.create=(s,e)=>new ze({valueType:s,minSize:null,maxSize:null,typeName:m.ZodSet,...E(e)});class ot extends j{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==y.function)return p(t,{code:h.invalid_type,expected:y.function,received:t.parsedType}),A;function n(o,c){return bn({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,_n(),ct].filter(l=>!!l),issueData:{code:h.invalid_arguments,argumentsError:c}})}function r(o,c){return bn({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,_n(),ct].filter(l=>!!l),issueData:{code:h.invalid_return_type,returnTypeError:c}})}const a={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof dt){const o=this;return re(async function(...c){const l=new ue([]),u=await o._def.args.parseAsync(c,a).catch(_=>{throw l.addIssue(n(c,_)),l}),f=await Reflect.apply(i,this,u);return await o._def.returns._def.type.parseAsync(f,a).catch(_=>{throw l.addIssue(r(f,_)),l})})}else{const o=this;return re(function(...c){const l=o._def.args.safeParse(c,a);if(!l.success)throw new ue([n(c,l.error)]);const u=Reflect.apply(i,this,l.data),f=o._def.returns.safeParse(u,a);if(!f.success)throw new ue([r(u,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ot({...this._def,args:Te.create(e).rest(Ue.create())})}returns(e){return new ot({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new ot({args:e||Te.create([]).rest(Ue.create()),returns:t||Ue.create(),typeName:m.ZodFunction,...E(n)})}}class Ft extends j{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Ft.create=(s,e)=>new Ft({getter:s,typeName:m.ZodLazy,...E(e)});class Bt extends j{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return p(t,{received:t.data,code:h.invalid_literal,expected:this._def.value}),A}return{status:"valid",value:e.data}}get value(){return this._def.value}}Bt.create=(s,e)=>new Bt({value:s,typeName:m.ZodLiteral,...E(e)});function Sa(s,e){return new Ze({values:s,typeName:m.ZodEnum,...E(e)})}class Ze extends j{constructor(){super(...arguments),Ct.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return p(t,{expected:D.joinValues(n),received:t.parsedType,code:h.invalid_type}),A}if(xn(this,Ct)||xa(this,Ct,new Set(this._def.values)),!xn(this,Ct).has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return p(t,{received:t.data,code:h.invalid_enum_value,options:n}),A}return re(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ze.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ze.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}Ct=new WeakMap;Ze.create=Sa;class Ut extends j{constructor(){super(...arguments),At.set(this,void 0)}_parse(e){const t=D.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==y.string&&n.parsedType!==y.number){const r=D.objectValues(t);return p(n,{expected:D.joinValues(r),received:n.parsedType,code:h.invalid_type}),A}if(xn(this,At)||xa(this,At,new Set(D.getValidEnumValues(this._def.values))),!xn(this,At).has(e.data)){const r=D.objectValues(t);return p(n,{received:n.data,code:h.invalid_enum_value,options:r}),A}return re(e.data)}get enum(){return this._def.values}}At=new WeakMap;Ut.create=(s,e)=>new Ut({values:s,typeName:m.ZodNativeEnum,...E(e)});class dt extends j{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==y.promise&&t.common.async===!1)return p(t,{code:h.invalid_type,expected:y.promise,received:t.parsedType}),A;const n=t.parsedType===y.promise?t.data:Promise.resolve(t.data);return re(n.then(r=>this._def.type.parseAsync(r,{path:t.path,errorMap:t.common.contextualErrorMap})))}}dt.create=(s,e)=>new dt({type:s,typeName:m.ZodPromise,...E(e)});class be extends j{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===m.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:i=>{p(n,i),i.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),r.type==="preprocess"){const i=r.transform(n.data,a);if(n.common.async)return Promise.resolve(i).then(async o=>{if(t.value==="aborted")return A;const c=await this._def.schema._parseAsync({data:o,path:n.path,parent:n});return c.status==="aborted"?A:c.status==="dirty"||t.value==="dirty"?nt(c.value):c});{if(t.value==="aborted")return A;const o=this._def.schema._parseSync({data:i,path:n.path,parent:n});return o.status==="aborted"?A:o.status==="dirty"||t.value==="dirty"?nt(o.value):o}}if(r.type==="refinement"){const i=o=>{const c=r.refinement(o,a);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?A:(o.status==="dirty"&&t.dirty(),i(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?A:(o.status==="dirty"&&t.dirty(),i(o.value).then(()=>({status:t.value,value:o.value}))))}if(r.type==="transform")if(n.common.async===!1){const i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!It(i))return i;const o=r.transform(i.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(i=>It(i)?Promise.resolve(r.transform(i.value,a)).then(o=>({status:t.value,value:o})):i);D.assertNever(r)}}be.create=(s,e,t)=>new be({schema:s,typeName:m.ZodEffects,effect:e,...E(t)});be.createWithPreprocess=(s,e,t)=>new be({schema:e,effect:{type:"preprocess",transform:s},typeName:m.ZodEffects,...E(t)});class Ae extends j{_parse(e){return this._getType(e)===y.undefined?re(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ae.create=(s,e)=>new Ae({innerType:s,typeName:m.ZodOptional,...E(e)});class De extends j{_parse(e){return this._getType(e)===y.null?re(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}De.create=(s,e)=>new De({innerType:s,typeName:m.ZodNullable,...E(e)});class Vt extends j{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===y.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Vt.create=(s,e)=>new Vt({innerType:s,typeName:m.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...E(e)});class Wt extends j{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ot(r)?r.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ue(n.common.issues)},input:n.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new ue(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Wt.create=(s,e)=>new Wt({innerType:s,typeName:m.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...E(e)});class Sn extends j{_parse(e){if(this._getType(e)!==y.nan){const n=this._getOrReturnCtx(e);return p(n,{code:h.invalid_type,expected:y.nan,received:n.parsedType}),A}return{status:"valid",value:e.data}}}Sn.create=s=>new Sn({typeName:m.ZodNaN,...E(s)});const uo=Symbol("zod_brand");class js extends j{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Kt extends j{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?A:a.status==="dirty"?(t.dirty(),nt(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const r=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return r.status==="aborted"?A:r.status==="dirty"?(t.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:n.path,parent:n})}}static create(e,t){return new Kt({in:e,out:t,typeName:m.ZodPipeline})}}class zt extends j{_parse(e){const t=this._def.innerType._parse(e),n=r=>(It(r)&&(r.value=Object.freeze(r.value)),r);return Ot(t)?t.then(r=>n(r)):n(t)}unwrap(){return this._def.innerType}}zt.create=(s,e)=>new zt({innerType:s,typeName:m.ZodReadonly,...E(e)});function Ca(s,e={},t){return s?ut.create().superRefine((n,r)=>{var a,i;if(!s(n)){const o=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,c=(i=(a=o.fatal)!==null&&a!==void 0?a:t)!==null&&i!==void 0?i:!0,l=typeof o=="string"?{message:o}:o;r.addIssue({code:"custom",...l,fatal:c})}}):ut.create()}const fo={object:G.lazycreate};var m;(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(m||(m={}));const ho=(s,e={message:`Input not instance of ${s.name}`})=>Ca(t=>t instanceof s,e),Aa=ye.create,Pa=Me.create,mo=Sn.create,po=$e.create,Ta=jt.create,go=We.create,yo=vn.create,_o=Mt.create,bo=$t.create,xo=ut.create,vo=Ue.create,wo=Ie.create,ko=wn.create,So=_e.create,Co=G.create,Ao=G.strictCreate,Po=Zt.create,To=Nn.create,Eo=Dt.create,No=Te.create,Ro=Lt.create,Io=kn.create,Oo=ze.create,jo=ot.create,Mo=Ft.create,$o=Bt.create,Zo=Ze.create,Do=Ut.create,Lo=dt.create,ar=be.create,Fo=Ae.create,Bo=De.create,Uo=be.createWithPreprocess,Vo=Kt.create,Wo=()=>Aa().optional(),zo=()=>Pa().optional(),Go=()=>Ta().optional(),qo={string:s=>ye.create({...s,coerce:!0}),number:s=>Me.create({...s,coerce:!0}),boolean:s=>jt.create({...s,coerce:!0}),bigint:s=>$e.create({...s,coerce:!0}),date:s=>We.create({...s,coerce:!0})},Jo=A;var O=Object.freeze({__proto__:null,defaultErrorMap:ct,setErrorMap:qi,getErrorMap:_n,makeIssue:bn,EMPTY_PATH:Ji,addIssueToContext:p,ParseStatus:se,INVALID:A,DIRTY:nt,OK:re,isAborted:os,isDirty:ls,isValid:It,isAsync:Ot,get util(){return D},get objectUtil(){return is},ZodParsedType:y,getParsedType:je,ZodType:j,datetimeRegex:ka,ZodString:ye,ZodNumber:Me,ZodBigInt:$e,ZodBoolean:jt,ZodDate:We,ZodSymbol:vn,ZodUndefined:Mt,ZodNull:$t,ZodAny:ut,ZodUnknown:Ue,ZodNever:Ie,ZodVoid:wn,ZodArray:_e,ZodObject:G,ZodUnion:Zt,ZodDiscriminatedUnion:Nn,ZodIntersection:Dt,ZodTuple:Te,ZodRecord:Lt,ZodMap:kn,ZodSet:ze,ZodFunction:ot,ZodLazy:Ft,ZodLiteral:Bt,ZodEnum:Ze,ZodNativeEnum:Ut,ZodPromise:dt,ZodEffects:be,ZodTransformer:be,ZodOptional:Ae,ZodNullable:De,ZodDefault:Vt,ZodCatch:Wt,ZodNaN:Sn,BRAND:uo,ZodBranded:js,ZodPipeline:Kt,ZodReadonly:zt,custom:Ca,Schema:j,ZodSchema:j,late:fo,get ZodFirstPartyTypeKind(){return m},coerce:qo,any:xo,array:So,bigint:po,boolean:Ta,date:go,discriminatedUnion:To,effect:ar,enum:Zo,function:jo,instanceof:ho,intersection:Eo,lazy:Mo,literal:$o,map:Io,nan:mo,nativeEnum:Do,never:wo,null:bo,nullable:Bo,number:Pa,object:Co,oboolean:Go,onumber:zo,optional:Fo,ostring:Wo,pipeline:Vo,preprocess:Uo,promise:Lo,record:Ro,set:Oo,strictObject:Ao,string:Aa,symbol:yo,transformer:ar,tuple:No,undefined:_o,union:Po,unknown:vo,void:ko,NEVER:Jo,ZodIssueCode:h,quotelessJson:Gi,ZodError:ue});function Ho(){return{}}function Xo(s,e){var n,r;const t={type:"array"};return((r=(n=s.type)==null?void 0:n._def)==null?void 0:r.typeName)!==m.ZodAny&&(t.items=F(s.type._def,{...e,currentPath:[...e.currentPath,"items"]})),s.minLength&&U(t,"minItems",s.minLength.value,s.minLength.message,e),s.maxLength&&U(t,"maxItems",s.maxLength.value,s.maxLength.message,e),s.exactLength&&(U(t,"minItems",s.exactLength.value,s.exactLength.message,e),U(t,"maxItems",s.exactLength.value,s.exactLength.message,e)),t}function Ko(s,e){const t={type:"integer",format:"int64"};if(!s.checks)return t;for(const n of s.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?U(t,"minimum",n.value,n.message,e):U(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),U(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?U(t,"maximum",n.value,n.message,e):U(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),U(t,"maximum",n.value,n.message,e));break;case"multipleOf":U(t,"multipleOf",n.value,n.message,e);break}return t}function Qo(){return{type:"boolean"}}function Yo(s,e){return F(s.type._def,e)}const el=(s,e)=>F(s.innerType._def,e);function Ea(s,e,t){const n=t??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((r,a)=>Ea(s,e,r))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return tl(s,e)}}const tl=(s,e)=>{const t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(const n of s.checks)switch(n.kind){case"min":U(t,"minimum",n.value,n.message,e);break;case"max":U(t,"maximum",n.value,n.message,e);break}return t};function nl(s,e){return{...F(s.innerType._def,e),default:s.defaultValue()}}function sl(s,e,t){return e.effectStrategy==="input"?F(s.schema._def,e,t):{}}function rl(s){return{type:"string",enum:[...s.values]}}const al=s=>"type"in s&&s.type==="string"?!1:"allOf"in s;function il(s,e){const t=[F(s.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),F(s.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const r=[];return t.forEach(a=>{if(al(a))r.push(...a.allOf),a.unevaluatedProperties===void 0&&(n=void 0);else{let i=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:o,...c}=a;i=c}else n=void 0;r.push(i)}}),r.length?{allOf:r,...n}:void 0}function ol(s,e){const t=typeof s.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(s.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[s.value]}:{type:t==="bigint"?"integer":t,const:s.value}}let zn;const Le={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(zn===void 0&&(zn=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),zn),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function Na(s,e){const t={type:"string"};function n(r){return e.patternStrategy==="escape"?ll(r):r}if(s.checks)for(const r of s.checks)switch(r.kind){case"min":U(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,r.value):r.value,r.message,e);break;case"max":U(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":de(t,"email",r.message,e);break;case"format:idn-email":de(t,"idn-email",r.message,e);break;case"pattern:zod":fe(t,Le.email,r.message,e);break}break;case"url":de(t,"uri",r.message,e);break;case"uuid":de(t,"uuid",r.message,e);break;case"regex":fe(t,r.regex,r.message,e);break;case"cuid":fe(t,Le.cuid,r.message,e);break;case"cuid2":fe(t,Le.cuid2,r.message,e);break;case"startsWith":fe(t,RegExp(`^${n(r.value)}`),r.message,e);break;case"endsWith":fe(t,RegExp(`${n(r.value)}$`),r.message,e);break;case"datetime":de(t,"date-time",r.message,e);break;case"date":de(t,"date",r.message,e);break;case"time":de(t,"time",r.message,e);break;case"duration":de(t,"duration",r.message,e);break;case"length":U(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,r.value):r.value,r.message,e),U(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,r.value):r.value,r.message,e);break;case"includes":{fe(t,RegExp(n(r.value)),r.message,e);break}case"ip":{r.version!=="v6"&&de(t,"ipv4",r.message,e),r.version!=="v4"&&de(t,"ipv6",r.message,e);break}case"emoji":fe(t,Le.emoji,r.message,e);break;case"ulid":{fe(t,Le.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{de(t,"binary",r.message,e);break}case"contentEncoding:base64":{U(t,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{fe(t,Le.base64,r.message,e);break}}break}case"nanoid":fe(t,Le.nanoid,r.message,e)}return t}const ll=s=>Array.from(s).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),de=(s,e,t,n)=>{var r;s.format||(r=s.anyOf)!=null&&r.some(a=>a.format)?(s.anyOf||(s.anyOf=[]),s.format&&(s.anyOf.push({format:s.format,...s.errorMessage&&n.errorMessages&&{errorMessage:{format:s.errorMessage.format}}}),delete s.format,s.errorMessage&&(delete s.errorMessage.format,Object.keys(s.errorMessage).length===0&&delete s.errorMessage)),s.anyOf.push({format:e,...t&&n.errorMessages&&{errorMessage:{format:t}}})):U(s,"format",e,t,n)},fe=(s,e,t,n)=>{var r;s.pattern||(r=s.allOf)!=null&&r.some(a=>a.pattern)?(s.allOf||(s.allOf=[]),s.pattern&&(s.allOf.push({pattern:s.pattern,...s.errorMessage&&n.errorMessages&&{errorMessage:{pattern:s.errorMessage.pattern}}}),delete s.pattern,s.errorMessage&&(delete s.errorMessage.pattern,Object.keys(s.errorMessage).length===0&&delete s.errorMessage)),s.allOf.push({pattern:ir(e,n),...t&&n.errorMessages&&{errorMessage:{pattern:t}}})):U(s,"pattern",ir(e,n),t,n)},ir=(s,e)=>{var l;const t=typeof s=="function"?s():s;if(!e.applyRegexFlags||!t.flags)return t.source;const n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},r=n.i?t.source.toLowerCase():t.source;let a="",i=!1,o=!1,c=!1;for(let u=0;u<r.length;u++){if(i){a+=r[u],i=!1;continue}if(n.i){if(o){if(r[u].match(/[a-z]/)){c?(a+=r[u],a+=`${r[u-2]}-${r[u]}`.toUpperCase(),c=!1):r[u+1]==="-"&&((l=r[u+2])!=null&&l.match(/[a-z]/))?(a+=r[u],c=!0):a+=`${r[u]}${r[u].toUpperCase()}`;continue}}else if(r[u].match(/[a-z]/)){a+=`[${r[u]}${r[u].toUpperCase()}]`;continue}}if(n.m){if(r[u]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[u]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[u]==="."){a+=o?`${r[u]}\r
`:`[${r[u]}\r
]`;continue}a+=r[u],r[u]==="\\"?i=!0:o&&r[u]==="]"?o=!1:!o&&r[u]==="["&&(o=!0)}try{const u=new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return a};function Ra(s,e){var n,r,a,i;if(e.target==="openApi3"&&((n=s.keyType)==null?void 0:n._def.typeName)===m.ZodEnum)return{type:"object",required:s.keyType._def.values,properties:s.keyType._def.values.reduce((o,c)=>({...o,[c]:F(s.valueType._def,{...e,currentPath:[...e.currentPath,"properties",c]})??{}}),{}),additionalProperties:!1};const t={type:"object",additionalProperties:F(s.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return t;if(((r=s.keyType)==null?void 0:r._def.typeName)===m.ZodString&&((a=s.keyType._def.checks)!=null&&a.length)){const o=Object.entries(Na(s.keyType._def,e)).reduce((c,[l,u])=>l==="type"?c:{...c,[l]:u},{});return{...t,propertyNames:o}}else if(((i=s.keyType)==null?void 0:i._def.typeName)===m.ZodEnum)return{...t,propertyNames:{enum:s.keyType._def.values}};return t}function cl(s,e){if(e.mapStrategy==="record")return Ra(s,e);const t=F(s.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=F(s.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,n],minItems:2,maxItems:2}}}function ul(s){const e=s.values,n=Object.keys(s.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),r=Array.from(new Set(n.map(a=>typeof a)));return{type:r.length===1?r[0]==="string"?"string":"number":["string","number"],enum:n}}function dl(){return{not:{}}}function fl(s){return s.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Cn={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function hl(s,e){if(e.target==="openApi3")return or(s,e);const t=s.options instanceof Map?Array.from(s.options.values()):s.options;if(t.every(n=>n._def.typeName in Cn&&(!n._def.checks||!n._def.checks.length))){const n=t.reduce((r,a)=>{const i=Cn[a._def.typeName];return i&&!r.includes(i)?[...r,i]:r},[]);return{type:n.length>1?n:n[0]}}else if(t.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){const n=t.reduce((r,a)=>{const i=typeof a._def.value;switch(i){case"string":case"number":case"boolean":return[...r,i];case"bigint":return[...r,"integer"];case"object":if(a._def.value===null)return[...r,"null"];case"symbol":case"undefined":case"function":default:return r}},[]);if(n.length===t.length){const r=n.filter((a,i,o)=>o.indexOf(a)===i);return{type:r.length>1?r:r[0],enum:t.reduce((a,i)=>a.includes(i._def.value)?a:[...a,i._def.value],[])}}}else if(t.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((n,r)=>[...n,...r._def.values.filter(a=>!n.includes(a))],[])};return or(s,e)}const or=(s,e)=>{const t=(s.options instanceof Map?Array.from(s.options.values()):s.options).map((n,r)=>F(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${r}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return t.length?{anyOf:t}:void 0};function ml(s,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(s.innerType._def.typeName)&&(!s.innerType._def.checks||!s.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:Cn[s.innerType._def.typeName],nullable:!0}:{type:[Cn[s.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const n=F(s.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}const t=F(s.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function pl(s,e){const t={type:"number"};if(!s.checks)return t;for(const n of s.checks)switch(n.kind){case"int":t.type="integer",_a(t,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?U(t,"minimum",n.value,n.message,e):U(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),U(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?U(t,"maximum",n.value,n.message,e):U(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),U(t,"maximum",n.value,n.message,e));break;case"multipleOf":U(t,"multipleOf",n.value,n.message,e);break}return t}function gl(s,e){return e.removeAdditionalStrategy==="strict"?s.catchall._def.typeName==="ZodNever"?s.unknownKeys!=="strict":F(s.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:s.catchall._def.typeName==="ZodNever"?s.unknownKeys==="passthrough":F(s.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function yl(s,e){const t={type:"object",...Object.entries(s.shape()).reduce((n,[r,a])=>{if(a===void 0||a._def===void 0)return n;const i=F(a._def,{...e,currentPath:[...e.currentPath,"properties",r],propertyPath:[...e.currentPath,"properties",r]});return i===void 0?n:{properties:{...n.properties,[r]:i},required:a.isOptional()&&!e.openaiStrictMode?n.required:[...n.required,r]}},{properties:{},required:[]}),additionalProperties:gl(s,e)};return t.required.length||delete t.required,t}const _l=(s,e)=>{var n;if(e.currentPath.toString()===((n=e.propertyPath)==null?void 0:n.toString()))return F(s.innerType._def,e);const t=F(s.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:{}},t]}:{}},bl=(s,e)=>{if(e.pipeStrategy==="input")return F(s.in._def,e);if(e.pipeStrategy==="output")return F(s.out._def,e);const t=F(s.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=F(s.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,n].filter(r=>r!==void 0)}};function xl(s,e){return F(s.type._def,e)}function vl(s,e){const n={type:"array",uniqueItems:!0,items:F(s.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return s.minSize&&U(n,"minItems",s.minSize.value,s.minSize.message,e),s.maxSize&&U(n,"maxItems",s.maxSize.value,s.maxSize.message,e),n}function wl(s,e){return s.rest?{type:"array",minItems:s.items.length,items:s.items.map((t,n)=>F(t._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((t,n)=>n===void 0?t:[...t,n],[]),additionalItems:F(s.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:s.items.length,maxItems:s.items.length,items:s.items.map((t,n)=>F(t._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((t,n)=>n===void 0?t:[...t,n],[])}}function kl(){return{not:{}}}function Sl(){return{}}const Cl=(s,e)=>F(s.innerType._def,e);function F(s,e,t=!1){var i;const n=e.seen.get(s);if(e.override){const o=(i=e.override)==null?void 0:i.call(e,s,e,n,t);if(o!==Ui)return o}if(n&&!t){const o=Al(n,e);if(o!==void 0)return"$ref"in o&&e.seenRefs.add(o.$ref),o}const r={def:s,path:e.currentPath,jsonSchema:void 0};e.seen.set(s,r);const a=Tl(s,s.typeName,e,t);return a&&El(s,e,a),r.jsonSchema=a,a}const Al=(s,e)=>{switch(e.$refStrategy){case"root":return{$ref:s.path.join("/")};case"extract-to-root":const t=s.path.slice(e.basePath.length+1).join("_");return t!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[t]=s.def),{$ref:[...e.basePath,e.definitionPath,t].join("/")};case"relative":return{$ref:Pl(e.currentPath,s.path)};case"none":case"seen":return s.path.length<e.currentPath.length&&s.path.every((n,r)=>e.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},Pl=(s,e)=>{let t=0;for(;t<s.length&&t<e.length&&s[t]===e[t];t++);return[(s.length-t).toString(),...e.slice(t)].join("/")},Tl=(s,e,t,n)=>{switch(e){case m.ZodString:return Na(s,t);case m.ZodNumber:return pl(s,t);case m.ZodObject:return yl(s,t);case m.ZodBigInt:return Ko(s,t);case m.ZodBoolean:return Qo();case m.ZodDate:return Ea(s,t);case m.ZodUndefined:return kl();case m.ZodNull:return fl(t);case m.ZodArray:return Xo(s,t);case m.ZodUnion:case m.ZodDiscriminatedUnion:return hl(s,t);case m.ZodIntersection:return il(s,t);case m.ZodTuple:return wl(s,t);case m.ZodRecord:return Ra(s,t);case m.ZodLiteral:return ol(s,t);case m.ZodEnum:return rl(s);case m.ZodNativeEnum:return ul(s);case m.ZodNullable:return ml(s,t);case m.ZodOptional:return _l(s,t);case m.ZodMap:return cl(s,t);case m.ZodSet:return vl(s,t);case m.ZodLazy:return F(s.getter()._def,t);case m.ZodPromise:return xl(s,t);case m.ZodNaN:case m.ZodNever:return dl();case m.ZodEffects:return sl(s,t,n);case m.ZodAny:return Ho();case m.ZodUnknown:return Sl();case m.ZodDefault:return nl(s,t);case m.ZodBranded:return Yo(s,t);case m.ZodReadonly:return Cl(s,t);case m.ZodCatch:return el(s,t);case m.ZodPipeline:return bl(s,t);case m.ZodFunction:case m.ZodVoid:case m.ZodSymbol:return;default:return(r=>{})()}},El=(s,e,t)=>(s.description&&(t.description=s.description,e.markdownDescription&&(t.markdownDescription=s.description)),t),Nl=(s,e)=>{const t=zi(e),n=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,r=F(s._def,n===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,n]},!1)??{},a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(r.title=a);const i=(()=>{if(Wi(t.definitions))return;const c={},l=new Set;for(let u=0;u<500;u++){const f=Object.entries(t.definitions).filter(([g])=>!l.has(g));if(f.length===0)break;for(const[g,_]of f)c[g]=F(as(_),{...t,currentPath:[...t.basePath,t.definitionPath,g]},!0)??{},l.add(g)}return c})(),o=n===void 0?i?{...r,[t.definitionPath]:i}:r:t.nameStrategy==="duplicate-ref"?{...r,...i||t.seenRefs.size?{[t.definitionPath]:{...i,...t.seenRefs.size?{[n]:r}:void 0}}:void 0}:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,n].join("/"),[t.definitionPath]:{...i,[n]:r}};return t.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":t.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};function Rl(s,e){return Nl(s,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function Il(s,e,t){return Ei({type:"json_schema",json_schema:{...t,name:e,strict:!0,schema:Rl(s,{name:e})}},n=>s.parse(JSON.parse(n)))}const Ol=O.enum(["English","Hindi","Malayalam","Tamil","Telugu","Kannada","Arabic","Urdu","Samskritham","Polish","German","Gujarati","Chinese","Any/NA"]),jl=O.enum(["Male","Female","Both"]),Ml=O.enum(["Offline","Online","Action","Art","Dance","Literacy","Music","Off Stage","On Stage","Oral","Others","Special","Written"]),$l=O.enum(["Marks","Count","Rating out of 10","Range out of 10"]),Zl=O.enum(["Individual","Team"]),Ia=O.enum(["Individual","Team","Any"]),Dl=O.enum(["First","Second","Third"]),Ll=O.object({RankTitle:Dl,ParticipantTypeTitle:Ia,GroupGroupName:O.string().describe("Must be a valid group name as same as in the AgeBasedGroup, its only need if need some custom grade points for a group").optional(),CompetitionItemTitle:O.string().describe("Must be a valid competition name as same as in the CompetitionItems, its only need if need some custom grade points for a competition").optional(),Points:O.number().describe("Must be a valid number, if no points then keep 5 points for first, 3 points for second and 1 point for third")}),Fl=O.object({ParticipantTypeTitle:Ia,GroupGroupName:O.string().describe("Must be a valid group name as same as in the AgeBasedGroup, its only need if need some custom grade points for a group").optional(),CompetitionItemTitle:O.string().describe("Must be a valid competition name as same as in the CompetitionItems, its only need if need some custom grade points for a competition").optional(),GradeName:O.string().describe("Must be a valid grade name like A, B, C, etc"),Points:O.number().describe("Must be a valid number, if no points then keep 5 points for A, 3 points for B and 1 point for C"),Value:O.number().describe("Must be a valid number, it represents how much score is need out of 10 to get this grade, if no grade then keep 6 for A, 5 for B and 4 for C")}),Bl=O.object({GroupName:O.string().describe("Must be the name of a age group or keep it as All Groups"),AgeFrom:O.number().describe("Must be a valid age or if no age group then keep it as 0").optional(),AgeTo:O.number().describe("Must be a valid age or if no age group then keep it as 100").optional()}),Ul=O.object({Title:O.string().describe("Must be a valid competition name like Dance, Singing, etc"),CategoryCategoryName:Ml,ScoreLabelLabel:$l}),Vl=O.object({ParticipantTypeTitle:Zl,GroupGroupName:O.string().describe("Must be a valid group name as same as in the AgeBasedGroup"),CompetitionItemTitle:O.string().describe("Must be a valid competition name as same as in the CompetitionItems"),LanguageLanguageName:Ol,GenderGenderTitle:jl,Remarks:O.string().nullable().optional().describe("Any remarks,rules or description, prize informations about the competition, and all other informations mentioned in the document should be added here related to this competition"),MaximumScore:O.number().optional(),MaximumCandidates:O.number().optional(),Fees:O.number().optional(),MaximumMinutes:O.number().optional(),MaximumSeconds:O.number().optional(),MinimumMinutes:O.number().optional(),MinimumSeconds:O.number().optional()}),Wl=O.object({competitionsAssignedToGroup:O.array(Vl),competitionItems:O.array(Ul),ageWiseGroups:O.array(Bl),ranks:O.array(Ll),grades:O.array(Fl)});let zl="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";const Gl=new L({apiKey:zl,dangerouslyAllowBrowser:!0});let ql=`Generate competitions from the image.
Always try to translate the image text to English and generate the values.
Always try to keep generated values are exact as in the images.
Always try to find all competitions matching for all groups from the image.
Rules:
1. If there is seperate competitions based on gender, then create seperate rows in competitionStructureModel and add specific GenderName.
2. If there is seperate competitions based on language, then create seperate competitions and add LanguageName instead of using Any/NA.
3. On generate ranks and grades, if there a rank or grade not specifically mentioned for a particular group or competition, then keep value empty.
4. If there is no specific grades or ranks, mentioned then the arrays can be empty.
5 Dont assign any competitions or groups to ranks if there is no specific ranks for a group or competition. keep it as Any/NA.
`;const Jl=async(s,e,t)=>{if(!(s!=null&&s.length)){alert("Please upload an image");return}try{let n=s.map(i=>({type:"image_url",image_url:{url:i.webUrl}}));const r=await Gl.beta.chat.completions.parse({model:"gpt-4o-2024-08-06",messages:[{role:"system",content:[{type:"text",text:ql}]},{role:"user",content:[{type:"text",text:t},...n]}],response_format:Il(Wl,"allCompetitionsModel")});try{const i=r.choices[0].message.parsed;e(i)}catch(i){console.error("Error:",i);const o=r.choices[0].message.content;(o==null?void 0:o.length)>1&&o.indexOf("{")>=0&&e(JSON.parse(o))}const a=r.choices[0].message.parsed;e(a)}catch(n){console.error("Error:",n)}},on=({heading:s,items:e,isLoading:t,columns:n})=>d.jsx(d.Fragment,{children:(e==null?void 0:e.length)>0&&d.jsxs("div",{className:"px-2 sm:px-4 lg:px-6 relative",children:[t&&d.jsx(us,{}),d.jsx("div",{className:"sm:flex sm:items-center",children:d.jsx("h1",{className:"text-sm font-semibold leading-6 text-gray-900",children:s})}),d.jsx("div",{className:"mt-4 flow-root",children:d.jsx("div",{className:"-mx-2 -my-1 overflow-x-auto sm:-mx-4 lg:-mx-6",children:d.jsx("div",{className:"inline-block min-w-full py-1 align-middle sm:px-4 lg:px-6",children:d.jsx("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsx("tr",{children:n.map(r=>d.jsx("th",{scope:"col",className:"py-2 pl-2 pr-1 text-left text-xs font-semibold text-gray-900 sm:pl-4",children:r.label},r.field))})}),d.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:e==null?void 0:e.map(r=>d.jsx("tr",{className:"divide-x divide-gray-200",children:n.map(a=>d.jsx("td",{className:"whitespace-nowrap px-1 py-2 text-xs text-gray-500",children:r[a.field]},a.field))},r.GroupName))})]})})})})})]})});function uc(){var B,N,R;const[s,e]=ie.useState(localStorage.getItem("aiPrompt")||""),[t,n]=ie.useState([]),[r,a]=ie.useState(!1),[i,o]=ie.useState(!1),[c,l]=ie.useState([]),{control:u,getValues:f,setValue:g,formState:{errors:_}}=Da();let C=f();ie.useEffect(()=>{let x=sessionStorage.getItem("competitionsGroups");x&&n(JSON.parse(x));let I=sessionStorage.getItem("images");I&&g("fileUploads",JSON.parse(I));let T=sessionStorage.getItem("selectedCheckboxes");T&&l(JSON.parse(T))},[]);const v=async x=>{var I;(I=x.competitionsAssignedToGroup)==null||I.forEach(T=>{T.Id||(T.Id=On())}),n(x),sessionStorage.setItem("competitionsGroups",JSON.stringify(x)),o(!1)},S=()=>{o(!0);const x=f("fileUploads");Jl(x,v,s)},q=async()=>{if(o(!0),c.length>0){let x=t.competitionsAssignedToGroup.filter(T=>c.includes(T.Id)),I={...t,competitionsAssignedToGroup:x};await Fa("/SetUpJson/InstallEventSettingsItems",I),Pt.success("Competitions have been successfully installed"),setTimeout(()=>{window.top.location.href="/CompetitionStructure/Tab"},2e3),o(!1)}else Pt.error("Please select at least one competition"),o(!1)},b=(x,I)=>{let T={...x,GenderGenderTitle:"Male",Id:On()},M={...x,GenderGenderTitle:"Female",Id:On()},J=t.competitionsAssignedToGroup.slice(0,I),Q=t.competitionsAssignedToGroup.slice(I+1);t.competitionsAssignedToGroup=[...J,T,M,...Q],v({...t})},$=()=>{const x=t.competitionsAssignedToGroup.map(I=>I.Id);l(r?[]:x),a(!r),sessionStorage.setItem("selectedCheckboxes",JSON.stringify(c))},P=x=>{c.includes(x)?l(c.filter(I=>I.id!==x)):l([...c,x]),sessionStorage.setItem("selectedCheckboxes",JSON.stringify(c))};return d.jsxs("div",{children:[d.jsx("div",{children:d.jsxs("div",{className:"flex justify-center w-full flex-col place-items-center",children:[d.jsx(Wa,{label:"Upload Images Related to the competition",errors:_,control:u,validExtensions:["jpg","png","jpeg"],validExtensionsMimeTypes:["image/jpg","image/png","image/jpeg"],fieldName:"fileUploads",fileUploadUrl:"/uploadJson/UploadCandidateImage",editId:C==null?void 0:C.id,onChangeValidation:x=>{sessionStorage.setItem("images",JSON.stringify(x)),g("fileUploads",x)}}),d.jsxs("div",{className:"mt-4 px-10 flex flex-col w-full",children:[d.jsx("label",{htmlFor:"aiPrompt",className:"block text-sm font-semibold text-gray-700",children:"AI Prompt"}),d.jsx("textarea",{id:"aiPrompt",name:"aiPrompt",value:s,onChange:x=>{e(x.target.value),localStorage.setItem("aiPrompt",x.target.value)},rows:"4",className:"mt-1 min-w-full max-w-full block w-full shadow-sm sm:text-sm focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md",placeholder:"Enter the AI Prompt"})]}),d.jsx("button",{onClick:S,className:"mt-8 w-full max-w-72 rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Get Results"}),d.jsx("a",{href:"https://ilovepdf.com/pdf_to_jpg",target:"_blank",className:"text-sm text-blue-500 mt-2",rel:"noreferrer",children:"Donâ€™t have an Image to test? Click here to convert PDF to Image"})]})}),d.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[d.jsx("div",{className:"mt-8 flow-root",children:d.jsxs("div",{className:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:[d.jsxs("div",{className:"flex flex-row",children:[d.jsx(on,{heading:"Age Wise Groups",items:t==null?void 0:t.ageWiseGroups,isLoading:i,columns:[{field:"GroupName",label:"Group Name"},{field:"AgeFrom",label:"Age From"},{field:"AgeTo",label:"Age To"}]}),d.jsx(on,{heading:"Competition Items",items:t==null?void 0:t.competitionItems,isLoading:i,columns:[{field:"Title",label:"Title"},{field:"CategoryCategoryName",label:"Category"},{field:"ScoreLabelLabel",label:"Score By"}]}),d.jsx(on,{heading:"Ranks",items:t==null?void 0:t.ranks,isLoading:i,columns:[{field:"ParticipantTypeTitle",label:"Participant Type"},{field:"GroupGroupName",label:"Group Name"},{field:"CompetitionItemTitle",label:"Competition Item"},{field:"RankTitle",label:"Rank Title"},{field:"Points",label:"Points"}]}),d.jsx(on,{heading:"Grades",items:t==null?void 0:t.grades,isLoading:i,columns:[{field:"ParticipantTypeTitle",label:"Participant Type"},{field:"GroupGroupName",label:"Group Name"},{field:"CompetitionItemTitle",label:"Competition Item"},{field:"GradeName",label:"Grade Title"},{field:"Points",label:"Points"}]})]}),d.jsx("div",{className:"sm:flex sm:items-center px-10 mt-10",children:d.jsxs("div",{className:"sm:flex-auto",children:[d.jsx("h1",{className:"text-base font-semibold leading-6 text-gray-900",children:"Generated Competitions"}),d.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"A list of all AI generated competitions."})]})}),d.jsxs("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8 relative",children:[i&&d.jsx(us,{}),d.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"divide-x divide-gray-200",children:[d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-sm font-semibold text-gray-900 sm:pl-2",children:d.jsx("input",{id:"selectAll",name:"selectAll",type:"checkbox",checked:r,"aria-describedby":"selectAll-description",className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600",onChange:$})}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Participant Type"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Group Name"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Competition Name"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Language"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Gender"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Split Gender"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Remarks"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Maximum Score"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Maximum Candidates"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Fees"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Maximum Minutes"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Maximum Seconds"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Minimum Minutes"}),d.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-4 text-left text-xs font-semibold text-gray-900",children:"Minimum Seconds"})]})}),((B=t==null?void 0:t.competitionsAssignedToGroup)==null?void 0:B.length)>0&&d.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:(N=t==null?void 0:t.competitionsAssignedToGroup)==null?void 0:N.map((x,I)=>d.jsxs("tr",{className:"divide-x divide-gray-200",children:[d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:d.jsx("input",{id:`checkbox${x.Id}`,name:`checkbox${x.Id}`,type:"checkbox",checked:c.includes(x.Id),"aria-describedby":`checkbox${I}-description`,className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600",onChange:()=>P(x.Id)})}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.ParticipantTypeTitle}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.GroupGroupName}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.CompetitionItemTitle}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.LanguageLanguageName}),d.jsxs("td",{className:"px-2 py-2 text-xs font-medium text-gray-900 flex justify-center ",children:[x.GenderGenderTitle," "]}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.GenderGenderTitle==="Both"?d.jsx("button",{onClick:()=>{b(x,I)},type:"button",className:"rounded-full bg-indigo-600 p-1 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:d.jsx(Va,{"aria-hidden":"true",className:"h-5 w-5"})}):null}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.Remarks}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.MaximumScore}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.MaximumCandidates}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.Fees}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.MaximumMinutes}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.MaximumSeconds}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.MinimumMinutes}),d.jsx("td",{className:"px-2 py-2 text-xs font-medium text-gray-900",children:x.MinimumSeconds})]},x.Id))},(R=t==null?void 0:t.competitionsAssignedToGroup)==null?void 0:R.length)]})]})]})}),d.jsx("div",{className:"flex justify-center w-full flex-col place-items-center",children:d.jsx("button",{onClick:q,className:"mt-8 w-full max-w-72 rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600",children:"Submit"})})]})]})}export{uc as default};
