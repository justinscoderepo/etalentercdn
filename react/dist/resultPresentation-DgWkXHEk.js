import{r as s,j as t}from"./mainweb-kN1oebse.js";import{R as F,m as C,F as O,a as E}from"./react-confetti-fDechADn.js";import{B}from"./box-B9X7ci-5.js";import{u as v}from"./useBackend-BGka5jsl.js";import{L as U}from"./lazyFunction-CEQZ3rnc.js";import{c as _}from"./utilities-CN4lTu6a.js";import"./httpService-DyKyZ8oa.js";import"./index-t--hEgTQ.js";function z({title:m,titleId:u,...l},c){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":u},l),m?s.createElement("title",{id:u},m):null,s.createElement("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"}))}const W=s.forwardRef(z),A=sessionStorage.getItem("showedItems")?JSON.parse(sessionStorage.getItem("showedItems")):[],$=()=>({width:window.innerWidth,height:window.innerHeight}),Y=()=>{const{row:m}=v("/CoordinatorJson/GetToppers",{filter:{IsAwards:!1,IsIndividual:!1,IsPodium:!0},select:"BonusPoints,CandidateRegistrationId,CandidateUser,CandidateUserMobile,CandidateUserPhone,CandidateUserProfilePicture,ChampionName,CompetitionCompetitionItemTitle,CompetitionGender,CompetitionGenderGenderTitle,CompetitionGroupGroupName,CompetitionLanguage,CompetitionLanguageLanguageName,Grade,GradePoints,IdentityNumber,Items,JudgeReport,ParticipantType,Points,RankBonusPoints,ScorecardIdRank,ScorecardIdRankTitle,Status,TopGroupBy,TotalPoints,User,ParticipantCompetition",doCache:!0,limit:1e5,offset:0}),{rows:u}=v("/EventLevelsJson/Get",{limit:1e5,offset:0}),[l,c]=s.useState(!1);s.useEffect(()=>{l&&U(()=>{c(!1)},3e3)},[l]);var x=["Second","First","Third"],g=["Third","Second","First"];const p=m?.CompetitionResults?.map(e=>e.Competitions.map(n=>({Competition:n.CompetitionCompetitionItemTitle,Group:n.CompetitionGroupGroupName,...n,Results:n.Results.sort((o,a)=>x.indexOf(o.ScorecardIdRankTitle)-x.indexOf(a.ScorecardIdRankTitle))}))).flat(),[i,f]=s.useState(0);let[r,R]=s.useState(A);const h=p?.[i],d=h?.Results||[],w=()=>{c(!1);const n=d.sort((o,a)=>g.indexOf(o.ScorecardIdRankTitle)-g.indexOf(a.ScorecardIdRankTitle)).findIndex(o=>!r.includes(o.ParticipantCompetition+"_"+o.ScorecardIdRank));n===-1?b():(r.push(d[n].ParticipantCompetition+"_"+d[n].ScorecardIdRank),sessionStorage.setItem("showedItems",JSON.stringify(r)),R([...r]),c(!0))},S=()=>{f(i===0?p?.length-1:i-1)},b=()=>{const e=i===p?.length-1;f(e?0:i+1)},j=e=>{f(e);let n=document.getElementById("scrollresults"),o=n.children[e],a=n.offsetWidth,T=o.offsetWidth,P=o.offsetLeft-a/2+T/2,G=n.scrollWidth-a,L=Math.min(Math.max(P,0),G);n.scroll({left:L,behavior:"smooth"})},N=()=>{document.documentElement.requestFullscreen()},I=e=>{e.preventDefault(),e.key==="ArrowRight"&&w(),e.key==="ArrowLeft"&&S()};s.useEffect(()=>(document.addEventListener("keydown",I),()=>{document.removeEventListener("keydown",I)}),[d,r]);const{width:y,height:k}=$();return t.jsxs(B,{heading:"Result Presentation",children:[l&&t.jsx(F,{numberOfPieces:500,recycle:!0,width:y,tweenDuration:1e3,height:k}),t.jsx("div",{className:"flex w-full flex-col",children:t.jsx("div",{className:"flex flex-row bg-gradient-to-t from-gray-200 to-white min-h-screen",children:t.jsxs("div",{className:"relative w-full space-y-4 justify-between h-full min-h-screen flex-col items-center",children:[t.jsx("div",{className:"flex justify-end px-2",children:t.jsx("button",{className:"bg-blue-800 px-2 text-white rounded-md",onClick:N,children:t.jsx("span",{className:"material-symbols-outlined text-xs text-white",children:"FullScreen"})})}),t.jsxs("h2",{className:"text-5xl font-bold text-darkprimary mb-2 text-center border-pink-200 border-b-2 py-2",children:[h?.Competition," - ",h?.Group]}),t.jsx("div",{className:"flex flex-row justify-center space-x-4 p-1 min-h-[50vh]",children:d.map((e,n)=>r.includes(e.ParticipantCompetition+"_"+e.ScorecardIdRank)&&t.jsxs(C.div,{initial:{y:-300,opacity:0,scale:.5,zIndex:9},animate:{y:0,opacity:1,scale:1,zIndex:9},exit:{y:300,opacity:0},transition:{duration:.5},style:{backgroundImage:e.ScorecardIdRankTitle==="First"?"linear-gradient(rgb(203 174 20), rgb(207 175 3 / 80%)), url(https://app.etalenter.com/Content/Images/result-card/rank-back-img.png)":e.ScorecardIdRankTitle==="Second"?"linear-gradient(to bottom, rgb(14 155 226 / 70%), rgb(14 155 226 / 70%)), url('https://app.etalenter.com/Content/Images/result-card/rank-back-img.png')":"linear-gradient(to bottom, rgb(15 160 6 / 70%), rgb(15 160 6 / 70%)), url('https://app.etalenter.com/Content/Images/result-card/rank-back-img.png')"},className:_("flex flex-col items-center justify-end  rounded-lg shadow-lg p-4 min-w-80 relative","bg-cover bg-center bg-no-repeat",e.ScorecardIdRankTitle==="First"?"pt-8":e.ScorecardIdRankTitle==="Second"?"pt-6":"pt-4",e.ScorecardIdRankTitle==="First"?"z-50":e.ScorecardIdRankTitle==="Second"?"z-5":"z-0"),children:[t.jsxs("h3",{className:"text-2xl font-bold gold-letter text-gray-100 drop-shadow-xl justify-center flex flex-col text-center mb-4 ",children:[e.ScorecardIdRankTitle,e.ScorecardIdRankTitle==="First"&&t.jsx("img",{src:"https://app.etalenter.com/Content/Images/result-card/winner_icon_1.png",alt:"Gold",className:"h-48 w-48 mt-3 shadow-sm"}),e.ScorecardIdRankTitle==="Second"&&t.jsx("img",{src:"https://app.etalenter.com/Content/Images/result-card/winner_icon_2.png",alt:"Silver",className:"h-40 w-40 mt-3 shadow-sm"}),e.ScorecardIdRankTitle==="Third"&&t.jsx("img",{src:"https://app.etalenter.com/Content/Images/result-card/winner_icon_3.png",alt:"Bronze",className:"h-36 w-36 mt-3 shadow-sm"})]}),e.CandidateUserProfilePicture?t.jsx("div",{className:"flex flex-col items-center justify-center !px-10 text-center relative",children:t.jsx("div",{style:{backgroundImage:`url(${e.CandidateUserProfilePicture})`},className:"w-36 h-44 border-4 border-white shadow-lg mb-2 bg-cover bg-center bg-no-repeat rounded-xl flex items-center justify-center"})}):t.jsx("div",{className:"flex flex-col items-center justify-center !px-10 text-center relative",children:t.jsx(W,{className:"w-36 h-44 border-4 text-white border-white shadow-lg mb-2 bg-cover bg-center bg-no-repeat rounded-xl flex items-center justify-center"})}),t.jsxs("p",{className:"text-lg font-semibold text-white pb-4 drop-shadow-xl",children:[e.CandidateUserName," ",e.TeamTeamName]}),t.jsx("p",{className:"text-md font-semibold text-white text-center flex flex-col gap-2",children:u?.slice(1)?.map(o=>t.jsx("p",{className:"drop-shadow-xl",children:e[`Candidate${o.LevelName}Name`]??e[`Team${o.LevelName}Name`]}))})]},n))}),t.jsx("div",{className:"flex flex-row justify-start p-2 w-full overflow-x-auto",id:"scrollresults",children:p?.map((e,n)=>t.jsx(C.div,{className:`border-2 p-4 cursor-pointer rounded-md ${n===i?"bg-blue-100":"bg-white"}`,onClick:()=>j(n),whileHover:{scale:1.1},whileTap:{scale:.9},children:t.jsx("p",{className:"text-sm font-semibold text-gray-700",children:e.Competition})},n))}),t.jsxs("div",{className:"flex justify-center gap-16",children:[t.jsx("button",{onClick:w,type:"button",className:"rounded-full bg-rose-600 p-2 text-white shadow-sm hover:bg-rose-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-rose-600",children:t.jsx(O,{"aria-hidden":"true",className:"h-8 w-8"})}),t.jsx("button",{onClick:b,type:"button",className:"rounded-full bg-indigo-600 p-2 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:t.jsx(E,{"aria-hidden":"true",className:"h-8 w-8"})})]})]})})})]})};export{Y as default};
