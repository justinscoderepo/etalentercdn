import{u as j,r as v,j as C,R as _,b}from"./mainweb-DLytOzeA.js";import{u as z}from"./useBackend-DQtjNKWe.js";import"./httpService-Dtbvl9Ps.js";import"./index-t--hEgTQ.js";const F=_.lazy(()=>b(()=>import("./selectBox-Cn7psjWM.js"),[])),V=({fieldName:l,label:u,placeholder:g,errors:i,register:n,formData:o,disabled:m,onChange:r})=>{let d=i==null?void 0:i[l],{user:c}=j(),{EventLevels:e}=c,t=(e==null?void 0:e.filter(a=>a.Order!=1))||[],[x,L]=v.useState(d);v.useEffect(()=>{L(i==null?void 0:i[l])},[i==null?void 0:i[l]]);let[p,E]=v.useState({});const{rows:N}=z("/CandidateJson/GetSubOrganizations",{sort:{sortOrder:"DESC",sortColumn:"id"},limit:1e5,doCache:!0,select:"Name,Id,CompetitionLevel,CompetitionLevelLevelName,ParentOrganization"});console.log({locals:N});let{refactoredGroups:O}=o?R(N,o,p,t):{refactoredGroups:{}};return v.useEffect(()=>{o&&N&&t.forEach(a=>{let s=l+"."+a.LevelName;if(r){let f=a.LevelName.charAt(0).toLowerCase()+a.LevelName.slice(1),h=o[f],S=o[s];h&&!S&&r(s,h)}})},[t,o,N]),console.log({levels:t}),C.jsx("div",{className:t.length>1?"grid grid-cols-2 gap-4":"grid grid-cols-1",children:t.map(a=>C.jsx("div",{children:C.jsx(F,{fieldName:l+"."+a.LevelName,label:a.Order==2?u:a.LevelName,placeholder:g,disabled:m,errors:i,register:n,formData:o,optional:!1,onChange:s=>{p[a.LevelName]=s.target.value,E({...p});let f=a.LevelName.charAt(0).toLowerCase()+a.LevelName.slice(1);r(f,s.target.value),r(l+"."+a.LevelName,s.target.value),L("")},options:O[a.LevelName],optionKey:"Id",optionText:"Name"})},a.LevelName))})};function R(l,u,g,i){let n=l!=null&&l.length?[...l]:[],o=n&&(n==null?void 0:n.length)>0?n.reduce((e,t)=>(e[t.CompetitionLevelLevelName]=e[t.CompetitionLevelLevelName]||[],e[t.CompetitionLevelLevelName].push(t),e),Object.create(null)):{},m="",r=!0,d={};u&&Object.keys(u).forEach(e=>{let t=e.charAt(0).toUpperCase()+e.slice(1);d[t]=u[e]});let c={};return i==null||i.forEach(e=>{var L;let t={...d,...g};m?c[e.LevelName]=(L=o[e.LevelName])==null?void 0:L.filter(p=>p.ParentOrganization==(t==null?void 0:t[m])):r?c[e.LevelName]=o[e.LevelName]:c[e.LevelName]=[],(t==null?void 0:t[e.LevelName])&&(m=e.LevelName),r=!1}),{refactoredGroups:c}}export{R as ExtractLevelKeys,V as default};
