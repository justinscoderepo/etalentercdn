import{r,j as e,u as U,d as g}from"./main-BTxYPv0w.js";import{p as b}from"./httpService-COMwHiVS.js";import{u as Z}from"./navigationUtils-BLWJCr5T.js";import{F as W,a as L,P as z,M as D,b as K}from"./PlatformFeaturesSidebar-C0k_fb-K.js";import{F as Y}from"./UserPlusIcon-BHpirQYr.js";import{c as N}from"./utilities-CN4lTu6a.js";import{F as _}from"./UserIcon-nI0Jix1d.js";import{F as Q}from"./ShieldCheckIcon-CfQt2Jys.js";import{F as X}from"./UserCircleIcon-Deg_faIw.js";import"./index-t--hEgTQ.js";import"./UserGroupIcon-BMyE4m80.js";import"./StarIcon-C145jUBP.js";import"./CalendarDaysIcon-XNOA0Jin.js";function ee({title:s,titleId:a,...d},m){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":a},d),s?r.createElement("title",{id:a},s):null,r.createElement("path",{d:"M10.5 18.75a.75.75 0 0 0 0 1.5h3a.75.75 0 0 0 0-1.5h-3Z"}),r.createElement("path",{fillRule:"evenodd",d:"M8.625.75A3.375 3.375 0 0 0 5.25 4.125v15.75a3.375 3.375 0 0 0 3.375 3.375h6.75a3.375 3.375 0 0 0 3.375-3.375V4.125A3.375 3.375 0 0 0 15.375.75h-6.75ZM7.5 4.125C7.5 3.504 8.004 3 8.625 3H9.75v.375c0 .621.504 1.125 1.125 1.125h2.25c.621 0 1.125-.504 1.125-1.125V3h1.125c.621 0 1.125.504 1.125 1.125v15.75c0 .621-.504 1.125-1.125 1.125h-6.75A1.125 1.125 0 0 1 7.5 19.875V4.125Z",clipRule:"evenodd"}))}const se=r.forwardRef(ee);function te({title:s,titleId:a,...d},m){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":a},d),s?r.createElement("title",{id:a},s):null,r.createElement("path",{fillRule:"evenodd",d:"M15.75 1.5a6.75 6.75 0 0 0-6.651 7.906c.067.39-.032.717-.221.906l-6.5 6.499a3 3 0 0 0-.878 2.121v2.818c0 .414.336.75.75.75H6a.75.75 0 0 0 .75-.75v-1.5h1.5A.75.75 0 0 0 9 19.5V18h1.5a.75.75 0 0 0 .53-.22l2.658-2.658c.19-.189.517-.288.906-.22A6.75 6.75 0 1 0 15.75 1.5Zm0 3a.75.75 0 0 0 0 1.5A2.25 2.25 0 0 1 18 8.25a.75.75 0 0 0 1.5 0 3.75 3.75 0 0 0-3.75-3.75Z",clipRule:"evenodd"}))}const re=r.forwardRef(te),ae=()=>e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-primary rounded-full flex items-center justify-center mb-4 shadow-lg",children:e.jsx(Y,{className:"w-8 h-8 text-white"})}),e.jsx("div",{className:"border-b-[#485257] text-[#206689] mb-4 items-center font-medium pb-1 px-1 w-full uppercase border-b-2 text-lg",children:"Join eTalenter"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create your account to get started"})]}),ne=({formData:s,handleInputChange:a,handleEmailBlur:d,handleGetOTP:m,handleOTPChange:v,showPassword:i,setShowPassword:P,isLoading:o,error:j,emailError:l,otpError:x,showOtpField:u,showPasswordField:h,otpButtonDisabled:f,onSubmit:R})=>e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium leading-6 text-gray-900 mb-2",children:"Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(_,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:a,required:!0,className:"pl-10 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6",placeholder:"Enter your full name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium leading-6 text-gray-900 mb-2",children:"Mobile Number - WhatsApp *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(se,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",name:"mobile",value:s.mobile,onChange:a,required:!0,className:"pl-10 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6",placeholder:"eg: +4878xxxxxxx"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium leading-6 text-gray-900 mb-2",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(W,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:a,onBlur:d,required:!0,className:N("pl-10 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6",l?"ring-red-300":"ring-gray-300"),placeholder:"Enter your email address"})]}),l&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:l})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"button",onClick:m,disabled:!s.email||l||f||o,className:N("inline-flex items-center gap-x-2 rounded-md px-3 py-2 text-sm font-semibold shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",!s.email||l||f||o?"bg-gray-200 text-gray-700 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700 focus-visible:outline-green-600"),children:[f&&e.jsx("span",{className:"text-xs",children:"Wait 20s"}),o?"Sending...":"Get OTP via Email"]})}),u&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium leading-6 text-gray-900 mb-2",children:"Enter OTP *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Q,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"number",name:"otp",value:s.otp,onChange:v,required:!0,maxLength:6,className:N("pl-10 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6",x?"ring-red-300":"ring-gray-300"),placeholder:"Enter OTP received via Email"})]}),x&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:x})]}),h&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium leading-6 text-gray-900 mb-2",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(re,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:i?"text":"password",name:"password",value:s.password,onChange:a,required:!0,className:"pl-10 pr-10 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-primary sm:text-sm sm:leading-6",placeholder:"Create a secure password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>P(!i),children:i?e.jsx(L,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(X,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:e.jsx("i",{children:"Before Registration, Read Carefully to avoid confusion and understand the roles."})}),e.jsxs("div",{className:"text-xs text-gray-600 space-y-2",children:[e.jsxs("p",{children:["For first-time users, the only available role is ",e.jsx("strong",{children:"Event Manager"}),"."]}),e.jsxs("p",{children:["While creating an event, you will automatically designate yourself as a ",e.jsx("strong",{children:"Coordinator"}),", you can change your role to control/modify all the details of the event."]}),e.jsxs("p",{children:["To add sub-units and appoint ",e.jsx("strong",{children:"Sub-coordinators"}),", go to the Coordinator role. Sub-coordinators can then add participants within their respective sub-units."]}),e.jsxs("p",{children:["If you added competitions, you can create ",e.jsx("strong",{children:"judges"})," to score them online."]}),e.jsxs("p",{children:["For live programs, you can assign someone to control the ",e.jsx("strong",{children:"projector"}),". Another person can be assigned to handle the printing of content."]})]})]}),e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:e.jsx("div",{className:"text-orange-800",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Note:"})," If you are a ",e.jsx("strong",{children:"guardian/parent"})," of a candidate for a particular event, You can't register here. You can only register with the secret link shared by your event's coordinator."]})})}),j&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-red-600",children:j})}),e.jsx("div",{children:e.jsxs("button",{type:"submit",disabled:o||!h||l||x,className:N("w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2",o||!h||l||x?"bg-gray-400 cursor-not-allowed":"bg-primary hover:bg-primaryHover focus:ring-primary"),children:[o&&e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),o?"Creating Account...":"Create Account"]})})]}),ie=({smartNavigate:s,isLoading:a})=>{const d=m=>{m.preventDefault(),a||s("/Account/Login")};return e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{onClick:d,disabled:a,className:"font-medium text-primary hover:text-primaryHover disabled:opacity-50 disabled:cursor-not-allowed",children:"Sign in here"})]})}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-gray-50 text-gray-500",children:"New to eTalenter?"})})]})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Join thousands of event organizers who trust eTalenter for their competitions and events"})})]})},je=()=>{const[s,a]=r.useState({name:"",mobile:"",email:"",otp:"",password:"",googleToken:""}),[d,m]=r.useState(!1),[v,i]=r.useState(!1),[P,o]=r.useState(""),[j,l]=r.useState(""),[x,u]=r.useState(""),[h,f]=r.useState(!1),[R,k]=r.useState(!1),[le,O]=r.useState(!1),[E,T]=r.useState(!1),F=U(),w=Z(F),A="/PublicJson/UsersRegister",C="/AccountJson/LoginUser",M=n=>{const{name:t,value:c}=n.target;a(p=>({...p,[t]:c})),t==="email"&&l(""),t==="otp"&&u(""),o("")},S=async n=>{if(n)try{return i(!0),await b("/PublicJson/GetUserCheck",{Email:n,Mobile:s.mobile})===!0?(l("This email id is already exist"),!1):(l(""),!0)}catch(t){return console.error("Email validation error:",t),!1}finally{i(!1)}},I=()=>{s.email&&S(s.email)},J=async()=>{if(!s.email){l("Please enter email first");return}if(await S(s.email))try{T(!0),i(!0);const t=await b("/PublicJson/UsersActivation",{Email:s.email});f(!0),O(!0),g.success("OTP is sent to your email. Please check and fill the field. Sometimes it may take a few seconds to receive email. Kindly wait and enter it. Please check spam folder if not found within few minutes.",{duration:1e4}),setTimeout(()=>{T(!1)},2e4)}catch(t){console.error("OTP request error:",t),g.error("Failed to send OTP. Please try again."),T(!1)}finally{i(!1)}},q=async n=>{if(n.length===6)try{i(!0);const{data:t}=await b("/PublicJson/GetOTPCheck",{OTP:n,Email:s.email});return console.log("OTP validation response:",t),t===!0?(k(!0),u(""),!0):(u("Invalid OTP"),!1)}catch(t){return console.error("OTP validation error:",t),u("OTP validation failed"),!1}finally{i(!1)}else if(n.length>6)return u("Invalid OTP Length"),!1;return!1},$=n=>{const{value:t}=n.target;a(c=>({...c,otp:t})),u(""),t.length===6&&q(t)},H=async n=>{n.preventDefault(),o(""),i(!0);try{const t={Name:s.name,Mobile:s.mobile,Email:s.email,OTP:s.otp,Password:s.password,GoogleToken:s.googleToken};console.log("Register - Attempting registration with:",{name:s.name,email:s.email,hasPassword:!!s.password});const c=await b(A,t);if(console.log("Register - API Response:",c),c&&c.success!==!1)g.success("Registration successful! Logging you in..."),setTimeout(async()=>{try{const p={email:s.email,password:s.password,isCrossRequest:!0,eventId:0,userRoleId:0,myRole:0,randomOrder:[],randomNumber:0,returnPath:"",name:s.name,googleToken:s.googleToken},y=await b(C,p);if(console.log("Register - Auto-login response:",y),y&&y.data&&y.data.token){const{user:V,token:B}=y.data,G={user:V,token:B};localStorage.setItem("user",JSON.stringify(G)),console.log("Register - Stored user data after registration"),g.success("Welcome to eTalenter! Registration and login successful"),w("/Home/Index")}else g.success("Registration successful! Please login to continue."),w("/Account/Login")}catch(p){console.error("Auto-login failed:",p),g.success("Registration successful! Please login to continue."),w("/Account/Login")}},1e3);else throw new Error(c?.message||"Registration failed")}catch(t){console.error("Registration error:",t);const c=t.response?.data?.message||t.message||"Registration failed. Please try again.";o(c),g.error(c)}finally{i(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-primary/5 flex",children:[e.jsx(z,{}),e.jsx("div",{className:"flex-1 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"w-full max-w-6xl",children:[e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(ae,{}),e.jsx(ne,{formData:s,handleInputChange:M,handleEmailBlur:I,handleGetOTP:J,handleOTPChange:$,showPassword:d,setShowPassword:m,isLoading:v,error:P,emailError:j,otpError:x,showOtpField:h,showPasswordField:R,otpButtonDisabled:E,onSubmit:H}),e.jsx(ie,{smartNavigate:w,isLoading:v})]}),e.jsx("div",{className:"w-full",children:e.jsx(D,{})}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Secure registration powered by eTalenter platform"})}),e.jsx(K,{})]})]})})]})};export{je as default};
