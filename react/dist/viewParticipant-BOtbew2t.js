import{g as J,r as a,p as y,j as o,a as E}from"./mainweb-CqMFqOvn.js";import{R as B}from"./renderRegistrationForm-DHf4XFiq.js";import{p as F}from"./httpService-CCUnmMNR.js";import{F as k,U as G,a as O,S as I}from"./publicRegistrationHelper-CCHrcled.js";import{B as M}from"./box-Cs3aFQJd.js";import"./useBackend-DgSr0CWI.js";import"./utilities-CN4lTu6a.js";import"./formSubmission-DolyeITm.js";import"./XMarkIcon-cniGsgt6.js";import"./validationMessage-DAzE3iOq.js";import"./singleImageUpload-i_stkAYe.js";import"./clsx-B-dksMZM.js";import"./ChevronRightIcon-DYeU5moO.js";import"./manageTeamParticipants-B_aYYz0Q.js";import"./dialog-C8zuf7y5.js";import"./modalForm-DtFnk5lv.js";import"./axios-CCb-kr4I.js";var R={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var d={}.hasOwnProperty;function l(){for(var t=[],f=0;f<arguments.length;f++){var r=arguments[f];if(r){var x=typeof r;if(x==="string"||x==="number")t.push(r);else if(Array.isArray(r)){if(r.length){var n=l.apply(null,r);n&&t.push(n)}}else if(x==="object"){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){t.push(r.toString());continue}for(var i in r)d.call(r,i)&&r[i]&&t.push(i)}}}return t.join(" ")}e.exports?(l.default=l,e.exports=l):window.classNames=l})()})(R);var T=R.exports;const v=J(T);let V=({selectedParticipantDetails:e,participantType:d,setAllowEdit:l,setOpen:t,setFilter:f})=>{var g,p,j,m,S,N;const[r,x]=a.useState(!1),[n,i]=a.useState(""),[h,b]=a.useState("Pending"),C=(s,u)=>{b(u),x(!0)},U=()=>{var s;if(b(h),n.trim()){i(""),x(!1);let u=y((s=e==null?void 0:e.user)==null?void 0:s.JsonSettings);u||(u={}),u.ApprovalStatus=h,u.ReviewComments||(u.ReviewComments=[]),u.ReviewComments.push({Comment:n,Status:h,Date:new Date().toISOString()}),h==="Reviewed"&&(u.FinishedSteps=!1);let A={ParticipantType:d,UserRoleId:e.user.Candidate,JsonSettings:JSON.stringify(u)};F("/UsersRolesJson/Approve",A).then(z=>{E.success("Review submitted successfully and emailed to the user."),l(!1),t(!1),f(!0)})}else alert("Please add a comment before submitting.")};let w=[];if((g=e==null?void 0:e.user)!=null&&g.JsonSettings){let s=y((p=e==null?void 0:e.user)==null?void 0:p.JsonSettings);s!=null&&s.ReviewComments&&(w=s==null?void 0:s.ReviewComments)}return o.jsxs("div",{className:"border-b border-gray-200 pb-5 bg-white flex flex-1 flex-col pr-10",children:[o.jsxs("div",{className:"sm:flex sm:items-baseline sm:justify-between",children:[o.jsxs("div",{className:"sm:w-0 sm:flex-1",children:[o.jsx("h1",{id:"message-heading",className:"text-base font-semibold text-gray-900",children:(j=e==null?void 0:e.user)==null?void 0:j.UserName}),o.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(m=e==null?void 0:e.user)==null?void 0:m.Email}),o.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(S=e==null?void 0:e.user)==null?void 0:S.UserMobile}),o.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(N=e==null?void 0:e.user)==null?void 0:N.UserDobString}),o.jsxs("button",{className:"inline-flex items-center gap-x-1.5 px-10 rounded-md bg-blue-600 mt-5  py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600",onClick:()=>l(!0),children:[o.jsx(k,{className:"h-5 w-5 inline-block -mt-0.5 mr-0 "}),"Edit"]})]}),o.jsxs("div",{className:"mt-4 flex flex-col space-y-4",children:[o.jsx(G,{person:e==null?void 0:e.user}),o.jsx(O,{onClick:C,person:e==null?void 0:e.user})]})]}),o.jsxs("div",{children:[o.jsx("div",{children:w.map((s,u)=>o.jsx("div",{className:"mt-2 flex flex-col relative",children:o.jsx("div",{className:v("border-l-4 p-4",(s==null?void 0:s.Status)==="Reviewed"?"border-yellow-400 bg-yellow-50":(s==null?void 0:s.Status)==="Approved"?"border-green-400 bg-green-50":"border-red-400 bg-red-50"),children:o.jsx("div",{className:"flex",children:o.jsxs("div",{className:"ml-3 flex-1",children:[o.jsx("h4",{className:v("text-lg font-bold",(s==null?void 0:s.Status)==="Reviewed"?"text-yellow-700":(s==null?void 0:s.Status)==="Approved"?"text-green-700":"text-red-700"),children:s==null?void 0:s.Status}),o.jsx("p",{className:v("text-sm",(s==null?void 0:s.Status)==="Reviewed"?"text-yellow-700":(s==null?void 0:s.Status)==="Approved"?"text-green-700":"text-red-700"),children:(s==null?void 0:s.Comment)??s}),o.jsx("p",{className:v("font-medium text-right",(s==null?void 0:s.Status)==="Reviewed"?"text-yellow-700":(s==null?void 0:s.Status)==="Approved"?"text-green-700":"text-red-700"),children:s==null?void 0:s.Date})]})})})},u))}),r&&o.jsx("div",{className:"mt-2 flex flex-col relative",children:o.jsxs(M,{heading:"Please enter the reason for change status to "+h,childrenClasses:"flex flex-col mt-4 relative",children:[o.jsxs("div",{className:"rounded-lg bg-white outline outline-1 -outline-offset-1 outline-gray-300 focus-within:outline focus-within:outline-2 focus-within:-outline-offset-2 focus-within:outline-indigo-600",children:[o.jsx("label",{htmlFor:"comment",className:"sr-only",children:"Add your comment..."}),o.jsx("textarea",{id:"comment",name:"comment",rows:3,placeholder:"Add your comment..., The comment will be sent to the user via email.",className:"block w-full rounded-lg resize-none bg-transparent px-3 py-1.5 text-base text-gray-900 placeholder:text-gray-400 focus:outline focus:outline-0 sm:text-sm/6",defaultValue:"",value:n,onChange:s=>i(s.target.value)})]}),o.jsxs("div",{className:"absolute inset-x-0 bottom-0 flex justify-between py-2 pl-3 pr-2",children:[o.jsx("div",{className:"flex items-center space-x-5"}),o.jsx("div",{className:"shrink-0",children:o.jsx(I,{onClick:U,currentReviewStatus:h})})]})]})})]})]})};function rs({participantType:e,candidateId:d,onClickReview:l,setFilter:t,selectedParticipantDetails:f,setOpen:r}){let[x,n]=a.useState(!1);return o.jsx(B,{getEvets:"/EventJson/Get",allowEdit:x,getUserRoles:"/UsersRolesPlusUsersJson/Get",getTeams:"/CompetitionParticipantsTeamsJson/Get",getUsers:"/UsersRolesPlusUsersJson/Get",customComponents:o.jsx(V,{participantType:e,selectedParticipantDetails:f,setFilter:t,setOpen:r,setAllowEdit:n}),getParticipants:"/CoordinatorJson/GetParticipants",closeModel:()=>{r(!1)},view:"directModelView",participantTypeInt:e,candidateId:d,setActiveTab:()=>{}})}export{rs as default};
