import{r as o,j as e,L as I}from"./mainweb-HYIzPdS_.js";import{B as L}from"./box-BGY8M8TG.js";import{u as V}from"./useConfirmation-BTm5NFMr.js";import{c as $}from"./utilities-CN4lTu6a.js";import{P as z}from"./pagination-Cpdd1_ew.js";import{F as Z}from"./TrashIcon-CMQFUlsS.js";import{u as H}from"./useBackend-DxFERjDq.js";import"./dialog-DQEq3Sf_.js";import"./CheckIcon-B-LHp8n9.js";import"./httpService-BRrqg-1D.js";import"./index-BtuGy7By.js";function _({title:m,titleId:n,...a},r){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},a),m?o.createElement("title",{id:n},m):null,o.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}const q=o.forwardRef(_);function K({title:m,titleId:n,...a},r){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},a),m?o.createElement("title",{id:n},m):null,o.createElement("path",{fillRule:"evenodd",d:"M15.75 4.5a3 3 0 1 1 .825 2.066l-8.421 4.679a3.002 3.002 0 0 1 0 1.51l8.421 4.679a3 3 0 1 1-.729 1.31l-8.421-4.678a3 3 0 1 1 0-4.132l8.421-4.679a3 3 0 0 1-.096-.755Z",clipRule:"evenodd"}))}const Q=o.forwardRef(K),W=({row:m,fields:n,onSave:a,onCancel:r})=>{const[c,f]=o.useState(m||{}),l=i=>{const{name:h,value:j}=i.target;f(p=>({...p,[h]:j}))},g=i=>{i.preventDefault(),a(c)};return e.jsx("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"â€‹"}),e.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:e.jsxs("form",{onSubmit:g,children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:n.map((i,h)=>e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:i.heading}),e.jsx("input",{type:"text",name:i.column,value:c[i.column]||"",onChange:l,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})]},h))}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Save"}),e.jsx("button",{type:"button",onClick:r,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})})]})})},X=({status:m,rows:n=[],pageDetails:a={},fields:r=[],actions:c=[],setOffsetAndLimit:f=()=>{},searchFields:l=[],saveRow:g=()=>{},delete:i=()=>{}})=>{console.log({rows:n},{pageDetails:a},{fields:r},{actions:c},{setOffsetAndLimit:f},{searchFields:l},{saveRow:g},{deleteRow:i});const[h,j]=V(),[p,v]=o.useState(()=>{const t={};return l==null||l.forEach(d=>{t[d.columnName]=""}),t}),[S,N]=o.useState(!1),[C,R]=o.useState(null),b=(t,d)=>{v(s=>({...s,[t]:d}))},U=()=>{console.log("Search Values:",p)},y=t=>{g(t),N(!1),R(null)},w=()=>{N(!1),R(null)};return e.jsxs(e.Fragment,{children:[e.jsx(h,{title:"Delete Item",description:"Are you sure you want to delete this item?",confirmButtonLabel:"Delete",confirmButtonClick:async t=>i(t),className:"w-96 print:hidden"}),e.jsxs("div",{className:"border border-gray-200 rounded-md shadow-sm p-4",children:[(l==null?void 0:l.length)>0&&e.jsxs("div",{className:"mb-4 flex flex-row justify-end gap-x-2 gap-y-2",children:[l==null?void 0:l.map((t,d)=>e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"absolute -top-2 left-2 inline-block rounded-lg bg-white px-1 text-xs font-medium text-gray-900",children:["Search By ",t.heading]}),t.type==="text"&&e.jsx("input",{type:"text",placeholder:"Enter "+(t.placeholder||t.heading),value:p[t.columnName],onChange:s=>b(t.columnName,s.target.value),className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900   placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-darkprimary sm:text-sm/6"}),t.type==="select"&&e.jsx("select",{value:p[t.columnName],onChange:s=>b(t.columnName,s.target.value),className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900  placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-darkprimary sm:text-sm/6",children:t.options.map((s,x)=>e.jsx("option",{value:s.value,children:s.label},x))})]},d)),e.jsx("button",{type:"button",onClick:U,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary hover:bg-darkprimary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-darkprimary",children:"Search"})]}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[(r==null?void 0:r.length)>0&&e.jsx("thead",{children:e.jsxs("tr",{children:[r.map((t,d)=>e.jsx("th",{className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-3",children:t.heading},d)),c.length>0&&e.jsx("th",{className:"py-3.5 pl-4 pr-3 text-right text-sm font-semibold text-gray-900 sm:pl-3",children:"Actions"})]})}),(n==null?void 0:n.length)>0&&e.jsx("tbody",{className:"divide-y divide-gray-200 ",children:n.map((t,d)=>e.jsxs("tr",{children:[r==null?void 0:r.map((s,x)=>e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t[s.column]},x)),c.length>0&&e.jsx("td",{className:"whitespace-nowrap text-sm font-medium ",children:e.jsx("div",{className:"flex justify-end gap-x-2 gap-y-2",children:c.map((s,x)=>e.jsxs("button",{title:s.label,className:$("h-10 w-10 font-semibold py-2 px-2 rounded-3xl flex items-center justify-center",s.type==="whatsapp"?"bg-green-700 text-white":s.type==="edit"?"bg-primary text-white":s.type==="delete"?"bg-red-800 text-white":""),onClick:()=>{},children:[s.type==="whatsapp"&&e.jsx(Q,{className:"h-5 w-5 text-white"}),s.type==="edit"&&e.jsx(q,{className:"h-4 w-4 text-white"}),s.type==="delete"&&e.jsx(Z,{className:"h-5 w-5 text-white"})]},x))})})]},d))}),(n==null?void 0:n.length)===0&&m!="finished"&&e.jsx("tbody",{className:"bg-white flex justify-center",children:e.jsx("tr",{className:"flex justify-center",children:e.jsx(I,{})})})]}),a&&e.jsx(z,{rowsFrom:a==null?void 0:a.rowsFrom,rowsTo:a==null?void 0:a.rowsTo,totalRowCount:a==null?void 0:a.totalRowCount,setOffsetAndLimit:f}),S&&e.jsx(W,{row:C,fields:r,onSave:y,onCancel:w})]})]})};let Y={SuperAdmin:{RoleId:1,Role:"SuperAdmin"},Candidate:{RoleId:2,Role:"Candidate"},Organizer:{RoleId:3,Role:"Organizer"},Manager:{RoleId:4,Role:"Manager"},Coordinator:{RoleId:5,Role:"Coordinator"},Judge:{RoleId:6,Role:"Judge"},Guest:{RoleId:7,Role:"Guest"},SubCoordinator:{RoleId:8,Role:"SubCoordinator"},Projector:{RoleId:9,Role:"Projector"},SubAdmin:{RoleId:10,Role:"SubAdmin"},ContentAdmin:{RoleId:11,Role:"ContentAdmin"},User:{RoleId:12,Role:"User"},DrawMaster:{RoleId:13,Role:"DrawMaster"},ScoreMaster:{RoleId:14,Role:"ScoreMaster"},Guardian:{RoleId:15,Role:"Guardian"}};localStorage.getItem("accessToken");function de({user:m,operation:n,eventCategory:a,eventId:r}){const[c,f]=o.useState(3),[l,g]=o.useState(!1),[i,h]=o.useState(null),[j,p]=o.useState(!1),[v,S]=o.useState(""),[N,C]=o.useState(""),[R,b]=o.useState(!1),[U,y]=o.useState(null),w=H("/UsersRolesPlusUsersJson/Get",{filter:{Event:r,Role:Y[n].RoleId},updateUrl:"/CoordinatorJson/SaveUser",deleteUrl:"/CoordinatorJson/RemoveCoordinator",limit:10,sort:{sortOrder:"DESC",sortColumn:"UserRoleId"},select:"Event,Role,SixDigitPassword,Status,User,UserEmail,UserEmailCode,UserName,UserNameCode,UserRoleId"});let{rows:t,row:d,setFilter:s,setOffset:x,localOffset:E,localSort:k,filters:M,update:A,delete:P,status:B,setOffsetAndLimit:O}=w;console.log({users:t},{pageDetails:d},{setFilter:s},{setOffset:x},{localOffset:E},{localSort:k},{filters:M},{updateUserRole:A},{deleteUserRole:P},{loadingStatus:B},{setOffsetAndLimit:O});const T=(u,G)=>{const J=`https://wa.me/?text=Hello! ${u} Sharing ${G}`;window.open(J,"_blank")};return e.jsx(L,{heading:"Manage User Roles - "+n,childrenClasses:"px-2 py-2",headingClasses:"px-3",outerClasses:"max-w-full mx-auto ml-5 bg-gray-50 print:hidden",children:e.jsxs("div",{className:"",children:[l&&e.jsx(I,{}),e.jsx(X,{...w,fields:[{heading:"Name",column:"UserName"},{heading:"Email",column:"UserEmail"}],searchFields:[{heading:"Name",type:"text",column:"UserName"}],actions:[{type:"whatsapp",icon:"fa-share",onClick:u=>T(u.UserName,u.UserEmail)},{type:"edit",icon:"fa-trash",onClick:u=>{y(u.UserRoleId),b(!0)}},{type:"delete",icon:"fa-trash",onClick:u=>{y(u.UserRoleId),b(!0)}}]})]})})}export{de as default};
