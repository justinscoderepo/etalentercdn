import{r as o,x as N,u as w,j as e,p as h,z as l,i as v}from"./main-D6fL8wl5.js";import{O as I}from"./OldNewTabLayout-BpLtAG3G.js";import{L as S}from"./layoutOuter-Cord-Ocz.js";import{P as C}from"./pageHeader-BC079V6D.js";import{u as P}from"./index.esm-CaUAy6NW.js";import{F as V}from"./PlusIcon-Cdkxxx9E.js";import{F as D}from"./TrashIcon-CyGd9AZh.js";import{d}from"./tabs-Du4qFOmN.js";import"./navigationUtils-iQi8X97Q.js";import"./use-resolve-button-type-DgiJnJh5.js";import"./keyboard-B66pbDPr.js";import"./use-is-mounted-QNgqEsQy.js";function k({title:s,titleId:i,...n},a){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":i},n),s?o.createElement("title",{id:i},s):null,o.createElement("path",{fillRule:"evenodd",d:"M4.5 3.75a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V6.75a3 3 0 0 0-3-3h-15Zm4.125 3a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Zm-3.873 8.703a4.126 4.126 0 0 1 7.746 0 .75.75 0 0 1-.351.92 7.47 7.47 0 0 1-3.522.877 7.47 7.47 0 0 1-3.522-.877.75.75 0 0 1-.351-.92ZM15 8.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15ZM14.25 12a.75.75 0 0 1 .75-.75h3.75a.75.75 0 0 1 0 1.5H15a.75.75 0 0 1-.75-.75Zm.75 2.25a.75.75 0 0 0 0 1.5h3.75a.75.75 0 0 0 0-1.5H15Z",clipRule:"evenodd"}))}const E=o.forwardRef(k);function G({prefixKey:s,title:i}){const{eventDetails:n}=N(),[a,r]=o.useState(!1),{rows:c,refetch:m}=w("/SetupJson/GetIdPrefixSettings",{filter:`EventCategory=${n?.EventCategoryId||0}&Key=${s}`,select:"IdPrefixId,GroupGroupName,Value,IntValue,Key,EventCategory"}),x=c||[],{register:u,handleSubmit:g,reset:f,formState:{errors:p}}=P(),b=async t=>{try{await h("/SetupJson/KeepIdPrefix",{...t,EventCategory:n?.EventCategoryId,Key:s,IntValue:3}),l.success("ID prefix saved successfully"),m(),f(),r(!1)}catch{l.error("Failed to save ID prefix")}},y=async t=>{if(confirm("Are you sure you want to delete this ID prefix?"))try{await h("/SetupJson/RemoveIdPrefix",{IdPrefixId:t}),l.success("ID prefix deleted successfully"),m()}catch{l.error("Failed to delete ID prefix")}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-base font-medium text-onSurface",children:i}),e.jsxs("button",{onClick:()=>r(!a),className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover",children:[e.jsx(V,{className:"h-4 w-4"}),"Add Prefix"]})]}),a&&e.jsxs("div",{className:"bg-contentBgOuter p-4 rounded-lg border border-border shadow-sm mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-onSurface mb-4",children:"Add New ID Prefix"}),e.jsxs("form",{onSubmit:g(b),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-onSurface mb-1",children:"Group/Category Name *"}),e.jsx("input",{type:"text",...u("GroupGroupName",{required:!0}),className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"E.g., Junior Category"}),p.GroupGroupName&&e.jsx("span",{className:"text-xs text-red-600",children:"This field is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-onSurface mb-1",children:"Prefix Value *"}),e.jsx("input",{type:"text",...u("Value",{required:!0}),className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"E.g., JR-"}),p.Value&&e.jsx("span",{className:"text-xs text-red-600",children:"This field is required"})]})]}),e.jsxs("div",{className:"flex justify-end gap-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{r(!1),f()},className:"inline-flex items-center gap-x-2 rounded-md bg-surfaceVariant px-4 py-2 text-sm font-semibold text-onSurfaceVariant shadow-sm hover:bg-surfaceCard",children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover",children:"Save Prefix"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.length===0?e.jsx("div",{className:"col-span-full text-center py-8 bg-surfaceCard rounded-lg border border-border",children:e.jsx("p",{className:"text-sm text-onSurfaceVariant",children:"No ID prefixes configured yet. Add your first prefix above."})}):x.map(t=>e.jsx("div",{className:"bg-contentBgOuter p-4 rounded-lg border border-border shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-onSurface",children:t.GroupGroupName}),e.jsx("p",{className:"text-xs text-onSurfaceVariant mt-1 font-mono bg-surfaceVariant px-2 py-1 rounded inline-block",children:t.Value})]}),e.jsx("button",{onClick:()=>y(t.IdPrefixId),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(D,{className:"h-4 w-4"})})]})},t.IdPrefixId))})]})}function $(){const[s,i]=o.useState(1),n=[{title:"New React View",active:!0},{title:"Old View",path:"/SetUp/IdPrefix"}],a=[{name:"Unique ID Prefix",key:"unique",prefixKey:5},{name:"Chest Card ID Prefix",key:"chest",prefixKey:1},{name:"Draw ID Settings",key:"draw",prefixKey:3}];return e.jsx(I,{tabs:n,children:e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col grow",children:[e.jsx(C,{heading:"Participant ID Card Settings",subHeading:"Configure ID card prefix formats for different participant types",rightChildren:e.jsxs("div",{className:"flex items-center gap-x-2 text-gray-600",children:[e.jsx(E,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"ID Configuration"})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs(d.Group,{selectedIndex:s,onChange:i,children:[e.jsx(d.List,{className:"flex space-x-1 rounded-xl bg-surfaceVariant p-1 mb-4",children:a.map(r=>e.jsx(d,{className:({selected:c})=>v("w-full rounded-lg py-2.5 text-sm font-medium leading-5","ring-white ring-opacity-60 ring-offset-2 ring-offset-primary focus:outline-none focus:ring-2",c?"bg-white shadow text-primary":"text-gray-700 hover:bg-white/[0.12] hover:text-gray-900"),children:r.name},r.key))}),e.jsx(d.Panels,{children:a.map(r=>e.jsx(d.Panel,{children:e.jsx(G,{prefixKey:r.prefixKey,title:r.name})},r.key))})]})})]})})})}export{$ as default};
