import{r as g,p as T,j as n,a as U}from"./mainweb-CqMFqOvn.js";import{p as Q}from"./httpService-CCUnmMNR.js";function X({title:e,titleId:i,...d},s){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":i},d),e?g.createElement("title",{id:i},e):null,g.createElement("path",{fillRule:"evenodd",d:"M2 3a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1H2Zm0 4.5h16l-.811 7.71a2 2 0 0 1-1.99 1.79H4.802a2 2 0 0 1-1.99-1.79L2 7.5ZM10 9a.75.75 0 0 1 .75.75v2.546l.943-1.048a.75.75 0 1 1 1.114 1.004l-2.25 2.5a.75.75 0 0 1-1.114 0l-2.25-2.5a.75.75 0 1 1 1.114-1.004l.943 1.048V9.75A.75.75 0 0 1 10 9Z",clipRule:"evenodd"}))}const Z=g.forwardRef(X);function D({title:e,titleId:i,...d},s){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":i},d),e?g.createElement("title",{id:i},e):null,g.createElement("path",{fillRule:"evenodd",d:"M3.43 2.524A41.29 41.29 0 0 1 10 2c2.236 0 4.43.18 6.57.524 1.437.231 2.43 1.49 2.43 2.902v5.148c0 1.413-.993 2.67-2.43 2.902a41.102 41.102 0 0 1-3.55.414c-.28.02-.521.18-.643.413l-1.712 3.293a.75.75 0 0 1-1.33 0l-1.713-3.293a.783.783 0 0 0-.642-.413 41.108 41.108 0 0 1-3.55-.414C1.993 13.245 1 11.986 1 10.574V5.426c0-1.413.993-2.67 2.43-2.902Z",clipRule:"evenodd"}))}const B=g.forwardRef(D);function ee({title:e,titleId:i,...d},s){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":i},d),e?g.createElement("title",{id:i},e):null,g.createElement("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z",clipRule:"evenodd"}))}const G=g.forwardRef(ee);function ie({title:e,titleId:i,...d},s){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":i},d),e?g.createElement("title",{id:i},e):null,g.createElement("path",{fillRule:"evenodd",d:"M14.5 1A4.5 4.5 0 0 0 10 5.5V9H3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-1.5V5.5a3 3 0 1 1 6 0v2.75a.75.75 0 0 0 1.5 0V5.5A4.5 4.5 0 0 0 14.5 1Z",clipRule:"evenodd"}))}const te=g.forwardRef(ie);function ne({title:e,titleId:i,...d},s){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":i},d),e?g.createElement("title",{id:i},e):null,g.createElement("path",{d:"m2.695 14.762-1.262 3.155a.5.5 0 0 0 .65.65l3.155-1.262a4 4 0 0 0 1.343-.886L17.5 5.501a2.121 2.121 0 0 0-3-3L3.58 13.419a4 4 0 0 0-.885 1.343Z"}))}const le=g.forwardRef(ne),de=[{id:"01",name:"Agreement",href:"#",status:"inactive"},{id:"02",name:"Participant Type",href:"#",status:"inactive"},{id:"03",name:"User",href:"#",status:"inactive",label:"User Profile"},{id:"03",name:"Team Member Profile",href:"#",status:"inactive",label:"First User Profile"},{id:"04",name:"Team",href:"#",status:"inactive",label:"Team Profile"},{id:"05",name:"Organization",href:"#",status:"inactive"},{id:"06",name:"Participations",href:"#",status:"inactive"},{id:"07",name:"Team Members",href:"#",status:"inactive"},{id:"08",name:"Payment",href:"#",status:"inactive"}];function ce(e,i,d,s,a,r,l,o,P,t,p,A,L,w,f,h,J=!1,I){var c,R,V,$,Y;if(a)switch(e){case"Agreement":{let u=T(I==null?void 0:I.JsonSettings);i=(w==null?void 0:w.UId)==(r==null?void 0:r.User)?{...l,...u}:{...u};break}case"User":{o!=null&&(i={...o,...P});break}case"Participant Type":{i={ParticipantType:t};break}case"Team":{i={...p,...h,TeamName:p==null?void 0:p.TeamTeamName};break}case"Organization":{i=(w==null?void 0:w.UId)==r.User?{...l}:{};break}case"Team Members":{debugger;i={...p,...h}}case"Participations":{let u=(w==null?void 0:w.UId)==(r==null?void 0:r.User)?r:{},N={...A};N.ParticipantsList=(c=N.ParticipantsList)==null?void 0:c.filter(y=>y.Candidate==(u==null?void 0:u.UserRoleId)||y.Candidate==(f==null?void 0:f.Team)),i={...P,...l,...N,...u,...f,...a,participantType:t},t=="Team"&&(i={...i,...p}),i.selectedCompetitions=((R=N.ParticipantsList)==null?void 0:R.map(y=>y.Competition))??[];break}case"Payment":{let u=(w==null?void 0:w.UId)==(r==null?void 0:r.User)?r:{},N={...A};N.ParticipantsList=(V=N.ParticipantsList)==null?void 0:V.filter(y=>y.Candidate==(u==null?void 0:u.UserRoleId)||y.Candidate==(f==null?void 0:f.Team)),i={...P,...l,...N,...u,...f,...h,...a,participantType:t},t=="Team"&&(i={...i,...p}),i.selectedCompetitions=(($=N.ParticipantsList)==null?void 0:$.map(y=>y.Competition))??[];break}}let E={};Object.keys(i).forEach(u=>{var y;let N=((y=u[0])==null?void 0:y.toLowerCase())+u.slice(1);E[N]||(E[N]=i[u])});let F=L?(Y=L[e])==null?void 0:Y.filter(u=>!E[u.name]):[];return F==null||F.forEach(u=>{E[u.name]=""}),E}function fe(e){var d;let i=[];return(d=Object.keys(e))==null||d.forEach(s=>{var a;(a=e[s])==null||a.forEach(r=>{i.push(r)})}),i}function ue(e,i,d,s,a,r){if(s&&e){let l=Object.keys(e),o=[...i.filter(t=>{var p;return l.includes(t.name)&&e[t.name]&&((p=e[t.name])==null?void 0:p.length)>0})];(a==null?void 0:a.length)>0&&(o=o.filter(t=>t.name!=="Agreement")),d&&(o=o.filter(t=>t.name!=="Agreement")),o.filter(t=>t.name==="Team"||t.name==="User").length==2||(o=o.filter(t=>t.name!=="Participant Type")),s=="Individual"&&(o=o.filter(t=>t.name!=="Team"&&t.name!=="Team Members"&&t.name!=="Team Member Profile")),s=="Team"&&(o=o.filter(t=>t.name!=="User"),r||(o=o.filter(t=>t.name!=="Team Member Profile")));for(let t=0;t<o.length;t++)o[t].id=(t+1).toString().padStart(2,"0");return o}else return[]}function me(e,i){let d=e.find(s=>s.status==="active");return!d&&e.length>0&&(e[0].status="active",d=e[0]),d}function he(e,i,d){if(i)if(e[i.name]){let s=e[i.name];return s.forEach(a=>{a.name=a.name.charAt(0).toLowerCase()+a.name.slice(1)}),[...s]}else return[]}async function O(e,i,d,s){let[a,r,l]=await e(!0);return se(a==null?void 0:a[0],i,d,s)}function se(e,i,d,s){var A,L,w;debugger;let a=e,r=(L=(A=a==null?void 0:a.UsersList)==null?void 0:A.filter(f=>!f.TeamTeamName))==null?void 0:L.map(f=>{let h=f;if(h.User=h.CandidateUser,h.UserRoleId=h.Candidate,h.LevelSettings){let J=h.LevelSettings;h={...h,...J}}return h}),l=i||d?r==null?void 0:r.find(f=>f.Candidate==i||f.CandidateUser==d):null,o=r==null?void 0:r.map(f=>ae(f)),P=l!=null&&l.User?o==null?void 0:o.find(f=>f.UId==(l==null?void 0:l.User)):null,t=(w=a==null?void 0:a.UsersList)==null?void 0:w.filter(f=>f.TeamTeamName);console.log("teams",t);let p=s?t==null?void 0:t.find(f=>f.Team==s):null;return console.log("teams",t),{userRoles:r,userRole:l,users:o,userData:P,participationDetails:a,teams:t,teamData:p}}function ae(e){return{UId:e.User,Name:e.UserName,Email:e.UserEmail,Phone:e.UserPhone,Mobile:e.UserMobile,DobString:e.UserDobString,ProfilePicture:e.UserImage,JsonSettings:e.UserJsonSettings}}let k=(e,i,d,s)=>{let a=i.map(l=>l.name),r={};return Object.keys(e).forEach(l=>{s&&s.find(o=>o.toLowerCase()==l.toLowerCase())||(a.find(o=>o.toLowerCase()==l.toLowerCase())&&(r[l]=e[l]),d&&d.find(o=>o.toLowerCase()==l.toLowerCase())&&(r[l]=e[l]))}),r};const ge=async(e,i,d,s,a,r,l,o,P,t,p,A,L,w,f,h,J,I,E,F,c,R,V,$,Y,u,N)=>{var H,W,_,z;let y={};switch(d.name){case"Agreement":{let j={...s};j.JsonSettings=JSON.stringify({...r,...e});try{return Y(j),!0}catch(b){return console.error(b),!1}}case"Participant Type":return!0;case"Team Members":return!0;case"Team Member Profile":y=l;case"User":{debugger;let j=["name","email","phone","mobile","dobString","profilePicture","uId"],b=k(e,A,j);b.UId=(I==null?void 0:I.UId)==(l==null?void 0:l.UId)?l==null?void 0:l.UId:I==null?void 0:I.UId;let S=k(e,A,[],j),C={...b,...y};C.JsonSettings=JSON.stringify({...o,...S});let x=!(l!=null&&l.Email);try{let{data:m}=await w(C);if(x&&((H=m==null?void 0:m.Results)!=null&&H.token)){sessionStorage.clear();let v={user:{...m.Results.user},token:m.Results.token};localStorage.setItem("user",JSON.stringify(v)),l=m.Results.user,F(m.Results.user),I=m.Results.user}else if(m!=null&&m.Results){let v=m.Results;l=v,F(v),I=v}return{userRoles:a,userRole:s}=await O(h,null,l==null?void 0:l.UId,null),i&&Object.keys(i).length>0&&(i.UserRoleId=s.UserRoleId,await L(i)),U.success("The basic user details saved successfully, please proceed to the next step"),!0}catch(m){return console.error(m),!1}}case"Team":{let j=["teamName","teamId"],b=k({...e},A,j);b.TeamName=e.TeamName,b.TeamId=c==null?void 0:c.Team;let S=k(e,A,[],j);b.JsonSettings=JSON.stringify({...S});try{let{data:C}=await f(b);debugger;if(C!=null&&C.Results){let x=C.Results;t||(t={}),{teamData:t}=await O(h,null,null,x==null?void 0:x.TeamId);debugger;if(x!=null&&x.TeamId&&!t){let m=await Q("/CandidateJson/GetTeams",{TeamId:x==null?void 0:x.TeamId});t=(_=(W=m==null?void 0:m.data)==null?void 0:W.Results)==null?void 0:_.find(v=>v.TeamId==(x==null?void 0:x.TeamId)),t={...t,TeamTeamName:t==null?void 0:t.TeamName,Team:x==null?void 0:x.TeamId,TeamJsonSettings:t==null?void 0:t.JsonSettings}}R(t),c=t}return U.success("The basic team details saved successfully, please proceed to the next step"),!0}catch(C){return console.error(C),!1}}case"Participations":{let j=["name","email","phone","mobile","dobString"],b={...l};l&&Object.keys(l).forEach(v=>{j.find(M=>M.toLowerCase()==v.toLowerCase())&&(b["User"+v]=l[v])});let S=e.LevelSettings,C=e.group;s&&(s.group=C);let m=A.filter(v=>{var M;return((M=v.name)==null?void 0:M.toLowerCase())=="selectedcompetitions"}).length==0;if(((z=e.selectedCompetitions)==null?void 0:z.length)==0&&!m)return U.error("Please select at least one competition"),!1;debugger;if(m){debugger;let v={...s,...S,Group:C,...b};try{return await L(v),{userRoles:a,userRole:s,teamData:t}=await O(h,null,l==null?void 0:l.UId,c==null?void 0:c.Team),U.success("Your participations data saved successfully, please proceed to the next step"),!0}catch(M){return console.error(M),!1}}else{let v=[...e.selectedCompetitions],M=[...new Set(v)],K={UsersRolesModel:{...s,...S},ParticipantType:P=="Individual"?"1":"2",...S,Group:C,UsersModel:P=="Individual"?{...b,Candidate:s==null?void 0:s.UserRoleId,CandidateUser:s==null?void 0:s.User}:{...t,Team:c==null?void 0:c.TeamId,TeamTeamName:c==null?void 0:c.TeamName,Candidate:c==null?void 0:c.Team},CompetitionParticipantsModel:{CompetitionList:M}};try{return await J(K,!0),{participationDetails:p,userRoles:a,userRole:s,teamData:t}=await O(h,null,l==null?void 0:l.UId,c==null?void 0:c.Team),U.success("Your participations data saved successfully, please proceed to the next step"),!0}catch(q){return console.error(q),!1}}}case"Payment":if(P=="Individual"){let j={...s},b=k(e,A,[]);debugger;j.JsonSettings=JSON.stringify({...r,...b});try{await L(j);debugger;({participationDetails:p,userRoles:a,userRole:s}=await O(h,null,l==null?void 0:l.UId,null)),U.success("Your final step finished successfully and you finished the registration process. Please wait for the approval. Thank you. Any time, you can view the submitted information by click on submitted applications.",{duration:1e4});debugger;return!0}catch(S){return U.error(S.message),!1}}else{let j={...t,TeamId:c==null?void 0:c.Team},b=k(e,A,[]);e.FinishedSteps&&(b.FinishedSteps=e.FinishedSteps),j.JsonSettings=JSON.stringify({...u,...b});try{await f(j);debugger;return{participationDetails:p,teams:N,teamData:t}=await O(h,null,null,c==null?void 0:c.Team),U.success("Your final step finished successfully and you finished the registration process. Please wait for the approval. Thank you. Any time, you can view the submitted information by click on submitted applications.",{duration:1e4}),!0}catch(S){return console.error(S),U.error(S.message),!1}}default:return!1}},be=({person:e})=>(e==null?void 0:e.ApplicationStatusLabel)=="In Progress"?n.jsxs("span",{title:"Feel free to proceed with the final submission once you've included all participations and fees, and the status will be changed.",className:"bg-yellow-100 text-yellow-800 flex items-center rounded-full px-2.5 py-0.5 text-sm font-medium  ml-3 w-auto whitespace-nowrap",children:[n.jsx(le,{className:"h-4 w-4 mr-2 text-yellow-800","aria-hidden":"true"})," ",n.jsx("span",{className:"mt-0",children:"In Progress"})]}):(e==null?void 0:e.ApplicationStatusLabel)=="Approved"?n.jsxs("span",{title:"You can't change anything on this status.",className:"bg-green-100 text-green-900 flex items-center rounded-full px-2.5 py-0.5 text-sm font-medium  ml-3  w-auto whitespace-nowrap",children:[n.jsx(G,{className:"h-4 w-4 mr-2 text-green-900","aria-hidden":"true"}),n.jsx("span",{className:"mt-0",children:"Approved"})]}):(e==null?void 0:e.ApplicationStatusLabel)=="Waiting for Approval"?n.jsxs("span",{title:"You can't change anything on this status.",className:"bg-blue-100 text-blue-800 flex items-center rounded-full px-2.5 py-0.5 text-sm font-medium  ml-3  w-auto whitespace-nowrap",children:[n.jsx(te,{className:"h-4 w-4 mr-2 text-blue-800","aria-hidden":"true"}),n.jsx("span",{className:"mt-0",children:"Waiting for Approval"})]}):(e==null?void 0:e.ApplicationStatusLabel)=="Rejected"?n.jsxs("span",{title:"You can't change anything on this status.",className:"bg-red-100 text-red-800 flex items-center rounded-full px-2.5 py-0.5 text-sm font-medium  ml-3  w-auto whitespace-nowrap",children:[n.jsx(Z,{className:"h-4 w-4 mr-2 text-red-800","aria-hidden":"true"}),n.jsx("span",{className:"mt-0",children:"Rejected"})]}):(e==null?void 0:e.ApplicationStatusLabel)=="Reviewed"?n.jsxs("span",{title:"You can't change anything on this status.",className:"bg-orange-100 text-orange-800 flex items-center rounded-full px-2.5 py-0.5 text-sm font-medium  ml-3  w-auto whitespace-nowrap",children:[n.jsx(B,{className:"h-4 w-4 mr-2 text-orange-800","aria-hidden":"true"}),n.jsx("span",{className:"mt-0",children:"Reviewed"})]}):n.jsx("span",{className:"inline-flex items-center justify-center px-2.5 py-1  text-xs text-red-700 bg-red-100 rounded-md hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 whitespace-nowrap",children:n.jsx("span",{children:(e==null?void 0:e.ApplicationStatusLabel)??"No Status"})}),xe=({person:e,onClick:i})=>(e==null?void 0:e.ApplicationStatusLabel)=="In Progress"?n.jsxs("button",{type:"button",onClick:()=>i(e,"Reviewed"),className:"inline-flex items-center gap-x-1.5 rounded-md bg-orange-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:[n.jsx(B,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),n.jsx("span",{children:"Add Review"})]}):(e==null?void 0:e.ApplicationStatusLabel)=="Approved"?n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>i(e,"Reviewed"),className:"inline-flex items-center gap-x-1.5 rounded-md bg-orange-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:[n.jsx(B,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),n.jsx("span",{children:"Review Again"})]}),n.jsxs("button",{onClick:()=>i(e,"Rejected"),className:"inline-flex items-center gap-x-1.5 rounded-md bg-red-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600",children:[n.jsx(Z,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),n.jsx("span",{children:"Reject"})]})]}):(e==null?void 0:e.ApplicationStatusLabel)=="Waiting for Approval"||(e==null?void 0:e.ApplicationStatusLabel)=="Reviewed"?n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>i(e,"Reviewed"),className:"inline-flex items-center gap-x-1.5 rounded-md bg-orange-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:[n.jsx(B,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),n.jsx("span",{children:"Review"})]}),n.jsxs("button",{onClick:()=>i(e,"Rejected"),className:"inline-flex items-center gap-x-1.5 rounded-md bg-red-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600",children:[n.jsx(Z,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),n.jsx("span",{children:"Reject"})]}),n.jsxs("button",{onClick:()=>i(e,"Approved"),className:"inline-flex items-center gap-x-1.5 rounded-md bg-green-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600",children:[n.jsx(G,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),n.jsx("span",{children:"Approve"})]})]}):(e==null?void 0:e.ApplicationStatusLabel)=="Rejected"?n.jsxs("button",{onClick:()=>i(e,"Reviewed"),className:"inline-flex items-center gap-x-1.5 rounded-md bg-orange-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:[n.jsx(B,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),n.jsx("span",{children:"Review Again"})]}):n.jsx(n.Fragment,{}),we=({currentReviewStatus:e,onClick:i})=>e=="Approved"?n.jsxs("button",{type:"button",onClick:()=>i("Approved"),className:"inline-flex items-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600",children:[n.jsx(G,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),n.jsx("span",{children:"Submit Review"})]}):e=="Rejected"?n.jsxs("button",{type:"button",onClick:()=>i("Rejected"),className:"inline-flex items-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600",children:[n.jsx(Z,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),n.jsx("span",{children:"Mark as Rejected"})]}):e=="Reviewed"?n.jsxs("button",{type:"button",onClick:()=>i("Reviewed"),className:"inline-flex items-center rounded-md bg-orange-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",children:[n.jsx(B,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),n.jsx("span",{children:"Send Review"})]}):n.jsx(n.Fragment,{});export{le as F,we as S,be as U,xe as a,G as b,B as c,fe as d,se as e,me as f,ue as g,he as h,de as r,ge as s,ce as u};
