import{r as s,j as r}from"./mainweb-otElfYOs.js";import{u as Z}from"./XMarkIcon-CHzbXRsc.js";import{R as B}from"./renderComponents-so4uAjNw.js";function q({title:o,titleId:n,...e},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":n},e),o?s.createElement("title",{id:n},o):null,s.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z",clipRule:"evenodd"}))}const w=s.forwardRef(q),U=({isSubmitted:o,drop:n,data:e,isOver:a,selectedComponent:v,setSelectedComponent:y,components:l,setComponents:z,handlePropertiesPanelChange:N,removeComponent:S,isPlayGround:c,eventDetails:j,handleNext:C,isLastStep:O})=>{console.log("root new data received",JSON.stringify(e.participantsList));const{handleSubmit:E,register:J,unregister:R,control:L,clearErrors:F,reset:g,watch:V,getValues:p,setValue:u,trigger:A,formState:{errors:M}}=Z({defaultValues:{...e}});p();let[f,d]=s.useState({...e});console.log("new form7",JSON.stringify(f)),console.log("new form6",JSON.stringify(e)),s.useEffect(()=>{e&&(console.log("new data received3",JSON.stringify(e.participantsList)),Object.keys(e).forEach(i=>{R(i),u(i,e[i])}),console.log("new data received4",JSON.stringify(e.participantsList)),d({...e}))},[e]);const D=i=>{y(i)},H=async i=>{await C(i,g),console.log("new form8",JSON.stringify(i.participantsList))},b=(i,t)=>{if(i==="participantsList"){console.log("new form10",JSON.stringify(t));debugger}console.log(i,t),u(i,t),e&&(e[i]=t),d({...e}),console.log("new form9",JSON.stringify(e.participantsList))};let m=[...l];return f&&(l==null?void 0:l.length)>0&&(m=m.filter(i=>{let t=i.conditions;return(t==null?void 0:t.length)>0?!!t.find(h=>{let x=f[h.key];if(x&&x==h.value)return!0}):!0})),r.jsx("div",{className:("flex-auto p-2 "+c,""),children:r.jsxs("form",{onSubmit:E(H),children:[r.jsx(B,{handlePropertiesChange:b,handlePropertiesPanelChange:N,formData:f,isPlayGround:c,onChangeValue:b,drop:n,isSubmitted:o,isOver:a,eventDetails:j,components:m,selectedComponent:v,handleSelect:D,register:J,getValues:p,errors:M,control:L,setValue:u,clearErrors:F,reset:g,watch:V,removeComponent:S}),!c&&!o&&r.jsx("div",{className:"mb-2 w-full flex justify-end px-8",children:O?r.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[r.jsx(w,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Submit"]}):r.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[r.jsx(w,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Next"]})})]})})};export{U as F,w as a};
