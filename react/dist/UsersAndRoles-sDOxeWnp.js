import{r as s,j as t,p as G,L as O,R as L,b as B}from"./mainweb-DlsQWVuo.js";import{B as Z}from"./box-BKCFwQUA.js";import{u as z}from"./useConfirmation-DCMdwGx-.js";import{c as k}from"./utilities-CN4lTu6a.js";import{F as q}from"./ShareIcon-Bo_Hdvbc.js";import{F as H}from"./TrashIcon-CX6coWMl.js";import{F as Y}from"./PlusIcon-CdO1uGiS.js";import{u as K}from"./useBackend-DJYAxXEq.js";import"./dialog-CJFKSFw7.js";import"./keyboard-C58jqPTh.js";import"./CheckIcon-C_dIc0Ch.js";import"./httpService-CkOkd-9t.js";import"./index-t--hEgTQ.js";function Q({title:a,titleId:n,...x},i){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":n},x),a?s.createElement("title",{id:n},a):null,s.createElement("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}const W=s.forwardRef(Q);function X({title:a,titleId:n,...x},i){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":n},x),a?s.createElement("title",{id:n},a):null,s.createElement("path",{fillRule:"evenodd",d:"M3.74 3.749a.75.75 0 0 1 .75.75V15h13.938l-2.47-2.47a.75.75 0 0 1 1.061-1.06l3.75 3.75a.75.75 0 0 1 0 1.06l-3.75 3.75a.75.75 0 0 1-1.06-1.06l2.47-2.47H3.738a.75.75 0 0 1-.75-.75V4.5a.75.75 0 0 1 .75-.751Z",clipRule:"evenodd"}))}const ee=s.forwardRef(X);function te({title:a,titleId:n,...x},i){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":n},x),a?s.createElement("title",{id:n},a):null,s.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}const le=s.forwardRef(te),ae=L.lazy(()=>B(()=>import("./formEditor-fuTI4QIX.js"),[])),ne=L.lazy(()=>B(()=>import("./pagination-DlqoOopc.js"),[])),se=({status:a,formTitle:n,defaultFormValues:x,formDescription:i,rows:u=[],formFields:I=[],pageDetails:o={},fields:d=[],topActions:y=[],actions:w=[],setOffsetAndLimit:v=()=>{},searchFields:r=[],update:C=()=>{alert("Not Implemented")},delete:S=()=>{alert("Not Implemented")}})=>{console.log({rows:u});const[R,p]=z(),[f,E]=s.useState(()=>{const e={};return r==null||r.forEach(m=>{e[m.columnName]=""}),e}),[P,h]=s.useState(!1),[U,g]=s.useState(!1),[j,b]=s.useState(null),M=(e,m)=>{E(l=>({...l,[e]:m}))},_=()=>{console.log("Search Values:",f)},T=async e=>{h(!0),await S(e),h(!1)},V=e=>{b(e),g(!0),h(!0)},$=async e=>{await C(e),h(!1),g(!1),b(null)},J=()=>{h(!1),g(!1),b(null)},F=()=>t.jsx("div",{className:"min-h-5 w-full relative",children:t.jsx("div",{className:"relative right-0 md:-top-10",children:y.length>0&&t.jsx("div",{className:"flex justify-end items-end gap-x-2 gap-y-2",children:y.map((e,m)=>t.jsx("div",{className:"bg-white rounded-full shadow-sm p-2",children:t.jsxs("button",{className:k("font-medium text-sm py-2 px-2 rounded-3xl flex items-center justify-center shadow-sm",e.label?"px-3":"h-8 w-8",e.type==="new"?"bg-indigo-600 text-white":e.type==="export"?"bg-green-700 text-white":e.type==="custom"?"bg-gray-700 text-white":""),onClick:()=>{e.type==="new"?g(!0):e.type==="export"?console.log("Export"):e.type==="custom"&&(console.log("Custom Action"),e.callback&&e.callback())},children:[e.type==="new"&&t.jsx(Y,{className:"h-5 w-5 text-white"}),e.type==="export"&&t.jsx(W,{className:"h-5 w-5 text-white"}),e.type==="custom"&&t.jsxs(t.Fragment,{children:[e.icon,t.jsx("span",{className:"ml-2",children:e.label})]})]},m)}))})})});return t.jsxs(t.Fragment,{children:[t.jsx(R,{title:"Delete Item",description:"Are you sure you want to delete this item?",confirmButtonLabel:"Delete",confirmButtonClick:async e=>T(e),className:"w-96 print:hidden"}),t.jsxs("div",{className:"",children:[(r==null?void 0:r.length)>0&&t.jsxs("div",{className:"mb-0 flex flex-row justify-end gap-x-2 gap-y-2",children:[r==null?void 0:r.map((e,m)=>t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:"absolute -top-2 left-2 inline-block rounded-lg bg-white px-1 text-xs font-medium text-gray-900",children:["Search By ",e.label]}),e.type==="text"&&t.jsx("input",{type:"text",placeholder:"Enter "+(e.placeholder||e.label),value:f[e.columnName],onChange:l=>M(e.columnName,l.target.value),className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900   placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 border-gray-300 focus:outline-gray-50 sm:text-sm/6"}),e.type==="select"&&t.jsx("select",{value:f[e.columnName],onChange:l=>M(e.columnName,l.target.value),className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900  placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-darkprimary sm:text-sm/6",children:e.options.map((l,c)=>t.jsx("option",{value:l.value,children:l.label},c))})]},m)),t.jsx("button",{type:"button",onClick:_,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary hover:bg-darkprimary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-darkprimary",children:"Search"})]}),t.jsx("div",{className:"relative mt-12",children:t.jsxs("table",{className:"min-w-full md:divide-y md:divide-gray-300 flex flex-col md:table ",children:[(d==null?void 0:d.length)>0&&t.jsx("thead",{className:"flex flex-grow md:table-header-group ",children:t.jsxs("tr",{className:"md:bg-gray-200 flex md:table-row flex-grow justify-end",children:[d.map((e,m)=>t.jsx("th",{className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-3 hidden md:table-cell",children:e.label},m)),t.jsx("th",{children:t.jsx(F,{})})]})}),(u==null?void 0:u.length)>0&&t.jsx("tbody",{className:"md:divide-y md:divide-gray-200 flex flex-grow md:table-row-group flex-col gap-y-3",children:u.map((e,m)=>{for(let l in e)if(l.indexOf("JsonSettings")>-1&&l.indexOf(".")==-1)try{let c=G(e[l]);if(c)for(let N in c)e[l+"Object."+N]=c[N],console.log({row:e})}catch(c){console.error("Error parsing JSON:",c)}return t.jsxs("tr",{className:"flex md:table-row flex-col py-4 md:py-0 px-4 md:px-0 shadow-md md:shadow-none",children:[d==null?void 0:d.map((l,c)=>t.jsxs("td",{className:"whitespace-nowrap md:px-3 py-2 md:py-4 text-sm text-gray-500 flex flex-row justify-between md:table-cell",children:[t.jsx("span",{className:"md:hidden font-semibold text-gray-900",children:l.label}),l.asOptionList?t.jsx("ul",{className:"list-disc mr-2 ml-3",children:e[l.column]&&e[l.column].length>0?e[l.column].map((N,D)=>t.jsx("li",{className:"text-gray-700 font-normal text-xs",children:N.label},D)):t.jsx("span",{className:"text-gray-900 font-semibold",children:"-"})}):t.jsx("span",{className:"",children:e[l.column]})]},c)),w.length>0&&t.jsx("td",{className:"whitespace-nowrap text-sm font-medium mt-3 md:mt-0",children:t.jsx("div",{className:"flex justify-end gap-x-2 gap-y-2",children:w.map((l,c)=>t.jsxs("button",{title:l.label,className:k("h-8 w-8 font-semibold py-2 px-2 rounded-3xl flex items-center justify-center",l.type==="whatsapp"?"bg-green-700 text-white":l.type==="edit"?"bg-primary text-white":l.type==="delete"?"bg-red-800 text-white":""),onClick:()=>{l.type==="whatsapp"?l.callback&&l.callback(e):l.type==="edit"?V(e):l.type==="delete"&&p(e)},children:[l.type==="whatsapp"&&t.jsx(q,{className:"h-5 w-5 text-white"}),l.type==="edit"&&t.jsx(le,{className:"h-4 w-4 text-white"}),l.type==="delete"&&t.jsx(H,{className:"h-5 w-5 text-white"})]},c))})})]},m)})}),(u==null?void 0:u.length)===0&&a!="finished"&&t.jsx("tbody",{className:"bg-white flex justify-center",children:t.jsx("tr",{className:"flex justify-center",children:t.jsx(O,{})})})]})}),o&&t.jsx(ne,{rowsFrom:o==null?void 0:o.rowsFrom,rowsTo:o==null?void 0:o.rowsTo,totalRowCount:o==null?void 0:o.totalRowCount,setOffsetAndLimit:v}),U&&t.jsx(ae,{description:i,title:n,row:j||x,fields:I,onSave:$,onCancel:J})]})]})};let A={SuperAdmin:{RoleId:1,Role:"SuperAdmin"},Candidate:{RoleId:2,Role:"Candidate"},Organizer:{RoleId:3,Role:"Organizer"},Manager:{RoleId:4,Role:"Manager"},Coordinator:{RoleId:5,Role:"Coordinator"},Judge:{RoleId:6,Role:"Judge"},Guest:{RoleId:7,Role:"Guest"},SubCoordinator:{RoleId:8,Role:"SubCoordinator"},Projector:{RoleId:9,Role:"Projector"},SubAdmin:{RoleId:10,Role:"SubAdmin"},ContentAdmin:{RoleId:11,Role:"ContentAdmin"},User:{RoleId:12,Role:"User"},DrawMaster:{RoleId:13,Role:"DrawMaster"},ScoreMaster:{RoleId:14,Role:"ScoreMaster"},Guardian:{RoleId:15,Role:"Guardian"}};function ye({user:a,operation:n,eventCategory:x,eventId:i}){var R;const[u,I]=s.useState(!1),o=K("/UsersRolesPlusUsersJson/Get",{filter:{Event:i,Role:A[n].RoleId,CreatedBy:a.UId,Status:"1"},updateUrl:"/SetupJson/SaveUser",deleteUrl:"/SetupJson/RemoveCoordinator",limit:10,sort:{sortOrder:"DESC",sortColumn:"UserRoleId"},select:"Event,Role,SixDigitPassword,Status,User,UserEmail,UserEmailCode,UserName,UserNameCode,UserRoleId,JsonSettings"});let{rows:d,update:y}=o;const w=({UserName:p,UserEmail:f,SixDigitPassword:E})=>{let P=window.location.origin,h=btoa(p),U=btoa(f),g=btoa(i),j=encodeURIComponent(f);const b=`https://api.whatsapp.com/send?text=Hi%20${p},%0AYour%20login%20details%20are:%0A%0AUserName%3A%20${j}%0AðŸ”‘Password%3A%20${E}%0APlease%20follow%20the%20following%20link%20to%20login:%0A${P}%2FAccount%2FLogin%3FeventId%3D${g}%26name%3D${h}%26Email%3D${U}`;window.open(b,"_blank")};var v=[{type:"new",title:"New"}];let r={Event:i,Role:A[n].RoleId,RoleRole:A[n].Role,Status:"1",CreatedBy:a.UId};(R=d==null?void 0:d.filter(p=>p.UserEmail==a.Email))!=null&&R.length||v.push({type:"custom",callback:()=>y({...r,UserName:a.Name,UserEmail:a.Email}),icon:t.jsx(ee,{className:"h-5 w-5"}),label:"Create Yourself as "+n,onClick:()=>handleAddUser({UserName:a.Name,UserEmail:a.Email})});let C=[{label:"Name",column:"UserName"},{label:"Email",column:"UserEmail"},{label:"Accessible Sections",column:"JsonSettingsObject.AccessibleSections",asOptionList:!0}],S=[{name:"UserName",label:"Name",type:"text",validate:{required:!0,minLength:3,maxLength:50}},{name:"UserEmail",label:"Email",type:"text",validate:{required:!0,email:!0}},{name:"JsonSettingsObject.AccessibleSections",label:"Accessible Sections",type:"select",multiple:!0,options:[{text:"All",value:"All"},{text:"Event SetUp",value:"EventSetup"},{text:"Candidate Edit & Approve",value:"CandidateEditApprove"},{text:"Advanced Event Configurations",value:"AdvancedEventSetup"},{text:"Bulk Participants Management",value:"BulkParticipants"},{text:"Users Roles Management",value:"UsersRoles"},{text:"Print and Download",value:"PrintAndDownload"},{text:"Score Management",value:"ScoreManagement"},{text:"Draw Management",value:"DrawManagement"},{text:"Time Management",value:"TimeManagement"},{text:"Result Printing",value:"ResultPrinting"},{text:"Result Individual Printing Only",value:"ResultIndividualPrinting"},{text:"Publish Results",value:"PublishResults"},{text:"Publish to Social Media",value:"PublishToSocialMedia"},{text:"Certificate Printing",value:"CertificatePrinting"},{text:"Unit Management",value:"UnitManagement"}],validate:{required:!0,email:!0}}];return t.jsx(Z,{heading:"Manage User Roles - "+n,childrenClasses:"px-0 py-2",headingClasses:"px-3",outerClasses:"max-w-full mx-auto ml-5 bg-gray-50 print:hidden ",children:t.jsxs("div",{className:"",children:[u&&t.jsx(O,{}),t.jsx(se,{...o,defaultFormValues:r,formTitle:"Manage User Roles - "+n,formDescription:"You can create new "+n+" by enter name and email",topActions:v,fields:C,searchFields:[{label:"Name",type:"text",column:"UserName"}],formFields:S,actions:[{type:"edit",icon:"fa-edit"},{type:"whatsapp",icon:"fa-share",callback:p=>w(p)},{type:"delete",icon:"fa-trash"}]})]})})}export{ye as default};
