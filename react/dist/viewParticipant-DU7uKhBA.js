import{r as l,d as ve,p as j,j as s,L as oe,g as we,_ as be}from"./mainweb-BHQuWjts.js";import{B as ne}from"./box-COB1HsJN.js";import{M as je}from"./modalForm-DTmcB7j5.js";import{F as Ne}from"./formSubmission-Cf-w2dqS.js";import{u as re,i as Ce}from"./useBackend-BwDSF5UA.js";import{r as ye,e as Re,g as Je,a as Te,u as Ue,U as Ae,b as Ee,S as Fe}from"./publicRegistrationHelper-D0HzgSRd.js";import{R as Le}from"./renderRegistrationForm-FX62MZ6h.js";import{p as Ie}from"./httpService-BRT9IC8-.js";import{e as Be}from"./computeTotalAmount-C5oW5LPo.js";import"./utilities-CN4lTu6a.js";import"./dialog-B9gXqWx3.js";import"./manageTeamParticipants-Cd0wzHhH.js";import"./index.esm-Ckg4NfsF.js";import"./renderComponents-fLGWWVU4.js";import"./validationMessage-ewAHHm2S.js";import"./clsx-B-dksMZM.js";import"./index-BtuGy7By.js";import"./XMarkIcon-DaVgglYC.js";import"./useConfirmation-Dv2655XB.js";import"./TrashIcon-D9zmS5Q1.js";function ce({title:e,titleId:v,...u},m){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:m,"aria-labelledby":v},u),e?l.createElement("title",{id:v},e):null,l.createElement("path",{fillRule:"evenodd",d:"M7.875 1.5C6.839 1.5 6 2.34 6 3.375v2.99c-.426.053-.851.11-1.274.174-1.454.218-2.476 1.483-2.476 2.917v6.294a3 3 0 0 0 3 3h.27l-.155 1.705A1.875 1.875 0 0 0 7.232 22.5h9.536a1.875 1.875 0 0 0 1.867-2.045l-.155-1.705h.27a3 3 0 0 0 3-3V9.456c0-1.434-1.022-2.7-2.476-2.917A48.716 48.716 0 0 0 18 6.366V3.375c0-1.036-.84-1.875-1.875-1.875h-8.25ZM16.5 6.205v-2.83A.375.375 0 0 0 16.125 3h-8.25a.375.375 0 0 0-.375.375v2.83a49.353 49.353 0 0 1 9 0Zm-.217 8.265c.178.018.317.16.333.337l.526 5.784a.375.375 0 0 1-.374.409H7.232a.375.375 0 0 1-.374-.409l.526-5.784a.373.373 0 0 1 .333-.337 41.741 41.741 0 0 1 8.566 0Zm.967-3.97a.75.75 0 0 1 .75-.75h.008a.75.75 0 0 1 .75.75v.008a.75.75 0 0 1-.75.75H18a.75.75 0 0 1-.75-.75V10.5ZM15 9.75a.75.75 0 0 0-.75.75v.008c0 .414.336.75.75.75h.008a.75.75 0 0 0 .75-.75V10.5a.75.75 0 0 0-.75-.75H15Z",clipRule:"evenodd"}))}const Oe=l.forwardRef(ce);function Ge({view:e,setActiveTab:v,getEvets:u,isCoordinatorView:m,setParticipantTypeInt:p,getParticipants:o,participantTypeInt:a,candidateId:f,closeModel:x,customComponents:w,allowEdit:T}){var K,P,D,ee,se,te;let{user:i}=ve();i==null||i.RoleTitle,((K=i==null?void 0:i.Email)==null?void 0:K.indexOf("justnshalom"))!=-1;let[g,W]=l.useState(null),[R,G]=l.useState({}),[b,k]=l.useState(null),[U,M]=l.useState(!1),[L,V]=l.useState(null),[J,H]=l.useState([]),[N,Z]=l.useState(a==1?"Individual":a==2?"Team":""),[I,t]=l.useState([...ye]);const{row:n,status:z}=re(u||"/CandidateJson/GetEvents",{select:"AllowDisplayCompetitionOrder,Description,EVId,EndDateString,EventCategory,EventCategoryTitle,EventLogo,EventName,IdentityBackgroundImage,OrganizationLogo,OrganizationName,OrganizationShortName,StartDateString,Venue,JsonSettings",doCache:!0});let X="finished",ae="finished",ie="finished",{row:_,status:ue}=re(o||"/CandidateJson/GetParticipants",{deleteUrl:"/CandidateJson/RemoveUser",mandatoryParams:["participantType"],select:"participantList,userList,UserEmail,UserName,UserDobString,UserImage,UserMobile,UserPhone,Email,Group,Candidate,CandidateUser,JsonSettings,Gender,GroupName,Fees,TeamTeamName,Team,TeamStrength,TeamMembersList,TeamMembers,TeamStrength,CandidateIdentityNumber,TeamIdentityNumber,CompetitionOrder,CreatedBy,CreatedByUserName,ParticipationId,UserJsonSettings,TeamJsonSettings,Remarks,LevelSettings,RegistrationId",updateUrl:"/CandidateJson/UpdateParticipant",doCache:!0,filter:f?{Candidate:f,...a==1?{participantType:"1"}:a==2?{participantType:"2"}:{}}:{}}),de=Re(_,f,g==null?void 0:g.UId,b==null?void 0:b.Team),{userRole:B,users:c,userData:A,teamData:E}=de;if(g=g||A,b=b||E,c!=null&&c.length||(P=j(localStorage.user))==null||P.user,N=="Team"){let r=(D=j(localStorage.user))==null?void 0:D.user;r&&((ee=r==null?void 0:r.Email)==null?void 0:ee.indexOf("justnshalom"))==-1}U=Ce(z,X,ae,ie,ue)||U;let Y=j(B==null?void 0:B.JsonSettings),me=j(A==null?void 0:A.JsonSettings),he=j(E==null?void 0:E.TeamJsonSettings);const q=n==null?void 0:n.JsonSettings,C=(q!=null&&q!=""?j(q):{components:{}}).components,$=Object.keys(C??{});let fe=j(R==null?void 0:R.JsonSettings),Q=($==null?void 0:$.includes("Agreement"))&&((te=(se=C==null?void 0:C.Agreement)==null?void 0:se.filter(r=>{var h;return((h=r==null?void 0:r.validate)==null?void 0:h.required)&&!Y[r.name]&&!fe[r.name]}))==null?void 0:te.length)==0;Q&&localStorage.setItem("isAgreementStepFilled","true"),localStorage.getItem("isAgreementStepFilled")=="true"&&(Q=!0);let d=Je(C,I,Q,N,c,{},e),F={},xe=!0,ge=()=>{x&&x()};if(f&&!_)return s.jsx(oe,{});let S=[];if(N=="Individual"){let r=[];r.push(d[0]),S.push(r);let h=[];d.length>1&&h.push(d[1]),S.push(h),h=[],d.length>2&&h.push(d[2]),S.push(h);let y=[];d.length>3&&y.push(d[3]),S.push(y)}else{let r=[];d.length>2&&r.push(d[2]),S.push(r),r=[],d.length>3&&r.push(d[3]),S.push(r);let h=[];d.length>4&&h.push(d[4]),S.push(h);let y=[];d.length>5&&y.push(d[5]),S.push(y)}return console.log({splitBy2:S}),s.jsx("div",{children:s.jsx(je,{title:"Registration Form",description:"Please fill the form to register for the event",open:!0,customHeading:w||null,setOpen:()=>{ge()},children:s.jsx(ne,{heading:"",outerClasses:"relative w-full",headingClasses:"px-1 lg:px-4 print:hidden w-full",children:s.jsx("div",{className:"w-full mt-5 min-h-[600px] print:mt-0 flex flex-col",id:"registrationBox",children:S.map((r,h)=>s.jsx("div",{className:"flex w-full flex-1 gap-x-8",children:r.map((y,pe)=>{F=y,J=Te(C,F);let Se=F?Ue(F.name,{},()=>{},()=>{},F,B,Y,A,me,N,E,_,C,g,b,he,!1,R):{};return s.jsx("div",{className:"flex-1",children:s.jsx(Ne,{isPrint:!0,isCoordinatorView:m,participantType:N,isGuardianRegistration:!1,handleNext:()=>{},isSubmitted:xe,eventDetails:n,isPlayGround:!1,onChange:()=>{},data:Se,isLastStep:!1,existingComponents:J,selectedComponent:L,setSelectedComponent:()=>{},components:J,setComponents:()=>{}},pe)})})}))})})})})}var le={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var v={}.hasOwnProperty;function u(){for(var m=[],p=0;p<arguments.length;p++){var o=arguments[p];if(o){var a=typeof o;if(a==="string"||a==="number")m.push(o);else if(Array.isArray(o)){if(o.length){var f=u.apply(null,o);f&&m.push(f)}}else if(a==="object"){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){m.push(o.toString());continue}for(var x in o)v.call(o,x)&&o[x]&&m.push(x)}}}return m.join(" ")}e.exports?(u.default=u,e.exports=u):window.classNames=u})()})(le);var ke=le.exports;const O=we(ke);let Me=({selectedParticipantDetails:e,participantType:v,setAllowEdit:u,setOpen:m,setFilter:p,setPrint:o,eventDetails:a})=>{var b,k,U,M,L,V,J,H,N,Z,I;const[f,x]=l.useState(!1),[w,T]=l.useState(""),[i,g]=l.useState("Pending"),W=(t,n)=>{g(n),x(!0)},R=()=>{var t;if(g(i),w.trim()){T(""),x(!1);let n=j((t=e==null?void 0:e.user)==null?void 0:t.JsonSettings);n||(n={}),n.ApprovalStatus=i,n.ReviewComments||(n.ReviewComments=[]),n.ReviewComments.push({Comment:w,Status:i,Date:new Date().toISOString()}),i==="Reviewed"&&(n.FinishedSteps=!1),i==="Approved"&&(n.FinishedSteps=!0);let z={ParticipantType:v,UserRoleId:e.user.Candidate,TeamId:e.user.Team,JsonSettings:JSON.stringify(n)};Ie("/UsersRolesJson/Approve",z).then(X=>{be.success("Review submitted successfully and emailed to the user."),u(!1),m(!1),p(!0)})}else alert("Please add a comment before submitting.")};let G=[];if((b=e==null?void 0:e.user)!=null&&b.JsonSettings){let t=j((k=e==null?void 0:e.user)==null?void 0:k.JsonSettings);t!=null&&t.ReviewComments&&(G=t==null?void 0:t.ReviewComments)}return s.jsxs("div",{className:"border-b border-gray-200 pb-5 bg-white flex flex-1 flex-col pr-10 print:pr-0",children:[s.jsxs("div",{className:"sm:flex flex-row sm:justify-between",children:[s.jsxs("div",{className:"sm:flex-1 gap-x-10",children:[((U=e==null?void 0:e.user)==null?void 0:U.UserName)&&s.jsxs(s.Fragment,{children:[s.jsxs("h1",{id:"message-heading",className:"text-base font-semibold text-gray-900",children:[(M=e==null?void 0:e.user)==null?void 0:M.CandidateIdentityNumber," - ",(L=e==null?void 0:e.user)==null?void 0:L.UserName]}),s.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(V=e==null?void 0:e.user)==null?void 0:V.Email}),s.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(J=e==null?void 0:e.user)==null?void 0:J.UserMobile}),s.jsx("p",{className:"mt-1 truncate text-sm text-gray-500",children:(H=e==null?void 0:e.user)==null?void 0:H.UserDobString})]}),((N=e==null?void 0:e.user)==null?void 0:N.TeamTeamName)&&s.jsx(s.Fragment,{children:s.jsxs("h1",{id:"message-heading",className:"text-base font-semibold text-gray-900",children:[(Z=e==null?void 0:e.user)==null?void 0:Z.TeamIdentityNumber," -",(I=e==null?void 0:e.user)==null?void 0:I.TeamTeamName]})}),s.jsxs("button",{className:"inline-flex items-center print:hidden gap-x-1.5 px-10 rounded-md bg-blue-600 mt-5  py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600",onClick:()=>u(!0),children:[s.jsx(Be,{className:"h-5 w-5 inline-block -mt-0.5 mr-0 "}),"Edit"]}),s.jsx("button",{onClick:()=>{o(!0)},className:"bg-darkprimary text-white px-10  ml-2 py-1.5 rounded-md print:hidden",children:s.jsx(Oe,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"hidden print:flex  max-h-90  flex-col justify-items-end flex-wrap",children:[s.jsx("div",{className:"text-primary text-right",children:a==null?void 0:a.EventName}),s.jsx("div",{className:"justify-end flex",children:s.jsx("img",{src:a==null?void 0:a.EventLogo,alt:"logo",className:"max-h-16 w-auto"})})]}),s.jsxs("div",{className:"mt-4 flex flex-col space-y-4 print:hidden",children:[s.jsx(Ae,{person:e==null?void 0:e.user}),s.jsx(Ee,{onClick:W,person:e==null?void 0:e.user})]})]}),s.jsxs("div",{className:"print:hidden",children:[s.jsx("div",{children:G.map((t,n)=>s.jsx("div",{className:"mt-2 flex flex-col relative",children:s.jsx("div",{className:O("border-l-4 p-4",(t==null?void 0:t.Status)==="Reviewed"?"border-yellow-400 bg-yellow-50":(t==null?void 0:t.Status)==="Approved"?"border-green-400 bg-green-50":"border-red-400 bg-red-50"),children:s.jsx("div",{className:"flex",children:s.jsxs("div",{className:"ml-3 flex-1",children:[s.jsx("h4",{className:O("text-lg font-bold",(t==null?void 0:t.Status)==="Reviewed"?"text-yellow-700":(t==null?void 0:t.Status)==="Approved"?"text-green-700":"text-red-700"),children:t==null?void 0:t.Status}),s.jsx("p",{className:O("text-sm",(t==null?void 0:t.Status)==="Reviewed"?"text-yellow-700":(t==null?void 0:t.Status)==="Approved"?"text-green-700":"text-red-700"),children:(t==null?void 0:t.Comment)??t}),s.jsx("p",{className:O("font-medium text-right",(t==null?void 0:t.Status)==="Reviewed"?"text-yellow-700":(t==null?void 0:t.Status)==="Approved"?"text-green-700":"text-red-700"),children:t==null?void 0:t.Date})]})})})},n))}),f&&s.jsx("div",{className:"mt-2 flex flex-col relative print:hidden",children:s.jsxs(ne,{heading:"Please enter the reason for change status to "+i,childrenClasses:"flex flex-col mt-4 relative",children:[s.jsxs("div",{className:"rounded-lg bg-white outline outline-1 -outline-offset-1 outline-gray-300 focus-within:outline focus-within:outline-2 focus-within:-outline-offset-2 focus-within:outline-indigo-600",children:[s.jsx("label",{htmlFor:"comment",className:"sr-only",children:"Add your comment..."}),s.jsx("textarea",{id:"comment",name:"comment",rows:3,placeholder:"Add your comment..., The comment will be sent to the user via email.",className:"block w-full rounded-lg resize-none bg-transparent px-3 py-1.5 text-base text-gray-900 placeholder:text-gray-400 focus:outline focus:outline-0 sm:text-sm/6",defaultValue:"",value:w,onChange:t=>T(t.target.value)})]}),s.jsxs("div",{className:"absolute inset-x-0 bottom-0 flex justify-between py-2 pl-3 pr-2",children:[s.jsx("div",{className:"flex items-center space-x-5"}),s.jsx("div",{className:"shrink-0",children:s.jsx(Fe,{onClick:R,currentReviewStatus:i})})]})]})})]})]})};function is({participantType:e,candidateId:v,eventDetails:u,setFilter:m,selectedParticipantDetails:p,setOpen:o}){let[a,f]=l.useState(!1),[x,w]=l.useState(!1),[T,i]=l.useState(!1),g=x?Ge:Le;return s.jsx(g,{isCoordinatorView:!0,view:"participationDetails",getEvets:"/EventJson/Get",allowEdit:a,getUserRoles:"/UsersRolesPlusUsersJson/Get",getTeams:"/CompetitionParticipantsTeamsJson/Get",getUsers:"/UsersRolesPlusUsersJson/Get",customComponents:s.jsxs(s.Fragment,{children:[T&&s.jsx(oe,{}),s.jsx(Me,{setPrint:()=>{window.parent.document.title="Candiidate Details - "+p.user.UserName+" - "+p.user.UserDobString,w(!0),i(!0),window.onafterprint=()=>{w(!1)},setTimeout(()=>{i(!1)},2e3),setTimeout(()=>{window.print()},3e3)},participantType:e,eventDetails:u,selectedParticipantDetails:p,setFilter:m,setOpen:o,setAllowEdit:f})]}),getParticipants:"/CoordinatorJson/GetParticipants",closeModel:()=>{o(!1)},participantTypeInt:e,candidateId:v,setActiveTab:()=>{}})}export{is as default};
