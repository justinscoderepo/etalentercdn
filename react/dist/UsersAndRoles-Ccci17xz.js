import{r as a,j as e,L as F}from"./mainweb-B8dHIZUs.js";import{B as Z}from"./box-BFEJw8QE.js";import{u as T}from"./useConfirmation-EO3MKqZX.js";import{c as O}from"./utilities-CN4lTu6a.js";import{u as G}from"./index.esm-Dhiwj2vz.js";import{R as H}from"./renderComponents-BJII6kJY.js";import{M as J}from"./modalForm-BOjnaTzL.js";import{F as D}from"./XCircleIcon-CsCgQXAy.js";import{P as z}from"./pagination-CufobXMv.js";import{F as Y}from"./TrashIcon-CXpKRsGn.js";import{u as q}from"./useBackend-D3YaX5wi.js";import"./dialog-Co4fzNLc.js";import"./CheckIcon-Cpr2Dho-.js";import"./validationMessage-BvuvIr4-.js";import"./clsx-B-dksMZM.js";import"./manageTeamParticipants-D0UtwQeR.js";import"./httpService-DcabHkwh.js";import"./index-BtuGy7By.js";function K({title:l,titleId:r,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},i),l?a.createElement("title",{id:r},l):null,a.createElement("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}const _=a.forwardRef(K);function Q({title:l,titleId:r,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},i),l?a.createElement("title",{id:r},l):null,a.createElement("path",{fillRule:"evenodd",d:"M3.74 3.749a.75.75 0 0 1 .75.75V15h13.938l-2.47-2.47a.75.75 0 0 1 1.061-1.06l3.75 3.75a.75.75 0 0 1 0 1.06l-3.75 3.75a.75.75 0 0 1-1.06-1.06l2.47-2.47H3.738a.75.75 0 0 1-.75-.75V4.5a.75.75 0 0 1 .75-.751Z",clipRule:"evenodd"}))}const W=a.forwardRef(Q);function X({title:l,titleId:r,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},i),l?a.createElement("title",{id:r},l):null,a.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const ee=a.forwardRef(X);function te({title:l,titleId:r,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},i),l?a.createElement("title",{id:r},l):null,a.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}const le=a.forwardRef(te);function ae({title:l,titleId:r,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},i),l?a.createElement("title",{id:r},l):null,a.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}const re=a.forwardRef(ae);function oe({title:l,titleId:r,...i},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},i),l?a.createElement("title",{id:r},l):null,a.createElement("path",{fillRule:"evenodd",d:"M15.75 4.5a3 3 0 1 1 .825 2.066l-8.421 4.679a3.002 3.002 0 0 1 0 1.51l8.421 4.679a3 3 0 1 1-.729 1.31l-8.421-4.678a3 3 0 1 1 0-4.132l8.421-4.679a3 3 0 0 1-.096-.755Z",clipRule:"evenodd"}))}const se=a.forwardRef(oe),ne=({row:l,fields:r,onSave:i,onCancel:s,title:u,description:A})=>{const[n,d]=a.useState(l||{}),[b,v]=a.useState(!1),[R,m]=a.useState("");let g=r;const{handleSubmit:h,register:N,unregister:E,control:j,clearErrors:S,reset:M,watch:w,getValues:U,setValue:p,trigger:B,formState:{errors:I}}=G({defaultValues:{...l}});a.useEffect(()=>{l&&(Object.keys(l).forEach(f=>{E(f),p(f,l[f])}),d({...l}))},[l]);const P=async f=>{v(!0),window.scrollTo({top:0,behavior:"smooth"});let x=y=>{debugger;m(y)};try{await i(f,!1,!0,x)}catch(y){console.error("Error saving user:",y)}v(!1)},L=(f,x)=>{p(f,x),l&&(l[f]=x),d({...l})};let C=[...g];return n&&(g==null?void 0:g.length)>0&&(C=C.filter(f=>{var y;let x=(y=f.conditions)==null?void 0:y.filter(V=>V.key);return(x==null?void 0:x.length)>0?!!x.find(t=>{if(t.key){let c=t.key.charAt(0).toLowerCase()+t.key.slice(1),o=n[t.key]||n[c];if(o&&(o==null?void 0:o.toString())==t.value)return!0}}):!0})),console.log({filteredComponents:C}),e.jsx(J,{title:u,description:A,open:!0,center:!1,outerClass:"max-w-xl",setOpen:s,children:e.jsxs("div",{className:"flex-auto p-2 relative",children:[b&&e.jsx(F,{info:R}),e.jsxs("form",{onSubmit:h(P),children:[e.jsx(H,{handlePropertiesChange:L,handlePropertiesPanelChange:()=>{console.log("handlePropertiesPanelChange")},formData:n,isPlayGround:!1,onChangeValue:L,drop:null,isSubmitted:b,isOver:!1,eventDetails:{},components:C,selectedComponent:{},handleSelect:()=>{console.log("handleSelect")},register:N,getValues:U,errors:I,control:j,setValue:p,clearErrors:S,reset:M,watch:w,removeComponent:()=>{console.log("removeComponent")}}),!b&&e.jsx("div",{className:"mb-2 w-full flex justify-end px-0 gap-x-4",children:e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:s,className:"inline-flex items-center gap-x-2  rounded-md bg-gray-200 px-6 py-2.5 text-sm font-semibold text-gray-700 shadow-sm hover:bg-gray-300 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[e.jsx(D,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Cancel"]}),e.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[e.jsx(ee,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Submit"]})]})})]})]})})},ie=({status:l,formTitle:r,defaultFormValues:i,formDescription:s,rows:u=[],formFields:A=[],pageDetails:n={},fields:d=[],topActions:b=[],actions:v=[],setOffsetAndLimit:R=()=>{},searchFields:m=[],update:g=()=>{alert("Not Implemented")},delete:h=()=>{alert("Not Implemented")}})=>{console.log({rows:u});const[N,E]=T(),[j,S]=a.useState(()=>{const t={};return m==null||m.forEach(c=>{t[c.columnName]=""}),t}),[M,w]=a.useState(!1),[U,p]=a.useState(!1),[B,I]=a.useState(null),P=(t,c)=>{S(o=>({...o,[t]:c}))},L=()=>{console.log("Search Values:",j)},C=async t=>{w(!0),await h(t),w(!1)},f=t=>{I(t),p(!0),w(!0)},x=async t=>{await g(t),w(!1),p(!1),I(null)},y=()=>{w(!1),p(!1),I(null)},V=()=>e.jsx("div",{className:"min-h-5 w-full relative",children:e.jsx("div",{className:"relative right-0 md:-top-10",children:b.length>0&&e.jsx("div",{className:"flex justify-end items-end gap-x-2 gap-y-2",children:b.map((t,c)=>e.jsx("div",{className:"bg-white rounded-full shadow-sm p-2",children:e.jsxs("button",{className:O("font-medium text-sm py-2 px-2 rounded-3xl flex items-center justify-center shadow-sm",t.label?"px-3":"h-8 w-8",t.type==="new"?"bg-indigo-600 text-white":t.type==="export"?"bg-green-700 text-white":t.type==="custom"?"bg-gray-700 text-white":""),onClick:()=>{t.type==="new"?p(!0):t.type==="export"?console.log("Export"):t.type==="custom"&&(console.log("Custom Action"),t.callback&&t.callback())},children:[t.type==="new"&&e.jsx(re,{className:"h-5 w-5 text-white"}),t.type==="export"&&e.jsx(_,{className:"h-5 w-5 text-white"}),t.type==="custom"&&e.jsxs(e.Fragment,{children:[t.icon,e.jsx("span",{className:"ml-2",children:t.label})]})]},c)}))})})});return e.jsxs(e.Fragment,{children:[e.jsx(N,{title:"Delete Item",description:"Are you sure you want to delete this item?",confirmButtonLabel:"Delete",confirmButtonClick:async t=>C(t),className:"w-96 print:hidden"}),e.jsxs("div",{className:"",children:[(m==null?void 0:m.length)>0&&e.jsxs("div",{className:"mb-0 flex flex-row justify-end gap-x-2 gap-y-2",children:[m==null?void 0:m.map((t,c)=>e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"absolute -top-2 left-2 inline-block rounded-lg bg-white px-1 text-xs font-medium text-gray-900",children:["Search By ",t.label]}),t.type==="text"&&e.jsx("input",{type:"text",placeholder:"Enter "+(t.placeholder||t.label),value:j[t.columnName],onChange:o=>P(t.columnName,o.target.value),className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900   placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 border-gray-300 focus:outline-gray-50 sm:text-sm/6"}),t.type==="select"&&e.jsx("select",{value:j[t.columnName],onChange:o=>P(t.columnName,o.target.value),className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900  placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-darkprimary sm:text-sm/6",children:t.options.map((o,k)=>e.jsx("option",{value:o.value,children:o.label},k))})]},c)),e.jsx("button",{type:"button",onClick:L,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary hover:bg-darkprimary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-darkprimary",children:"Search"})]}),e.jsx("div",{className:"relative mt-12",children:e.jsxs("table",{className:"min-w-full md:divide-y md:divide-gray-300 flex flex-col md:table ",children:[(d==null?void 0:d.length)>0&&e.jsx("thead",{className:"flex flex-grow md:table-header-group ",children:e.jsxs("tr",{className:"md:bg-gray-200 flex md:table-row flex-grow justify-end",children:[d.map((t,c)=>e.jsx("th",{className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-3 hidden md:table-cell",children:t.label},c)),e.jsx("th",{children:e.jsx(V,{})})]})}),(u==null?void 0:u.length)>0&&e.jsx("tbody",{className:"md:divide-y md:divide-gray-200 flex flex-grow md:table-row-group flex-col gap-y-3",children:u.map((t,c)=>e.jsxs("tr",{className:"flex md:table-row flex-col py-4 md:py-0 px-4 md:px-0 shadow-md md:shadow-none",children:[d==null?void 0:d.map((o,k)=>e.jsxs("td",{className:"whitespace-nowrap md:px-3 py-2 md:py-4 text-sm text-gray-500 flex flex-row justify-between md:table-cell",children:[e.jsx("span",{className:"md:hidden font-semibold text-gray-900",children:o.label}),e.jsx("span",{className:"",children:t[o.column]})]},k)),v.length>0&&e.jsx("td",{className:"whitespace-nowrap text-sm font-medium mt-3 md:mt-0",children:e.jsx("div",{className:"flex justify-end gap-x-2 gap-y-2",children:v.map((o,k)=>e.jsxs("button",{title:o.label,className:O("h-8 w-8 font-semibold py-2 px-2 rounded-3xl flex items-center justify-center",o.type==="whatsapp"?"bg-green-700 text-white":o.type==="edit"?"bg-primary text-white":o.type==="delete"?"bg-red-800 text-white":""),onClick:()=>{o.type==="whatsapp"?o.callback&&o.callback(t):o.type==="edit"?f(t):o.type==="delete"&&E(t)},children:[o.type==="whatsapp"&&e.jsx(se,{className:"h-5 w-5 text-white"}),o.type==="edit"&&e.jsx(le,{className:"h-4 w-4 text-white"}),o.type==="delete"&&e.jsx(Y,{className:"h-5 w-5 text-white"})]},k))})})]},c))}),(u==null?void 0:u.length)===0&&l!="finished"&&e.jsx("tbody",{className:"bg-white flex justify-center",children:e.jsx("tr",{className:"flex justify-center",children:e.jsx(F,{})})})]})}),n&&e.jsx(z,{rowsFrom:n==null?void 0:n.rowsFrom,rowsTo:n==null?void 0:n.rowsTo,totalRowCount:n==null?void 0:n.totalRowCount,setOffsetAndLimit:R}),U&&e.jsx(ne,{description:s,title:r,row:B||i,fields:A,onSave:x,onCancel:y})]})]})};let $={SuperAdmin:{RoleId:1,Role:"SuperAdmin"},Candidate:{RoleId:2,Role:"Candidate"},Organizer:{RoleId:3,Role:"Organizer"},Manager:{RoleId:4,Role:"Manager"},Coordinator:{RoleId:5,Role:"Coordinator"},Judge:{RoleId:6,Role:"Judge"},Guest:{RoleId:7,Role:"Guest"},SubCoordinator:{RoleId:8,Role:"SubCoordinator"},Projector:{RoleId:9,Role:"Projector"},SubAdmin:{RoleId:10,Role:"SubAdmin"},ContentAdmin:{RoleId:11,Role:"ContentAdmin"},User:{RoleId:12,Role:"User"},DrawMaster:{RoleId:13,Role:"DrawMaster"},ScoreMaster:{RoleId:14,Role:"ScoreMaster"},Guardian:{RoleId:15,Role:"Guardian"}};function Se({user:l,operation:r,eventCategory:i,eventId:s}){var g;const[u,A]=a.useState(!1),n=q("/UsersRolesPlusUsersJson/Get",{filter:{Event:s,Role:$[r].RoleId,CreatedBy:l.UId,Status:"1"},updateUrl:"/SetupJson/SaveUser",deleteUrl:"/SetupJson/RemoveCoordinator",limit:10,sort:{sortOrder:"DESC",sortColumn:"UserRoleId"},select:"Event,Role,SixDigitPassword,Status,User,UserEmail,UserEmailCode,UserName,UserNameCode,UserRoleId"});let{rows:d,update:b}=n;const v=({UserName:h,UserEmail:N,SixDigitPassword:E})=>{let j=window.location.origin,S=btoa(h),M=btoa(N),w=btoa(s),U=encodeURIComponent(N);const p=`https://api.whatsapp.com/send?text=Hi%20${h},%0AYour%20login%20details%20are:%0A%0AUserName%3A%20${U}%0A🔑Password%3A%20${E}%0APlease%20follow%20the%20following%20link%20to%20login:%0A${j}%2FAccount%2FLogin%3FeventId%3D${w}%26name%3D${S}%26Email%3D${M}`;window.open(p,"_blank")};var R=[{type:"new",title:"New"}];let m={Event:s,Role:$[r].RoleId,RoleRole:$[r].Role,Status:"1",CreatedBy:l.UId};return(g=d==null?void 0:d.filter(h=>h.UserEmail==l.Email))!=null&&g.length||R.push({type:"custom",callback:()=>b({...m,UserName:l.Name,UserEmail:l.Email}),icon:e.jsx(W,{className:"h-5 w-5"}),label:"Create Yourself as "+r,onClick:()=>handleAddUser({UserName:l.Name,UserEmail:l.Email})}),e.jsx(Z,{heading:"Manage User Roles - "+r,childrenClasses:"px-0 py-2",headingClasses:"px-3",outerClasses:"max-w-full mx-auto ml-5 bg-gray-50 print:hidden ",children:e.jsxs("div",{className:"",children:[u&&e.jsx(F,{}),e.jsx(ie,{...n,defaultFormValues:m,formTitle:"Manage User Roles - "+r,formDescription:"You can create new "+r+" by enter name and email",topActions:R,fields:[{label:"Name",column:"UserName"},{label:"Email",column:"UserEmail"}],searchFields:[{label:"Name",type:"text",column:"UserName"}],formFields:[{name:"UserName",label:"Name",type:"text",validate:{required:!0,minLength:3,maxLength:50}},{name:"UserEmail",label:"Email",type:"text",validate:{required:!0,email:!0}}],actions:[{type:"whatsapp",icon:"fa-share",callback:h=>v(h)},{type:"delete",icon:"fa-trash"}]})]})})}export{Se as default};
