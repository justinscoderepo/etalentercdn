import { r as reactExports, j as jsxRuntimeExports, q as parseJson, b as getUserData, z as zt, p as post } from "./main-B7w5eCOl.js";
import { F as ForwardRef$4 } from "./PencilIcon-b9s3VfZ1.js";
function ArchiveBoxArrowDownIcon({
  title,
  titleId,
  ...props
}, svgRef) {
  return /* @__PURE__ */ reactExports.createElement("svg", Object.assign({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 20 20",
    fill: "currentColor",
    "aria-hidden": "true",
    "data-slot": "icon",
    ref: svgRef,
    "aria-labelledby": titleId
  }, props), title ? /* @__PURE__ */ reactExports.createElement("title", {
    id: titleId
  }, title) : null, /* @__PURE__ */ reactExports.createElement("path", {
    fillRule: "evenodd",
    d: "M2 3a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1H2Zm0 4.5h16l-.811 7.71a2 2 0 0 1-1.99 1.79H4.802a2 2 0 0 1-1.99-1.79L2 7.5ZM10 9a.75.75 0 0 1 .75.75v2.546l.943-1.048a.75.75 0 1 1 1.114 1.004l-2.25 2.5a.75.75 0 0 1-1.114 0l-2.25-2.5a.75.75 0 1 1 1.114-1.004l.943 1.048V9.75A.75.75 0 0 1 10 9Z",
    clipRule: "evenodd"
  }));
}
const ForwardRef$3 = /* @__PURE__ */ reactExports.forwardRef(ArchiveBoxArrowDownIcon);
function ChatBubbleBottomCenterIcon({
  title,
  titleId,
  ...props
}, svgRef) {
  return /* @__PURE__ */ reactExports.createElement("svg", Object.assign({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 20 20",
    fill: "currentColor",
    "aria-hidden": "true",
    "data-slot": "icon",
    ref: svgRef,
    "aria-labelledby": titleId
  }, props), title ? /* @__PURE__ */ reactExports.createElement("title", {
    id: titleId
  }, title) : null, /* @__PURE__ */ reactExports.createElement("path", {
    fillRule: "evenodd",
    d: "M3.43 2.524A41.29 41.29 0 0 1 10 2c2.236 0 4.43.18 6.57.524 1.437.231 2.43 1.49 2.43 2.902v5.148c0 1.413-.993 2.67-2.43 2.902a41.102 41.102 0 0 1-3.55.414c-.28.02-.521.18-.643.413l-1.712 3.293a.75.75 0 0 1-1.33 0l-1.713-3.293a.783.783 0 0 0-.642-.413 41.108 41.108 0 0 1-3.55-.414C1.993 13.245 1 11.986 1 10.574V5.426c0-1.413.993-2.67 2.43-2.902Z",
    clipRule: "evenodd"
  }));
}
const ForwardRef$2 = /* @__PURE__ */ reactExports.forwardRef(ChatBubbleBottomCenterIcon);
function CheckIcon({
  title,
  titleId,
  ...props
}, svgRef) {
  return /* @__PURE__ */ reactExports.createElement("svg", Object.assign({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 20 20",
    fill: "currentColor",
    "aria-hidden": "true",
    "data-slot": "icon",
    ref: svgRef,
    "aria-labelledby": titleId
  }, props), title ? /* @__PURE__ */ reactExports.createElement("title", {
    id: titleId
  }, title) : null, /* @__PURE__ */ reactExports.createElement("path", {
    fillRule: "evenodd",
    d: "M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z",
    clipRule: "evenodd"
  }));
}
const ForwardRef$1 = /* @__PURE__ */ reactExports.forwardRef(CheckIcon);
function LockOpenIcon({
  title,
  titleId,
  ...props
}, svgRef) {
  return /* @__PURE__ */ reactExports.createElement("svg", Object.assign({
    xmlns: "http://www.w3.org/2000/svg",
    viewBox: "0 0 20 20",
    fill: "currentColor",
    "aria-hidden": "true",
    "data-slot": "icon",
    ref: svgRef,
    "aria-labelledby": titleId
  }, props), title ? /* @__PURE__ */ reactExports.createElement("title", {
    id: titleId
  }, title) : null, /* @__PURE__ */ reactExports.createElement("path", {
    fillRule: "evenodd",
    d: "M14.5 1A4.5 4.5 0 0 0 10 5.5V9H3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2h-1.5V5.5a3 3 0 1 1 6 0v2.75a.75.75 0 0 0 1.5 0V5.5A4.5 4.5 0 0 0 14.5 1Z",
    clipRule: "evenodd"
  }));
}
const ForwardRef = /* @__PURE__ */ reactExports.forwardRef(LockOpenIcon);
const registrationSteps = [
  { id: "01", name: "Guardian Registration", href: "#", status: "inactive" },
  { id: "01", name: "Agreement", href: "#", status: "inactive" },
  { id: "02", name: "Participant Type", href: "#", status: "inactive" },
  { id: "03", name: "User", href: "#", status: "inactive", label: "User Profile" },
  { id: "03", name: "Team Member Profile", href: "#", status: "inactive", label: "First User Profile" },
  { id: "04", name: "Team", href: "#", status: "inactive", label: "Team Profile" },
  { id: "05", name: "Organization", href: "#", status: "inactive" },
  { id: "06", name: "Participations", href: "#", status: "inactive" },
  { id: "07", name: "Team Members", href: "#", status: "inactive" },
  { id: "08", name: "Payment", href: "#", status: "inactive" }
];
function updateStepData(stepName, data, setUpdateIndex, activeStep, userRole, userRoleJson, userData, userDataJson, participantType, teamData, participationDetails, allStepsComponents, selectedUser, selectedTeam, teamJson, directReturn = false, agreementData) {
  if (activeStep) {
    switch (stepName) {
      case "Agreement": {
        let existingAgreementData = parseJson(agreementData?.JsonSettings);
        data = selectedUser?.UId == userRole?.User ? { ...userRoleJson, ...existingAgreementData } : { ...existingAgreementData };
        break;
      }
      case "User": {
        let selectedUserRole = selectedUser?.UId == userRole?.User ? userRole : {};
        if (userData != null) {
          data = { ...selectedUserRole, ...userData, ...userDataJson };
        }
        break;
      }
      case "Participant Type": {
        data = { ParticipantType: participantType };
        break;
      }
      case "Team": {
        data = { ...teamData, ...teamJson, TeamName: teamData?.TeamTeamName };
        break;
      }
      case "Organization": {
        data = selectedUser?.UId == userRole.User ? { ...userRoleJson } : {};
        break;
      }
      case "Team Members": {
        data = { ...teamData, ...teamJson };
      }
      case "Participations": {
        let selectedUserRole = selectedUser?.UId == userRole?.User ? userRole : {};
        let participantFiltered = { ...participationDetails };
        participantFiltered.ParticipantsList = participantFiltered.ParticipantsList?.filter((x) => x.Candidate == selectedUserRole?.UserRoleId || x.Candidate == selectedTeam?.Team);
        data = { ...userDataJson, ...userRoleJson, ...participantFiltered, ...selectedUserRole, ...selectedTeam, ...activeStep, ...{ participantType } };
        if (participantType == "Team") {
          data = { ...data, ...teamData };
        }
        data.selectedCompetitions = participantFiltered.ParticipantsList?.map((x) => x.Competition) ?? [];
        break;
      }
      case "Payment": {
        let selectedUserRole = selectedUser?.UId == userRole?.User ? userRole : {};
        let participantFiltered = { ...participationDetails };
        participantFiltered.ParticipantsList = participantFiltered.ParticipantsList?.filter((x) => x.Candidate == selectedUserRole?.UserRoleId || x.Candidate == selectedTeam?.Team);
        data = { ...userDataJson, ...userRoleJson, ...participantFiltered, ...selectedUserRole, ...selectedTeam, ...teamJson, ...activeStep, ...{ participantType } };
        if (participantType == "Team") {
          data = { ...data, ...teamData };
        }
        data.selectedCompetitions = participantFiltered.ParticipantsList?.map((x) => x.Competition) ?? [];
        break;
      }
    }
  }
  let camelCaseData = {};
  Object.keys(data).forEach((key) => {
    let newKey = key[0]?.toLowerCase() + key.slice(1);
    if (!camelCaseData[newKey]) {
      camelCaseData[newKey] = data[key];
    }
  });
  let addMissingFields = allStepsComponents ? allStepsComponents[stepName]?.filter((x) => !camelCaseData[x.name]) : [];
  addMissingFields?.forEach((field) => {
    camelCaseData[field.name] = "";
  });
  if (directReturn) {
    return camelCaseData;
  }
  return camelCaseData;
}
function getAllComponentFields(allStepsComponents) {
  let allFields = [];
  if (allStepsComponents == null || allStepsComponents == void 0) {
    return [];
  }
  if (Object.keys(allStepsComponents).length == 0) {
    return [];
  }
  let isValidJson = true;
  if (!allStepsComponents["User"] && !allStepsComponents["Team"]) {
    isValidJson = false;
  }
  if (!isValidJson) {
    return [];
  }
  Object.keys(allStepsComponents)?.forEach((step) => {
    allStepsComponents[step]?.forEach((field) => {
      allFields.push(field);
    });
  });
  return allFields;
}
function getAvailableSteps(allStepsComponents, steps, isAgreementStepFilled, participantType, users, tempUser, view, isCoordinatorView) {
  if (view == "registration") {
    let availableSteps = [...steps.filter((step) => step.name == "Guardian Registration")];
    return availableSteps;
  }
  if (participantType && allStepsComponents && view == "participationDetails") {
    let availableStepKeys = Object.keys(allStepsComponents);
    let availableSteps = [...steps.filter((step) => availableStepKeys.includes(step.name) && allStepsComponents[step.name] && allStepsComponents[step.name]?.length > 0)];
    availableSteps = availableSteps.filter((step) => step.name !== "Guardian Registration");
    if (users?.length > 0) {
      availableSteps = availableSteps.filter((step) => step.name !== "Agreement");
    }
    if (isAgreementStepFilled || isCoordinatorView) {
      availableSteps = availableSteps.filter((step) => step.name !== "Agreement");
    }
    let isTeamsAndIndividualRegistration = availableSteps.filter((step) => step.name === "Team" || step.name === "User").length == 2;
    if (!isTeamsAndIndividualRegistration) {
      availableSteps = availableSteps.filter((step) => step.name !== "Participant Type");
    }
    if (participantType == "Individual") {
      availableSteps = availableSteps.filter((step) => step.name !== "Team" && step.name !== "Team Members" && step.name !== "Team Member Profile");
    }
    if (participantType == "Team") {
      availableSteps = availableSteps.filter((step) => step.name !== "User");
      if (!tempUser) {
        availableSteps = availableSteps.filter((step) => step.name !== "Team Member Profile");
      }
    }
    for (let i = 0; i < availableSteps.length; i++) {
      availableSteps[i].id = (i + 1).toString().padStart(2, "0");
    }
    if (allStepsComponents["Payment"]) {
      let paymentStep = steps.find((step) => step.name == "Payment");
      if (paymentStep) {
        let nonPaymentSummary = allStepsComponents["Payment"].find((x) => x.type == "non-payment-summary");
        if (nonPaymentSummary) {
          paymentStep.label = "Summary";
        }
      }
    }
    return availableSteps;
  } else {
    return [];
  }
}
function getActiveStep(availableSteps, steps) {
  let activeStep = availableSteps.find((step) => step.status === "active");
  if (!activeStep && availableSteps.length > 0) {
    availableSteps[0].status = "active";
    activeStep = availableSteps[0];
  }
  return activeStep;
}
function getActiveComponents(allStepsComponents, activeStep, exportedForm) {
  if (activeStep) {
    if (allStepsComponents[activeStep.name]) {
      let selectedComponents = allStepsComponents[activeStep.name];
      selectedComponents.forEach((component) => {
        component.name = component.name.charAt(0).toLowerCase() + component.name.slice(1);
      });
      return [...selectedComponents];
    } else {
      return [];
    }
  }
}
async function extractUserAndRoleDataFromFilter(setParticipationsFilter, candidateId, userId, teamId) {
  let [res, _2, _3] = await setParticipationsFilter(true);
  return extractUserAndRoleData(res?.[0], candidateId, userId, teamId);
}
function extractUserAndRoleData(participationsRes, candidateId, userId, teamId) {
  let participationDetails = participationsRes;
  let userRoles = participationDetails?.UsersList?.filter((x) => !x.TeamTeamName)?.map((x) => {
    let userRole2 = x;
    userRole2.User = userRole2.CandidateUser;
    userRole2.UserRoleId = userRole2.Candidate;
    if (userRole2.LevelSettings) {
      let levelParsed = userRole2.LevelSettings;
      userRole2 = { ...userRole2, ...levelParsed };
    }
    return userRole2;
  });
  let userRole = candidateId || userId ? userRoles?.find((x) => x.Candidate == candidateId || x.CandidateUser == userId) : null;
  let users = userRoles?.map((x) => extractUserDataFromUserRoles(x));
  let userData = userRole?.User ? users?.find((x) => x.UId == userRole?.User) : null;
  let teams = participationDetails?.UsersList?.filter((x) => x.TeamTeamName);
  let teamData = teamId || candidateId ? teams?.find((x) => x.Team == teamId || x.Team == candidateId) : null;
  return { userRoles, userRole, users, userData, participationDetails, teams, teamData };
}
function extractUserDataFromUserRoles(userRole) {
  return {
    UId: userRole.User,
    Name: userRole.UserName,
    Email: userRole.UserEmail,
    Phone: userRole.UserPhone,
    Mobile: userRole.UserMobile,
    DobString: userRole.UserDobString,
    ProfilePicture: userRole.UserImage,
    JsonSettings: userRole.UserJsonSettings,
    RegistrationId: userRole.RegistrationId
  };
}
let filterAllowedFields = (postData, components, additionalFields, excludedFields) => {
  let allowedFields = components.map((x) => x.name);
  let newPostData = {};
  Object.keys(postData).forEach((key) => {
    if (excludedFields && excludedFields.find((x) => x.toLowerCase() == key.toLowerCase())) {
      return;
    }
    if (allowedFields.find((x) => x.toLowerCase() == key.toLowerCase())) {
      newPostData[key] = postData[key];
    }
    if (additionalFields && additionalFields.find((x) => x.toLowerCase() == key.toLowerCase())) {
      newPostData[key] = postData[key];
    }
  });
  return newPostData;
};
const saveData = async (postData, agreementData, activeStep, userRole, userRoles, userRoleJson, userData, userDataJson, participantType, teamData, participationDetails, components, updateRole, updateUser, updateTeam, setParticipationsFilter, updateParticipations, selectedUser, setSelectedUser, selectedTeam, setSelectedTeam, setAgreementData, teamJson, teams, advancedSettings, saveForLater, setCandidateIdState) => {
  let teamUserObj = {};
  let allowedUserFields = ["name", "email", "phone", "mobile", "dobString", "profilePicture", "uId"];
  switch (activeStep.name) {
    case "Guardian Registration": {
      let userModel = filterAllowedFields(postData, components, allowedUserFields);
      let { user } = getUserData() || {};
      userModel.UId = user?.UId;
      let settingsModel = filterAllowedFields(postData, components, [], allowedUserFields);
      let postDataModel = {
        ...userModel,
        isGuardian: true
      };
      postDataModel.JsonSettings = JSON.stringify({ ...userDataJson, ...settingsModel });
      try {
        let { data: res } = await updateUser(postDataModel);
        if (res?.Results?.token) {
          let user2 = { ...{ user: { ...res.Results.user }, token: res.Results.token } };
          localStorage.setItem("user", JSON.stringify(user2));
          document.dispatchEvent(new Event("userUpdated"));
          zt.success("You have successfully created an account, and automatically logged in. Also we have sent you an email with your login details. Now you can add participants to this event.");
        } else {
          return false;
        }
      } catch (e) {
        console.error(e);
        return false;
      }
      return true;
    }
    case "Agreement": {
      let postDataModel = {
        ...userRole
      };
      postDataModel.JsonSettings = JSON.stringify({ ...userRoleJson, ...postData });
      try {
        setAgreementData(postDataModel);
        return true;
      } catch (e) {
        console.error(e);
        return false;
      }
    }
    case "Participant Type": {
      return true;
    }
    case "Team Member Profile": {
      teamUserObj = userData;
    }
    case "User": {
      let requiredFields = ["name", "dobString"];
      let participantFields = ["levelSettings"];
      let userModel = filterAllowedFields(postData, components, allowedUserFields, [...participantFields]);
      if (requiredFields.find((x) => !userModel[x])) {
        zt.error("Name and Date of Birth are required fields to save for later");
        return false;
      }
      userModel.UId = selectedUser?.UId == userData?.UId ? userData?.UId : selectedUser?.UId;
      let settingsModel = filterAllowedFields(postData, components, [], allowedUserFields);
      let postDataModel = {
        ...userModel,
        ...teamUserObj
      };
      postDataModel.JsonSettings = JSON.stringify({ ...userDataJson, ...settingsModel });
      postDataModel.LevelSettings = postData.LevelSettings ? postData.LevelSettings : null;
      let isUserDataTemp = !userData?.Email;
      try {
        let { data: res } = await updateUser(postDataModel);
        if (isUserDataTemp && res?.Results?.token) {
          sessionStorage.clear();
          let user = { ...{ user: { ...res.Results.user }, token: res.Results.token } };
          localStorage.setItem("user", JSON.stringify(user));
          document.dispatchEvent(new Event("userUpdated"));
          userData = res.Results.user;
          if (setCandidateIdState && res?.Results?.user?.UserRoleId) {
            setCandidateIdState(res.Results.user.UserRoleId);
          }
          setSelectedUser(res.Results.user);
          selectedUser = res.Results.user;
        } else if (res?.Results) {
          let resUser = res.Results;
          userData = resUser;
          if (setCandidateIdState && resUser?.UserRoleId) {
            setCandidateIdState(resUser.UserRoleId);
          }
          setSelectedUser(resUser);
          selectedUser = resUser;
        }
        ({ userRoles, userRole } = await extractUserAndRoleDataFromFilter(setParticipationsFilter, null, userData?.UId, null));
        if (agreementData && Object.keys(agreementData).length > 0) {
          agreementData.UserRoleId = userRole.UserRoleId;
          await updateRole(agreementData);
        }
        zt.success("The basic user details saved successfully, please proceed to the next step");
        return true;
      } catch (e) {
        console.error(e);
        return false;
      }
    }
    case "Team": {
      let allowedTeamFields = ["teamName", "teamId", "LevelSettings"];
      let postDataModel = filterAllowedFields(
        {
          // ...teamData,
          ...postData
        },
        components,
        allowedTeamFields
      );
      postDataModel.TeamName = postData.TeamName;
      postDataModel.TeamId = selectedTeam?.Team;
      let settingsModel = filterAllowedFields(postData, components, [], allowedTeamFields);
      postDataModel.JsonSettings = JSON.stringify({ ...settingsModel });
      postDataModel.LevelSettings = postData.LevelSettings ? postData.LevelSettings : null;
      try {
        let { data: res } = await updateTeam(postDataModel);
        if (res?.Results) {
          let resTeam = res.Results;
          if (!teamData) {
            teamData = {};
          }
          ({ teamData } = await extractUserAndRoleDataFromFilter(setParticipationsFilter, null, null, resTeam?.TeamId));
          if (resTeam?.TeamId && !teamData) {
            let teamsList = await post("/CandidateJson/GetTeams", { TeamId: resTeam?.TeamId });
            teamData = teamsList?.data?.Results?.find((x) => x.TeamId == resTeam?.TeamId);
            teamData = { ...teamData, TeamTeamName: teamData?.TeamName, Team: resTeam?.TeamId, TeamJsonSettings: teamData?.JsonSettings };
          }
          if (setCandidateIdState && teamData?.Team) {
            setCandidateIdState(teamData.Team);
          }
          setSelectedTeam(teamData);
          selectedTeam = teamData;
        }
        zt.success("The basic team details saved successfully, please proceed to the next step");
        return true;
      } catch (e) {
        console.error(e);
        return false;
      }
    }
    case "Participations": {
      let userPrefixedFields = ["name", "email", "phone", "mobile", "dobString"];
      let participantFields = ["selectedCompetitions", "group", "levelSettings"];
      let settingsModel = filterAllowedFields(postData, components, [], [...userPrefixedFields, ...participantFields]);
      userRoleJson = { ...userRoleJson, ...settingsModel };
      let userDataModel = { ...userData };
      if (userData) {
        Object.keys(userData).forEach((key) => {
          if (userPrefixedFields.find((x) => x.toLowerCase() == key.toLowerCase())) {
            userDataModel["User" + key] = userData[key];
          }
        });
      }
      let levelSettings = postData.LevelSettings;
      let group = postData.group;
      if (userRole) {
        userRole.group = group;
      }
      let competitionComponents = components.filter((x) => x.name?.toLowerCase() == "selectedcompetitions");
      let isNoCompetitionRegistration = competitionComponents.length == 0;
      if (postData.selectedCompetitions?.length == 0 && !isNoCompetitionRegistration) {
        zt.error("Please select at least one competition");
        return false;
      }
      if (!isNoCompetitionRegistration) {
        let mergedCompetitions = [...postData.selectedCompetitions];
        let uniqueCompetitions = [...new Set(mergedCompetitions)];
        if (participantType == "Individual") {
          userRole.JsonSettings = JSON.stringify(userRoleJson);
        }
        let participantModel = {
          UsersRolesModel: {
            ...userRole,
            ...levelSettings
          },
          ParticipantType: participantType == "Individual" ? "1" : "2",
          ...levelSettings,
          Group: group,
          UsersModel: participantType == "Individual" ? { ...userDataModel, Candidate: userRole?.UserRoleId, CandidateUser: userRole?.User } : { ...teamData, Team: selectedTeam?.TeamId || selectedTeam?.Team, TeamTeamName: selectedTeam?.TeamName || selectedTeam?.TeamTeamName, Candidate: selectedTeam?.Team },
          CompetitionParticipantsModel: { CompetitionList: uniqueCompetitions }
        };
        try {
          await updateParticipations(participantModel, true);
          ({ participationDetails, userRoles, userRole, teamData } = await extractUserAndRoleDataFromFilter(setParticipationsFilter, null, userData?.UId, selectedTeam?.Team));
          zt.success("Your participations data saved successfully, please proceed to the next step");
          return true;
        } catch (e) {
          console.error(e);
          return false;
        }
      }
    }
    case "Team Members": {
      let minimumCandidates = advancedSettings?.MinimumGroupParticipants;
      let isMinimum = postData?.teamStrength >= minimumCandidates;
      if (!isMinimum && minimumCandidates > 0 && !saveForLater) {
        zt.error(`Please add at least ${minimumCandidates} team members`);
        return false;
      }
      if (postData?.FinishedSteps == true) ;
      else {
        ({ teamData } = await extractUserAndRoleDataFromFilter(setParticipationsFilter, null, null, selectedTeam?.Team));
        return true;
      }
    }
    case "Payment": {
      if (participantType == "Individual") {
        let postDataModel = {
          ...userRole
        };
        let jsonPostSettings = filterAllowedFields(postData, components, []);
        postDataModel.JsonSettings = JSON.stringify({ ...userRoleJson, ...jsonPostSettings });
        try {
          await updateRole(postDataModel);
          ({ participationDetails, userRoles, userRole } = await extractUserAndRoleDataFromFilter(setParticipationsFilter, null, userData?.UId, null));
          if (!saveForLater) {
            let { user } = getUserData() || {};
            let isGuardianOrCandidate = user?.RoleType == "Guardian" || user?.RoleType == "Candidate";
            if (isGuardianOrCandidate) {
              zt.success(
                "Your final step finished successfully and you finished the registration process. Please wait for the approval. Thank you. Any time, you can view the submitted information by click on submitted applications.",
                {
                  duration: 1e4
                }
              );
            } else {
              zt.success("Saved Successfully", {
                duration: 1e4
              });
            }
          }
          return true;
        } catch (e) {
          zt.error(e.message);
          return false;
        }
      } else {
        let postDataModel = {
          ...teamData,
          TeamId: selectedTeam?.Team
        };
        let jsonPostSettings = filterAllowedFields(postData, components, []);
        if (postData.FinishedSteps) {
          jsonPostSettings.FinishedSteps = postData.FinishedSteps;
        }
        postDataModel.JsonSettings = JSON.stringify({ ...teamJson, ...jsonPostSettings });
        try {
          await updateTeam(postDataModel);
          ({ participationDetails, teams, teamData } = await extractUserAndRoleDataFromFilter(setParticipationsFilter, null, null, selectedTeam?.Team));
          if (!saveForLater) {
            zt.success(
              "Your final step finished successfully and you finished the registration process. Please wait for the approval. Thank you. Any time, you can view the submitted information by click on submitted applications.",
              {
                duration: 1e4
              }
            );
          }
          return true;
        } catch (e) {
          console.error(e);
          zt.error(e.message);
          return false;
        }
      }
    }
    default: {
      return false;
    }
  }
};
const UserStatusBadge = ({ person }) => {
  return person?.ApplicationStatusLabel == "In Progress" || person?.ApplicationStatusLabel == "InProgress" ? /* @__PURE__ */ jsxRuntimeExports.jsxs(
    "span",
    {
      title: "Feel free to proceed with the final submission once you've included all participations and fees, and the status will be changed.",
      className: "bg-yellow-100 text-yellow-800 flex items-center rounded-full px-2.5 py-0.5 text-sm font-medium  ml-3 w-auto whitespace-nowrap",
      children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$4, { className: "h-4 w-4 mr-2 text-yellow-800", "aria-hidden": "true" }),
        " ",
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "mt-0", children: "In Progress" })
      ]
    }
  ) : person?.ApplicationStatusLabel == "Approved" ? /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { title: "You can't change anything on this status.", className: "bg-green-100 text-green-900 flex items-center rounded-full px-2.5 py-0.5 text-sm font-medium  ml-3  w-auto whitespace-nowrap", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$1, { className: "h-4 w-4 mr-2 text-green-900", "aria-hidden": "true" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "mt-0", children: "Approved" })
  ] }) : person?.ApplicationStatusLabel == "Waiting for Approval" || person?.ApplicationStatusLabel == "Submitted" ? /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { title: "You can't change anything on this status.", className: "bg-blue-100 text-blue-800 flex items-center rounded-full px-2.5 py-0.5 text-sm font-medium  ml-3  w-auto whitespace-nowrap", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef, { className: "h-4 w-4 mr-2 text-blue-800", "aria-hidden": "true" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "mt-0", children: "Waiting for Approval" })
  ] }) : person?.ApplicationStatusLabel == "Rejected" ? /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { title: "You can't change anything on this status.", className: "bg-red-100 text-red-800 flex items-center rounded-full px-2.5 py-0.5 text-sm font-medium  ml-3  w-auto whitespace-nowrap", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$3, { className: "h-4 w-4 mr-2 text-red-800", "aria-hidden": "true" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "mt-0", children: "Rejected" })
  ] }) : person?.ApplicationStatusLabel == "Reviewed" ? /* @__PURE__ */ jsxRuntimeExports.jsxs("span", { title: "You can't change anything on this status.", className: "bg-orange-100 text-orange-800 flex items-center rounded-full px-2.5 py-0.5 text-sm font-medium  ml-3  w-auto whitespace-nowrap", children: [
    /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$2, { className: "h-4 w-4 mr-2 text-orange-800", "aria-hidden": "true" }),
    /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "mt-0", children: "Reviewed" })
  ] }) : person?.ApplicationStatusLabel && /* @__PURE__ */ jsxRuntimeExports.jsx("span", { className: "inline-flex items-center justify-center px-2.5 py-1  text-xs text-red-700 bg-red-100 rounded-md hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 whitespace-nowrap", children: /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: person?.ApplicationStatusLabel ?? "No Status" }) });
};
const UserReviewButton = ({ person, onClick }) => {
  return person?.ApplicationStatusLabel == "In Progress" || person?.ApplicationStatusLabel == "InProgress" ? /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "button",
      {
        type: "button",
        onClick: () => onClick(person, "Reviewed"),
        className: "inline-flex items-center gap-x-1.5 rounded-md bg-orange-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$2, { className: "h-4 w-4 mr-2", "aria-hidden": "true" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Add Review" })
        ]
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "button",
      {
        onClick: () => onClick(person, "Approved"),
        className: "inline-flex items-center gap-x-1.5 rounded-md bg-green-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600",
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$1, { className: "h-4 w-4 mr-2", "aria-hidden": "true" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Approve" })
        ]
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "button",
      {
        onClick: () => onClick(person, "Rejected"),
        className: "inline-flex items-center gap-x-1.5 rounded-md bg-red-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600",
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$3, { className: "h-4 w-4 mr-2", "aria-hidden": "true" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Reject" })
        ]
      }
    )
  ] }) : person?.ApplicationStatusLabel == "Approved" ? /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "button",
      {
        onClick: () => onClick(person, "Reviewed"),
        className: "inline-flex items-center gap-x-1.5 rounded-md bg-orange-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$2, { className: "h-4 w-4 mr-2", "aria-hidden": "true" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Review Again" })
        ]
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "button",
      {
        onClick: () => onClick(person, "Rejected"),
        className: "inline-flex items-center gap-x-1.5 rounded-md bg-red-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600",
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$3, { className: "h-4 w-4 mr-2", "aria-hidden": "true" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Reject" })
        ]
      }
    )
  ] }) : person?.ApplicationStatusLabel == "Waiting for Approval" || person?.ApplicationStatusLabel == "Reviewed" || person?.ApplicationStatusLabel == "Submitted" ? /* @__PURE__ */ jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment, { children: [
    /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "button",
      {
        onClick: () => onClick(person, "Reviewed"),
        className: "inline-flex items-center gap-x-1.5 rounded-md bg-orange-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$2, { className: "h-4 w-4 mr-2", "aria-hidden": "true" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Review" })
        ]
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "button",
      {
        onClick: () => onClick(person, "Rejected"),
        className: "inline-flex items-center gap-x-1.5 rounded-md bg-red-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600",
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$3, { className: "h-4 w-4 mr-2", "aria-hidden": "true" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Reject" })
        ]
      }
    ),
    /* @__PURE__ */ jsxRuntimeExports.jsxs(
      "button",
      {
        onClick: () => onClick(person, "Approved"),
        className: "inline-flex items-center gap-x-1.5 rounded-md bg-green-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600",
        children: [
          /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$1, { className: "h-4 w-4 mr-2", "aria-hidden": "true" }),
          /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Approve" })
        ]
      }
    )
  ] }) : person?.ApplicationStatusLabel == "Rejected" ? /* @__PURE__ */ jsxRuntimeExports.jsxs(
    "button",
    {
      onClick: () => onClick(person, "Reviewed"),
      className: "inline-flex items-center gap-x-1.5 rounded-md bg-orange-600 px-2.5 py-1.5 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",
      children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$2, { className: "h-4 w-4 mr-2", "aria-hidden": "true" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Review Again" })
      ]
    }
  ) : /* @__PURE__ */ jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment, {});
};
const SubmitReviewButton = ({ currentReviewStatus, onClick }) => {
  return currentReviewStatus == "Approved" ? /* @__PURE__ */ jsxRuntimeExports.jsxs(
    "button",
    {
      type: "button",
      onClick: () => onClick("Approved"),
      className: "inline-flex items-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600",
      children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$1, { className: "h-4 w-4 mr-2", "aria-hidden": "true" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Submit Review" })
      ]
    }
  ) : currentReviewStatus == "Rejected" ? /* @__PURE__ */ jsxRuntimeExports.jsxs(
    "button",
    {
      type: "button",
      onClick: () => onClick("Rejected"),
      className: "inline-flex items-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-red-600",
      children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$3, { className: "h-4 w-4 mr-2", "aria-hidden": "true" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Mark as Rejected" })
      ]
    }
  ) : currentReviewStatus == "Reviewed" ? /* @__PURE__ */ jsxRuntimeExports.jsxs(
    "button",
    {
      type: "button",
      onClick: () => onClick("Reviewed"),
      className: "inline-flex items-center rounded-md bg-orange-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-600",
      children: [
        /* @__PURE__ */ jsxRuntimeExports.jsx(ForwardRef$2, { className: "h-4 w-4 mr-2", "aria-hidden": "true" }),
        /* @__PURE__ */ jsxRuntimeExports.jsx("span", { children: "Send Review" })
      ]
    }
  ) : /* @__PURE__ */ jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment, {});
};
export {
  ForwardRef$1 as F,
  SubmitReviewButton as S,
  UserStatusBadge as U,
  getActiveStep as a,
  getActiveComponents as b,
  UserReviewButton as c,
  getAllComponentFields as d,
  extractUserAndRoleData as e,
  filterAllowedFields as f,
  getAvailableSteps as g,
  ForwardRef$2 as h,
  registrationSteps as r,
  saveData as s,
  updateStepData as u
};
