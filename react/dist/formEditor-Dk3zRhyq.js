import{r as i,p as j,j as r,L as k}from"./mainweb-kN1oebse.js";import{u as z}from"./index.esm-BuJAcgf9.js";import{RenderComponents as T}from"./renderComponents-D7ZX8E7m.js";import Z from"./modalForm-BNevs8x9.js";import{F as A}from"./XCircleIcon-qpQy1xLS.js";function B({title:t,titleId:c,...f},d){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":c},f),t?i.createElement("title",{id:c},t):null,i.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const G=i.forwardRef(B),H=({row:t,fields:c,viewMode:f,noModal:d,onSave:S,onCancel:h,title:C,description:O})=>{const[n,b]=i.useState(t||{});for(let e in n)if(e.indexOf("JsonSettings")>-1&&e.indexOf(".")==-1)try{let s=j(n[e]);if(s)for(let o in s)n[e+"Object."+o]=s[o]}catch(s){console.error("Error parsing JSON:",s)}let[p,x]=i.useState(!1);const[E,P]=i.useState("");let v=c;const{handleSubmit:w,register:F,unregister:N,control:L,clearErrors:R,reset:J,watch:V,getValues:M,setValue:u,trigger:I,formState:{errors:_}}=z({defaultValues:{...t}});i.useEffect(()=>{t&&(Object.keys(t).forEach(e=>{N(e),u(e,t[e])}),b({...t}))},[t]);const D=async e=>{x(!0),window.scrollTo({top:0,behavior:"smooth"});let s=o=>{P(o)};try{await S(e,!1,!0,s)}catch(o){console.error("Error saving user:",o)}x(!1)},y=(e,s)=>{if(console.log("handlePropertiesChange",e,s),u(e,s),t&&(t[e]=s),e.indexOf("JsonSettingsObject")>-1){let g=e.split("Object.")[1],a=e.split("Object.")[0];var o=t[a],l=j(o);let K={[g]:s};l={...l,...K},t[a]=JSON.stringify(l),u(a,JSON.stringify(l))}b({...t})};let m=[...v];return n&&v?.length>0&&(m=m.filter(e=>{let s=e.conditions?.filter(o=>o.key);return s?.length>0?!!s.find(l=>{if(l.key){let g=l.key.charAt(0).toLowerCase()+l.key.slice(1),a=n[l.key]||n[g];if(a&&a?.toString()==l.value)return!0}}):!0})),console.log({filteredComponents:m}),r.jsx(Z,{isPlainView:d,title:C,description:O,open:!0,center:!1,outerClass:"max-w-xl",setOpen:h,children:r.jsxs("div",{className:"flex-auto relative",children:[p&&r.jsx(k,{info:E}),r.jsxs("form",{onSubmit:w(D),children:[r.jsx(T,{handlePropertiesChange:y,handlePropertiesPanelChange:()=>{console.log("handlePropertiesPanelChange")},viewMode:f,formData:n,isPlayGround:!1,onChangeValue:y,drop:null,isSubmitted:p,isOver:!1,eventDetails:{},components:m,selectedComponent:{},handleSelect:()=>{console.log("handleSelect")},register:F,getValues:M,errors:_,control:L,setValue:u,clearErrors:R,reset:J,watch:V,removeComponent:()=>{console.log("removeComponent")}}),!p&&!f&&r.jsx("div",{className:"mb-2 w-full flex justify-end px-0 gap-x-4",children:r.jsxs(r.Fragment,{children:[r.jsxs("button",{type:"button",onClick:h,className:"inline-flex items-center gap-x-2  rounded-md bg-gray-200 px-6 py-2.5 text-sm font-semibold text-gray-700 shadow-sm hover:bg-gray-300 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[r.jsx(A,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Cancel"]}),r.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[r.jsx(G,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Submit"]})]})})]})]})})},X=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));export{H as F,G as a,X as f};
