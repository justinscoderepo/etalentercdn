import{r as f,j as e}from"./main-D8b2PQfU.js";import{O}from"./OldNewTabLayout-BEmBNwdy.js";import{d as R,e as w}from"./navigationUtils-yehQNK_D.js";const T=({url:r,title:a="Loading...",className:x="reactIframeLayout",id:n="mvc-iframe",onLoad:p,fallbackUrl:o,isNewPageAvailable:b=!1})=>{const u=R(),[c,g]=f.useState(""),[d,l]=f.useState(!0),[m,i]=f.useState(!1);r||(r=u.pathname),console.log("IframeRender props:",{url:r,title:a,className:x,id:n,fallbackUrl:o,isNewPageAvailable:b});const L=t=>{if(b){const s=t,h=t+"Old";return{isOldNewLayout:!0,tabs:[{title:"New Page",path:w(s)},{title:"Old Page",active:!0,path:w(h)}]}}return{isOldNewLayout:!1}};f.useEffect(()=>{let t=r;t||(t=u.pathname);const s=I(t);g(s),l(!0),i(!1)},[r,a]);const I=t=>{let s=t;s=s.replace(/^\/v2/,""),s=s.replace("/index.html",""),s=s.replace(/\/Render([A-Z])/g,"/$1"),s=s.replace(/\/index\.html$/,""),s=s.replace(/\/$/,""),s.startsWith("/")||(s="/"+s);const h=s.includes("?")?"&":"?";return s+=`${h}IsInIframe=true`,s},y=()=>{l(!1),i(!1),p&&p()},v=()=>{l(!1),i(!0),o&&c!==o&&(g(o),l(!0),i(!1))},j=()=>{l(!0),i(!1);const t=document.getElementById(n);t&&(t.src=t.src)},E=r||u.pathname,N=L(E);return N.isOldNewLayout?e.jsx(O,{tabs:N.tabs,children:e.jsxs("div",{className:"relative w-full h-full",children:[d&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50 z-10",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),e.jsx("span",{className:"text-sm text-gray-600",children:a})]})}),m&&!d&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50 z-10",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("div",{className:"text-red-500 text-4xl mb-3",children:"⚠️"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to load page"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"The requested page could not be loaded."}),e.jsxs("button",{onClick:j,className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"refresh"}),"Retry"]})]})}),e.jsx("iframe",{id:n,className:`${x} w-full h-full border-0`,src:c,title:a,onLoad:y,onError:v,style:{minHeight:"calc(100vh - 2.5rem)",display:m?"none":"block"}})]})}):e.jsxs("div",{className:"relative w-full h-full",children:[d&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50 z-10",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),e.jsx("span",{className:"text-sm text-gray-600",children:a})]})}),m&&!d&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50 z-10",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("div",{className:"text-red-500 text-4xl mb-3",children:"⚠️"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to load page"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"The requested page could not be loaded."}),e.jsxs("button",{onClick:j,className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[e.jsx("span",{className:"material-symbols-outlined text-sm",children:"refresh"}),"Retry"]})]})}),c&&e.jsx("iframe",{id:n,className:`${x} w-full h-full border-0`,src:c,title:a,onLoad:y,onError:v,style:{minHeight:"calc(100vh - 2.5rem)",display:m?"none":"block"}})]})};export{T as default};
