import{r as l,j as e,L as $}from"./mainweb-BFccRwdk.js";import{B as G}from"./box-BB9Yd4dL.js";import{u as H}from"./useConfirmation-SnWTz0Cv.js";import{c as F}from"./utilities-CN4lTu6a.js";import{u as J}from"./index.esm-Tz4C_F66.js";import{R as z}from"./renderComponents-B1fdUz8Q.js";import{M as D}from"./modalForm-B-Lge6F1.js";import{F as q}from"./XCircleIcon-DRSeOcdM.js";import{P as Y}from"./pagination-CId7Shgu.js";import{F as _}from"./TrashIcon-BR8BvsCg.js";import{u as K}from"./useBackend-LuZMgPnD.js";import"./dialog-hT0OF6Qm.js";import"./CheckIcon-8R30PYaF.js";import"./validationMessage-6nYlMK2m.js";import"./clsx-B-dksMZM.js";import"./manageTeamParticipants-B_T6mAge.js";import"./httpService-BkMFI5wE.js";import"./index-BtuGy7By.js";function Q({title:s,titleId:a,...i},o){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":a},i),s?l.createElement("title",{id:a},s):null,l.createElement("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}const W=l.forwardRef(Q);function X({title:s,titleId:a,...i},o){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":a},i),s?l.createElement("title",{id:a},s):null,l.createElement("path",{fillRule:"evenodd",d:"M3.74 3.749a.75.75 0 0 1 .75.75V15h13.938l-2.47-2.47a.75.75 0 0 1 1.061-1.06l3.75 3.75a.75.75 0 0 1 0 1.06l-3.75 3.75a.75.75 0 0 1-1.06-1.06l2.47-2.47H3.738a.75.75 0 0 1-.75-.75V4.5a.75.75 0 0 1 .75-.751Z",clipRule:"evenodd"}))}const ee=l.forwardRef(X);function te({title:s,titleId:a,...i},o){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":a},i),s?l.createElement("title",{id:a},s):null,l.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}const le=l.forwardRef(te);function se({title:s,titleId:a,...i},o){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":a},i),s?l.createElement("title",{id:a},s):null,l.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"}))}const ae=l.forwardRef(se);function re({title:s,titleId:a,...i},o){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":a},i),s?l.createElement("title",{id:a},s):null,l.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}const oe=l.forwardRef(re);function ne({title:s,titleId:a,...i},o){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":a},i),s?l.createElement("title",{id:a},s):null,l.createElement("path",{fillRule:"evenodd",d:"M15.75 4.5a3 3 0 1 1 .825 2.066l-8.421 4.679a3.002 3.002 0 0 1 0 1.51l8.421 4.679a3 3 0 1 1-.729 1.31l-8.421-4.678a3 3 0 1 1 0-4.132l8.421-4.679a3 3 0 0 1-.096-.755Z",clipRule:"evenodd"}))}const ie=l.forwardRef(ne),de=({row:s,fields:a,onSave:i,onCancel:o,title:p,description:A})=>{const[d,u]=l.useState(s||{}),[v,j]=l.useState(!1),[B,h]=l.useState("");let w=a;const{handleSubmit:O,register:U,unregister:L,control:S,clearErrors:I,reset:T,watch:b,getValues:R,setValue:x,trigger:k,formState:{errors:M}}=J({defaultValues:{...s}});l.useEffect(()=>{s&&(Object.keys(s).forEach(m=>{L(m),x(m,s[m])}),u({...s}))},[s]);const P=async m=>{j(!0),window.scrollTo({top:0,behavior:"smooth"});let c=t=>{debugger;h(t)};try{await i(m,!1,!0,c)}catch(t){console.error("Error saving user:",t)}j(!1)},N=(m,c)=>{x(m,c),s&&(s[m]=c),u({...s})};let y=[...w];return d&&(w==null?void 0:w.length)>0&&(y=y.filter(m=>{var t;let c=(t=m.conditions)==null?void 0:t.filter(n=>n.key);return(c==null?void 0:c.length)>0?!!c.find(r=>{if(r.key){let g=r.key.charAt(0).toLowerCase()+r.key.slice(1),C=d[r.key]||d[g];if(C&&(C==null?void 0:C.toString())==r.value)return!0}}):!0})),console.log({filteredComponents:y}),e.jsx(D,{title:p,description:A,open:!0,setOpen:o,children:e.jsxs("div",{className:"flex-auto p-2 relative",children:[v&&e.jsx($,{info:B}),e.jsxs("form",{onSubmit:O(P),children:[e.jsx(z,{handlePropertiesChange:N,handlePropertiesPanelChange:()=>{console.log("handlePropertiesPanelChange")},formData:d,isPlayGround:!1,onChangeValue:N,drop:null,isSubmitted:v,isOver:!1,eventDetails:{},components:y,selectedComponent:{},handleSelect:()=>{console.log("handleSelect")},register:U,getValues:R,errors:M,control:S,setValue:x,clearErrors:I,reset:T,watch:b,removeComponent:()=>{console.log("removeComponent")}}),!v&&e.jsx("div",{className:"mb-2 w-full flex justify-end px-0 gap-x-4",children:e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:o,className:"inline-flex items-center gap-x-2  rounded-md bg-gray-200 px-6 py-2.5 text-sm font-semibold text-gray-700 shadow-sm hover:bg-gray-300 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[e.jsx(q,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Cancel"]}),e.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[e.jsx(le,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Submit"]})]})})]})]})})},me=({status:s,formTitle:a,defaultFormValues:i,formDescription:o,rows:p=[],formFields:A=[],pageDetails:d={},fields:u=[],topActions:v=[],actions:j=[],setOffsetAndLimit:B=()=>{},searchFields:h=[],update:w=()=>{alert("Not Implemented")},delete:O=()=>{}})=>{console.log({rows:p});const[U,L]=H(),[S,I]=l.useState(()=>{const t={};return h==null||h.forEach(n=>{t[n.columnName]=""}),t}),[T,b]=l.useState(!1),[R,x]=l.useState(null),k=(t,n)=>{I(r=>({...r,[t]:n}))},M=()=>{console.log("Search Values:",S)},P=(t,n)=>{const r=`https://wa.me/?text=Hello! ${t} Sharing ${n}`;window.open(r,"_blank")},N=t=>{x(t),b(!0)},y=async t=>{await w(t),b(!1),x(null)},m=()=>{b(!1),x(null)},c=()=>e.jsx("div",{className:"min-h-5 w-full relative",children:e.jsx("div",{className:"relative right-0 -top-10",children:v.length>0&&e.jsx("div",{className:"flex justify-end items-end gap-x-2 gap-y-2",children:v.map((t,n)=>e.jsx("div",{className:"bg-white rounded-full shadow-sm p-2",children:e.jsxs("button",{className:F("font-semibold py-2 px-2 rounded-3xl flex items-center justify-center shadow-sm",t.label?"px-6":"h-10 w-10",t.type==="new"?"bg-indigo-600 text-white":t.type==="export"?"bg-green-700 text-white":t.type==="custom"?"bg-gray-700 text-white":""),onClick:()=>{t.type==="new"?b(!0):t.type==="export"?console.log("Export"):t.type==="custom"&&console.log("Custom Action")},children:[t.type==="new"&&e.jsx(oe,{className:"h-5 w-5 text-white"}),t.type==="export"&&e.jsx(W,{className:"h-5 w-5 text-white"}),t.type==="custom"&&e.jsxs(e.Fragment,{children:[t.icon,e.jsx("span",{className:"ml-2",children:t.label})]})]},n)}))})})});return e.jsxs(e.Fragment,{children:[e.jsx(U,{title:"Delete Item",description:"Are you sure you want to delete this item?",confirmButtonLabel:"Delete",confirmButtonClick:async t=>O(t),className:"w-96 print:hidden"}),e.jsxs("div",{className:"border border-gray-200 rounded-md shadow-sm p-4",children:[(h==null?void 0:h.length)>0&&e.jsxs("div",{className:"mb- flex flex-row justify-end gap-x-2 gap-y-2",children:[h==null?void 0:h.map((t,n)=>e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"absolute -top-2 left-2 inline-block rounded-lg bg-white px-1 text-xs font-medium text-gray-900",children:["Search By ",t.label]}),t.type==="text"&&e.jsx("input",{type:"text",placeholder:"Enter "+(t.placeholder||t.label),value:S[t.columnName],onChange:r=>k(t.columnName,r.target.value),className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900   placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-darkprimary sm:text-sm/6"}),t.type==="select"&&e.jsx("select",{value:S[t.columnName],onChange:r=>k(t.columnName,r.target.value),className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900  placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-darkprimary sm:text-sm/6",children:t.options.map((r,g)=>e.jsx("option",{value:r.value,children:r.label},g))})]},n)),e.jsx("button",{type:"button",onClick:M,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary hover:bg-darkprimary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-darkprimary",children:"Search"})]}),e.jsx("div",{className:"relative mt-12",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[(u==null?void 0:u.length)>0&&e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[u.map((t,n)=>e.jsx("th",{className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-3",children:t.label},n)),e.jsx("th",{children:e.jsx(c,{})})]})}),(p==null?void 0:p.length)>0&&e.jsx("tbody",{className:"divide-y divide-gray-200 ",children:p.map((t,n)=>e.jsxs("tr",{children:[u==null?void 0:u.map((r,g)=>e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t[r.column]},g)),j.length>0&&e.jsx("td",{className:"whitespace-nowrap text-sm font-medium ",children:e.jsx("div",{className:"flex justify-end gap-x-2 gap-y-2",children:j.map((r,g)=>e.jsxs("button",{title:r.label,className:F("h-10 w-10 font-semibold py-2 px-2 rounded-3xl flex items-center justify-center",r.type==="whatsapp"?"bg-green-700 text-white":r.type==="edit"?"bg-primary text-white":r.type==="delete"?"bg-red-800 text-white":""),onClick:()=>{r.type==="whatsapp"?P(t.name,t.email):r.type==="edit"?N(t):r.type==="delete"&&L(t.userRoleId)},children:[r.type==="whatsapp"&&e.jsx(ie,{className:"h-5 w-5 text-white"}),r.type==="edit"&&e.jsx(ae,{className:"h-4 w-4 text-white"}),r.type==="delete"&&e.jsx(_,{className:"h-5 w-5 text-white"})]},g))})})]},n))}),(p==null?void 0:p.length)===0&&s!="finished"&&e.jsx("tbody",{className:"bg-white flex justify-center",children:e.jsx("tr",{className:"flex justify-center",children:e.jsx($,{})})})]})}),d&&e.jsx(Y,{rowsFrom:d==null?void 0:d.rowsFrom,rowsTo:d==null?void 0:d.rowsTo,totalRowCount:d==null?void 0:d.totalRowCount,setOffsetAndLimit:B}),T&&e.jsx(de,{description:o,title:a,row:R||i,fields:A,onSave:y,onCancel:m})]})]})};let V={SuperAdmin:{RoleId:1,Role:"SuperAdmin"},Candidate:{RoleId:2,Role:"Candidate"},Organizer:{RoleId:3,Role:"Organizer"},Manager:{RoleId:4,Role:"Manager"},Coordinator:{RoleId:5,Role:"Coordinator"},Judge:{RoleId:6,Role:"Judge"},Guest:{RoleId:7,Role:"Guest"},SubCoordinator:{RoleId:8,Role:"SubCoordinator"},Projector:{RoleId:9,Role:"Projector"},SubAdmin:{RoleId:10,Role:"SubAdmin"},ContentAdmin:{RoleId:11,Role:"ContentAdmin"},User:{RoleId:12,Role:"User"},DrawMaster:{RoleId:13,Role:"DrawMaster"},ScoreMaster:{RoleId:14,Role:"ScoreMaster"},Guardian:{RoleId:15,Role:"Guardian"}};localStorage.getItem("accessToken");function Ie({user:s,operation:a,eventCategory:i,eventId:o}){console.log({user:s},{operation:a},{eventCategory:i},{eventId:o});const[p,A]=l.useState(3),[d,u]=l.useState(!1),[v,j]=l.useState(null),[B,h]=l.useState(!1),[w,O]=l.useState(""),[U,L]=l.useState(""),[S,I]=l.useState(!1),[T,b]=l.useState(null),R=K("/UsersRolesPlusUsersJson/Get",{filter:{Event:o,Role:V[a].RoleId,CreatedBy:s.UId,Status:"1"},updateUrl:"/SetupJson/SaveUser",deleteUrl:"/SetupJson/RemoveCoordinator",limit:10,sort:{sortOrder:"DESC",sortColumn:"UserRoleId"},select:"Event,Role,SixDigitPassword,Status,User,UserEmail,UserEmailCode,UserName,UserNameCode,UserRoleId"});let{rows:x,row:k,setFilter:M,setOffset:P,localOffset:N,localSort:y,filters:m,update:c,delete:t,status:n,setOffsetAndLimit:r}=R;console.log({users:x},{pageDetails:k},{setFilter:M},{setOffset:P},{localOffset:N},{localSort:y},{filters:m},{updateUserRole:c},{deleteUserRole:t},{loadingStatus:n},{setOffsetAndLimit:r});const g=(f,E)=>{const Z=`https://wa.me/?text=Hello! ${f} Sharing ${E}`;window.open(Z,"_blank")},C=async f=>{if(!w||!U){alert("Please fill in all fields");return}f.Role=V[a].RoleId,f.Event=o,f.RoleRole=V[a].Role,f.Status="1",f.CreatedBy=s.UId,u(!0);try{const E=await c(f);debugger;E.data&&E.data.Results}catch(E){console.error("Error saving user:",E)}finally{u(!1)}};return e.jsx(G,{heading:"Manage User Roles - "+a,childrenClasses:"px-2 py-2",headingClasses:"px-3",outerClasses:"max-w-full mx-auto ml-5 bg-gray-50 print:hidden ",children:e.jsxs("div",{className:"",children:[d&&e.jsx($,{}),e.jsx(me,{...R,defaultFormValues:{Event:o,Role:V[a].RoleId,RoleRole:V[a].Role,Status:"1",CreatedBy:s.UId},formTitle:"Manage User Roles - "+a,formDescription:"You can create bew "+a+" by enter name and email",topActions:[{type:"new",title:"New"},{type:"custom",icon:e.jsx(ee,{className:"h-5 w-5"}),label:"Create Yourself as "+a,onClick:()=>C({UserName:s.Name,UserEmail:s.Email})}],fields:[{label:"Name",column:"UserName"},{label:"Email",column:"UserEmail"}],searchFields:[{label:"Name",type:"text",column:"UserName"}],formFields:[{name:"UserName",label:"Name",type:"text",validate:{required:!0,minLength:3,maxLength:50}},{name:"UserEmail",label:"Email",type:"text",validate:{required:!0,email:!0}}],actions:[{type:"whatsapp",icon:"fa-share",onClick:f=>g(f.UserName,f.UserEmail)},{type:"delete",icon:"fa-trash",onClick:f=>{b(f.UserRoleId),I(!0)}}]})]})})}export{Ie as default};
