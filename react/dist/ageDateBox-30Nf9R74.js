import{r as l,j as e}from"./mainweb-BW4Oeajf.js";import{F as H,D as $}from"./index-Dl1D8phc.js";import{C as I}from"./index.esm-kPVU7S9s.js";import{c as p}from"./utilities-CN4lTu6a.js";import{V as L}from"./validationMessage-DwQWrdU3.js";import{u as q}from"./useBackend-DjRcwMe1.js";import{F as P}from"./ChevronLeftIcon-BAQJS-PY.js";import{F as z}from"./ChevronRightIcon-B04XFrLS.js";import{F as W}from"./CheckCircleIcon-C98160jQ.js";import"./clsx-B-dksMZM.js";import"./floating-ui.dom-Di5CRMxg.js";import"./httpService-ChBK4-vh.js";import"./index-t--hEgTQ.js";function _({title:a,titleId:r,...s},n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},s),a?l.createElement("title",{id:r},a):null,l.createElement("path",{d:"M12.75 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM7.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM8.25 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM9.75 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM10.5 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM12.75 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM14.25 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"}),l.createElement("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"}))}const K=l.forwardRef(_),b=a=>{let r=new Date(a),s=""+(r.getMonth()+1),n=""+r.getDate(),i=r.getFullYear();return s.length<2&&(s="0"+s),n.length<2&&(n="0"+n),[n,s,i].join("-")},Z=a=>{try{if(!a)return"";let r=a.split("-");return r.length<3?"":new Date(r[2],r[1]-1,r[0])}catch{return""}},Q=(a,r,s=r-a+1)=>Array.from({length:s},(n,i)=>a+i),U=a=>a.getFullYear(),X=a=>a.getMonth(),De=({control:a,fieldName:r,label:s,formData:n,errors:i,register:ee,minDate:re,maxDate:te,optional:v,maxLength:ae,onChange:A,type:se,pattern:ne,disabled:c})=>{const{rows:g}=q("/CandidateJson/GetByAge",{sort:{sortOrder:"DESC",sortColumn:"id"},filter:{ParticipantType:1},doCache:!0,select:"AgeFrom,AgeTo,EventGroupId,GroupName,Status,AgeStartDate,MaxAgeDate,MinAgeDate,AgeStartMonth,AgeStartYear"});console.log({ageWiseGroup:g});let N=g?.sort((t,d)=>d.AgeTo-t.AgeTo)?.[0],F=g?.sort((t,d)=>t.AgeFrom-d.AgeFrom)?.[0],E=i?.[r];const y=l.useRef(null);let[u,S]=l.useState(E);const C=t=>{y.current&&!y.current.contains(t.target)&&y.current.closeCalendar()};l.useEffect(()=>(document.addEventListener("click",C,!0),()=>{document.removeEventListener("click",C,!0)}),[]),l.useEffect(()=>{S(i?.[r])},[i?.[r]]);let D=F?.MaxAgeDate?new Date(F?.MaxAgeDate):new Date,j=N?.MinAgeDate?new Date(N?.MinAgeDate):new Date;console.log({minDateCalc:j,maxDateCalc:D});let k=D.getFullYear(),R=j.getFullYear(),x=null,w=null;n?.[r]&&(x=Z(n?.[r])),x&&(w=g?.filter(t=>{let d=new Date(t.MaxAgeDate),Y=new Date(t.MinAgeDate),m=t.JsonSettings;if(m&&(m=JSON.parse(m),m?.IsCommon=="Yes"))return!1;if(x>=Y&&x<=d)return t}));const G=Q(R,k),M=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.jsxs("div",{className:"sm:col-span-4",children:[e.jsxs("label",{htmlFor:r,className:p("block text-sm font-medium leading-6 ",u?"text-danger":"text-gray-900"),children:[s||r,!v&&e.jsx("span",{className:"text-danger pl-1",children:"*"})]}),e.jsxs("div",{className:"relative mt-2  print:mt-0 rounded-md shadow-sm items-center",children:[e.jsx("div",{className:p("pointer-events-none h-9 absolute inset-y-0 left-0 z-20 flex items-center",c?"":"pl-3"),children:e.jsx(H,{"aria-hidden":"true",className:"h-5 w-5 mb-0.5 "+(u?"text-red-400":"text-gray-400")})}),c?e.jsx("div",{className:p("pl-7","block w-full py-1.5  print:py-1 sm:text-sm sm:leading-6","text-gray-900   placeholder:text-gray-400 ring-gray-300 ",c?"text-gray-500":""),children:n?.[r]??"-"}):e.jsx(I,{control:a,name:r,disabled:c,rules:{required:!v},render:({field:t,fieldState:{invalid:d,isDirty:Y},formState:{errors:m}})=>e.jsxs(e.Fragment,{children:[e.jsx($,{maxDate:D,minDate:j,disabled:c,calendarClassName:"!border-gray-100 shadow-lg font-medium",calendarIconClassName:"h-5 w-5",placeholderText:"Select "+s,className:p("appearance-none block w-full px-3 pl-10 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",c?"bg-gray-100 text-gray-500":"bg-white text-gray-900",u?"border-red-300 text-red-900 placeholder-red-300 focus:border-red-300 focus:ring-red-300":"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"),dateFormat:"dd-MM-yyyy",renderCustomHeader:({date:h,changeYear:f,changeMonth:T,decreaseMonth:J,increaseMonth:O,prevMonthButtonDisabled:V,nextMonthButtonDisabled:B})=>e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b space-x-1",children:[e.jsx("button",{type:"button",onClick:J,className:" text-gray-800",disabled:V,children:e.jsx(P,{className:"h-8 w-8"})}),e.jsx("select",{className:`border rounded-md shadow-sm placeholder-gray-400 \r
                        border-gray-300\r
                        py-1\r
                        focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm`,value:U(h),onChange:({target:{value:o}})=>{f(o)},children:G.map(o=>e.jsx("option",{value:o,children:o},o))}),e.jsx("select",{className:`border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 \r
                        border-gray-300\r
                        py-1\r
                        focus:border-indigo-500 sm:text-sm`,value:M[X(h)],onChange:({target:{value:o}})=>{T(M.indexOf(o))},children:M.map(o=>e.jsx("option",{value:o,children:o},o))}),e.jsx("button",{type:"button",onClick:O,disabled:B,children:e.jsx(z,{className:"h-8 w-8"})})]}),selected:Z(t.value),onChange:h=>{let f=b(h);t.onChange(f),A&&A(f)}}),u&&e.jsx(L,{message:"This field is required"})]})}),w?.length>0&&e.jsx("div",{className:"mt-5",children:e.jsx("div",{className:"rounded-lg bg-gray-50 shadow-sm ring-1 ring-gray-900/5",children:e.jsxs("dl",{className:"flex flex-wrap",children:[e.jsx("div",{className:"flex-auto pl-6 pt-1",children:e.jsx("dt",{className:"text-sm/6 font-semibold text-gray-900",children:"Matching Groups"})}),w?.map((t,d)=>e.jsxs("div",{className:" flex w-full flex-none gap-x-4 border-t border-gray-900/5 px-6 py-1",children:[e.jsx("dt",{className:"flex-none",children:e.jsx(W,{"aria-hidden":"true",className:"h-6 w-5 text-green-400 "})}),e.jsx("dd",{className:"text-sm/6 font-medium text-gray-900",children:t.GroupName}),e.jsx("dt",{className:"flex-none",children:e.jsx(K,{"aria-hidden":"true",className:"h-6 w-5 text-gray-400"})}),e.jsx("dd",{className:"text-sm/6 font-medium text-gray-900",children:e.jsxs("span",{className:"text-sm/6 text-gray-500",children:[b(t.MinAgeDate)," - ",b(t.MaxAgeDate)]})})]}))]})})})]})]})};export{De as default};
