import{u as q,r as f,j as e,i as p}from"./main-BCzkGS41.js";import{F as H,D as P}from"./index.es-BN5sT-oQ.js";import{C as V}from"./index.esm-BKLWkuiK.js";import{V as z}from"./validationMessage-CuS4UUNG.js";import{F as W}from"./ChevronLeftIcon-CqChey7o.js";import{F as _}from"./ChevronRightIcon-KuKrHLtU.js";import{F as K}from"./CheckCircleIcon-2GeiEyhg.js";import{F as Q}from"./CalendarDaysIcon--PAR1-7X.js";import"./clsx-B-dksMZM.js";import"./floating-ui.dom-FjjDzou9.js";import"./navigationUtils-DwfIOsrY.js";const N=a=>{let t=new Date(a),n=""+(t.getMonth()+1),o=""+t.getDate(),i=t.getFullYear();return n.length<2&&(n="0"+n),o.length<2&&(o="0"+o),[o,n,i].join("-")},S=a=>{try{if(!a)return"";let t=a.split("-");return t.length<3?"":new Date(t[2],t[1]-1,t[0])}catch{return""}},U=(a,t,n=t-a+1)=>Array.from({length:n},(o,i)=>a+i),X=a=>a.getFullYear(),Z=a=>a.getMonth(),pe=({control:a,fieldName:t,label:n,formData:o,errors:i,register:ee,minDate:te,maxDate:re,optional:A,maxLength:ae,onChange:F,type:se,pattern:ne,disabled:d,jsonSettings:G})=>{const{rows:m}=q("/CandidateJson/GetByAge",{sort:{sortOrder:"DESC",sortColumn:"id"},filter:{ParticipantType:1},doCache:!0,select:"AgeFrom,AgeTo,EventGroupId,GroupName,Status,AgeStartDate,MaxAgeDate,MinAgeDate,AgeStartMonth,AgeStartYear"});console.log({ageWiseGroup:m});let M=m?.sort((r,l)=>l.AgeTo-r.AgeTo)?.[0],v=m?.sort((r,l)=>r.AgeFrom-l.AgeFrom)?.[0],k=i?.[t];const y=f.useRef(null);let[g,E]=f.useState(k);const C=r=>{y.current&&!y.current.contains(r.target)&&y.current.closeCalendar()};f.useEffect(()=>(document.addEventListener("click",C,!0),()=>{document.removeEventListener("click",C,!0)}),[]),f.useEffect(()=>{E(i?.[t])},[i?.[t]]);let D=v?.MaxAgeDate?new Date(v?.MaxAgeDate):new Date,j=M?.MinAgeDate?new Date(M?.MinAgeDate):new Date;console.log({minDateCalc:j,maxDateCalc:D});let J=D.getFullYear(),R=j.getFullYear(),u=null,b=null;o?.[t]&&(u=S(o?.[t])),u&&(b=m?.filter(r=>{let l=new Date(r.MaxAgeDate),Y=new Date(r.MinAgeDate),c=r.JsonSettings;if(c&&(c=JSON.parse(c),c?.IsCommon=="Yes"))return!1;if(u>=Y&&u<=l)return r}));const T=U(R,J),w=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.jsxs("div",{className:"sm:col-span-4",children:[e.jsxs("label",{htmlFor:t,className:p("block text-sm font-medium leading-6 ",g?"text-danger":"text-gray-900"),children:[n||t,!A&&e.jsx("span",{className:"text-danger pl-1",children:"*"})]}),e.jsxs("div",{className:"relative mt-2  print:mt-0 rounded-md shadow-sm items-center",children:[e.jsx("div",{className:p("pointer-events-none h-9 absolute inset-y-0 left-0 z-20 flex items-center",d?"":"pl-3"),children:e.jsx(H,{"aria-hidden":"true",className:"h-5 w-5 mb-0.5 "+(g?"text-red-400":"text-gray-400")})}),d?e.jsx("div",{className:p("pl-7","block w-full py-1.5  print:py-1 sm:text-sm sm:leading-6","text-gray-900   placeholder:text-gray-400 ring-gray-300 ",d?"text-gray-500":""),children:o?.[t]??"-"}):e.jsx(V,{control:a,name:t,disabled:d,rules:{required:!A},render:({field:r,fieldState:{invalid:l,isDirty:Y},formState:{errors:c}})=>e.jsxs(e.Fragment,{children:[e.jsx(P,{maxDate:D,minDate:j,disabled:d,calendarClassName:"!border-gray-100 shadow-lg font-medium",calendarIconClassName:"h-5 w-5",placeholderText:"Select "+n,className:p("appearance-none block w-full px-3 pl-10 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",d?"bg-gray-100 text-gray-500":"bg-white text-gray-900",g?"border-red-300 text-red-900 placeholder-red-300 focus:border-red-300 focus:ring-red-300":"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"),dateFormat:"dd-MM-yyyy",renderCustomHeader:({date:x,changeYear:h,changeMonth:O,decreaseMonth:I,increaseMonth:$,prevMonthButtonDisabled:B,nextMonthButtonDisabled:L})=>e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b space-x-1",children:[e.jsx("button",{type:"button",onClick:I,className:" text-gray-800",disabled:B,children:e.jsx(W,{className:"h-8 w-8"})}),e.jsx("select",{className:`border rounded-md shadow-sm placeholder-gray-400 \r
                        border-gray-300\r
                        py-1\r
                        focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm`,value:X(x),onChange:({target:{value:s}})=>{h(s)},children:T.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("select",{className:`border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 \r
                        border-gray-300\r
                        py-1\r
                        focus:border-indigo-500 sm:text-sm`,value:w[Z(x)],onChange:({target:{value:s}})=>{O(w.indexOf(s))},children:w.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("button",{type:"button",onClick:$,disabled:L,children:e.jsx(_,{className:"h-8 w-8"})})]}),selected:S(r.value),onChange:x=>{let h=N(x);r.onChange(h),F&&F(h)}}),g&&e.jsx(z,{message:"This field is required"})]})}),b?.length>0&&e.jsx("div",{className:"mt-5",children:e.jsx("div",{className:"rounded-lg bg-gray-50 shadow-sm ring-1 ring-gray-900/5",children:e.jsxs("dl",{className:"flex flex-wrap",children:[e.jsx("div",{className:"flex-auto pl-6 pt-1",children:e.jsx("dt",{className:"text-sm/6 font-semibold text-gray-900",children:"Matching Groups"})}),b?.map((r,l)=>e.jsxs("div",{className:" flex w-full flex-none gap-x-4 border-t border-gray-900/5 px-6 py-1",children:[e.jsx("dt",{className:"flex-none",children:e.jsx(K,{"aria-hidden":"true",className:"h-6 w-5 text-green-400 "})}),e.jsx("dd",{className:"text-sm/6 font-medium text-gray-900",children:G?.AdditionalSettings?.HideGroupNameDetails==="Yes"&&r.GroupName.split(" - ")?.[0]||r.GroupName}),e.jsx("dt",{className:"flex-none",children:e.jsx(Q,{"aria-hidden":"true",className:"h-6 w-5 text-gray-400"})}),e.jsx("dd",{className:"text-sm/6 font-medium text-gray-900",children:e.jsxs("span",{className:"text-sm/6 text-gray-500",children:[N(r.MinAgeDate)," - ",N(r.MaxAgeDate)]})})]},r.EventGroupId||l))]})})})]})]})};export{pe as default};
