import{r as a,j as e,d as J,k as G}from"./main-CNwsE70q.js";import{a as L,F as Q}from"./ClockIcon-DgOw7Fs3.js";import{F as T}from"./ArrowPathIcon-DtGXYwu1.js";import{F as M}from"./CheckCircleIcon-Cyyx_gWv.js";import{F as O}from"./TrophyIcon-BVNiF5cj.js";import{F as xe}from"./XMarkIcon-CbJbO_a1.js";import{M as ge,u as le,P as he,a as fe,b as pe,L as be,m as ee}from"./proxy-B7QbpQdA.js";import{F as te}from"./ChevronDownIcon-bUivwQK3.js";import{F as ve}from"./ExclamationTriangleIcon-9aA6crRp.js";function ye({title:l,titleId:c,...n},i){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":c},n),l?a.createElement("title",{id:c},l):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const je=a.forwardRef(ye);function Ne({title:l,titleId:c,...n},i){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":c},n),l?a.createElement("title",{id:c},l):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const se=a.forwardRef(Ne);class we extends a.Component{getSnapshotBeforeUpdate(c){const n=this.props.childRef.current;if(n&&c.isPresent&&!this.props.isPresent){const i=n.offsetParent,v=i instanceof HTMLElement&&i.offsetWidth||0,u=this.props.sizeRef.current;u.height=n.offsetHeight||0,u.width=n.offsetWidth||0,u.top=n.offsetTop,u.left=n.offsetLeft,u.right=v-u.width-u.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Ce({children:l,isPresent:c,anchorX:n}){const i=a.useId(),v=a.useRef(null),u=a.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:S}=a.useContext(ge);return a.useInsertionEffect(()=>{const{width:p,height:x,top:E,left:g,right:b}=u.current;if(c||!v.current||!p||!x)return;const y=n==="left"?`left: ${g}`:`right: ${b}`;v.current.dataset.motionPopId=i;const h=document.createElement("style");return S&&(h.nonce=S),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${x}px !important;
            ${y}px !important;
            top: ${E}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[c]),e.jsx(we,{isPresent:c,childRef:v,sizeRef:u,children:a.cloneElement(l,{ref:v})})}const Se=({children:l,initial:c,isPresent:n,onExitComplete:i,custom:v,presenceAffectsLayout:u,mode:S,anchorX:p})=>{const x=le(Ee),E=a.useId(),g=a.useCallback(y=>{x.set(y,!0);for(const h of x.values())if(!h)return;i&&i()},[x,i]),b=a.useMemo(()=>({id:E,initial:c,isPresent:n,custom:v,onExitComplete:g,register:y=>(x.set(y,!1),()=>x.delete(y))}),u?[Math.random(),g]:[n,g]);return a.useMemo(()=>{x.forEach((y,h)=>x.set(h,!1))},[n]),a.useEffect(()=>{!n&&!x.size&&i&&i()},[n]),S==="popLayout"&&(l=e.jsx(Ce,{isPresent:n,anchorX:p,children:l})),e.jsx(he.Provider,{value:b,children:l})};function Ee(){return new Map}const W=l=>l.key||"";function re(l){const c=[];return a.Children.forEach(l,n=>{a.isValidElement(n)&&c.push(n)}),c}const ae=({children:l,custom:c,initial:n=!0,onExitComplete:i,presenceAffectsLayout:v=!0,mode:u="sync",propagate:S=!1,anchorX:p="left"})=>{const[x,E]=fe(S),g=a.useMemo(()=>re(l),[l]),b=S&&!x?[]:g.map(W),y=a.useRef(!0),h=a.useRef(g),R=le(()=>new Map),[Y,A]=a.useState(g),[j,F]=a.useState(g);pe(()=>{y.current=!1,h.current=g;for(let w=0;w<j.length;w++){const m=W(j[w]);b.includes(m)?R.delete(m):R.get(m)!==!0&&R.set(m,!1)}},[j,b.length,b.join("-")]);const $=[];if(g!==Y){let w=[...g];for(let m=0;m<j.length;m++){const I=j[m],P=W(I);b.includes(P)||(w.splice(m,0,I),$.push(I))}return u==="wait"&&$.length&&(w=$),F(re(w)),A(g),null}const{forceRender:U}=a.useContext(be);return e.jsx(e.Fragment,{children:j.map(w=>{const m=W(w),I=S&&!x?!1:g===j||b.includes(m),P=()=>{if(R.has(m))R.set(m,!0);else return;let B=!0;R.forEach(H=>{H||(B=!1)}),B&&(U?.(),F(h.current),S&&E?.(),i&&i())};return e.jsx(Se,{isPresent:I,initial:!y.current||n?void 0:!1,custom:c,presenceAffectsLayout:v,mode:u,onExitComplete:I?void 0:P,anchorX:p,children:w},m)})})},Le=({user:l})=>{const[c,n]=a.useState([]),[i,v]=a.useState("all"),[u,S]=a.useState(new Set),[p,x]=a.useState(""),[E,g]=a.useState(!1),[b,y]=a.useState("all"),{rows:h,status:R,setFilter:Y,update:A}=J("/CompetitionStructureJson/Get",{select:"CompetitionStructureId,Order,CompetitionItemTitle,CompetitionItemCompetitionItemTitle,GenderGenderTitle,LanguageLanguageName,GroupGroupName,CompetitionStatus,ParticipantTypeTitle,ParticipantsCount",filter:{EventCategory:l?.EventCategory,Event:l?.Event},limit:1e3,offset:0,updateUrl:"/CompetitionStructureJson/Save"}),{rows:j,status:F,update:$}=J("/JudgesAllotmentPlusUsersRolesJson/Get",{select:"AllotementId,JudgeUserName,ScoreStatus,Competition,Judge,ScoresSubmitted",filter:{EventCategory:l?.EventCategory,Event:l?.Event},limit:1e3,offset:0,updateUrl:"/JudgesAllotmentJson/Save"}),{rows:U,status:w}=J("/CompetitionScheduleJson/Get",{select:"CompetitionStructureId,StageName",filter:{EventCategory:l?.EventCategory,Event:l?.Event},limit:1e3,offset:0}),{rows:m,status:I}=J("/CompetitionStatusJson/Get",{select:"CompetitionStatusId,CompetitionStatusTitle",limit:100,offset:0}),{rows:P,status:B}=J("/JudgesResultStatusJson/Get",{select:"ResultStatusId,ScoreResultStatus",limit:100,offset:0}),H=R==="fetching"||F==="fetching"||w==="fetching"||I==="fetching"||B==="fetching",D=R==="refreshing"||F==="refreshing",q=a.useMemo(()=>m?m.map(t=>{let r="bg-gray-100 text-gray-800",s=L;return t.CompetitionStatusId===1?(r="bg-green-100 text-green-800",s=M):t.CompetitionStatusId===2?(r="bg-indigo-100 text-indigo-800",s=T):t.CompetitionStatusId===3?(r="bg-gray-100 text-gray-800",s=L):t.CompetitionStatusId===4?(r="bg-yellow-100 text-yellow-800",s=T):t.CompetitionStatusId===5?(r="bg-blue-100 text-blue-800",s=L):t.CompetitionStatusId===6?(r="bg-purple-100 text-purple-800",s=M):t.CompetitionStatusId===7&&(r="bg-red-100 text-red-800",s=se),{value:t.CompetitionStatusId,label:t.CompetitionStatusTitle,color:r,icon:s}}):[{value:3,label:"Not Started",color:"bg-gray-100 text-gray-800",icon:L},{value:5,label:"Yet To Begin",color:"bg-blue-100 text-blue-800",icon:L},{value:4,label:"On Progress",color:"bg-yellow-100 text-yellow-800",icon:T},{value:6,label:"Finished",color:"bg-purple-100 text-purple-800",icon:M},{value:2,label:"On Review",color:"bg-indigo-100 text-indigo-800",icon:T},{value:1,label:"Results Published",color:"bg-green-100 text-green-800",icon:M},{value:7,label:"Cancelled",color:"bg-red-100 text-red-800",icon:se}],[m]),_=a.useMemo(()=>P?P.map(t=>{let r="bg-gray-100 text-gray-800";return t.ResultStatusId===1?r="bg-green-100 text-green-800":t.ResultStatusId===2?r="bg-blue-100 text-blue-800":t.ResultStatusId===3&&(r="bg-yellow-100 text-yellow-800"),{value:t.ResultStatusId,label:t.ScoreResultStatus,color:r}}):[{value:1,label:"Published",color:"bg-green-100 text-green-800"},{value:2,label:"Filled",color:"bg-blue-100 text-blue-800"},{value:3,label:"Allowed to fill",color:"bg-yellow-100 text-yellow-800"}],[P]),K=a.useMemo(()=>{const t=[{value:"all",label:"All Competitions"}];if(m){const r=m.map(s=>({value:s.CompetitionStatusId,label:s.CompetitionStatusTitle}));return[...t,...r]}return t},[m]),f=a.useMemo(()=>h?h.map(t=>{const r=j?j.filter(d=>d.Competition===t.CompetitionStructureId).map(d=>({id:d.AllotementId,name:d.JudgeUserName||"Unknown Judge",status:d.ScoreStatus||1,scoresSubmitted:d.ScoresSubmitted||0,allotmentId:d.AllotementId,judgeId:d.Judge,competitionId:d.Competition})):[],o=U?.find(d=>d.CompetitionStructureId===t.CompetitionStructureId)?.StageName||"TBD",N=t.CompetitionStatus===1;return{id:t.CompetitionStructureId,competitionStructureId:t.CompetitionStructureId,name:`${t.Order} - ${t.GroupGroupName} - ${t.CompetitionItemTitle||t.CompetitionItemCompetitionItemTitle} ${t.GenderGenderTitle?`(${t.GenderGenderTitle})`:""} ${t.LanguageLanguageName?`- ${t.LanguageLanguageName}`:""}`,category:t.CompetitionItemTitle||t.CompetitionItemCompetitionItemTitle,ageGroup:t.GroupGroupName,status:t.CompetitionStatus||1,totalParticipants:t.ParticipantsCount||0,stageName:o,isResultPublished:N,judges:r,order:t.Order||0,participantType:t.ParticipantTypeTitle,gender:t.GenderGenderTitle,language:t.LanguageLanguageName,group:t.GroupGroupName}}).sort((t,r)=>(t.order||0)-(r.order||0)):[],[h,j,U]),X=a.useMemo(()=>{const t=[{value:"all",label:"All Groups"}];if(f&&f.length>0){const s=[...new Set(f.map(o=>o.group).filter(Boolean))].map(o=>({value:o,label:o}));return[...t,...s]}return t},[f]);a.useEffect(()=>{let t=f;if(b!=="all"&&(t=t.filter(r=>r.group===b)),i!=="all"&&(t=t.filter(r=>r.status===parseInt(i))),p.trim()){const r=p.toLowerCase().trim();t=t.filter(s=>s.name.toLowerCase().includes(r)||s.category?.toLowerCase().includes(r)||s.ageGroup?.toLowerCase().includes(r)||s.stageName?.toLowerCase().includes(r))}E&&(t=t.filter(r=>r.isResultPublished)),n(t)},[f,b,i,p,E]);const Z=t=>{const r=new Set(u);r.has(t)?r.delete(t):r.add(t),S(r)},ne=a.useCallback(async(t,r)=>{try{const s=h?.find(d=>d.CompetitionStructureId===t);if(!s){console.error("Competition not found"),G.error("Competition not found");return}const o={CompetitionStructureId:t,CompetitionStatus:r,Event:l?.Event,EventCategory:l?.EventCategory,Order:s.Order,CompetitionItem:s.CompetitionItemTitle,Gender:s.GenderGenderTitle,Language:s.LanguageLanguageName,Group:s.GroupGroupName,Status:1};await A(o)?G.success("Competition status updated successfully"):G.error("Failed to update competition status")}catch(s){console.error("Error updating competition status:",s),G.error("Failed to update competition status")}},[h,A,l?.Event,l?.EventCategory]),ie=a.useCallback(async(t,r,s)=>{try{const o=j?.find(z=>z.AllotementId===r&&z.Competition===t);if(!o){console.error("Judge allotment not found"),G.error("Judge allotment not found");return}const N={AllotementId:r,ScoreStatus:s,Competition:t,Judge:o.Judge,Event:l?.Event,EventCategory:l?.EventCategory,Status:1};await $(N)?G.success("Judge status updated successfully"):G.error("Failed to update judge status")}catch(o){console.error("Error updating judge status:",o),G.error("Failed to update judge status")}},[j,$,l?.Event,l?.EventCategory]),oe=async()=>{try{await Y({EventCategory:l?.EventCategory,Event:l?.Event})}catch(t){console.error("Error refreshing data:",t)}},V=(t,r)=>{const s=r.find(N=>N.value===t);if(!s)return null;const o=s.icon;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.color} animate-in fade-in-0 duration-300`,children:[o&&e.jsx(o,{className:"w-3 h-3 mr-1"}),s.label]})},de=(t,r)=>{let s=0;return t.status===3?t.scoresSubmitted===0?s=3:t.scoresSubmitted<r?s=4:s=5:t.status===2?s=7:t.status===1&&(s=9),Math.round(s/9*100)},ce=t=>{const r=t.judges.filter(k=>k.status===1||k.status===2).length,s=t.judges.filter(k=>k.status===2).length,o=t.judges.filter(k=>k.status===3).length,N=t.judges.length,d=t.totalParticipants*N,z=t.judges.reduce((k,me)=>k+me.scoresSubmitted,0);let C=0;t.status===7?C=0:t.status===3?C=1:t.status===5?C=2:t.status===4?o===N&&s===0&&r===0?C=3:s>0&&r===0?C=4:s===N?C=5:C=4:t.status===6?C=6:t.status===2?C=7:t.status===1&&(C=9);const ue=Math.round(C/9*100);return{completedJudges:r,filledJudges:s,allowedJudges:o,totalJudges:N,overallProgress:ue,scoresSubmitted:z,totalScoresNeeded:d,progressStep:C}};return H?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(T,{className:"h-12 w-12 animate-spin mx-auto text-indigo-500"}),e.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Loading results status..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(O,{className:"h-8 w-8 text-indigo-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Results Status Management"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Monitor competition progress and manage judge assignments across all events"})]})]}),e.jsxs("button",{onClick:oe,disabled:D,className:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white transition-all ${D?"bg-indigo-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 hover:shadow-lg"}`,children:[e.jsx(T,{className:`h-4 w-4 mr-2 ${D?"animate-spin":""}`}),D?"Refreshing...":"Refresh"]})]})}),e.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(je,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"text",className:"pl-10 pr-10 block w-full rounded-md border-0 py-2 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-gray-900 focus:border-darkprimary placeholder:text-gray-400 ring-gray-300",placeholder:"Search by name, category, age group, or stage...",value:p,onChange:t=>x(t.target.value),"aria-label":"Search competitions"}),p&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600 transition-colors p-1 rounded-full hover:bg-gray-100",onClick:()=>x(""),"aria-label":"Clear search",children:e.jsx(xe,{className:"h-4 w-4"})})})]})}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-primary rounded border-gray-300 focus:ring-primary focus:ring-2",checked:E,onChange:t=>g(t.target.checked)}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Show only published results"})]})})]}),f.length>0&&e.jsxs("div",{className:"mb-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-6 rounded-xl text-white transform hover:-translate-y-1 hover:scale-105 transition-all duration-300 hover:shadow-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Total Competitions"}),e.jsx("p",{className:"text-3xl font-bold",children:f.length})]}),e.jsx(O,{className:"h-8 w-8 text-blue-200"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 p-6 rounded-xl text-white transform hover:-translate-y-1 hover:scale-105 transition-all duration-300 hover:shadow-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-100 text-sm font-medium",children:"In Progress"}),e.jsx("p",{className:"text-3xl font-bold",children:f.filter(t=>t.status===4).length})]}),e.jsx(T,{className:"h-8 w-8 text-yellow-200"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-6 rounded-xl text-white transform hover:-translate-y-1 hover:scale-105 transition-all duration-300 hover:shadow-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold",children:f.filter(t=>t.status===6||t.status===2).length})]}),e.jsx(M,{className:"h-8 w-8 text-green-200"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 p-6 rounded-xl text-white transform hover:-translate-y-1 hover:scale-105 transition-all duration-300 hover:shadow-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Published Results"}),e.jsx("p",{className:"text-3xl font-bold",children:f.filter(t=>t.isResultPublished).length})]}),e.jsx(O,{className:"h-8 w-8 text-purple-200"})]})})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"bg-white rounded-lg px-4 sm:px-6 pt-4 border border-gray-200",children:[e.jsx("h3",{className:"border-b-[#4852573e] text-[#206689] mb-3 items-center font-medium pb-1 px-1 w-full uppercase border-b text-sm",children:"FILTER BY GROUP"}),e.jsx("div",{className:"sm:hidden mb-4",children:e.jsx("select",{value:b,onChange:t=>y(t.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-darkprimary focus:ring-primary text-sm",children:X.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})}),e.jsx("nav",{className:"hidden sm:flex -mb-px space-x-4 overflow-x-auto",children:X.slice(0,6).map(t=>e.jsx("button",{onClick:()=>y(t.value),className:`whitespace-nowrap py-2 px-6 border-b-2 font-medium text-sm transition-all duration-200 ${b===t.value?"border-primary text-primary bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:t.label},t.value))})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-white rounded-lg px-4 sm:px-6 pt-4 border border-gray-200",children:[e.jsx("h3",{className:"border-b-[#4852573e] text-[#206689] mb-3 items-center font-medium pb-1 px-1 w-full uppercase border-b text-sm sm:hidden",children:"FILTER BY STATUS"}),e.jsx("div",{className:"sm:hidden mb-4",children:e.jsx("select",{value:i,onChange:t=>v(t.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-darkprimary focus:ring-primary text-sm",children:K.map(t=>e.jsxs("option",{value:t.value,children:[t.label,t.value!=="all"&&` (${f.filter(r=>r.status===t.value).length})`]},t.value))})}),e.jsx("nav",{className:"hidden sm:flex -mb-px space-x-8 overflow-x-auto",children:K.map(t=>e.jsxs("button",{onClick:()=>v(t.value),className:`py-3 px-4 border-b-2 font-medium text-sm whitespace-nowrap transition-colors relative ${i===t.value?"border-primary text-primary bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.label,t.value!=="all"&&e.jsx("span",{className:`ml-2 py-0.5 px-2.5 rounded-full text-xs font-medium ${i===t.value?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-600"}`,children:f.filter(r=>r.status===t.value).length})]},t.value))})]})}),f.length>0&&e.jsxs("div",{className:"mb-4 flex items-center justify-between bg-white px-6 py-3 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-semibold text-primary",children:c.length})," of ",e.jsx("span",{className:"font-semibold text-darkprimary",children:f.length})," ","competitions",p&&e.jsxs("span",{className:"ml-2 text-indigo-600 font-medium",children:['matching "',p,'"']})]}),(c.length!==f.length||p||b!=="all"||E)&&e.jsx("button",{onClick:()=>{x(""),y("all"),v("all"),g(!1)},className:"text-sm text-primary hover:text-primaryHover font-medium transition-all duration-200",children:"Clear all filters"})]}),e.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:e.jsx("div",{className:"p-2 sm:p-6",children:c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(O,{className:"mx-auto h-16 w-16 text-gray-300"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No competitions found"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 max-w-md mx-auto",children:f.length>0?"No competitions match your current filters. Try adjusting your search criteria or clearing filters.":"No competitions have been created yet. Create a competition to get started."}),(p||i!=="all"||E)&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>{x(""),v("all"),g(!1)},className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 hover:-translate-y-0.5 hover:shadow-md",children:"Clear all filters"})})]}):e.jsx("div",{className:"space-y-4",children:e.jsx(ae,{children:c.map(t=>{const r=ce(t);return e.jsxs(ee.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:`border rounded-xl p-2 sm:p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1 hover:scale-[1.01] ${t.judges.length===0?"border-red-300 bg-red-50":"border-gray-200 bg-white"}`,children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-4 flex-1",children:[e.jsx("button",{onClick:()=>Z(t.id),className:"hidden sm:block mt-1 text-gray-400 hover:text-indigo-600 transition-colors p-1 rounded-full hover:bg-gray-100",children:u.has(t.id)?e.jsx(te,{className:"h-5 w-5"}):e.jsx(Q,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col space-y-3 mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-2",children:t.name}),e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 text-sm text-gray-600",children:e.jsxs("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Category:"}),e.jsx("span",{className:"ml-2",children:t.category})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Age Group:"}),e.jsx("span",{className:"ml-2",children:t.ageGroup})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Stage:"}),e.jsx("span",{className:"ml-2",children:t.stageName})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Judges:"}),e.jsx("span",{className:"ml-2",children:t.judges.length})]}),e.jsxs("div",{className:"flex items-center sm:col-span-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Results Published:"}),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-medium rounded-full ${t.isResultPublished?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.isResultPublished?"Yes":"No"})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[V(t.status,q),e.jsx("select",{value:t.status,onChange:s=>ne(t.id,parseInt(s.target.value)),className:"block w-full sm:w-40 rounded-md border-gray-300 shadow-sm focus:border-darkprimary focus:ring-primary text-sm transition-all duration-200 hover:border-primary",children:q.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),(t.status===6||t.status===2)&&e.jsxs("a",{href:`/Coordinator/Results?competitionstructureid=${t.competitionStructureId}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 border border-transparent text-xs font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all duration-200 hover:-translate-y-0.5 hover:shadow-md",children:[e.jsx(O,{className:"h-4 w-4 mr-1"}),"Assign Winners"]})]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors duration-200",onClick:()=>Z(t.id),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overall Progress"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(Click to ",u.has(t.id)?"hide":"show"," judges)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[r.overallProgress,"%"]}),u.has(t.id)?e.jsx(te,{className:"h-4 w-4 text-gray-500"}):e.jsx(Q,{className:"h-4 w-4 text-gray-500"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${r.overallProgress}%`}})}),e.jsxs("div",{className:"mt-2 flex flex-col sm:flex-row sm:justify-between gap-1 text-xs text-gray-600",children:[e.jsxs("span",{children:["Judges: ",r.completedJudges,"/",r.totalJudges," completed"]}),e.jsx("span",{className:"sm:hidden text-primary",children:"Tap to view details"})]})]})]})]})}),e.jsx(ae,{children:u.has(t.id)&&e.jsx(ee.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:e.jsxs("div",{className:"mt-6 border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"border-b-[#4852573e] text-[#206689] mb-2 items-center font-medium pb-1 px-1 w-full uppercase border-b text-sm",children:"JUDGE ASSIGNMENTS"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[t.judges.length," ",t.judges.length===1?"judge":"judges"," assigned"]})]}),t.judges.length===0?e.jsxs("div",{className:"text-center py-8 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(ve,{className:"h-8 w-8 text-amber-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-amber-700 font-medium",children:"No judges assigned"}),e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"This competition needs judge assignments to proceed."})]}):e.jsx("div",{className:"grid gap-4",children:t.judges.map(s=>{const o=de(s,t.totalParticipants),N=_.find(d=>d.value===s.status)?.label||"Unknown";return e.jsx("div",{className:"flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-all duration-200 hover:translate-x-1 hover:shadow-md",children:e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Status: ",N,e.jsxs("span",{className:"ml-2 font-medium",children:["(",o,"%)"]})]})]})}),e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ease-out ${o===100?"bg-green-600":o>=78?"bg-blue-600":o>=56?"bg-indigo-500":o>=33?"bg-yellow-500":"bg-gray-400"}`,style:{width:`${o}%`}})})})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[V(s.status,_),e.jsx("select",{value:s.status,onChange:d=>ie(t.id,s.id,parseInt(d.target.value)),className:"block w-full sm:w-32 rounded-md border-gray-300 shadow-sm focus:border-darkprimary focus:ring-primary text-xs transition-all duration-200 hover:border-primary",children:_.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))})]})]})},s.id)})})]})})})]},t.id)})})})})})]})};export{Le as default};
