import{r as a,j as i,a as C}from"./mainweb-BQze90Z0.js";import{u as Q}from"./index.esm-DGaAvxzZ.js";import{a as W}from"./httpService-DS1O7UUZ.js";import{R as X}from"./renderComponents-Vi4PP1XU.js";function Y({title:u,titleId:n,...x},p){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:p,"aria-labelledby":n},x),u?a.createElement("title",{id:n},u):null,a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z",clipRule:"evenodd"}))}const h=a.forwardRef(Y),te=({isGuardianRegistration:u,isSubmitted:n,disableSaveLater:x,drop:p,data:r,isOver:S,selectedComponent:q,setSelectedComponent:E,components:l,setComponents:$,handlePropertiesPanelChange:k,removeComponent:D,isPlayGround:m,eventDetails:T,handleNext:V,isLastStep:H})=>{var R;let{user:o}=W();o==null||o.RoleTitle;let M=((R=o==null?void 0:o.Email)==null?void 0:R.indexOf("justnshalom"))!=-1;console.log({componentsFS:l});const{handleSubmit:O,register:B,unregister:U,control:Z,clearErrors:z,reset:y,watch:A,getValues:v,setValue:g,trigger:G,formState:{errors:K}}=Q({defaultValues:{...r}});v();let[f,j]=a.useState({...r});a.useEffect(()=>{r&&(Object.keys(r).forEach(e=>{U(e),g(e,r[e])}),j({...r}))},[r]);const L=e=>{E(e)};let _=l.find(e=>e.name=="name"),I=l.find(e=>e.name=="teamName");const F=async(e,t)=>{if(window.scrollTo({top:0,behavior:"smooth"}),t){if(_&&!["name","dobString"].every(s=>e[s])){C.error("Name and Date of Birth are required fields to save for later");return}if(I&&!["teamName"].every(s=>e[s])){C.error("Team Name is a required field to save for later");return}}await V(e,y,t===!0)},N=(e,t)=>{g(e,t),r&&(r[e]=t),j({...r})};debugger;let w=[...l];return f&&(l==null?void 0:l.length)>0&&!m&&(w=w.filter(e=>{var d;let t=(d=e.conditions)==null?void 0:d.filter(c=>c.key);return(t==null?void 0:t.length)>0?!!t.find(s=>{if(s.key){let J=s.key.charAt(0).toLowerCase()+s.key.slice(1),b=f[s.key]||f[J];if(b&&(b==null?void 0:b.toString())==s.value)return!0}}):!0})),i.jsx("div",{className:("flex-auto p-2 "+m,""),children:i.jsxs("form",{onSubmit:O(F),children:[i.jsx(X,{handlePropertiesChange:N,handlePropertiesPanelChange:k,formData:f,isPlayGround:m,onChangeValue:N,drop:p,isSubmitted:n,isOver:S,eventDetails:T,components:w,selectedComponent:q,handleSelect:L,register:B,getValues:v,errors:K,control:Z,setValue:g,clearErrors:z,reset:y,watch:A,removeComponent:D}),!m&&!n&&i.jsx("div",{className:"mb-2 w-full flex justify-end px-0",children:u?i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[i.jsx(h,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Register"]}):i.jsxs(i.Fragment,{children:[!M&&!x&&i.jsxs("button",{type:"button",onClick:()=>{F(v(),!0)},className:"inline-flex items-center gap-x-2  rounded-md bg-lime-800 px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-lime-950 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-lime-950 mr-3",children:[i.jsx(h,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Save for Later"]}),H?i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[i.jsx(h,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Submit"]}):i.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[i.jsx(h,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Next"]})]})})]})})};export{te as F,h as a};
