import{$ as V,a as J,w as X,e as q,r as z}from"./use-resolve-button-type-Dne3-PoT.js";import{R as S,r as l}from"./mainweb-BW4Oeajf.js";import{K as T,y as x,T as G,o as I,L as h,u as k,_ as N,O as j,b as $,d as Q}from"./keyboard-CeKi9vLY.js";import{C as W,c as Y,i as C,u as Z,x as ee,R as te,s as le}from"./dialog-jlNq9JdF.js";var L;let ne=(L=S.startTransition)!=null?L:function(e){e()};var re=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(re||{}),oe=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.SetButtonElement=4]="SetButtonElement",e[e.SetPanelElement=5]="SetPanelElement",e))(oe||{});let se={0:e=>({...e,disclosureState:k(e.disclosureState,{0:1,1:0})}),1:e=>e.disclosureState===1?e:{...e,disclosureState:1},2(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},3(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}},4(e,t){return e.buttonElement===t.element?e:{...e,buttonElement:t.element}},5(e,t){return e.panelElement===t.element?e:{...e,panelElement:t.element}}},w=l.createContext(null);w.displayName="DisclosureContext";function B(e){let t=l.useContext(w);if(t===null){let c=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,B),c}return t}let R=l.createContext(null);R.displayName="DisclosureAPIContext";function _(e){let t=l.useContext(R);if(t===null){let c=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(c,_),c}return t}let F=l.createContext(null);F.displayName="DisclosurePanelContext";function ae(){return l.useContext(F)}function ue(e,t){return k(t.type,se,e,t)}let ce=l.Fragment;function ie(e,t){let{defaultOpen:c=!1,...i}=e,a=l.useRef(null),d=x(t,G(u=>{a.current=u},e.as===void 0||e.as===l.Fragment)),p=l.useReducer(ue,{disclosureState:c?0:1,buttonElement:null,panelElement:null,buttonId:null,panelId:null}),[{disclosureState:n,buttonId:r},b]=p,o=I(u=>{b({type:1});let f=Q(a);if(!f||!r)return;let E=u?u instanceof HTMLElement?u:u.current instanceof HTMLElement?u.current:f.getElementById(r):f.getElementById(r);E?.focus()}),v=l.useMemo(()=>({close:o}),[o]),m=l.useMemo(()=>({open:n===0,close:o}),[n,o]),y={ref:d},D=h();return S.createElement(w.Provider,{value:p},S.createElement(R.Provider,{value:v},S.createElement(W,{value:o},S.createElement(Y,{value:k(n,{0:C.Open,1:C.Closed})},D({ourProps:y,theirProps:i,slot:m,defaultTag:ce,name:"Disclosure"})))))}let de="button";function pe(e,t){let c=l.useId(),{id:i=`headlessui-disclosure-button-${c}`,disabled:a=!1,autoFocus:d=!1,...p}=e,[n,r]=B("Disclosure.Button"),b=ae(),o=b===null?!1:b===n.panelId,v=l.useRef(null),m=x(v,t,I(s=>{if(!o)return r({type:4,element:s})}));l.useEffect(()=>{if(!o)return r({type:2,buttonId:i}),()=>{r({type:2,buttonId:null})}},[i,r,o]);let y=I(s=>{var P;if(o){if(n.disclosureState===1)return;switch(s.key){case $.Space:case $.Enter:s.preventDefault(),s.stopPropagation(),r({type:0}),(P=n.buttonElement)==null||P.focus();break}}else switch(s.key){case $.Space:case $.Enter:s.preventDefault(),s.stopPropagation(),r({type:0});break}}),D=I(s=>{switch(s.key){case $.Space:s.preventDefault();break}}),u=I(s=>{var P;z(s.currentTarget)||a||(o?(r({type:0}),(P=n.buttonElement)==null||P.focus()):r({type:0}))}),{isFocusVisible:f,focusProps:E}=V({autoFocus:d}),{isHovered:g,hoverProps:O}=J({isDisabled:a}),{pressed:M,pressProps:H}=X({disabled:a}),A=l.useMemo(()=>({open:n.disclosureState===0,hover:g,active:M,disabled:a,focus:f,autofocus:d}),[n,g,M,f,a,d]),K=q(e,n.buttonElement),U=o?N({ref:m,type:K,disabled:a||void 0,autoFocus:d,onKeyDown:y,onClick:u},E,O,H):N({ref:m,id:i,type:K,"aria-expanded":n.disclosureState===0,"aria-controls":n.panelElement?n.panelId:void 0,disabled:a||void 0,autoFocus:d,onKeyDown:y,onKeyUp:D,onClick:u},E,O,H);return h()({ourProps:U,theirProps:p,slot:A,defaultTag:de,name:"Disclosure.Button"})}let fe="div",me=j.RenderStrategy|j.Static;function Ee(e,t){let c=l.useId(),{id:i=`headlessui-disclosure-panel-${c}`,transition:a=!1,...d}=e,[p,n]=B("Disclosure.Panel"),{close:r}=_("Disclosure.Panel"),[b,o]=l.useState(null),v=x(t,I(g=>{ne(()=>n({type:5,element:g}))}),o);l.useEffect(()=>(n({type:3,panelId:i}),()=>{n({type:3,panelId:null})}),[i,n]);let m=Z(),[y,D]=ee(a,b,m!==null?(m&C.Open)===C.Open:p.disclosureState===0),u=l.useMemo(()=>({open:p.disclosureState===0,close:r}),[p.disclosureState,r]),f={ref:v,id:i,...te(D)},E=h();return S.createElement(le,null,S.createElement(F.Provider,{value:p.panelId},E({ourProps:f,theirProps:d,slot:u,defaultTag:fe,features:me,visible:y,name:"Disclosure.Panel"})))}let Se=T(ie),be=T(pe),ye=T(Ee),$e=Object.assign(Se,{Button:be,Panel:ye});export{be as C,ye as R,$e as j};
