import{r as h,j as e}from"./mainweb-C-fYIVSe.js";import{D as J}from"./index-0KWB3_hF.js";import{C as L}from"./index.esm-DMRRpLCA.js";import{c as x}from"./utilities-CN4lTu6a.js";import{V as O}from"./validationMessage-rbuN2seW.js";import{F as S}from"./CalendarDateRangeIcon-1ytQnhqY.js";import{F as q}from"./ChevronLeftIcon-CMucIYCN.js";import{F as V}from"./ChevronRightIcon-CNEYZHfs.js";import"./clsx-B-dksMZM.js";import"./floating-ui.dom-Di5CRMxg.js";const $=t=>{let r=new Date(t),n=""+(r.getMonth()+1),a=""+r.getDate(),o=r.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[a,n,o].join("-")},z=t=>(t.split(" ").length>1&&(t=t.split(" ")[0]),t),B=t=>{try{if(!t)return"";let r=t.split("-");return r.length<3?"":new Date(r[2],r[1]-1,r[0])}catch{return""}},H=(t,r,n=r-t+1)=>Array.from({length:n},(a,o)=>t+o),j=t=>t.getFullYear(),I=t=>t.getMonth(),ce=({control:t,fieldName:r,label:n,formData:a,errors:o,register:P,minDate:f,maxDate:p,optional:w,maxLength:_,onChange:D,type:G,pattern:K,disabled:l})=>{let Y=o?.[r];const y=h.useRef(null);let[i,F]=h.useState(Y);const v=u=>{y.current&&!y.current.contains(u.target)&&y.current.closeCalendar()};h.useEffect(()=>(document.addEventListener("click",v,!0),()=>{document.removeEventListener("click",v,!0)}),[]),h.useEffect(()=>{F(o?.[r])},[o?.[r]]);let d=p?new Date(p):null,m=f?new Date(f):null;console.log({maxDate:p,minDate:f,maxDateCalc:d,minDateCalc:m});var C=m?j(m):new Date().getFullYear(),M=d?j(d):new Date().getFullYear()-100;const N=H(C,M),b=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.jsxs("div",{className:"sm:col-span-4",children:[e.jsxs("label",{htmlFor:r,className:x("block text-sm font-medium leading-6 ",i?"text-danger":"text-gray-900"),children:[n||r,!w&&e.jsx("span",{className:"text-danger pl-1",children:"*"})]}),e.jsxs("div",{className:"relative mt-2  print:mt-0 rounded-md shadow-sm items-center",children:[e.jsx("div",{className:x("pointer-events-none h-9 absolute inset-y-0 left-0 z-20 flex items-center",l?"":"pl-3"),children:e.jsx(S,{"aria-hidden":"true",className:"h-5 w-5 mb-0.5 "+(i?"text-red-400":"text-gray-400")})}),l?e.jsx("div",{className:x("pl-7","block w-full py-1.5  print:py-1 sm:text-sm sm:leading-6","text-gray-900   placeholder:text-gray-400 ring-gray-300 ",l?"text-gray-500":""),children:a?.[r]?z(a?.[r]):"-"}):e.jsx(L,{control:t,name:r,disabled:l,rules:{required:!w},render:({field:u,fieldState:{invalid:Q,isDirty:U},formState:{errors:W}})=>e.jsxs(e.Fragment,{children:[e.jsx(J,{maxDate:d,minDate:m,disabled:l,calendarClassName:"!border-gray-100 shadow-lg font-medium",calendarIconClassName:"h-5 w-5",placeholderText:"Select "+n,className:x("appearance-none block w-full px-3 pl-10 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",l?"bg-gray-100 text-gray-500":"bg-white text-gray-900",i?"border-red-300 text-red-900 placeholder-red-300 focus:border-red-300 focus:ring-red-300":"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"),dateFormat:"dd-MM-yyyy",renderCustomHeader:({date:c,changeYear:g,changeMonth:k,decreaseMonth:E,increaseMonth:R,prevMonthButtonDisabled:T,nextMonthButtonDisabled:A})=>e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b space-x-1",children:[e.jsx("button",{type:"button",onClick:E,className:" text-gray-800",disabled:T,children:e.jsx(q,{className:"h-8 w-8"})}),e.jsx("select",{className:`border rounded-md shadow-sm placeholder-gray-400 \r
                        border-gray-300\r
                        py-1\r
                        focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm`,value:j(c),onChange:({target:{value:s}})=>{g(s)},children:N.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("select",{className:`border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 \r
                        border-gray-300\r
                        py-1\r
                        focus:border-indigo-500 sm:text-sm`,value:b[I(c)],onChange:({target:{value:s}})=>{k(b.indexOf(s))},children:b.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("button",{type:"button",onClick:R,disabled:A,children:e.jsx(V,{className:"h-8 w-8"})})]}),selected:B(u.value),onChange:c=>{console.log("date",c);let g=$(c);u.onChange(g),D&&D(g)}}),i&&e.jsx(O,{message:"This field is required"})]})})]})]})};export{ce as default};
