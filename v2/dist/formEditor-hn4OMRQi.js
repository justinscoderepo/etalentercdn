import{r as u,o as S,j as r,L as H}from"./main-DfzvjSql.js";import{u as I}from"./index.esm-Cac_Wn93.js";import{RenderComponents as $}from"./renderComponents-BCPTWsy0.js";import k from"./modalForm-qVdmAL3j.js";import{F as q}from"./XCircleIcon-Bf-Lf81r.js";import{F as B}from"./CheckCircleIcon-DCwkLW4t.js";import"./validationMessage-Dh5UJM11.js";import"./CheckCircleIcon-BN0WQ38c.js";import"./dialog-BoGUnqJQ.js";import"./keyboard-CVvNqdST.js";import"./dom-CW5fUG2t.js";import"./use-is-mounted-asND-3BM.js";import"./hidden-lte7PHdy.js";import"./open-closed-BxrDP43t.js";import"./description-BhjL--5B.js";import"./navigationUtils-BgrXVI_s.js";import"./XMarkIcon-Da1lXE8F.js";const ue=({row:s,fields:v,viewMode:h,noModal:C,onSave:O,onChange:Q,onCancel:x,title:F,description:N,twoColumnLayout:E=!0,...b})=>{const[n,g]=u.useState(s||{});for(let e in n)if(e.indexOf("JsonSettings")>-1&&e.indexOf(".")==-1)try{let t=S(n[e]);if(t)for(let i in t)n[e+"Object."+i]=t[i]}catch(t){console.error("Error parsing JSON:",t)}let[c,j]=u.useState(!1);const[L,J]=u.useState("");let y=v;const{handleSubmit:P,register:V,unregister:w,control:R,clearErrors:D,reset:K,watch:A,getValues:M,setValue:m,formState:{errors:T}}=I({defaultValues:{...s}});u.useEffect(()=>{s&&(Object.keys(s).forEach(e=>{w(e),m(e,s[e])}),g({...s}))},[s]);const z=async e=>{j(!0),window.scrollTo({top:0,behavior:"smooth"});let t=i=>{J(i)};try{await O(e,!1,!0,t)}catch(i){console.error("Error saving user:",i)}j(!1)},p=(e,t)=>{if(m(e,t),s&&(s[e]=t),e.indexOf("JsonSettingsObject")>-1){let a=e.split("Object.")[1],l=e.split("Object.")[0];var i=s[l],o=S(i);let G={[a]:t};o={...o,...G},s[l]=JSON.stringify(o),m(l,JSON.stringify(o))}g({...s});let f=e.charAt(0).toLowerCase()+e.slice(1);b?.[f+"OnChange"]&&b?.[f+"OnChange"](t,n,(a,l)=>{p(a,l)})};let d=[...y];return n&&y?.length>0&&(d=d.filter(e=>{let t=e.conditions?.filter(i=>i.key);return t?.length>0?!!t.find(o=>{if(o.key){let f=o.key.charAt(0).toLowerCase()+o.key.slice(1),a=n[o.key]||n[f];if(a&&a?.toString()==o.value)return!0}}):!0})),r.jsx(k,{isPlainView:C,title:F,description:N,open:!0,center:!1,outerClass:"max-w-xl",setOpen:x,childrenClass:"px-6 print:p-0",children:r.jsxs("div",{className:"flex-auto relative mt-5",children:[c&&r.jsx(H,{info:L}),r.jsxs("form",{onSubmit:P(z),children:[r.jsx($,{handlePropertiesChange:p,handlePropertiesPanelChange:()=>{},viewMode:h,formData:n,isPlayGround:!1,onChangeValue:p,drop:null,isSubmitted:c,isOver:!1,eventDetails:{},components:d,selectedComponent:{},handleSelect:()=>{},register:V,getValues:M,errors:T,control:R,setValue:m,clearErrors:D,reset:K,watch:A,removeComponent:()=>{},twoColumnLayout:E}),!c&&!h&&r.jsx("div",{className:"mb-2 w-full flex justify-end px-0 gap-x-4",children:r.jsxs(r.Fragment,{children:[r.jsxs("button",{type:"button",onClick:x,className:"inline-flex items-center gap-x-2  rounded-md bg-gray-200 px-6 py-2.5 text-sm font-semibold text-gray-700 shadow-sm hover:bg-gray-300 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[r.jsx(q,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Cancel"]}),r.jsxs("button",{type:"submit",className:"inline-flex items-center gap-x-2  rounded-md bg-primary px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[r.jsx(B,{"aria-hidden":"true",className:"-mr-0.5 h-5 w-5"}),"Submit"]})]})})]})]})})};export{ue as default};
