import{r as n,j as e,L as T,_ as E,i as q,B as H,b as F,u as $,z as R,m as K,o as Q,h as U}from"./main-CNSscFU3.js";import{u as X}from"./useConfirmation-BF5IfRHQ.js";import{e as ee,d as se}from"./publicRegistrationHelper-gNVmt6o-.js";import{B as ae}from"./box-DuAqhDom.js";function te({title:t,titleId:a,...c},l){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},c),t?n.createElement("title",{id:a},t):null,n.createElement("path",{d:"M10 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM6 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM1.49 15.326a.78.78 0 0 1-.358-.442 3 3 0 0 1 4.308-3.516 6.484 6.484 0 0 0-1.905 3.959c-.023.222-.014.442.025.654a4.97 4.97 0 0 1-2.07-.655ZM16.44 15.98a4.97 4.97 0 0 0 2.07-.654.78.78 0 0 0 .357-.442 3 3 0 0 0-4.308-3.517 6.484 6.484 0 0 1 1.907 3.96 2.32 2.32 0 0 1-.026.654ZM18 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM5.304 16.19a.844.844 0 0 1-.277-.71 5 5 0 0 1 9.947 0 .843.843 0 0 1-.277.71A6.975 6.975 0 0 1 10 18a6.974 6.974 0 0 1-4.696-1.81Z"}))}const ne=n.forwardRef(te);function ie({title:t,titleId:a,...c},l){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},c),t?n.createElement("title",{id:a},t):null,n.createElement("path",{d:"M10 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM3.465 14.493a1.23 1.23 0 0 0 .41 1.412A9.957 9.957 0 0 0 10 18c2.31 0 4.438-.784 6.131-2.1.43-.333.604-.903.408-1.41a7.002 7.002 0 0 0-13.074.003Z"}))}const I=n.forwardRef(ie),le=n.lazy(()=>E(()=>import("./ListUsers-Bi9ISfjw.js"),[]).then(t=>({default:t.ListUsers}))),re=n.lazy(()=>E(()=>import("./RenderListTeamsBox-7sVP2ikt.js"),[]).then(t=>({default:t.RenderListTeamsBox})));function oe({teams:t,allStepsComponents:a,selectedTeam:c,advancedSettings:l,onClickDelete:x,participationDetails:f,isIndividualRegistration:r,isTeamsRegistration:i,users:g,userRoles:u,selectedUser:h,onEditParticipant:d,participantType:w,setParticipantType:j,addNewParticipant:b,addNewTeamParticipant:y,tempUser:m}){const o=N=>{if(d){const L=u?.find(D=>D.User===N.UId);d({Candidate:L?.UserRoleId},!1)}},p=N=>{d&&d({Team:N?.Team},!0)};let P=l?.DisableIndividualRegForm=="Yes";return l?.DisableTeamRegForm=="Yes",e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col w-full",children:[w=="Individual"&&e.jsxs(e.Fragment,{children:[P&&r?e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Registration Closed!"}),e.jsx("span",{className:"block sm:inline",children:" Individual Registration is closed for this event."})]})}):r&&e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"w-full px-2 bg-yellow-900 max-w-60 text-white text-xs font-medium py-2 mt-2 rounded-md hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary mr-4",onClick:b,children:"Add New Individual Participant"})}),e.jsx(ae,{heading:"Participation Requests",outerClasses:"relative "+(h?" sm:w-2/6 md:w-1/4":"w-full")+" overflow-hidden",headingClasses:"px-1  lg:px-1",childrenClasses:"px-1 lg:px-1 py-1  w-full flex",children:e.jsxs("div",{className:"flex flex-col max-w-full w-full",children:[r&&e.jsx("div",{className:"max-w-full flex-1 flex-col flex mt-5",children:e.jsx(n.Suspense,{fallback:e.jsx(T,{}),children:e.jsx(le,{allStepsComponents:a,onClickDelete:x,users:g,activeUser:h,userRoles:u,onChange:o,setParticipantType:j,participationDetails:f})})}),!g?.length&&e.jsx("div",{className:"flex flex-1 flex-col justify-center items-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"flex items-center justify-center bg-surface rounded-full p-5",children:e.jsx(I,{className:"size-10 text-onSurfaceVariant"})}),e.jsx("h3",{className:"mt-6 text-sm font-medium text-onSurface",children:"No Participants Found"}),e.jsx("p",{className:"mt-2 mb-2 text-xs text-onSurfaceVariant",children:"Please add new participants to the list by click on the Add New Participant button."})]})})]})})]}),w=="Team"&&i&&e.jsx(n.Suspense,{fallback:e.jsx(T,{}),children:e.jsx(re,{teams:t,tempUser:m,selectedTeam:c,participationDetails:f,handleChangeTeam:p,users:g,onClickDelete:x,userRoles:u,allStepsComponents:a,selectedUser:h,handleChangeUser:o,setParticipantType:j,addNewParticipant:y})})]})})}const B=t=>{console.log("ðŸ—ï¸ WithUsersListData re-render");const{eventDetails:a,eventStatus:c,participationDetails:l,participationsStatus:x,participantType:f,participantTypeInt:r,setParticipantType:i,allStepsComponents:g,jsonSettings:u,isIndividualRegistration:h,isTeamsRegistration:d}=H(),{user:w}=F()||{},{delete:j}=$("/CandidateJson/GetParticipants",{deleteUrl:"/CandidateJson/RemoveUser",noGet:!0});console.log("ï¿½ Data status:",{participationsStatus:x,participationDetails:l,hasData:!!l});const b=n.useCallback(async o=>{try{const p={UserRoleId:r===1?o.Candidate:o.Team,id:r===1?o.Candidate:o.Team,participantType:r.toString()};await j(p),R.success("Participant Deleted Successfully")}catch(p){throw console.error("Delete participant error:",p),R.error("Failed to delete participant"),p}},[r,j]),y=n.useCallback(o=>{i(o)},[i]),m=n.useMemo(()=>({...t,eventDetails:a,eventStatus:c,participationDetails:l,participationsStatus:x,participantType:f,participantTypeInt:r,allStepsComponents:g,jsonSettings:u,isIndividualRegistration:h,isTeamsRegistration:d,handleDeleteParticipant:b,handleParticipantTypeChange:y,isDataLoading:K(c,x)}),[t,a,c,l,x,f,r,g,u,h,d,b,y]);return e.jsx(_,{...m})},_=q.memo(({setActiveTab:t,onStartRegistration:a,closeModel:c,eventDetails:l,eventStatus:x,participationDetails:f,participationsStatus:r,participantType:i,participantTypeInt:g,allStepsComponents:u,jsonSettings:h,isIndividualRegistration:d,isTeamsRegistration:w,handleDeleteParticipant:j,handleParticipantTypeChange:b,isDataLoading:y})=>{const{user:m}=F()||{};if(!m||!m.Email)return e.jsx("div",{children:"Please log in to access this form."});const o=m?.RoleTitle==="Guardian";m?.RoleTitle;const p=m?.Email?.indexOf("justnshalom")!==-1,[P,N]=X(),L=ee(f,null,null,null),{userRoles:D,users:k,teams:M}=L,A=k?.length?null:Q(localStorage.user)?.user,S=A&&!(o&&!p)?{UId:A?.UId}:null,O=h?.AdditionalSettings,z=se(u),Z=(s,v=!1)=>{const W=v?2:1,Y=v?s.Team:s.Candidate;a&&a(W,Y)},G=()=>{a&&a(i==="Individual"?1:2)},V=()=>{a&&a(2)};if(y)return e.jsx(T,{info:"Loading participants..."});const C=[];d&&C.push({name:"Individual",icon:I}),w&&C.push({name:"Team",icon:ne});const J=s=>{if(s){const v={UserRoleId:i==="Individual"?s.Candidate:s.Team,id:i==="Individual"?s.Candidate:s.Team,participantType:i==="Individual"?"1":"2"};N(v)}};return e.jsxs("div",{children:[e.jsx(P,{title:"Delete Participant",description:"Are you sure you want to delete this participant?",confirmButtonLabel:"Delete",confirmButtonClick:async s=>{await j(s),R.success("Participant Deleted Successfully")},className:"w-96 print:hidden"}),e.jsxs(e.Fragment,{children:[e.jsx("nav",{"aria-label":"Tabs",className:"isolate flex divide-x divide-gray-200 rounded-t-lg mb-6 mt-5",children:C.map((s,v)=>e.jsxs("button",{onClick:()=>{b(s.name)},className:U(i===s.name?"text-sky-800 bg-sky-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 bg-slate-50",v===0?"rounded-l-lg":"",v===C.length-1?"rounded-r-lg":"","group relative justify-center flex-grow min-w-0 flex items-center px-4 py-3 text-center text-sm font-medium focus:outline-none"),children:[e.jsx(s.icon,{className:U(i===s.name?"text-sky-800":"text-gray-400 group-hover:text-gray-500","h-6 mr-2"),"aria-hidden":"true"}),e.jsxs("span",{className:U(s.hideOnMobile?"hidden sm:block":""),children:["As ",s.name]}),e.jsx("span",{"aria-hidden":"true",className:U(i===s.name?"bg-sky-800":"bg-transparent","absolute inset-x-0 bottom-0 h-0.5")})]},s.name))}),e.jsx("div",{className:"flex mt-6 flex-col justify-center justify-items-center sm:flex-row sm:space-x-2",children:e.jsx(e.Fragment,{children:e.jsx(oe,{allStepsComponents:u,allFields:z,teams:M,onClickDelete:J,tempUser:S,isIndividualRegistration:d,isTeamsRegistration:w,participantType:i,addNewParticipant:G,addNewTeamParticipant:V,userRoles:D,users:k,participationDetails:f,advancedSettings:O,onEditParticipant:Z})})})]})]})});_.displayName="UsersListComponent";const ce=t=>e.jsx(B,{...t}),fe=Object.freeze(Object.defineProperty({__proto__:null,UsersListComponent:_,WithUsersListData:B,default:ce},Symbol.toStringTag,{value:"Module"}));export{I as F,ne as a,fe as r};
