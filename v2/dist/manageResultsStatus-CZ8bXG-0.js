import{r as l,j as e,u as D,z as L}from"./main-C46Odvrx.js";import{L as ge}from"./layoutOuter-D6yihmsZ.js";import{P as he}from"./pageHeader-DjiT4XOR.js";import{b as B,F as Z,a as ee}from"./ClockIcon-MeXAalMu.js";import{F as M}from"./ArrowPathIcon-BErzlHJF.js";import{F as H}from"./CheckCircleIcon-Bo29CJO8.js";import{F as te}from"./XCircleIcon-Hrj0L4-_.js";import{F as pe}from"./MagnifyingGlassIcon-DV4Mq9nP.js";import{F as be}from"./XMarkIcon-D_JrRlaT.js";import{F as Y}from"./TrophyIcon-BbMmr5DM.js";import{M as ve,i as se,u as ie,P as ye,a as je,b as Ne,L as Ce,m as re}from"./proxy-DwRUTNbg.js";import{F as we}from"./ExclamationTriangleIcon-D9mER6ZI.js";function ae(a,u){if(typeof a=="function")return a(u);a!=null&&(a.current=u)}function Se(...a){return u=>{let i=!1;const o=a.map(f=>{const m=ae(f,u);return!i&&typeof m=="function"&&(i=!0),m});if(i)return()=>{for(let f=0;f<o.length;f++){const m=o[f];typeof m=="function"?m():ae(a[f],null)}}}}function Re(...a){return l.useCallback(Se(...a),a)}class Ie extends l.Component{getSnapshotBeforeUpdate(u){const i=this.props.childRef.current;if(i&&u.isPresent&&!this.props.isPresent){const o=i.offsetParent,f=se(o)&&o.offsetWidth||0,m=se(o)&&o.offsetHeight||0,d=this.props.sizeRef.current;d.height=i.offsetHeight||0,d.width=i.offsetWidth||0,d.top=i.offsetTop,d.left=i.offsetLeft,d.right=f-d.width-d.left,d.bottom=m-d.height-d.top}return null}componentDidUpdate(){}render(){return this.props.children}}function Ee({children:a,isPresent:u,anchorX:i,anchorY:o,root:f}){const m=l.useId(),d=l.useRef(null),v=l.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:R}=l.useContext(ve),I=a.props?.ref??a?.ref,p=Re(d,I);return l.useInsertionEffect(()=>{const{width:N,height:g,top:b,left:C,right:$,bottom:E}=v.current;if(u||!d.current||!N||!g)return;const P=i==="left"?`left: ${C}`:`right: ${$}`,O=o==="bottom"?`bottom: ${E}`:`top: ${b}`;d.current.dataset.motionPopId=m;const G=document.createElement("style");R&&(G.nonce=R);const y=f??document.head;return y.appendChild(G),G.sheet&&G.sheet.insertRule(`
          [data-motion-pop-id="${m}"] {
            position: absolute !important;
            width: ${N}px !important;
            height: ${g}px !important;
            ${P}px !important;
            ${O}px !important;
          }
        `),()=>{y.contains(G)&&y.removeChild(G)}},[u]),e.jsx(Ie,{isPresent:u,childRef:d,sizeRef:v,children:l.cloneElement(a,{ref:p})})}const Pe=({children:a,initial:u,isPresent:i,onExitComplete:o,custom:f,presenceAffectsLayout:m,mode:d,anchorX:v,anchorY:R,root:I})=>{const p=ie(Ge),N=l.useId();let g=!0,b=l.useMemo(()=>(g=!1,{id:N,initial:u,isPresent:i,custom:f,onExitComplete:C=>{p.set(C,!0);for(const $ of p.values())if(!$)return;o&&o()},register:C=>(p.set(C,!1),()=>p.delete(C))}),[i,p,o]);return m&&g&&(b={...b}),l.useMemo(()=>{p.forEach((C,$)=>p.set($,!1))},[i]),l.useEffect(()=>{!i&&!p.size&&o&&o()},[i]),d==="popLayout"&&(a=e.jsx(Ee,{isPresent:i,anchorX:v,anchorY:R,root:I,children:a})),e.jsx(ye.Provider,{value:b,children:a})};function Ge(){return new Map}const W=a=>a.key||"";function le(a){const u=[];return l.Children.forEach(a,i=>{l.isValidElement(i)&&u.push(i)}),u}const ne=({children:a,custom:u,initial:i=!0,onExitComplete:o,presenceAffectsLayout:f=!0,mode:m="sync",propagate:d=!1,anchorX:v="left",anchorY:R="top",root:I})=>{const[p,N]=je(d),g=l.useMemo(()=>le(a),[a]),b=d&&!p?[]:g.map(W),C=l.useRef(!0),$=l.useRef(g),E=ie(()=>new Map),P=l.useRef(new Set),[O,G]=l.useState(g),[y,z]=l.useState(g);Ne(()=>{C.current=!1,$.current=g;for(let j=0;j<y.length;j++){const h=W(y[j]);b.includes(h)?(E.delete(h),P.current.delete(h)):E.get(h)!==!0&&E.set(h,!1)}},[y,b.length,b.join("-")]);const T=[];if(g!==O){let j=[...g];for(let h=0;h<y.length;h++){const F=y[h],k=W(F);b.includes(k)||(j.splice(h,0,F),T.push(F))}return m==="wait"&&T.length&&(j=T),z(le(j)),G(g),null}const{forceRender:q}=l.useContext(Ce);return e.jsx(e.Fragment,{children:y.map(j=>{const h=W(j),F=d&&!p?!1:g===y||b.includes(h),k=()=>{if(P.current.has(h))return;if(P.current.add(h),E.has(h))E.set(h,!0);else return;let A=!0;E.forEach(U=>{U||(A=!1)}),A&&(q?.(),z($.current),d&&N?.(),o&&o())};return e.jsx(Pe,{isPresent:F,initial:!C.current||i?void 0:!1,custom:u,presenceAffectsLayout:f,mode:m,root:I,onExitComplete:F?void 0:k,anchorX:v,anchorY:R,children:j},h)})})},He=({user:a})=>{const[u,i]=l.useState([]),[o,f]=l.useState("all"),[m,d]=l.useState(new Set),[v,R]=l.useState(""),[I,p]=l.useState(!1),[N,g]=l.useState("all"),{rows:b,status:C,setFilter:$,update:E}=D("/CompetitionStructureJson/Get",{select:"CompetitionStructureId,Order,CompetitionItemTitle,CompetitionItemCompetitionItemTitle,GenderGenderTitle,LanguageLanguageName,GroupGroupName,CompetitionStatus,ParticipantTypeTitle,ParticipantsCount",filter:{EventCategory:a?.EventCategory,Event:a?.Event},limit:1e3,offset:0,updateUrl:"/CompetitionStructureJson/Save"}),{rows:P,status:O,update:G}=D("/JudgesAllotmentPlusUsersRolesJson/Get",{select:"AllotementId,JudgeUserName,ScoreStatus,Competition,Judge,ScoresSubmitted",filter:{EventCategory:a?.EventCategory,Event:a?.Event},limit:1e3,offset:0,updateUrl:"/JudgesAllotmentJson/Save"}),{rows:y,status:z}=D("/CompetitionScheduleJson/Get",{select:"CompetitionStructureId,StageName",filter:{EventCategory:a?.EventCategory,Event:a?.Event},limit:1e3,offset:0}),{rows:T,status:q}=D("/CompetitionStatusJson/Get",{select:"CompetitionStatusId,CompetitionStatusTitle",limit:100,offset:0}),{rows:j,status:h}=D("/JudgesResultStatusJson/Get",{select:"ResultStatusId,ScoreResultStatus",limit:100,offset:0}),F=C==="fetching"||O==="fetching"||z==="fetching"||q==="fetching"||h==="fetching",k=C==="refreshing"||O==="refreshing",A=l.useMemo(()=>T?T.map(t=>{let r="bg-gray-100 text-gray-800",s=B;return t.CompetitionStatusId===1?(r="bg-green-100 text-green-800",s=H):t.CompetitionStatusId===2?(r="bg-indigo-100 text-indigo-800",s=M):t.CompetitionStatusId===3?(r="bg-gray-100 text-gray-800",s=B):t.CompetitionStatusId===4?(r="bg-yellow-100 text-yellow-800",s=M):t.CompetitionStatusId===5?(r="bg-blue-100 text-blue-800",s=B):t.CompetitionStatusId===6?(r="bg-purple-100 text-purple-800",s=H):t.CompetitionStatusId===7&&(r="bg-red-100 text-red-800",s=te),{value:t.CompetitionStatusId,label:t.CompetitionStatusTitle,color:r,icon:s}}):[{value:3,label:"Not Started",color:"bg-surface text-onSurface",icon:B},{value:5,label:"Yet To Begin",color:"bg-blue-100 text-blue-800",icon:B},{value:4,label:"On Progress",color:"bg-yellow-100 text-yellow-800",icon:M},{value:6,label:"Finished",color:"bg-purple-100 text-purple-800",icon:H},{value:2,label:"On Review",color:"bg-indigo-100 text-indigo-800",icon:M},{value:1,label:"Results Published",color:"bg-green-100 text-green-800",icon:H},{value:7,label:"Cancelled",color:"bg-red-100 text-red-800",icon:te}],[T]),U=l.useMemo(()=>j?j.map(t=>{let r="bg-gray-100 text-gray-800";return t.ResultStatusId===1?r="bg-green-100 text-green-800":t.ResultStatusId===2?r="bg-blue-100 text-blue-800":t.ResultStatusId===3&&(r="bg-yellow-100 text-yellow-800"),{value:t.ResultStatusId,label:t.ScoreResultStatus,color:r}}):[{value:1,label:"Published",color:"bg-green-100 text-green-800"},{value:2,label:"Filled",color:"bg-blue-100 text-blue-800"},{value:3,label:"Allowed to fill",color:"bg-yellow-100 text-yellow-800"}],[j]),x=l.useMemo(()=>b?b.map(t=>{const r=P?P.filter(c=>c.Competition===t.CompetitionStructureId).map(c=>({id:c.AllotementId,name:c.JudgeUserName||"Unknown Judge",status:c.ScoreStatus||1,scoresSubmitted:c.ScoresSubmitted||0,allotmentId:c.AllotementId,judgeId:c.Judge,competitionId:c.Competition})):[],n=y?.find(c=>c.CompetitionStructureId===t.CompetitionStructureId)?.StageName||"TBD",w=t.CompetitionStatus===1;return{id:t.CompetitionStructureId,competitionStructureId:t.CompetitionStructureId,name:`${t.Order} - ${t.GroupGroupName} - ${t.CompetitionItemTitle||t.CompetitionItemCompetitionItemTitle} ${t.GenderGenderTitle?`(${t.GenderGenderTitle})`:""} ${t.LanguageLanguageName?`- ${t.LanguageLanguageName}`:""}`,category:t.CompetitionItemTitle||t.CompetitionItemCompetitionItemTitle,ageGroup:t.GroupGroupName,status:t.CompetitionStatus||1,totalParticipants:t.ParticipantsCount||0,stageName:n,isResultPublished:w,judges:r,order:t.Order||0,participantType:t.ParticipantTypeTitle,gender:t.GenderGenderTitle,language:t.LanguageLanguageName,group:t.GroupGroupName}}).sort((t,r)=>(t.order||0)-(r.order||0)):[],[b,P,y]),K=l.useMemo(()=>{const t=[{value:"all",label:"All Competitions"}];if(T&&x.length>0){const r=T.map(s=>({value:s.CompetitionStatusId,label:s.CompetitionStatusTitle,count:x.filter(n=>n.status===s.CompetitionStatusId).length})).filter(s=>s.count>0);return[...t,...r]}return t},[T,x]),_=l.useMemo(()=>{const t=[{value:"all",label:"All Groups"}];if(x&&x.length>0){const s=[...new Set(x.map(n=>n.group).filter(Boolean))].map(n=>({value:n,label:n}));return[...t,...s]}return t},[x]);l.useEffect(()=>{let t=x;if(N!=="all"&&(t=t.filter(r=>r.group===N)),o!=="all"&&(t=t.filter(r=>r.status===parseInt(o))),v.trim()){const r=v.toLowerCase().trim();t=t.filter(s=>s.name.toLowerCase().includes(r)||s.category?.toLowerCase().includes(r)||s.ageGroup?.toLowerCase().includes(r)||s.stageName?.toLowerCase().includes(r))}I&&(t=t.filter(r=>r.isResultPublished)),i(t)},[x,N,o,v,I]);const X=t=>{const r=new Set(m);r.has(t)?r.delete(t):r.add(t),d(r)},oe=l.useCallback(async(t,r)=>{try{const s=b?.find(c=>c.CompetitionStructureId===t);if(!s){console.error("Competition not found"),L.error("Competition not found");return}const n={CompetitionStructureId:t,CompetitionStatus:r,Event:a?.Event,EventCategory:a?.EventCategory,Order:s.Order,CompetitionItem:s.CompetitionItemTitle,Gender:s.GenderGenderTitle,Language:s.LanguageLanguageName,Group:s.GroupGroupName,Status:1};await E(n)?L.success("Competition status updated successfully"):L.error("Failed to update competition status")}catch(s){console.error("Error updating competition status:",s),L.error("Failed to update competition status")}},[b,E,a?.Event,a?.EventCategory]),de=l.useCallback(async(t,r,s)=>{try{const n=P?.find(V=>V.AllotementId===r&&V.Competition===t);if(!n){console.error("Judge allotment not found"),L.error("Judge allotment not found");return}const w={AllotementId:r,ScoreStatus:s,Competition:t,Judge:n.Judge,Event:a?.Event,EventCategory:a?.EventCategory,Status:1};await G(w)?L.success("Judge status updated successfully"):L.error("Failed to update judge status")}catch(n){console.error("Error updating judge status:",n),L.error("Failed to update judge status")}},[P,G,a?.Event,a?.EventCategory]),ce=async()=>{try{await $({EventCategory:a?.EventCategory,Event:a?.Event})}catch(t){console.error("Error refreshing data:",t)}},Q=(t,r)=>{const s=r.find(w=>w.value===t);if(!s)return null;const n=s.icon;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.color} animate-in fade-in-0 duration-300`,children:[n&&e.jsx(n,{className:"w-3 h-3 mr-1"}),s.label]})},ue=(t,r)=>{let s=0;return t.status===3?t.scoresSubmitted===0?s=3:t.scoresSubmitted<r?s=4:s=5:t.status===2?s=7:t.status===1&&(s=9),Math.round(s/9*100)},me=t=>{const r=t.judges.filter(J=>J.status===1||J.status===2).length,s=t.judges.filter(J=>J.status===2).length,n=t.judges.filter(J=>J.status===3).length,w=t.judges.length,c=t.totalParticipants*w,V=t.judges.reduce((J,fe)=>J+fe.scoresSubmitted,0);let S=0;t.status===7?S=0:t.status===3?S=1:t.status===5?S=2:t.status===4?n===w&&s===0&&r===0?S=3:s>0&&r===0?S=4:s===w?S=5:S=4:t.status===6?S=6:t.status===2?S=7:t.status===1&&(S=9);const xe=Math.round(S/9*100);return{completedJudges:r,filledJudges:s,allowedJudges:n,totalJudges:w,overallProgress:xe,scoresSubmitted:V,totalScoresNeeded:c,progressStep:S}};return F?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-surfaceCard",children:e.jsxs("div",{className:"text-center",children:[e.jsx(M,{className:"h-12 w-12 animate-spin mx-auto text-indigo-500"}),e.jsx("p",{className:"mt-4 text-lg text-gray-600",children:"Loading results status..."})]})}):e.jsx(ge,{children:e.jsxs("div",{className:"flex flex-col grow",children:[e.jsx(he,{heading:"Results Status Management",subHeading:"Monitor competition progress and manage judge assignments across all events",rightChildren:e.jsxs("button",{onClick:ce,disabled:k,className:`inline-flex items-center gap-x-2 rounded-md px-6 py-2.5 text-sm font-semibold shadow-sm text-white transition-all ${k?"bg-gray-400 cursor-not-allowed":"bg-primary hover:bg-primaryHover focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary"}`,children:[e.jsx(M,{className:`h-4 w-4 ${k?"animate-spin":""}`}),k?"Refreshing...":"Refresh"]})}),e.jsx("div",{className:"container-fixed mb-5 lg:mb-7.5",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(pe,{className:"h-4 w-4 text-onSurfaceVariant"})}),e.jsx("input",{type:"text",className:"pl-10 pr-10 block w-full rounded-md border-0 py-2 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"Search by name, category, age group, or stage...",value:v,onChange:t=>R(t.target.value),"aria-label":"Search competitions"}),v&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx("button",{type:"button",className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600 transition-colors p-1 rounded-full hover:bg-gray-100",onClick:()=>R(""),"aria-label":"Clear search",children:e.jsx(be,{className:"h-4 w-4"})})})]})}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-primary rounded border-gray-300 focus:ring-primary focus:ring-2",checked:I,onChange:t=>p(t.target.checked)}),e.jsx("span",{className:"ml-2 text-sm font-medium text-onSurface",children:"Show only published results"})]})})]})}),e.jsx("div",{className:"container-fixed mb-5 lg:mb-7.5",children:x.length>0&&e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 lg:gap-7.5",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-6 rounded-xl text-white transform hover:-translate-y-1 hover:scale-105 transition-all duration-300 hover:shadow-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Total Competitions"}),e.jsx("p",{className:"text-3xl font-bold",children:x.length})]}),e.jsx(Y,{className:"h-8 w-8 text-blue-200"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 p-6 rounded-xl text-white transform hover:-translate-y-1 hover:scale-105 transition-all duration-300 hover:shadow-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-100 text-sm font-medium",children:"In Progress"}),e.jsx("p",{className:"text-3xl font-bold",children:x.filter(t=>t.status===4).length})]}),e.jsx(M,{className:"h-8 w-8 text-yellow-200"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-6 rounded-xl text-white transform hover:-translate-y-1 hover:scale-105 transition-all duration-300 hover:shadow-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold",children:x.filter(t=>t.status===6||t.status===2).length})]}),e.jsx(H,{className:"h-8 w-8 text-green-200"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 p-6 rounded-xl text-white transform hover:-translate-y-1 hover:scale-105 transition-all duration-300 hover:shadow-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Published Results"}),e.jsx("p",{className:"text-3xl font-bold",children:x.filter(t=>t.isResultPublished).length})]}),e.jsx(Y,{className:"h-8 w-8 text-purple-200"})]})})]})}),e.jsx("div",{className:"container-fixed mb-5 lg:mb-7.5",children:e.jsxs("div",{className:"bg-surfaceCard rounded-lg  pt-4 ",children:[e.jsx("h3",{className:"border-b-[#4852573e] text-[#206689] mb-3 items-center font-medium pb-1 px-1 w-full uppercase border-b text-sm",children:"FILTER BY GROUP"}),e.jsx("div",{className:"sm:hidden mb-4",children:e.jsx("select",{value:N,onChange:t=>g(t.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-darkprimary focus:ring-primary text-sm",children:_.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})}),e.jsx("nav",{className:"hidden sm:flex -mb-px space-x-4 overflow-x-auto",children:_.slice(0,6).map(t=>e.jsx("button",{onClick:()=>g(t.value),className:`whitespace-nowrap py-2 px-6 border-b-2 font-medium text-sm transition-all duration-200 ${N===t.value?"border-primary text-primary bg-blue-50":"border-transparent text-onSurfaceVariant hover:text-onSurface hover:border-border"}`,children:t.label},t.value))})]})}),e.jsx("div",{className:"container-fixed mb-5 lg:mb-7.5",children:e.jsxs("div",{className:"bg-surfaceCard rounded-lg pt-4 ",children:[e.jsx("h3",{className:"border-b-[#4852573e] text-[#206689] mb-3 items-center font-medium pb-1 px-1 w-full uppercase border-b text-sm sm:hidden",children:"FILTER BY STATUS"}),e.jsx("div",{className:"sm:hidden mb-4",children:e.jsx("select",{value:o,onChange:t=>f(t.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-darkprimary focus:ring-primary text-sm",children:K.map(t=>e.jsxs("option",{value:t.value,children:[t.label,t.value!=="all"&&` (${x.filter(r=>r.status===t.value).length})`]},t.value))})}),e.jsx("nav",{className:"hidden sm:flex -mb-px space-x-8 overflow-x-auto",children:K.map(t=>e.jsxs("button",{onClick:()=>f(t.value),className:`py-3 px-4 border-b-2 font-medium text-sm whitespace-nowrap transition-colors relative ${o===t.value?"border-primary text-primary bg-blue-50":"border-transparent text-onSurfaceVariant hover:text-onSurface hover:border-border"}`,children:[t.label,t.value!=="all"&&e.jsx("span",{className:`ml-2 py-0.5 px-2.5 rounded-full text-xs font-medium ${o===t.value?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-600"}`,children:x.filter(r=>r.status===t.value).length})]},t.value))})]})}),e.jsx("div",{className:"container-fixed mb-5 lg:mb-7.5",children:x.length>0&&e.jsxs("div",{className:"flex items-center justify-between bg-surfaceCard px-6 py-3 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-semibold text-primary",children:u.length})," of ",e.jsx("span",{className:"font-semibold text-primary",children:x.length})," ","competitions",v&&e.jsxs("span",{className:"ml-2 text-indigo-600 font-medium",children:['matching "',v,'"']})]}),(u.length!==x.length||v||N!=="all"||I)&&e.jsx("button",{onClick:()=>{R(""),g("all"),f("all"),p(!1)},className:"text-sm text-primary hover:text-primaryHover font-medium transition-all duration-200",children:"Clear all filters"})]})}),e.jsx("div",{className:"container-fixed",children:e.jsx("div",{className:"bg-surfaceCard ",children:e.jsx("div",{className:"p-0 sm:p-0",children:u.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Y,{className:"mx-auto h-16 w-16 text-gray-300"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-onSurface",children:"No competitions found"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 max-w-md mx-auto",children:x.length>0?"No competitions match your current filters. Try adjusting your search criteria or clearing filters.":"No competitions have been created yet. Create a competition to get started."}),(v||o!=="all"||I)&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>{R(""),f("all"),p(!1)},className:"inline-flex items-center px-4 py-2 border border-border shadow-sm text-sm font-medium rounded-md text-onSurfaceVariant bg-surfaceCard hover:bg-surface focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 hover:-translate-y-0.5 hover:shadow-md",children:"Clear all filters"})})]}):e.jsx("div",{className:"space-y-4",children:e.jsx(ne,{children:u.map(t=>{const r=me(t);return e.jsxs(re.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:`border rounded-xl p-2 sm:p-6 hover:shadow-lg transition-all duration-300 hover:-translate-y-1 hover:scale-[1.01] ${t.judges.length===0?"border-red-300 bg-red-50":"border-border bg-surfaceCard"}`,children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-4 flex-1",children:[e.jsx("button",{onClick:()=>X(t.id),className:"hidden sm:block mt-1 text-onSurfaceVariant hover:text-primary transition-colors p-1 rounded-full hover:bg-surface",children:m.has(t.id)?e.jsx(Z,{className:"h-5 w-5"}):e.jsx(ee,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col space-y-3 mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-onSurface mb-2",children:t.name}),e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-start gap-3 text-sm text-gray-600",children:e.jsxs("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Category:"}),e.jsx("span",{className:"ml-2",children:t.category})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Age Group:"}),e.jsx("span",{className:"ml-2",children:t.ageGroup})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Stage:"}),e.jsx("span",{className:"ml-2",children:t.stageName})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Judges:"}),e.jsx("span",{className:"ml-2",children:t.judges.length})]}),e.jsxs("div",{className:"flex items-center sm:col-span-2",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Results Published:"}),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-medium rounded-full ${t.isResultPublished?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.isResultPublished?"Yes":"No"})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[Q(t.status,A),e.jsx("select",{value:t.status,onChange:s=>oe(t.id,parseInt(s.target.value)),className:"block w-full sm:w-40 rounded-md border-gray-300 shadow-sm focus:border-darkprimary focus:ring-primary text-sm transition-all duration-200 hover:border-primary",children:A.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),(t.status===6||t.status===2)&&e.jsxs("a",{href:`/Coordinator/Results?competitionstructureid=${t.competitionStructureId}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-2 border border-transparent text-xs font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all duration-200 hover:-translate-y-0.5 hover:shadow-md",children:[e.jsx(Y,{className:"h-4 w-4 mr-1"}),"Assign Winners"]})]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors duration-200",onClick:()=>X(t.id),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Overall Progress"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(Click to ",m.has(t.id)?"hide":"show"," judges)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[r.overallProgress,"%"]}),m.has(t.id)?e.jsx(Z,{className:"h-4 w-4 text-gray-500"}):e.jsx(ee,{className:"h-4 w-4 text-gray-500"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:`${r.overallProgress}%`}})}),e.jsxs("div",{className:"mt-2 flex flex-col sm:flex-row sm:justify-between gap-1 text-xs text-gray-600",children:[e.jsxs("span",{children:["Judges: ",r.completedJudges,"/",r.totalJudges," completed"]}),e.jsx("span",{className:"sm:hidden text-primary",children:"Tap to view details"})]})]})]})]})}),e.jsx(ne,{children:m.has(t.id)&&e.jsx(re.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:e.jsxs("div",{className:"mt-6 border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"border-b-[#4852573e] text-[#206689] mb-2 items-center font-medium pb-1 px-1 w-full uppercase border-b text-sm",children:"JUDGE ASSIGNMENTS"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[t.judges.length," ",t.judges.length===1?"judge":"judges"," assigned"]})]}),t.judges.length===0?e.jsxs("div",{className:"text-center py-8 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(we,{className:"h-8 w-8 text-amber-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-amber-700 font-medium",children:"No judges assigned"}),e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"This competition needs judge assignments to proceed."})]}):e.jsx("div",{className:"grid gap-4",children:t.judges.map(s=>{const n=ue(s,t.totalParticipants),w=U.find(c=>c.value===s.status)?.label||"Unknown";return e.jsx("div",{className:"flex items-center justify-between p-4 bg-surfaceCard border border-border rounded-lg hover:bg-surface transition-all duration-200 hover:translate-x-1 hover:shadow-md",children:e.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-onSurface",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Status: ",w,e.jsxs("span",{className:"ml-2 font-medium",children:["(",n,"%)"]})]})]})}),e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ease-out ${n===100?"bg-green-600":n>=78?"bg-blue-600":n>=56?"bg-indigo-500":n>=33?"bg-yellow-500":"bg-gray-400"}`,style:{width:`${n}%`}})})})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[Q(s.status,U),e.jsx("select",{value:s.status,onChange:c=>de(t.id,s.id,parseInt(c.target.value)),className:"block w-full sm:w-32 rounded-md border-gray-300 shadow-sm focus:border-darkprimary focus:ring-primary text-xs transition-all duration-200 hover:border-primary",children:U.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))})]})]})},s.id)})})]})})})]},t.id)})})})})})})]})})};export{He as default};
