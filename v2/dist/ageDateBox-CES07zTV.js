import{u as L,r as h,j as e,h as f}from"./main-DF5MPKRF.js";import{F as q,D as P}from"./index.es-B42CEc57.js";import{C as V}from"./index.esm-Byl9J4ef.js";import{V as z}from"./validationMessage-DxUbykC3.js";import{F as H}from"./ChevronLeftIcon-CW47FouF.js";import{F as W}from"./ChevronRightIcon-R7OzCEwF.js";import{F as _}from"./CheckCircleIcon-B1wvDtZ0.js";import{F as K}from"./CalendarDaysIcon-Cif4b1Cz.js";import"./clsx-B-dksMZM.js";import"./navigationUtils-LKaNAO_4.js";const b=a=>{let r=new Date(a),n=""+(r.getMonth()+1),o=""+r.getDate(),i=r.getFullYear();return n.length<2&&(n="0"+n),o.length<2&&(o="0"+o),[o,n,i].join("-")},S=a=>{try{if(!a)return"";let r=a.split("-");return r.length<3?"":new Date(r[2],r[1]-1,r[0])}catch{return""}},Q=(a,r,n=r-a+1)=>Array.from({length:n},(o,i)=>a+i),U=a=>a.getFullYear(),X=a=>a.getMonth(),he=({control:a,fieldName:r,label:n,formData:o,errors:i,register:Z,minDate:ee,maxDate:re,optional:w,maxLength:te,onChange:A,type:ae,pattern:se,disabled:d})=>{const{rows:p}=L("/CandidateJson/GetByAge",{sort:{sortOrder:"DESC",sortColumn:"id"},filter:{ParticipantType:1},doCache:!0,select:"AgeFrom,AgeTo,EventGroupId,GroupName,Status,AgeStartDate,MaxAgeDate,MinAgeDate,AgeStartMonth,AgeStartYear"});let N=p?.sort((t,l)=>l.AgeTo-t.AgeTo)?.[0],F=p?.sort((t,l)=>t.AgeFrom-l.AgeFrom)?.[0],k=i?.[r];const y=h.useRef(null);let[m,E]=h.useState(k);const M=t=>{y.current&&!y.current.contains(t.target)&&y.current.closeCalendar()};h.useEffect(()=>(document.addEventListener("click",M,!0),()=>{document.removeEventListener("click",M,!0)}),[]),h.useEffect(()=>{E(i?.[r])},[i?.[r]]);let v=F?.MaxAgeDate?new Date(F?.MaxAgeDate):new Date,C=N?.MinAgeDate?new Date(N?.MinAgeDate):new Date,G=v.getFullYear(),R=C.getFullYear(),g=null,D=null;o?.[r]&&(g=S(o?.[r])),g&&(D=p?.filter(t=>{let l=new Date(t.MaxAgeDate),Y=new Date(t.MinAgeDate),c=t.JsonSettings;if(c&&(c=JSON.parse(c),c?.IsCommon=="Yes"))return!1;if(g>=Y&&g<=l)return t}));const T=Q(R,G),j=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.jsxs("div",{className:"sm:col-span-4",children:[e.jsxs("label",{htmlFor:r,className:f("block text-sm font-medium leading-6 ",m?"text-danger":"text-gray-900"),children:[n||r,!w&&e.jsx("span",{className:"text-danger pl-1",children:"*"})]}),e.jsxs("div",{className:"relative mt-2  print:mt-0 rounded-md shadow-sm items-center",children:[e.jsx("div",{className:f("pointer-events-none h-9 absolute inset-y-0 left-0 z-20 flex items-center",d?"":"pl-3"),children:e.jsx(q,{"aria-hidden":"true",className:"h-5 w-5 mb-0.5 "+(m?"text-red-400":"text-gray-400")})}),d?e.jsx("div",{className:f("pl-7","block w-full py-1.5  print:py-1 sm:text-sm sm:leading-6","text-gray-900   placeholder:text-gray-400 ring-gray-300 ",d?"text-gray-500":""),children:o?.[r]??"-"}):e.jsx(V,{control:a,name:r,disabled:d,rules:{required:!w},render:({field:t,fieldState:{invalid:l,isDirty:Y},formState:{errors:c}})=>e.jsxs(e.Fragment,{children:[e.jsx(P,{maxDate:v,minDate:C,disabled:d,calendarClassName:"!border-gray-100 shadow-lg font-medium",calendarIconClassName:"h-5 w-5",placeholderText:"Select "+n,className:f("appearance-none block w-full px-3 pl-10 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",d?"bg-gray-100 text-gray-500":"bg-white text-gray-900",m?"border-red-300 text-red-900 placeholder-red-300 focus:border-red-300 focus:ring-red-300":"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"),dateFormat:"dd-MM-yyyy",renderCustomHeader:({date:u,changeYear:x,changeMonth:J,decreaseMonth:O,increaseMonth:I,prevMonthButtonDisabled:$,nextMonthButtonDisabled:B})=>e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b space-x-1",children:[e.jsx("button",{type:"button",onClick:O,className:" text-gray-800",disabled:$,children:e.jsx(H,{className:"h-8 w-8"})}),e.jsx("select",{className:`border rounded-md shadow-sm placeholder-gray-400 \r
                        border-gray-300\r
                        py-1\r
                        focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm`,value:U(u),onChange:({target:{value:s}})=>{x(s)},children:T.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("select",{className:`border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 \r
                        border-gray-300\r
                        py-1\r
                        focus:border-indigo-500 sm:text-sm`,value:j[X(u)],onChange:({target:{value:s}})=>{J(j.indexOf(s))},children:j.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("button",{type:"button",onClick:I,disabled:B,children:e.jsx(W,{className:"h-8 w-8"})})]}),selected:S(t.value),onChange:u=>{let x=b(u);t.onChange(x),A&&A(x)}}),m&&e.jsx(z,{message:"This field is required"})]})}),D?.length>0&&e.jsx("div",{className:"mt-5",children:e.jsx("div",{className:"rounded-lg bg-gray-50 shadow-sm ring-1 ring-gray-900/5",children:e.jsxs("dl",{className:"flex flex-wrap",children:[e.jsx("div",{className:"flex-auto pl-6 pt-1",children:e.jsx("dt",{className:"text-sm/6 font-semibold text-gray-900",children:"Matching Groups"})}),D?.map((t,l)=>e.jsxs("div",{className:" flex w-full flex-none gap-x-4 border-t border-gray-900/5 px-6 py-1",children:[e.jsx("dt",{className:"flex-none",children:e.jsx(_,{"aria-hidden":"true",className:"h-6 w-5 text-green-400 "})}),e.jsx("dd",{className:"text-sm/6 font-medium text-gray-900",children:t.GroupName}),e.jsx("dt",{className:"flex-none",children:e.jsx(K,{"aria-hidden":"true",className:"h-6 w-5 text-gray-400"})}),e.jsx("dd",{className:"text-sm/6 font-medium text-gray-900",children:e.jsxs("span",{className:"text-sm/6 text-gray-500",children:[b(t.MinAgeDate)," - ",b(t.MaxAgeDate)]})})]},t.EventGroupId||l))]})})})]})]})};export{he as default};
