import{r as s,u as I,j as t,h as F}from"./main-lPsnt-mr.js";import{R as E,F as W,a as _}from"./react-confetti-BqA7RGc3.js";import{L as z}from"./layoutOuter-1bNDocR2.js";import{P as B}from"./pageHeader-CIDkeNof.js";import{L as A}from"./lazyFunction-CEQZ3rnc.js";import{m as v}from"./proxy-psNYPsQf.js";function H({title:c,titleId:m,...a},l){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":m},a),c?s.createElement("title",{id:m},c):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"}))}const M=s.forwardRef(H),U=sessionStorage.getItem("showedItems")?JSON.parse(sessionStorage.getItem("showedItems")):[],J=()=>({width:window.innerWidth,height:window.innerHeight}),ee=()=>{const{row:c}=I("/CoordinatorJson/GetToppers",{filter:{IsAwards:!1,IsIndividual:!1,IsPodium:!0},select:"BonusPoints,CandidateRegistrationId,CandidateUser,CandidateUserMobile,CandidateUserPhone,CandidateUserProfilePicture,ChampionName,CompetitionCompetitionItemTitle,CompetitionGender,CompetitionGenderGenderTitle,CompetitionGroupGroupName,CompetitionLanguage,CompetitionLanguageLanguageName,Grade,GradePoints,IdentityNumber,Items,JudgeReport,ParticipantType,Points,RankBonusPoints,ScorecardIdRank,ScorecardIdRankTitle,Status,TopGroupBy,TotalPoints,User,ParticipantCompetition",doCache:!0,limit:1e5,offset:0}),{rows:m}=I("/EventLevelsJson/Get",{limit:1e5,offset:0}),[a,l]=s.useState(!1),[$,S]=s.useState(!1);s.useEffect(()=>{a&&A(()=>{l(!1)},3e3)},[a]);var x=["Second","First","Third"],g=["Third","Second","First"];const u=c?.CompetitionResults?.map(e=>e.Competitions.map(o=>({Competition:o.CompetitionCompetitionItemTitle,Group:o.CompetitionGroupGroupName,...o,Results:o.Results.sort((n,r)=>x.indexOf(n.ScorecardIdRankTitle)-x.indexOf(r.ScorecardIdRankTitle))}))).flat(),[i,f]=s.useState(0);let[p,R]=s.useState(U);const h=u?.[i],d=h?.Results||[],w=()=>{l(!1);const o=[...d].sort((n,r)=>g.indexOf(n.ScorecardIdRankTitle)-g.indexOf(r.ScorecardIdRankTitle)).findIndex(n=>!p.includes(n.ParticipantCompetition+"_"+n.ScorecardIdRank));if(o===-1)b();else{const n=[...p,d[o].ParticipantCompetition+"_"+d[o].ScorecardIdRank];sessionStorage.setItem("showedItems",JSON.stringify(n)),R(n),l(!0)}},k=()=>{f(i===0?u?.length-1:i-1)},b=()=>{const e=i===u?.length-1;f(e?0:i+1),e||S(!0)},y=e=>{f(e);let o=document.getElementById("scrollresults");if(!o||!o.children||!o.children[e])return;let n=o.children[e],r=o.offsetWidth,L=n.offsetWidth,P=n.offsetLeft-r/2+L/2,G=o.scrollWidth-r,O=Math.min(Math.max(P,0),G);o.scroll({left:O,behavior:"smooth"})},N=()=>{document.documentElement.requestFullscreen()},C=e=>{e.preventDefault(),e.key==="ArrowRight"&&w(),e.key==="ArrowLeft"&&k()};s.useEffect(()=>(document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}),[d,p]);const{width:j,height:T}=J();return t.jsx(z,{children:t.jsxs("div",{className:"flex flex-col grow",children:[t.jsx(B,{heading:"Live Result Presentation",subHeading:"Present competition results in an engaging fullscreen format with podium animations",rightChildren:t.jsxs("button",{onClick:N,className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[t.jsx(M,{className:"-ml-0.5 h-5 w-5","aria-hidden":"true"}),"Fullscreen"]})}),a&&t.jsx(E,{numberOfPieces:500,recycle:!0,width:j,tweenDuration:1e3,height:T}),t.jsx("div",{className:"container-fixed",children:t.jsx("div",{className:"flex flex-col bg-gradient-to-t from-surface to-surfaceCard rounded-xl border border-border shadow-sm",children:t.jsxs("div",{className:"relative w-full space-y-4 justify-between h-full min-h-screen flex-col items-center",children:[t.jsxs("h2",{className:"text-4xl font-semibold text-darkprimary mb-2 text-center border-pink-200 border-b-2 py-4 mt-5",children:[h?.Competition," - ",h?.Group]}),t.jsx("div",{className:"flex flex-row justify-center space-x-4 p-10 min-h-[50vh]",children:d.map((e,o)=>p.includes(e.ParticipantCompetition+"_"+e.ScorecardIdRank)&&t.jsxs(v.div,{initial:{y:-300,opacity:0,scale:.5,zIndex:9},animate:{y:0,opacity:1,scale:1,zIndex:9},exit:{y:300,opacity:0},transition:{duration:.5},style:{backgroundImage:e.ScorecardIdRankTitle==="First"?"linear-gradient(rgb(203 174 20), rgb(207 175 3 / 80%)), url(https://app.etalenter.com/Content/Images/result-card/rank-back-img.png)":e.ScorecardIdRankTitle==="Second"?"linear-gradient(to bottom, rgb(14 155 226 / 70%), rgb(14 155 226 / 70%)), url('https://app.etalenter.com/Content/Images/result-card/rank-back-img.png')":"linear-gradient(to bottom, rgb(15 160 6 / 70%), rgb(15 160 6 / 70%)), url('https://app.etalenter.com/Content/Images/result-card/rank-back-img.png')"},className:F("flex flex-col items-center justify-center rounded-lg shadow-lg p-4 min-w-80 relative","bg-cover bg-center bg-no-repeat",e.ScorecardIdRankTitle==="First"?"pt-8":e.ScorecardIdRankTitle==="Second"?"pt-6":"pt-4",e.ScorecardIdRankTitle==="First"?"z-50":e.ScorecardIdRankTitle==="Second"?"z-5":"z-0"),children:[t.jsxs("h3",{className:"text-2xl font-bold gold-letter text-gray-100 drop-shadow-xl justify-center flex flex-col text-center mb-4 ",children:[e.ScorecardIdRankTitle,e.ScorecardIdRankTitle==="First"&&t.jsx("img",{src:"https://app.etalenter.com/Content/Images/result-card/winner_icon_1.png",alt:"Gold",className:"h-48 w-48 mt-3 shadow-sm"}),e.ScorecardIdRankTitle==="Second"&&t.jsx("img",{src:"https://app.etalenter.com/Content/Images/result-card/winner_icon_2.png",alt:"Silver",className:"h-32 w-32 mt-3 shadow-sm"}),e.ScorecardIdRankTitle==="Third"&&t.jsx("img",{src:"https://app.etalenter.com/Content/Images/result-card/winner_icon_3.png",alt:"Bronze",className:"h-24 w-24 mt-3 shadow-sm"})]}),t.jsxs("p",{className:"text-lg font-semibold text-white pb-4 drop-shadow-xl",children:[e.CandidateUserName," ",e.TeamTeamName]}),t.jsx("div",{className:"text-md font-semibold text-white text-center flex flex-col gap-2",children:m?.slice(1)?.map((n,r)=>t.jsx("p",{className:"drop-shadow-xl",children:e[`Candidate${n.LevelName}Name`]??e[`Team${n.LevelName}Name`]},r))})]},o))}),t.jsx("div",{className:"flex flex-row justify-start p-10 w-full overflow-x-auto",id:"scrollresults",children:u?.map((e,o)=>t.jsx(v.div,{className:`border-2 p-4 cursor-pointer rounded-md ${o===i?"bg-blue-100":"bg-surfaceCard"}`,onClick:()=>y(o),whileHover:{scale:1.1},whileTap:{scale:.9},children:t.jsx("p",{className:"text-sm font-semibold text-gray-700",children:e.Competition})},o))}),t.jsxs("div",{className:"flex justify-center gap-16 pb-10",children:[t.jsx("button",{onClick:w,type:"button",className:"rounded-full bg-rose-600 p-3 text-white shadow-sm hover:bg-rose-400 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-rose-600",children:t.jsx(W,{"aria-hidden":"true",className:"h-8 w-8"})}),t.jsx("button",{onClick:b,type:"button",className:"rounded-full bg-primary p-3 text-white shadow-sm hover:bg-primaryHover focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:t.jsx(_,{"aria-hidden":"true",className:"h-8 w-8"})})]})]})})})]})})};export{ee as default};
