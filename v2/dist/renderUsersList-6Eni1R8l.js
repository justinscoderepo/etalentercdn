import{k as q,b as N,j as t,q as $,L as H,z as b,i as C,C as K,u as Q,r as P,n as V}from"./main-yugBdkhv.js";import{u as X}from"./useConfirmation-Cg4KZ18u.js";import{e as Y,b as Z}from"./publicRegistrationHelper-Dc4M_2PU.js";import{a as _,F as ee,b as te}from"./renderRegistrationForm-CWOel0tr.js";import"./dialog-CQUN6Rwz.js";import"./keyboard-C77ZT6te.js";import"./description-Bk8H_lDa.js";import"./use-is-mounted-DnS0pA8w.js";import"./navigationUtils-Bf0lah9r.js";import"./CheckIcon-DvPpj-Ij.js";import"./TrashIcon-Dv9MlWzU.js";import"./PencilIcon-DW_SLi3g.js";import"./eventDetailedView-D-lJW2YP.js";import"./UserPlusIcon-bt62dvaF.js";import"./UserGroupIcon-BQh4XWFG.js";import"./box-P2e03Oo9.js";import"./ChevronRightIcon-qQlRy9TF.js";import"./TrashIcon-4Gd83bgT.js";const se=c=>{console.log("ðŸ—ï¸ WithUsersListData re-render");const{eventDetails:a,eventStatus:f,participationDetails:d,participationsStatus:m,participantType:p,participantTypeInt:i,setParticipantType:s,allStepsComponents:U,jsonSettings:u,isIndividualRegistration:h,isTeamsRegistration:x}=K(),{user:D}=N()||{},{delete:g}=Q("/CandidateJson/GetParticipants",{deleteUrl:"/CandidateJson/RemoveUser",noGet:!0});console.log("ï¿½ Data status:",{participationsStatus:m,participationDetails:d,hasData:!!d});const y=P.useCallback(async n=>{try{const l={UserRoleId:i===1?n.Candidate:n.Team,id:i===1?n.Candidate:n.Team,participantType:i.toString()};await g(l),b.success("Participant Deleted Successfully")}catch(l){throw console.error("Delete participant error:",l),b.error("Failed to delete participant"),l}},[i,g]),j=P.useCallback(n=>{s(n)},[s]),r=P.useMemo(()=>({...c,eventDetails:a,eventStatus:f,participationDetails:d,participationsStatus:m,participantType:p,participantTypeInt:i,allStepsComponents:U,jsonSettings:u,isIndividualRegistration:h,isTeamsRegistration:x,handleDeleteParticipant:y,handleParticipantTypeChange:j,isDataLoading:V(f,m)}),[c,a,f,d,m,p,i,U,u,h,x,y,j]);return t.jsx(k,{...r})},k=q.memo(({setActiveTab:c,onStartRegistration:a,closeModel:f,eventDetails:d,eventStatus:m,participationDetails:p,participationsStatus:i,participantType:s,participantTypeInt:U,allStepsComponents:u,jsonSettings:h,isIndividualRegistration:x,isTeamsRegistration:D,handleDeleteParticipant:g,handleParticipantTypeChange:y,isDataLoading:j})=>{const{user:r}=N()||{};if(!r||!r.Email)return t.jsx("div",{children:"Please log in to access this form."});const n=r?.RoleTitle==="Guardian";r?.RoleTitle;const l=r?.Email?.indexOf("justnshalom")!==-1,[T,A]=X(),F=Y(p,null,null,null),{userRoles:R,users:w,teams:E}=F,L=w?.length?null:$(localStorage.user)?.user,I=L&&!(n&&!l)?{UId:L?.UId}:null,S=h?.AdditionalSettings,B=Z(u),G=(e,o=!1)=>{const z=o?2:1,W=o?e.Team:e.Candidate;a&&a(z,W)},O=()=>{a&&a(s==="Individual"?1:2)},J=()=>{a&&a(2)};if(j)return t.jsx(H,{info:"Loading participants..."});const v=[];x&&v.push({name:"Individual",icon:ee}),D&&v.push({name:"Team",icon:te});const M=e=>{if(e){const o={UserRoleId:s==="Individual"?e.Candidate:e.Team,id:s==="Individual"?e.Candidate:e.Team,participantType:s==="Individual"?"1":"2"};A(o)}};return t.jsxs("div",{children:[t.jsx(T,{title:"Delete Participant",description:"Are you sure you want to delete this participant?",confirmButtonLabel:"Delete",confirmButtonClick:async e=>{await g(e),b.success("Participant Deleted Successfully")},className:"w-96 print:hidden"}),t.jsxs(t.Fragment,{children:[t.jsx("nav",{"aria-label":"Tabs",className:"isolate flex divide-x divide-gray-200 rounded-t-lg mb-6 mt-5",children:v.map((e,o)=>t.jsxs("button",{onClick:()=>{y(e.name)},className:C(s===e.name?"text-sky-800 bg-sky-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 bg-slate-50",o===0?"rounded-l-lg":"",o===v.length-1?"rounded-r-lg":"","group relative justify-center flex-grow min-w-0 flex items-center px-4 py-3 text-center text-sm font-medium focus:outline-none"),children:[t.jsx(e.icon,{className:C(s===e.name?"text-sky-800":"text-gray-400 group-hover:text-gray-500","h-6 mr-2"),"aria-hidden":"true"}),t.jsxs("span",{className:C(e.hideOnMobile?"hidden sm:block":""),children:["As ",e.name]}),t.jsx("span",{"aria-hidden":"true",className:C(s===e.name?"bg-sky-800":"bg-transparent","absolute inset-x-0 bottom-0 h-0.5")})]},e.name))}),t.jsx("div",{className:"flex mt-6 flex-col justify-center justify-items-center sm:flex-row sm:space-x-2",children:t.jsx(t.Fragment,{children:t.jsx(_,{allStepsComponents:u,allFields:B,teams:E,onClickDelete:M,tempUser:I,isIndividualRegistration:x,isTeamsRegistration:D,participantType:s,addNewParticipant:O,addNewTeamParticipant:J,userRoles:R,users:w,participationDetails:p,advancedSettings:S,onEditParticipant:G})})})]})]})});k.displayName="UsersListComponent";const Ce=c=>t.jsx(se,{...c});export{k as UsersListComponent,se as WithUsersListData,Ce as default};
