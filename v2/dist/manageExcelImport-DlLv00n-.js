import{r as t,e as Z,l as B,m as q,k as h,j as e,L as l,R as n,_ as d}from"./main-CNwsE70q.js";function K({title:u,titleId:m,...b},r){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":m},b),u?t.createElement("title",{id:m},u):null,t.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5H9a3.75 3.75 0 0 1 3.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 0 1 3.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 0 1-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875Zm6.905 9.97a.75.75 0 0 0-1.06 0l-3 3a.75.75 0 1 0 1.06 1.06l1.72-1.72V18a.75.75 0 0 0 1.5 0v-4.19l1.72 1.72a.75.75 0 1 0 1.06-1.06l-3-3Z",clipRule:"evenodd"}),t.createElement("path",{d:"M14.25 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 16.5 7.5h-1.875a.375.375 0 0 1-.375-.375V5.25Z"}))}const Q=t.forwardRef(K),X=n.lazy(()=>d(()=>import("./excelImportComponent-CFgU7u68.js"),[])),$=n.lazy(()=>d(()=>import("./groupFilterTab-CN28KFnQ.js"),[])),ee=n.lazy(()=>d(()=>import("./organizationLevelManager-BjPg_CL9.js"),[])),ae=n.lazy(()=>d(()=>import("./participantFilterTab-DqR2Crt5.js"),[])),te=n.lazy(()=>d(()=>import("./participantFilters-9jXK7lf1.js"),[])),se=({user:u})=>{const[m,b]=t.useState(Date.now),[r,v]=t.useState(""),[x,j]=t.useState(""),[P,f]=t.useState(""),[o,A]=t.useState([]),[L,k]=t.useState(1e5),[F,s]=t.useState(1);let{user:O}=Z()||{};const y=u||O,{eventLevels:T,topLevels:G,groups:c,eventCacheLoaded:E}=B(),{advancedSettings:z}=q(),p=z||{};let g=null;if(c&&Array.isArray(c)&&c.length>0){let a=c.find(i=>i.GroupName.toLowerCase()==="common");a||(a=c.find(i=>(i.JsonSettings?JSON.parse(i.JsonSettings):{}).IsCommon==="Yes")),g=a?a.EventGroupId:null}console.log("eventConfig:",p);const[S,C]=t.useState({candidateName:"",candidateIdentityNumber:"",isIncludeStatusTitle:"Yes",isIncludeCommon:"",commonGroup:g,isListWithoutSelectedGroup:""});t.useEffect(()=>{C(a=>({...a,isIncludeCommon:p.DefaultValueForMixingCommonWithOtherAgeGroups=="Yes"?"true":p.DefaultValueForMixingCommonWithOtherAgeGroups==="No"?"false":""}))},[p.DefaultValueForMixingCommonWithOtherAgeGroups]);const D=t.useCallback(a=>{if(Array.isArray(a)){A(a);const i=a.slice().reverse().find(Y=>{const I=Object.values(Y)[0];return I&&I!==""}),N=i?Object.values(i)[0]:"";f(N),s(1)}else f(a),s(1)},[]),_=t.useCallback(a=>{C(a)},[]);t.useCallback(a=>{k(a),s(1)},[]);const R=t.useCallback(a=>{s(a)},[]),V=t.useCallback(a=>{v(a),s(1)},[]),M=t.useCallback(a=>{j(a),s(1)},[]),w=t.useCallback(a=>{h.success("Edit functionality will be handled by ExcelImportComponent")},[]),U=t.useCallback(a=>{h.success("Delete functionality will be handled by ExcelImportComponent")},[]),W=t.useCallback(a=>{h.success("Team management will be handled by ExcelImportComponent")},[]),H=t.useCallback(()=>{},[]),J=t.useCallback(()=>{C({candidateName:"",candidateIdentityNumber:"",teamIdentityNumber:"",registrationId:"",isIncludeStatusTitle:"",isIncludeCommon:"",commonGroup:g,isListWithoutSelectedGroup:""}),f(""),v(""),j(""),s(1),h.success("Filters cleared")},[g]);if(!E||o===null){let a=[];return E||a.push("event data"),o===null&&a.push("organization data"),e.jsx(l,{info:"Loading participants data..."+a.join(", ")})}return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-full mx-auto",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"px-3 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-6 w-6 text-primary"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-primary",children:"Excel Import - Bulk Participant Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Paste participant data from Excel or Google Sheets to quickly import and manage participants"})]})]})})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-row flex-wrap gap-2 w-full",children:[e.jsx("div",{className:"flex-1 min-w-[300px] px-2 py-1",children:e.jsx(n.Suspense,{fallback:e.jsx(l,{info:"Loading organization manager..."}),children:e.jsx(ee,{user:y,eventLevels:T,topLevels:G,selectedOrganizations:o,onOrganizationChange:D})})}),e.jsx("div",{className:"flex-1 min-w-[300px]",children:e.jsx(n.Suspense,{fallback:e.jsx(l,{info:"Loading filters..."}),children:e.jsx(te,{filterCriterias:S,onFilterChange:_,onApply:_,showAdvancedFilters:!1,onToggleAdvancedFilters:()=>{}})})})]})}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"px-3 py-2",children:e.jsxs("div",{className:"flex flex-row gap-x-2 justify-between",children:[e.jsx("div",{className:"",children:e.jsx(n.Suspense,{fallback:e.jsx(l,{info:"Loading participant tabs..."}),children:e.jsx(ae,{selectedParticipantType:r,onParticipantTypeChange:V,selectedGroupFilter:x})})}),e.jsx("div",{className:"",children:e.jsx(n.Suspense,{fallback:e.jsx(l,{info:"Loading group tabs..."}),children:e.jsx($,{selectedGroupFilter:x,onGroupFilterChange:M,selectedParticipantType:r})})})]})})}),e.jsx("div",{className:"bg-gray-50 relative",children:o.length>0&&e.jsx(n.Suspense,{fallback:e.jsx(l,{info:"Loading Excel import..."}),children:e.jsx(X,{onEdit:w,onView:w,onDelete:U,onTeamManage:W,selectedGroupFilter:x,selectedParticipantType:r,selectedOrganization:P,pageSize:L,currentPage:F,filterCriterias:S,currentUser:y,onAssignmentChange:H,onPageChange:R,selectedOrganizations:o,onClearFilters:J},m)})})]})})};export{se as default};
