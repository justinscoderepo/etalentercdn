import{j as e,w as v,r as m,u as S,p as u,z as n}from"./main-CkEDTDV5.js";import{u as N}from"./index.esm-BtZBDDa6.js";import{L as w}from"./layoutOuter-u3lFfmHl.js";import{P as E}from"./pageHeader-CxCtK4jC.js";import{O as V}from"./OldNewTabLayout-BxnRmPTO.js";import{F as k}from"./PlusIcon-CZ2YnAGi.js";import{F as T}from"./PencilIcon-DEGHZ8Zo.js";import{F as O}from"./TrashIcon-j-ilP0PV.js";import"./navigationUtils-CX7mrRol.js";function J(){return e.jsx(V,{oldUrl:"/EventStages/Manage",newComponent:e.jsx(A,{}),title:"Event Stages Management"})}function A(){const{eventDetails:c}=v(),[p,r]=m.useState(!1),[s,i]=m.useState(null),{rows:o=[],refetch:x}=S("/EventStagesJson/Get",{filter:`EventCategory=${c?.EventCategoryId||0}`,select:"ESGId,Title,Description,Venue,Order,StatusTitle",sort:"Order asc"}),{register:a,handleSubmit:f,reset:d,formState:{errors:l}}=N(),h=async t=>{try{await u("/EventStagesJson/Save",{...t,Event:c?.EVId,Status:1}),n.success(s?"Event stage updated successfully":"Event stage created successfully"),x(),d(),r(!1),i(null)}catch{n.error("Failed to save event stage")}},g=t=>{i(t),r(!0),d({ESGId:t.ESGId,Title:t.Title,Description:t.Description,Venue:t.Venue,Order:t.Order})},b=async t=>{if(confirm("Are you sure you want to delete this event stage?"))try{await u("/EventStagesJson/Remove",{ESGId:t}),n.success("Event stage deleted successfully"),x()}catch{n.error("Failed to delete event stage")}},y=()=>{r(!1),i(null),d()};return e.jsxs(w,{children:[e.jsx(E,{title:"Event Stages Management",description:"Manage event stages, venues, and scheduling"}),e.jsxs("div",{className:"space-y-6",children:[p?e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm",children:[e.jsx("h3",{className:"text-base font-medium text-onSurface mb-4",children:s?"Edit Event Stage":"Add New Stage"}),e.jsxs("form",{onSubmit:f(h),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-onSurface mb-1",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...a("Title",{required:"Title is required"}),defaultValue:s?.Title||"",className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"Enter stage title"}),l.Title&&e.jsx("span",{className:"text-xs text-red-600",children:"Title is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-onSurface mb-1",children:"Venue"}),e.jsx("input",{type:"text",...a("Venue"),defaultValue:s?.Venue||"",className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"Enter venue location"}),l.Venue&&e.jsx("span",{className:"text-xs text-red-600",children:"Venue is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"Order *"}),e.jsx("input",{type:"number",...a("Order",{required:!0,valueAsNumber:!0}),className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-gray-900 focus:border-darkprimary placeholder:text-gray-400 ring-gray-300",placeholder:"1"}),l.Order&&e.jsx("span",{className:"text-xs text-red-600",children:"Order is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-onSurface mb-1",children:"Description"}),e.jsx("textarea",{...a("Description"),defaultValue:s?.Description||"",rows:3,className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"Enter stage description"})]})]}),e.jsxs("div",{className:"flex justify-end gap-x-2 pt-4",children:[e.jsx("button",{type:"button",onClick:y,className:"inline-flex items-center gap-x-2 rounded-md bg-surface px-4 py-2 text-sm font-semibold text-onSurface shadow-sm hover:bg-surfaceHover",children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover",children:s?"Update Stage":"Add Stage"})]})]})]}):e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>r(!0),className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover",children:[e.jsx(k,{className:"h-4 w-4"}),"Add Event Stage"]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden",children:o.length===0?e.jsx("div",{className:"text-center py-12 bg-gray-50",children:e.jsx("p",{className:"text-sm text-onSurfaceVariant",children:"No event stages created yet. Add your first stage above."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-onSurfaceVariant uppercase tracking-wider",children:"Order"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-onSurfaceVariant uppercase tracking-wider",children:"Stage Title"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-onSurfaceVariant uppercase tracking-wider",children:"Venue"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-onSurfaceVariant uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-onSurfaceVariant uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-onSurfaceVariant uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-onSurface",children:t.Order}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-onSurface",children:t.Title}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-onSurfaceVariant",children:t.Venue}),e.jsx("td",{className:"px-4 py-3 text-sm text-onSurfaceVariant",children:t.Description||"-"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:t.StatusTitle||"Active"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end gap-x-2",children:[e.jsx("button",{onClick:()=>g(t),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit",children:e.jsx(T,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>b(t.ESGId),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(O,{className:"h-4 w-4"})})]})})]},t.ESGId))})]})})})]})]})}export{J as default};
