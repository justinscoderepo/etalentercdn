import{g as j}from"./coordinatorRouter-4bw1XuFM.js";import{r as o,A as R,j as e,L as f,_ as b}from"./main-pxHJVgAj.js";import{c as y,R as v}from"./index-DnBI3Rer.js";import{w as g}from"./wrapRoutesWithPropsCapture-TYRt2gop.js";import"./layoutUtils-WrWhfNo8.js";const E=o.lazy(()=>b(()=>import("./index-kznpf2RY.js"),[])),w=(i,t)=>({user:n,...C})=>{const l=o.useContext(R),[c,d]=o.useState(null);if(!l||l.isReady===!1)return e.jsx(f,{from:`${t}-ContextLoading`,info:"Loading context..."});const u=l,a=o.useMemo(()=>({UId:n?.UId,Role:n?.Role}),[n?.UId,n?.Role]),x=o.useMemo(()=>{try{if(d(null),typeof i!="function")throw new Error(`getRoutes is not a function: ${typeof i}`);const r=i(n,u);if(!r||!Array.isArray(r))throw console.error(`${t} - getRoutes returned invalid data:`,r),new Error(`Invalid routes returned from ${t}: ${typeof r}`);r.length===0&&(console.warn(`${t} - No routes returned for user role:`,a?.Role),r.push({path:"*",element:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-yellow-600 mb-4",children:"No Routes Available"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No routes defined for your role"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Role: ",a?.Role]})]})})}));const m=r.find(s=>!s.path||!s.element);if(m)throw console.error(`${t} - Invalid route structure:`,m),new Error("Route missing path or element property");const p=g(r).map(s=>({...s,errorElement:s.errorElement||e.jsx(E,{})})),h=y(p,{future:{v7_normalizeFormMethod:!0,v7_startTransition:!0}});if(!h)throw new Error("createBrowserRouter returned null/undefined");return h}catch(r){return console.error(`${t} - Error creating router:`,r),d(r.message),null}},[a,u,i,t]);return c?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Router Initialization Error"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:[t," failed to initialize"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:c}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Reload Application"})]})}):x?e.jsx(o.Suspense,{fallback:e.jsx(f,{from:`${t}-Router`}),children:e.jsx(v,{router:x})}):(console.error(`${t} - Router is null/undefined, cannot render RouterProvider`),e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Router Not Available"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Router instance is null or undefined"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Wrapper: ",t]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Reload Application"})]})}))},P=w(j,"CoordinatorWrapper");export{P as default};
