import{r as u,B as w,u as E,j as e,L as m,i as N,_ as j}from"./main-CalEMNEI.js";const S=N.lazy(()=>j(()=>import("./renderComponents-pjAW3_DY.js"),[])),D=()=>{const[C,P]=u.useState(0),v=new URLSearchParams(window.location.search).get("eventId"),l=window.location.pathname.split("/"),a=l[l.length-1],p=window.location.pathname.includes("/Public/ViewEvent/")&&a&&a!=="RenderViewEvent",n=v,o=p?a.replace(/-/g," "):null,c=w(),i=n||o,{row:x,status:h}=E("/CandidateJson/GetEvents",{filter:n?{EVId:n}:{EventNameEquals:o},select:"AllowDisplayCompetitionOrder,Description,EVId,EndDateString,EventCategory,EventCategoryTitle,EventLogo,EventName,IdentityBackgroundImage,OrganizationLogo,OrganizationName,OrganizationShortName,StartDateString,Venue,JsonSettings",doCache:!0,noGet:!i}),s=i?x:c.eventDetails,g=i?h:c.eventStatus;if(!n&&!o)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-surface",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-onSurface mb-4",children:"Event Required"}),e.jsx("p",{className:"text-onSurfaceVariant",children:"Please provide a valid event ID or event name to view the live status."})]})});if(g==="loading")return e.jsx(m,{});if(!s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-surface",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-onSurface mb-4",children:"Event Not Found"}),e.jsx("p",{className:"text-onSurfaceVariant",children:"The requested event could not be found."})]})});const r=(s?.JsonSettings?JSON.parse(s.JsonSettings):{components:{}}).components||{},b=[{name:"Public Event View Header",components:r["Public Event View Header"]||[],className:"bg-surfaceCard shadow-sm border-b"},{name:"Public Event View Center",components:r["Public Event View Center"]||[],className:"flex-1 bg-surface"},{name:"Public Event View Footer",components:r["Public Event View Footer"]||[],className:"bg-surfaceCard shadow-sm border-t"}],f=t=>{switch(t){case"Public Event View Header":return[{type:"event-logo",label:"",id:"default-logo"},{type:"event-name",label:"",id:"default-name"}];case"Public Event View Center":return[{type:"event-live-status",label:"Live Status",id:"default-live-status"},{type:"event-competition-count",label:"Competition Status Overview",id:"default-count"},{type:"event-stage-competitions",label:"Competitions by Stage",id:"default-stages"}];case"Public Event View Footer":return[{type:"event-results-link",label:"View Results",id:"default-results"}];default:return[]}};return e.jsxs("div",{className:"min-h-screen flex flex-col bg-surface",children:[b.map((t,k)=>{const d=t.components.length>0?t.components:f(t.name);return e.jsx("div",{className:t.className,children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:d.length>0&&e.jsx(u.Suspense,{fallback:e.jsx(m,{}),children:e.jsx(S,{noCustomStyles:!0,eventDetails:s,components:d})})})},t.name)}),e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary hover:bg-primaryHover text-white p-3 rounded-full shadow-lg transition-colors",title:"Refresh Status",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})})]})};export{D as default};
