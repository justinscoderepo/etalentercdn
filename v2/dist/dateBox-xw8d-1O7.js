import{r as m,j as r,h as b}from"./main-BWzMsQNc.js";import{F as q,D as P}from"./index-CBWer708.js";import{C as $}from"./index.esm-Co9bIIUe.js";import{V as z}from"./validationMessage-DXPsGq_D.js";import{F as B}from"./ChevronLeftIcon-DK_9wHtW.js";import{F as H}from"./ChevronRightIcon-DVlWxc3d.js";import"./clsx-B-dksMZM.js";import"./floating-ui.dom-Di5CRMxg.js";import"./index-T2M3h99b.js";const I=t=>{let e=new Date(t),a=""+(e.getMonth()+1),n=""+e.getDate(),c=e.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[n,a,c].join("-")},_=t=>(t.split(" ").length>1&&(t=t.split(" ")[0]),t),F=t=>{try{if(!t)return"";let e=t.split("-");return e.length<3?"":new Date(e[2],e[1]-1,e[0])}catch{return""}},G=(t,e,a=e-t+1)=>Array.from({length:a},(n,c)=>t+c),D=t=>t.getFullYear(),K=t=>t.getMonth(),de=({control:t,fieldName:e,label:a,formData:n,errors:c,register:Q,minDate:Y,maxDate:C,optional:M,maxLength:U,onChange:v,type:W,validate:l,disabled:i})=>{let R=c?.[e];const g=m.useRef(null),j=m.useRef(null);let[f,E]=m.useState(R);const k=s=>{j.current&&!j.current.contains(s.target)&&g.current&&g.current.setOpen&&g.current.setOpen(!1)};m.useEffect(()=>(document.addEventListener("click",k,!0),()=>{document.removeEventListener("click",k,!0)}),[]),m.useEffect(()=>{E(c?.[e])},[c?.[e]]);let h=C?new Date(C):null,x=Y?new Date(Y):null;if(l&&typeof l=="object"){if(l.fromField&&n?.[l.fromField]){const s=F(n[l.fromField]);s&&(x=s)}if(l.toField&&n?.[l.toField]){const s=F(n[l.toField]);s&&(h=s)}}const N=new Date().getFullYear();var p=x?D(x):N-100,y=h?D(h):N+10;if(p>y){const s=p;p=y,y=s}const O=G(p,y),w=["January","February","March","April","May","June","July","August","September","October","November","December"];return r.jsxs("div",{className:"sm:col-span-4",children:[r.jsxs("label",{htmlFor:e,className:b("block text-sm font-medium leading-6 ",f?"text-danger":"text-gray-900"),children:[a||e,!M&&r.jsx("span",{className:"text-danger pl-1",children:"*"})]}),r.jsxs("div",{ref:j,className:"relative mt-2  print:mt-0 rounded-md shadow-sm items-center",children:[r.jsx("div",{className:b("pointer-events-none h-9 absolute inset-y-0 left-0 z-20 flex items-center",i?"":"pl-3"),children:r.jsx(q,{"aria-hidden":"true",className:"h-5 w-5 mb-0.5 "+(f?"text-red-400":"text-gray-400")})}),i?r.jsx("div",{className:b("pl-7","block w-full py-1.5  print:py-1 sm:text-sm sm:leading-6","text-gray-900   placeholder:text-gray-400 ring-gray-300 ",i?"text-gray-500":""),children:n?.[e]?_(n?.[e]):"-"}):r.jsx($,{control:t,name:e,disabled:i,rules:{required:!M},render:({field:s,fieldState:{invalid:X,isDirty:Z},formState:{errors:ee}})=>{const T=F(s.value);return r.jsxs(r.Fragment,{children:[r.jsx(P,{ref:g,maxDate:h,minDate:x,disabled:i,calendarClassName:"!border-gray-100 shadow-lg font-medium",calendarIconClassName:"h-5 w-5",placeholderText:"Select "+a,className:b("appearance-none block w-full px-3 pl-10 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",i?"bg-gray-100 text-gray-500":"bg-white text-gray-900",f?"border-red-300 text-red-900 placeholder-red-300 focus:border-red-300 focus:ring-red-300":"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"),dateFormat:"dd-MM-yyyy",renderCustomHeader:({date:d,changeYear:u,changeMonth:V,decreaseMonth:A,increaseMonth:J,prevMonthButtonDisabled:L,nextMonthButtonDisabled:S})=>r.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b space-x-1",children:[r.jsx("button",{type:"button",onClick:A,className:" text-gray-800",disabled:L,children:r.jsx(B,{className:"h-8 w-8"})}),r.jsx("select",{className:`border rounded-md shadow-sm placeholder-gray-400 \r
                        border-gray-300\r
                        py-1\r
                        focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm`,value:D(d),onChange:({target:{value:o}})=>{u(o)},children:O.map(o=>r.jsx("option",{value:o,children:o},o))}),r.jsx("select",{className:`border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 \r
                        border-gray-300\r
                        py-1\r
                        focus:border-indigo-500 sm:text-sm`,value:w[K(d)],onChange:({target:{value:o}})=>{V(w.indexOf(o))},children:w.map(o=>r.jsx("option",{value:o,children:o},o))}),r.jsx("button",{type:"button",onClick:J,disabled:S,children:r.jsx(H,{className:"h-8 w-8"})})]}),selected:T||null,onChange:d=>{if(!d)return;console.log("date onChange",d,e);const u=I(d);console.log("formatted date",u),s.onChange(u),v&&v(u)}},s.value||"empty"),f&&r.jsx(z,{message:"This field is required"})]})}})]})]})};export{de as default};
