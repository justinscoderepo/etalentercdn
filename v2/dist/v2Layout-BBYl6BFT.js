import{b as v,r,j as e}from"./main-C0u1OoiM.js";import{V as N,a as w}from"./v2Sidebar-DjWBvaGT.js";import{d as E,O as S}from"./navigationUtils-DV5QbmmF.js";const B=({children:f})=>{const x=E(),{user:l,token:L}=v()||{},[n,a]=r.useState(!1),[d,u]=r.useState(!1),[i,g]=r.useState(!1),[h,b]=r.useState(!0),o=r.useRef(null),c=r.useRef(null);r.useEffect(()=>{const s=()=>{const t=window.innerWidth<1024;g(t),t&&a(!0)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),r.useEffect(()=>{const s=t=>{i?o.current&&!o.current.contains(t.target)&&c.current&&!c.current.contains(t.target)&&!n&&a(!0):o.current&&!o.current.contains(t.target)&&c.current&&!c.current.contains(t.target)&&n&&d&&u(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[i,n,d]);const p=()=>{!i&&n&&u(!0)},j=()=>{};r.useEffect(()=>{const s=setTimeout(()=>{b(!1)},300);return()=>clearTimeout(s)},[]);const m=(()=>{const s=x.pathname,t=s.split("/").filter(Boolean);return{controller:t[0]||"Home",action:t[1]||"Index",fullPath:s,breadcrumb:t.join(" > ")||"Home"}})();return h?e.jsx("div",{className:"min-h-screen bg-contentBg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Loading eTalenter..."})]})}):e.jsxs("div",{className:"min-h-screen bg-contentBg",children:[e.jsxs("div",{className:"flex h-screen overflow-hidden",children:[e.jsx(N,{ref:o,isCollapsed:n,isHoverExpanded:d,isMobile:i,onToggle:()=>a(!n),onMouseEnter:p,onMouseLeave:j,user:l,pageContext:m}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(w,{ref:c,user:l,isSidebarCollapsed:n,onSidebarToggle:()=>a(!n),pageContext:m}),e.jsx("main",{className:"flex-1 overflow-auto bg-contentBg",children:e.jsx("div",{className:"h-full",children:e.jsx("div",{className:"min-h-full",children:f||e.jsx(S,{})})})})]})]}),i&&!n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>a(!0)}),e.jsx("div",{id:"global-spinner",className:"fixed inset-0 bg-contentBgOuter bg-opacity-75 z-50 hidden items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Processing..."})]})}),e.jsx("div",{id:"toast-container",className:"fixed top-4 right-4 z-50 space-y-2"}),e.jsx("div",{id:"modal-container",className:"fixed inset-0 z-50 hidden"})]})};export{B as V};
