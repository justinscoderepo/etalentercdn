import{d as b,r as a,f as O,j as t,h as E}from"./main-BWzMsQNc.js";import{R as _,F as z,a as B}from"./react-confetti-D92dOUp8.js";import{B as W}from"./box-BoQYSL0v.js";import{m as I}from"./proxy-D7ictwGx.js";const U=sessionStorage.getItem("showedItems")?JSON.parse(sessionStorage.getItem("showedItems")):[],A=()=>({width:window.innerWidth,height:window.innerHeight}),Q=()=>{const{row:C}=b("/CoordinatorJson/GetToppers",{filter:{IsAwards:!1,IsIndividual:!1,IsPodium:!0},select:"BonusPoints,CandidateRegistrationId,CandidateUser,CandidateUserMobile,CandidateUserPhone,CandidateUserProfilePicture,ChampionName,CompetitionCompetitionItemTitle,CompetitionGender,CompetitionGenderGenderTitle,CompetitionGroupGroupName,CompetitionLanguage,CompetitionLanguageLanguageName,Grade,GradePoints,IdentityNumber,Items,JudgeReport,ParticipantType,Points,RankBonusPoints,ScorecardIdRank,ScorecardIdRankTitle,Status,TopGroupBy,TotalPoints,User,ParticipantCompetition",doCache:!0,limit:1e5,offset:0}),{rows:S}=b("/EventLevelsJson/Get",{limit:1e5,offset:0}),[c,m]=a.useState(!1),[J,R]=a.useState(!1);a.useEffect(()=>{c&&O(()=>{m(!1)},3e3)},[c]);var f=["Second","First","Third"],h=["Third","Second","First"];const d=C?.CompetitionResults?.map(e=>e.Competitions.map(s=>({Competition:s.CompetitionCompetitionItemTitle,Group:s.CompetitionGroupGroupName,...s,Results:s.Results.sort((n,r)=>f.indexOf(n.ScorecardIdRankTitle)-f.indexOf(r.ScorecardIdRankTitle))}))).flat(),[o,u]=a.useState(0);let[i,v]=a.useState(U);const p=d?.[o],l=p?.Results||[],x=()=>{m(!1);const s=l.sort((n,r)=>h.indexOf(n.ScorecardIdRankTitle)-h.indexOf(r.ScorecardIdRankTitle)).findIndex(n=>!i.includes(n.ParticipantCompetition+"_"+n.ScorecardIdRank));s===-1?g():(i.push(l[s].ParticipantCompetition+"_"+l[s].ScorecardIdRank),sessionStorage.setItem("showedItems",JSON.stringify(i)),v([...i]),m(!0))},k=()=>{u(o===0?d?.length-1:o-1)},g=()=>{const e=o===d?.length-1;u(e?0:o+1),e||R(!0)},N=e=>{u(e);let s=document.getElementById("scrollresults"),n=s.children[e],r=s.offsetWidth,P=n.offsetWidth,G=n.offsetLeft-r/2+P/2,L=s.scrollWidth-r,F=Math.min(Math.max(G,0),L);s.scroll({left:F,behavior:"smooth"})},j=()=>{document.documentElement.requestFullscreen()},w=e=>{e.preventDefault(),e.key==="ArrowRight"&&x(),e.key==="ArrowLeft"&&k()};a.useEffect(()=>(document.addEventListener("keydown",w),()=>{document.removeEventListener("keydown",w)}),[l,i]);const{width:y,height:T}=A();return t.jsxs(W,{heading:"Result Presentation",children:[c&&t.jsx(_,{numberOfPieces:500,recycle:!0,width:y,tweenDuration:1e3,height:T}),t.jsx("div",{className:"flex w-full flex-col",children:t.jsx("div",{className:"flex flex-row bg-gradient-to-t from-gray-200 to-white min-h-screen",children:t.jsxs("div",{className:"relative w-full space-y-4 justify-between h-full min-h-screen flex-col items-center",children:[t.jsx("div",{className:"flex justify-end px-10",children:t.jsx("button",{className:"bg-blue-800 px-2 text-white rounded-md",onClick:j,children:t.jsx("span",{className:"material-symbols-outlined text-xs text-white",children:"FullScreen"})})}),t.jsxs("h2",{className:"text-5xl font-bold text-darkprimary mb-2 text-center border-pink-200 border-b-2 py-2",children:[p?.Competition," - ",p?.Group]}),t.jsx("div",{className:"flex flex-row justify-center space-x-4 p-10 min-h-[50vh]",children:l.map((e,s)=>i.includes(e.ParticipantCompetition+"_"+e.ScorecardIdRank)&&t.jsxs(I.div,{initial:{y:-300,opacity:0,scale:.5,zIndex:9},animate:{y:0,opacity:1,scale:1,zIndex:9},exit:{y:300,opacity:0},transition:{duration:.5},style:{backgroundImage:e.ScorecardIdRankTitle==="First"?"linear-gradient(rgb(203 174 20), rgb(207 175 3 / 80%)), url(https://app.etalenter.com/Content/Images/result-card/rank-back-img.png)":e.ScorecardIdRankTitle==="Second"?"linear-gradient(to bottom, rgb(14 155 226 / 70%), rgb(14 155 226 / 70%)), url('https://app.etalenter.com/Content/Images/result-card/rank-back-img.png')":"linear-gradient(to bottom, rgb(15 160 6 / 70%), rgb(15 160 6 / 70%)), url('https://app.etalenter.com/Content/Images/result-card/rank-back-img.png')"},className:E("flex flex-col items-center justify-center  rounded-lg shadow-lg p-4 min-w-80 relative","bg-cover bg-center bg-no-repeat",e.ScorecardIdRankTitle==="First"?"pt-8":e.ScorecardIdRankTitle==="Second"?"pt-6":"pt-4",e.ScorecardIdRankTitle==="First"?"z-50":e.ScorecardIdRankTitle==="Second"?"z-5":"z-0"),children:[t.jsxs("h3",{className:"text-2xl font-bold gold-letter text-gray-100 drop-shadow-xl justify-center flex flex-col text-center mb-4 ",children:[e.ScorecardIdRankTitle,e.ScorecardIdRankTitle==="First"&&t.jsx("img",{src:"https://app.etalenter.com/Content/Images/result-card/winner_icon_1.png",alt:"Gold",className:"h-48 w-48 mt-3 shadow-sm"}),e.ScorecardIdRankTitle==="Second"&&t.jsx("img",{src:"https://app.etalenter.com/Content/Images/result-card/winner_icon_2.png",alt:"Silver",className:"h-32 w-32 mt-3 shadow-sm"}),e.ScorecardIdRankTitle==="Third"&&t.jsx("img",{src:"https://app.etalenter.com/Content/Images/result-card/winner_icon_3.png",alt:"Bronze",className:"h-24 w-24 mt-3 shadow-sm"})]}),t.jsxs("p",{className:"text-lg font-semibold text-white pb-4 drop-shadow-xl",children:[e.CandidateUserName," ",e.TeamTeamName]}),t.jsx("p",{className:"text-md font-semibold text-white text-center flex flex-col gap-2",children:S?.slice(1)?.map(n=>t.jsx("p",{className:"drop-shadow-xl",children:e[`Candidate${n.LevelName}Name`]??e[`Team${n.LevelName}Name`]}))})]},s))}),t.jsx("div",{className:"flex flex-row justify-start p-10 w-full overflow-x-auto",id:"scrollresults",children:d?.map((e,s)=>t.jsx(I.div,{className:`border-2 p-4 cursor-pointer rounded-md ${s===o?"bg-blue-100":"bg-white"}`,onClick:()=>N(s),whileHover:{scale:1.1},whileTap:{scale:.9},children:t.jsx("p",{className:"text-sm font-semibold text-gray-700",children:e.Competition})},s))}),t.jsxs("div",{className:"flex justify-center gap-16",children:[t.jsx("button",{onClick:x,type:"button",className:"rounded-full bg-rose-600 p-2 text-white shadow-sm hover:bg-rose-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-rose-600",children:t.jsx(z,{"aria-hidden":"true",className:"h-8 w-8"})}),t.jsx("button",{onClick:g,type:"button",className:"rounded-full bg-indigo-600 p-2 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:t.jsx(B,{"aria-hidden":"true",className:"h-8 w-8"})})]})]})})})]})};export{Q as default};
