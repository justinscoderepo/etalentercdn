import{r as i,j as e,L as R,_ as E,R as q,u as H,d as F,c as $,i as _,m as K,o as Q,f as C}from"./main-pxHJVgAj.js";import{u as X}from"./useConfirmation-BlyKGSuL.js";import{e as ee,d as se}from"./publicRegistrationHelper-C7sSkcqR.js";import{B as te}from"./box-DYBuPXzb.js";function ae({title:a,titleId:t,...r},l){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},r),a?i.createElement("title",{id:t},a):null,i.createElement("path",{d:"M10 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM6 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM1.49 15.326a.78.78 0 0 1-.358-.442 3 3 0 0 1 4.308-3.516 6.484 6.484 0 0 0-1.905 3.959c-.023.222-.014.442.025.654a4.97 4.97 0 0 1-2.07-.655ZM16.44 15.98a4.97 4.97 0 0 0 2.07-.654.78.78 0 0 0 .357-.442 3 3 0 0 0-4.308-3.517 6.484 6.484 0 0 1 1.907 3.96 2.32 2.32 0 0 1-.026.654ZM18 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM5.304 16.19a.844.844 0 0 1-.277-.71 5 5 0 0 1 9.947 0 .843.843 0 0 1-.277.71A6.975 6.975 0 0 1 10 18a6.974 6.974 0 0 1-4.696-1.81Z"}))}const ne=i.forwardRef(ae);function ie({title:a,titleId:t,...r},l){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":t},r),a?i.createElement("title",{id:t},a):null,i.createElement("path",{d:"M10 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM3.465 14.493a1.23 1.23 0 0 0 .41 1.412A9.957 9.957 0 0 0 10 18c2.31 0 4.438-.784 6.131-2.1.43-.333.604-.903.408-1.41a7.002 7.002 0 0 0-13.074.003Z"}))}const I=i.forwardRef(ie),le=i.lazy(()=>E(()=>import("./ListUsers-BeaS48dU.js"),[]).then(a=>({default:a.ListUsers}))),re=i.lazy(()=>E(()=>import("./RenderListTeamsBox-DjwLvy4y.js"),[]).then(a=>({default:a.RenderListTeamsBox})));function oe({teams:a,allStepsComponents:t,selectedTeam:r,advancedSettings:l,onClickDelete:f,participationDetails:h,handleChangeTeam:d,isIndividualRegistration:n,isTeamsRegistration:b,users:c,userRoles:p,selectedUser:m,onEditParticipant:y,participantType:g,setParticipantType:j,addNewParticipant:w,addNewTeamParticipant:u,tempUser:o}){const x=P=>{if(y){const L=p?.find(D=>D.User===P.UId);y({Candidate:L?.UserRoleId},!1)}};let U=l?.DisableIndividualRegForm=="Yes";return l?.DisableTeamRegForm=="Yes",e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col w-full",children:[g=="Individual"&&e.jsxs(e.Fragment,{children:[U&&n?e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Registration Closed!"}),e.jsx("span",{className:"block sm:inline",children:" Individual Registration is closed for this event."})]})}):n&&e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"w-full px-2 bg-yellow-900 max-w-60 text-white text-xs font-medium py-2 mt-2 rounded-md hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary mr-4",onClick:w,children:"Add New Individual Participant"})}),e.jsx(te,{heading:"Participation Requests",outerClasses:"relative "+(m?" sm:w-2/6 md:w-1/4":"w-full")+" overflow-hidden",headingClasses:"px-1  lg:px-1",childrenClasses:"px-1 lg:px-1 py-1  w-full flex",children:e.jsxs("div",{className:"flex flex-col max-w-full w-full",children:[n&&e.jsx("div",{className:"max-w-full flex-1 flex-col flex mt-5",children:e.jsx(i.Suspense,{fallback:e.jsx(R,{}),children:e.jsx(le,{allStepsComponents:t,onClickDelete:f,users:c,activeUser:m,userRoles:p,onChange:x,setParticipantType:j,participationDetails:h})})}),!c?.length&&e.jsx("div",{className:"flex flex-1 flex-col justify-center items-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"flex items-center justify-center bg-gray-200 rounded-full p-5",children:e.jsx(I,{className:"size-10 text-gray-600"})}),e.jsx("h3",{className:"mt-6 text-sm font-medium text-gray-900",children:"No Participants Found"}),e.jsx("p",{className:"mt-2 mb-2 text-xs text-gray-500",children:"Please add new participants to the list by click on the Add New Participant button."})]})})]})})]}),g=="Team"&&b&&e.jsx(i.Suspense,{fallback:e.jsx(R,{}),children:e.jsx(re,{teams:a,tempUser:o,selectedTeam:r,participationDetails:h,handleChangeTeam:d,users:c,onClickDelete:f,userRoles:p,allStepsComponents:t,selectedUser:m,handleChangeUser:x,setParticipantType:j,addNewParticipant:u})})]})})}const M=a=>{console.log("🏗️ WithUsersListData re-render");const{eventDetails:t,eventStatus:r,participationDetails:l,participationsStatus:f,participantType:h,participantTypeInt:d,setParticipantType:n,allStepsComponents:b,jsonSettings:c,isIndividualRegistration:p,isTeamsRegistration:m}=H(),{user:y}=F()||{},{delete:g}=$("/CandidateJson/GetParticipants",{deleteUrl:"/CandidateJson/RemoveUser",noGet:!0});console.log("� Data status:",{participationsStatus:f,participationDetails:l,hasData:!!l});const j=i.useCallback(async o=>{try{const x={UserRoleId:d===1?o.Candidate:o.Team,id:d===1?o.Candidate:o.Team,participantType:d.toString()};await g(x),_.success("Participant Deleted Successfully")}catch(x){throw console.error("Delete participant error:",x),_.error("Failed to delete participant"),x}},[d,g]),w=i.useCallback(o=>{n(o)},[n]),u=i.useMemo(()=>({...a,eventDetails:t,eventStatus:r,participationDetails:l,participationsStatus:f,participantType:h,participantTypeInt:d,allStepsComponents:b,jsonSettings:c,isIndividualRegistration:p,isTeamsRegistration:m,handleDeleteParticipant:j,handleParticipantTypeChange:w,isDataLoading:K(r,f)}),[a,t,r,l,f,h,d,b,c,p,m,j,w]);return e.jsx(T,{...u})},T=q.memo(({setActiveTab:a,onStartRegistration:t,closeModel:r,eventDetails:l,eventStatus:f,participationDetails:h,participationsStatus:d,participantType:n,participantTypeInt:b,allStepsComponents:c,jsonSettings:p,isIndividualRegistration:m,isTeamsRegistration:y,handleDeleteParticipant:g,handleParticipantTypeChange:j,isDataLoading:w})=>{const{user:u}=F()||{};if(!u||!u.Email)return e.jsx("div",{children:"Please log in to access this form."});const o=u?.RoleTitle==="Guardian";u?.RoleTitle;const x=u?.Email?.indexOf("justnshalom")!==-1,[U,P]=X(),L=ee(h,null,null,null),{userRoles:D,users:k,teams:B}=L,A=k?.length?null:Q(localStorage.user)?.user,O=A&&!(o&&!x)?{UId:A?.UId}:null,S=p?.AdditionalSettings,Z=se(c),z=(s,v=!1)=>{const W=v?2:1,Y=v?s.Team:s.Candidate;t&&t(W,Y)},G=()=>{t&&t(n==="Individual"?1:2)},J=()=>{t&&t(2)};if(w)return e.jsx(R,{info:"Loading participants..."});const N=[];m&&N.push({name:"Individual",icon:I}),y&&N.push({name:"Team",icon:ne});const V=s=>{if(s){const v={UserRoleId:n==="Individual"?s.Candidate:s.Team,id:n==="Individual"?s.Candidate:s.Team,participantType:n==="Individual"?"1":"2"};P(v)}};return e.jsxs("div",{children:[e.jsx(U,{title:"Delete Participant",description:"Are you sure you want to delete this participant?",confirmButtonLabel:"Delete",confirmButtonClick:async s=>{await g(s),_.success("Participant Deleted Successfully")},className:"w-96 print:hidden"}),e.jsxs(e.Fragment,{children:[e.jsx("nav",{"aria-label":"Tabs",className:"isolate flex divide-x divide-gray-200 rounded-t-lg mb-6 mt-5",children:N.map((s,v)=>e.jsxs("button",{onClick:()=>{j(s.name)},className:C(n===s.name?"text-sky-800 bg-sky-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-100 bg-slate-50",v===0?"rounded-l-lg":"",v===N.length-1?"rounded-r-lg":"","group relative justify-center flex-grow min-w-0 flex items-center px-4 py-3 text-center text-sm font-medium focus:outline-none"),children:[e.jsx(s.icon,{className:C(n===s.name?"text-sky-800":"text-gray-400 group-hover:text-gray-500","h-6 mr-2"),"aria-hidden":"true"}),e.jsxs("span",{className:C(s.hideOnMobile?"hidden sm:block":""),children:["As ",s.name]}),e.jsx("span",{"aria-hidden":"true",className:C(n===s.name?"bg-sky-800":"bg-transparent","absolute inset-x-0 bottom-0 h-0.5")})]},s.name))}),e.jsx("div",{className:"flex mt-6 flex-col justify-center justify-items-center sm:flex-row sm:space-x-2",children:e.jsx(e.Fragment,{children:e.jsx(oe,{allStepsComponents:c,allFields:Z,teams:B,onClickDelete:V,tempUser:O,isIndividualRegistration:m,isTeamsRegistration:y,participantType:n,addNewParticipant:G,addNewTeamParticipant:J,userRoles:D,users:k,participationDetails:h,advancedSettings:S,onEditParticipant:z})})})]})]})});T.displayName="UsersListComponent";const de=a=>e.jsx(M,{...a}),fe=Object.freeze(Object.defineProperty({__proto__:null,UsersListComponent:T,WithUsersListData:M,default:de},Symbol.toStringTag,{value:"Module"}));export{I as F,ne as a,fe as r};
