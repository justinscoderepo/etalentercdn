import{j as e,r as b,m as Le,e as ke,u as Re,L as $e,z as c,i as C,k as Me,p as Pe}from"./main-DAQuJgkC.js";import{F as Ge}from"./PencilIcon-CCoLyfnB.js";import{F as xe}from"./UserGroupIcon-OrEIAgBF.js";import{F as Ee}from"./TrashIcon-uHoDBa-x.js";import De from"./pagination-RUqaOvIe.js";import{u as Fe}from"./useConfirmation-B9LCgvWr.js";import{F as Z}from"./PhoneIcon-BKrR-Ffk.js";import{F as ee}from"./ChatBubbleBottomCenterTextIcon-CWsan4qH.js";import{F as Ae}from"./ExclamationTriangleIcon-lZ549Gku.js";import{F as de}from"./UserIcon-5a3hgr_W.js";import{F as Be}from"./ChevronDownIcon-DpIDm0ko.js";import{F as ze}from"./ChevronRightIcon-CETT0qHm.js";import{F as Oe}from"./ArrowPathIcon-Dx7m4seh.js";import{F as He}from"./CheckIcon-DpEZEZBm.js";import{h as _e,L as Je,z as Ye,Q as qe}from"./dialog-DhbST_eT.js";import"./ChevronLeftIcon-TO82TYFE.js";import"./ChevronRightIcon-aurLLpkr.js";import"./TrashIcon-gpVW17JB.js";import"./keyboard-BYsHtR-Z.js";import"./description-DResQ0Vr.js";import"./use-is-mounted-Ao2wPgvu.js";import"./navigationUtils-QyJ0rWZU.js";function We({onEdit:u,onDelete:s,onTeamManage:o,onAdd:g,showAdd:m=!1,isTeam:d=!1,addLabel:L="Add New Individual Participant",disabled:a=!1}){return e.jsxs("div",{className:"flex items-center gap-2",children:[m&&e.jsx("button",{onClick:a?void 0:g,disabled:a,"aria-disabled":a,className:"w-full px-2 max-w-60 text-white text-xs font-medium py-2 rounded-md mr-4 "+(a?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-yellow-900 hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary"),children:L}),u&&e.jsx("button",{onClick:a?void 0:u,disabled:a,"aria-disabled":a,className:"p-1 rounded-md "+(a?"text-gray-300 bg-transparent cursor-not-allowed":"text-gray-400 hover:text-primary hover:bg-gray-100"),title:a?"Editing disabled":"Edit participant",children:e.jsx(Ge,{className:"h-4 w-4"})}),d&&o&&e.jsx("button",{onClick:a?void 0:o,disabled:a,"aria-disabled":a,className:"p-1 rounded-md "+(a?"text-gray-300 bg-transparent cursor-not-allowed":"text-gray-400 hover:text-blue-600 hover:bg-gray-100"),title:a?"Team management disabled":"Manage team",children:e.jsx(xe,{className:"h-4 w-4"})}),s&&e.jsx("button",{onClick:a?void 0:s,disabled:a,"aria-disabled":a,className:"p-1 rounded-md "+(a?"text-gray-300 bg-transparent cursor-not-allowed":"text-gray-400 hover:text-red-600 hover:bg-gray-100"),title:a?"Delete disabled":"Delete participant",children:e.jsx(Ee,{className:"h-4 w-4"})})]})}const Ke=({eventLevels:u,participant:s,isTeam:o,eventDetails:g})=>{if(!s)return null;const m=!o&&s.UserDobString||!o&&(s.Gender||s.GenderName)||s.GroupName||s.LanguageName||o&&s.TeamStrength>0,d=s.Email||s.UserMobile||s.UserPhone,L=s.LevelSettings&&u?.length>0&&u.some(a=>{const k=a.LevelName+"Name";return s.LevelSettings?.[k]||s.LevelSettings?.[a.LevelName]});return e.jsx("div",{className:"bg-white border-t-2 border-primary p-4",children:e.jsxs("div",{className:"flex flex-row divide-x-2 text-xs",children:[m&&e.jsxs("div",{className:"space-y-1 px-2 text-xs",children:[e.jsx("h4",{className:"font-medium text-sm text-primary mb-2",children:"Basic Information"}),!o&&s.UserDobString&&e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium w-20 text-xs",children:"DOB:"}),e.jsx("span",{className:"text-gray-900 text-xs",children:s.UserDobString})]}),!o&&(s.Gender||s.GenderName)&&e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium w-20 text-xs",children:"Gender:"}),e.jsx("span",{className:"text-gray-900 text-xs",children:s.Gender||s.GenderName})]}),s.GroupName&&e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium w-20 text-xs",children:"Group:"}),e.jsx("span",{className:"text-gray-900 text-xs",children:s.GroupName})]}),s.LanguageName&&e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium w-20 text-xs",children:"Language:"}),e.jsx("span",{className:"text-gray-900 text-xs",children:s.LanguageName})]}),o&&s.TeamStrength>0&&e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium w-20 text-xs",children:"Strength:"}),e.jsxs("span",{className:"text-gray-900 text-xs",children:[s.TeamStrength," members"]})]})]}),d&&e.jsxs("div",{className:"space-y-1 px-2 text-xs",children:[e.jsx("h4",{className:"font-medium text-sm text-primary mb-2",children:"Contact Information"}),s.Email&&e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium w-20 text-xs",children:"Email:"}),e.jsx("a",{href:`mailto:${s.Email}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all text-xs",children:s.Email})]}),s.UserMobile&&e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium w-20 text-xs",children:"Mobile:"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-gray-900 text-xs",children:s.UserMobile}),e.jsx("a",{href:`tel:${s.UserMobile}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(Z,{className:"h-4 w-4 text-blue-500 hover:text-blue-700"})}),e.jsx("a",{href:`https://wa.me/${s.UserMobile}?text=${encodeURIComponent(`Hi ${s.UserName||s.TeamTeamName}, I am from ${g?.EventName} and I would like to get in touch with you regarding your participation in the event.`)}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(ee,{className:"h-4 w-4 text-green-500 hover:text-green-700"})})]})]}),s.UserPhone&&s.UserPhone!==s.UserMobile&&e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium w-20 text-xs",children:"Phone:"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-gray-900 text-xs",children:s.UserPhone}),e.jsx("a",{href:`tel:${s.UserPhone}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(Z,{className:"h-4 w-4 text-blue-500 hover:text-blue-700"})}),e.jsx("a",{href:`https://wa.me/${s.UserPhone}?text=${encodeURIComponent(`Hi ${s.UserName||s.TeamTeamName}, I am from ${g?.EventName} and I would like to get in touch with you regarding your participation in the event.`)}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(ee,{className:"h-4 w-4 text-green-500 hover:text-green-700"})})]})]})]}),L&&e.jsxs("div",{className:"space-y-1 px-2 text-xs",children:[e.jsx("h4",{className:"font-medium text-sm text-primary mb-2",children:"Organization Unit"}),u.map(a=>{const k=a.LevelName+"Name",x=s.LevelSettings?.[k]||s.LevelSettings?.[a.LevelName]||null;return x?e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsxs("span",{className:"text-gray-600 font-medium w-24 text-xs",children:[a.LevelName,":"]}),e.jsx("span",{className:"text-gray-900 text-xs",children:x})]},a.LevelName):null})]}),e.jsxs("div",{className:"space-y-1 px-2 text-xs",children:[e.jsx("h4",{className:"font-medium text-sm text-primary mb-2",children:"Registration Details"}),s.RegistrationId&&e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium w-28 text-xs",children:"Registration ID:"}),e.jsx("span",{className:"text-gray-900 font-medium text-xs",children:s.RegistrationId})]}),s.CandidateIdentityNumber&&e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium w-28 text-xs",children:"Candidate ID:"}),e.jsx("span",{className:"text-gray-900 text-xs",children:s.CandidateIdentityNumber})]}),s.TeamIdentityNumber&&e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium w-28 text-xs",children:"Team ID:"}),e.jsx("span",{className:"text-gray-900 text-xs",children:s.TeamIdentityNumber})]}),s.UniqueCandidateId&&e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium w-28 text-xs",children:"Unique ID:"}),e.jsx("span",{className:"text-gray-900 text-xs",children:s.UniqueCandidateId})]}),s.UniqueTeamId&&e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium w-28 text-xs",children:"Unique ID:"}),e.jsx("span",{className:"text-gray-900 text-xs",children:s.UniqueTeamId})]}),s.CreatedByUserName&&e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium w-28 text-xs",children:"Created By:"}),e.jsx("span",{className:"text-gray-900 text-xs",children:s.CreatedByUserName})]}),s.CreatedDate&&e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium w-28 text-xs",children:"Created On:"}),e.jsx("span",{className:"text-gray-900 text-xs",children:s.CreatedDate})]}),s.ModifiedDate&&e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium w-28 text-xs",children:"Modified On:"}),e.jsx("span",{className:"text-gray-900 text-xs",children:s.ModifiedDate})]}),s.CreatedByEmail&&e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium w-28 text-xs",children:"Creator Email:"}),e.jsx("a",{href:`mailto:${s.CreatedByEmail}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all text-xs",children:s.CreatedByEmail})]}),s.CreatedByMobile&&e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium w-28 text-xs",children:"Creator Mobile:"}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-gray-900 text-xs",children:s.CreatedByMobile}),e.jsx("a",{href:`tel:${s.CreatedByMobile}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(Z,{className:"h-4 w-4 text-blue-500 hover:text-blue-700"})}),e.jsx("a",{href:`https://wa.me/${s.CreatedByMobile}?text=${encodeURIComponent(`Hi ${s.CreatedByUserName}, I am from ${g?.EventName} and I would like to get in touch with you.`)}`,target:"_blank",rel:"noopener noreferrer",children:e.jsx(ee,{className:"h-4 w-4 text-green-500 hover:text-green-700"})})]})]}),s.Remarks&&e.jsxs("div",{className:"flex items-start text-xs",children:[e.jsx("span",{className:"text-gray-600 font-medium w-28 text-xs",children:"Remarks:"}),e.jsx("span",{className:"text-gray-900 text-xs",children:s.Remarks})]})]}),o&&s.TeamMembersList&&s.TeamMembersList.length>0&&e.jsxs("div",{className:"col-span-full space-y-1 px-2 text-xs",children:[e.jsx("h4",{className:"font-medium text-sm text-primary mb-2",children:"Team Members"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 text-xs",children:s.TeamMembersList.map((a,k)=>e.jsxs("div",{className:"bg-gray-50 p-2 rounded border border-gray-200 text-xs",children:[e.jsx("div",{className:"font-medium text-gray-900 text-xs",children:a.UserName}),a.UserDobString&&e.jsxs("div",{className:"text-gray-600 text-xs",children:["DOB: ",a.UserDobString]}),a.GenderName&&e.jsxs("div",{className:"text-gray-600 text-xs",children:["Gender: ",a.GenderName]})]},k))})]})]})})},Ve=(u,s)=>{if(!u||!s)return null;const o=s.find(d=>d.CompetitionStatusId==u);if(!o)return null;const g=parseInt(u);let m="bg-gray-100 text-gray-700";return g===1?m="bg-green-100 text-green-700":g===2?m="bg-indigo-100 text-indigo-700":g===3?m="bg-gray-100 text-gray-700":g===4?m="bg-yellow-100 text-yellow-700":g===5?m="bg-blue-100 text-blue-700":g===6?m="bg-purple-100 text-purple-700":g===7&&(m="bg-red-100 text-red-700"),e.jsx("span",{className:`inline-block px-1.5 py-0.5 rounded text-xxxs font-medium ${m}`,title:o.CompetitionStatusTitle,children:o.CompetitionStatusTitle})},me=(u,s="text-xs")=>{if(!u)return null;const o=u.toLowerCase();return o.includes("female")||o.includes("girl")||o.includes("women")?e.jsx("span",{className:C("material-symbols-outlined inline absolute -left-0.5 -top-1.5",s,"text-pink-600"),children:"girl"}):o.includes("male")||o.includes("boy")||o.includes("men")?e.jsx("span",{className:C("material-symbols-outlined inline absolute -left-0.5 -top-1.5",s,"text-blue-600"),children:"boy"}):e.jsx("span",{className:C("material-symbols-outlined",s,"text-gray-500"),children:"person"})},pt=({onEdit:u,onView:s,onDelete:o,onTeamManage:g,selectedGroupFilter:m,selectedParticipantType:d,selectedOrganization:L,pageSize:a,currentPage:k,filterCriterias:x,currentUser:te,onAssignmentChange:se,onPageChange:Qe,selectedOrganizations:J,onClearFilters:re})=>{const[Xe,ce]=b.useState(384),[B,ae]=b.useState(!1),[ue,ge]=b.useState(null),[Y,z]=b.useState({competitionId:null,candidateId:null}),[R,he]=b.useState(null),[q,O]=b.useState(new Set),[fe,Ne]=b.useState(null),ye=b.useRef(null),W=b.useRef(null),{groups:ne,competitionStatuses:K,eventDetails:D}=Le(),{advancedSettings:M}=ke();let V={};J&&J.length>0&&J.forEach(t=>{V={...V,...t}});const{row:F,status:je,updateLocal:ie,delete:oe,setOffsetAndLimit:be}=Re("/CoordinatorJson/GetParticipants",{select:"participantList,userList,UserEmail,UserName,UserDobString,UserImage,UserMobile,UserPhone,Email,Group,Candidate,CandidateUser,JsonSettings,Gender,GroupName,GenderName,LanguageName,Fees,TeamTeamName,Team,TeamStrength,TeamMembersList,TeamMembers,TeamStrength,CandidateIdentityNumber,TeamIdentityNumber,CompetitionOrder,CreatedBy,CreatedByUserName,ParticipantId,UserJsonSettings,TeamJsonSettings,Remarks,LevelSettings,RegistrationId,UniqueCandidateId,UniqueTeamId,CreatedDate,ModifiedDate,CreatedByEmail,CreatedByMobile",filter:{EventCategory:te?.EventCategory,Event:te?.Event,ParticipantType:d,Group:m,OrganizationId:L||void 0,AgeFrom:ne?.find(t=>t.EventGroupId===m)?.AgeFrom,AgeTo:ne?.find(t=>t.EventGroupId===m)?.AgeTo,...x||{},...V},limit:a,offset:(k-1)*a,updateUrl:"/CoordinatorJson/SaveParticipants",deleteUrl:"/CompetitionParticipantsJson/Remove",noGet:!0});let P=F?.ParticipantsList||[];const ve=F?.UsersList||[],T=F?.Competitions||[],G=F?.OrganizationLevels||[],I=F,Q=ve.map(t=>{const r=P.filter(i=>t.Team>0?i.Team===t.Team.toString()||i.Candidate===t.Team.toString():t.Candidate>0?i.Candidate===t.Candidate.toString():!1);return{...t,participations:r}});let we=JSON.stringify(x);b.useEffect(()=>{},[L,we]);const pe=t=>{ae(!0),t.preventDefault()};b.useEffect(()=>{const t=i=>{if(!B||!W.current)return;const h=W.current.getBoundingClientRect(),f=h.right-i.clientX,n=280,j=Array.isArray(G)?G.length:0,N=j>0?Math.max(n,j*120):h.width*.6;f>=n&&f<=N&&ce(f)},r=()=>{ae(!1)};return B&&(document.addEventListener("mousemove",t),document.addEventListener("mouseup",r)),()=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",r)}},[B]);const le=b.useCallback((t,r)=>t.participations?t.participations.some(i=>i.Competition===r):!1,[]),Ce=(t,r)=>{if(t.Gender,r?.GenderName!="Both"&&r?.GenderName!=""&&t?.GenderName!=r?.GenderName){if(t?.Gender==="Male"&&r?.GenderName==="Female")return{exceeded:!0,type:"gender",limit:r?.GenderName,current:t?.GenderName};if(t?.Gender==="Female"&&r?.GenderName==="Male")return{exceeded:!0,type:"gender",limit:r?.GenderName,current:t?.GenderName}}if(!t.participations||!M)return!1;const i=t.participations.length;if(d.toString()==="1"){const h=parseInt(M.MaximumParticipationPerCandidate)||0;if(h>0&&i>=h)return{exceeded:!0,type:"candidate",groupName:r.GroupName,limit:h,current:i}}if(d.toString()==="2"){const h=parseInt(M.MaximumParticipationPerGroup)||0;if(h>0&&r.GroupName){const f=t.participations.filter(n=>{const j=T?.find(N=>N.CompetitionStructureId===n.Competition);return j&&j.GroupName===r.GroupName}).length;if(f>=h)return{exceeded:!0,type:"group",limit:h,current:f,groupName:r.GroupName}}}return{exceeded:!1}},Ie=async(t,r,i)=>{const h=M?.FreezeParticipation==="Yes",j=(K?.find(v=>v.CompetitionStatusId==r.CompetitionStatus)?.CompetitionStatusTitle||"")==="Not Started";if(h||!j){c.error("Modifications are currently disabled for this competition");return}const N=i.target.checked,l=le(t,r.CompetitionStructureId),A=`${d==2?t.Team:t.Candidate}-${r.CompetitionStructureId}`,$=t.participations?.find(v=>v.Competition===r.CompetitionStructureId);if(N){if(l){c.success("This participant is already assigned to the selected competition.");return}O(y=>new Set(y).add(A));const v={};t.LevelSettings&&G?.length>0&&(v.UsersRolesModel=t.LevelSettings,v.TeamModel=t.LevelSettings);const w={...v,...d==1?{UserImageInList:t.UserImage||"","UsersModel[UserImage]":t.UserImage||"","UsersModel[Candidate][]":t.Candidate||"","UsersModel[CandidateUser][]":t.CandidateUser||"","UsersModel[UserName]":t.UserName||t.TeamTeamName||"","UsersModel[UserNameTitle]":t.UserNameTitle||"","UsersModel[UserDobString]":t.UserDobString||""}:{},...d==2?{"UsersModel[TeamTeamName]":t.TeamTeamName||"","UsersModel[Team][]":t.Team||[]}:{},"CompetitionParticipantsModel[CompetitionCompetitionStructureId]":r.CompetitionStructureId,ParticipantType:d,Group:m};try{const{data:y}=await Pe("/CoordinatorJson/SaveParticipants",w),p=y.split(","),S=parseInt(p[0]);if(S){const E=d==2?t.Team:t.Candidate,_={Competition:r.CompetitionStructureId.toString(),IdentityNumber:"",JsonSettings:"",ParticipantId:S.toString()};d==2?_.Team=E.toString():_.Candidate=E.toString(),P.push(_),ie({...I,ParticipantsList:P}),z({competitionId:r.CompetitionStructureId,candidateId:E}),setTimeout(()=>{z({competitionId:null,candidateId:null})},2e3),c.success("Participation added successfully")}}catch(y){console.error("Error adding participation:",y),c.error("Failed to add participation"),i.target.checked=!1}finally{O(y=>{const p=new Set(y);return p.delete(A),p})}}else{if(!l||!$?.ParticipantId)return;if(!await Ue({title:"Remove Participation",message:`Are you sure you want to remove ${t.UserName||t.TeamTeamName} from ${r.CompetitionName||r.Title||"this competition"}?`,confirmText:"Remove",cancelText:"Cancel"})){i.target.checked=!0;return}O(w=>new Set(w).add(A));try{const[w,y,{data:p}]=await oe({ParticipantId:$.ParticipantId,id:$.ParticipantId});if(p?.Results){P=P.filter(E=>E.ParticipantId!==$.ParticipantId),ie({...I,ParticipantsList:P});const S=d==2?t.Team:t.Candidate;z({competitionId:r.CompetitionStructureId,candidateId:S}),setTimeout(()=>{z({competitionId:null,candidateId:null})},2e3),c.success("Participation removed successfully")}else c.error("Can't delete this item because it's being used elsewhere"),i.target.checked=!0}catch(w){console.error("Error removing participation:",w),c.error("Failed to remove participation"),i.target.checked=!0}finally{O(w=>{const y=new Set(w);return y.delete(A),y})}}typeof se=="function"&&se(t,r,N)},[Se,Te]=Fe(),[U,X]=b.useState(null),Ue=({title:t,message:r,confirmText:i,cancelText:h})=>new Promise(f=>{X({title:t,message:r,confirmText:i,cancelText:h,onConfirm:()=>{X(null),f(!0)},onCancel:()=>{X(null),f(!1)}})});return je!=="finished"?e.jsx($e,{info:"Loading participants...",className:"h-64"}):!m||!d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-sm text-gray-600",children:"Please select a group and participant type."})})}):e.jsxs("div",{ref:W,className:"flex-1 flex overflow-hidden",children:[e.jsx(Se,{title:"Delete Participant",description:"Are you sure you want to delete this participant?",confirmButtonLabel:"Delete",confirmButtonClick:async t=>{try{await oe(t),c.success("Participant Deleted Successfully"),typeof o=="function"&&o(t)}catch{c.error("Failed to delete participant")}},className:"w-96  print:hidden"}),U&&e.jsxs(_e,{open:!0,onClose:U.onCancel,className:"relative z-50",children:[e.jsx(Je,{className:"fixed inset-0 bg-gray-500/75 transition-opacity"}),e.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:e.jsxs(Ye,{className:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",children:[e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex size-12 shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:size-10",children:e.jsx(Ae,{"aria-hidden":"true",className:"size-6 text-red-600"})}),e.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[e.jsx(qe,{as:"h3",className:"text-base font-semibold text-gray-900",children:U.title}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-gray-500",children:U.message})})]})]}),e.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",onClick:U.onConfirm,className:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto",children:U.confirmText}),e.jsx("button",{type:"button",onClick:U.onCancel,className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",children:U.cancelText})]})]})})})]}),e.jsx("style",{children:`
        /* Hover effect for columns */
        table:has(th.competition-header:hover) tbody tr td:nth-child(n+5) {
          background-color: transparent;
        }
        ${T?.map((t,r)=>`
          table:has(th.competition-header:nth-child(${r+5}):hover) tbody tr td:nth-child(${r+5}) {
            background-color: rgb(219 234 254) !important;
          }
        `).join("")}

        /* Active/clicked column highlighting */
        ${R?`
          ${T?.map((t,r)=>t.CompetitionStructureId===R?`tbody tr td:nth-child(${r+5}) {
                  background-color: rgb(191 219 254) !important;
                }`:"").join("")}
        `:""}
      `}),e.jsx("div",{className:"flex-1 overflow-hidden bg-white",children:e.jsxs("div",{className:"h-full flex flex-col",children:[(L||x?.candidateName||x?.candidateIdentityNumber||x?.teamIdentityNumber||x?.registrationId)&&I?.TotalRowCount!==void 0&&e.jsxs("div",{className:"mx-2 mt-2 mb-2 flex items-center justify-between bg-white px-4 py-2 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-semibold text-primary",children:I.RowFrom||0}),"-",e.jsx("span",{className:"font-semibold text-primary",children:I.RowTo||0})," of"," ",e.jsx("span",{className:"font-semibold text-darkprimary",children:I.TotalRowCount})," participants",x?.candidateName&&e.jsxs("span",{className:"ml-2 text-indigo-600 font-medium",children:['matching "',x.candidateName,'"']})]}),re&&e.jsx("button",{onClick:re,className:"text-sm text-primary hover:text-primaryHover font-medium transition-all duration-200",children:"Clear filters"})]}),e.jsx("div",{className:"flex-1 overflow-auto px-2",children:e.jsxs("table",{className:"min-w-full",children:[e.jsxs("thead",{className:"bg-gray-50 sticky top-0 z-10",children:[e.jsxs("tr",{children:[e.jsx("th",{rowSpan:x?.isIncludeStatusTitle==="Yes"?2:1,className:"w-8 px-1 py-1 text-left text-xxs font-medium text-gray-500 tracking-wider",children:"Photo"}),e.jsx("th",{rowSpan:x?.isIncludeStatusTitle==="Yes"?2:1,className:"w-16 px-1 py-1 text-left text-xxs font-medium text-gray-500 tracking-wider",children:"ID"}),D?.AllowRegistrationId===1&&e.jsx("th",{rowSpan:x?.isIncludeStatusTitle==="Yes"?2:1,className:"w-20 px-1 py-1 text-left text-xxs font-medium text-gray-500 tracking-wider",children:"Registration ID"}),e.jsx("th",{rowSpan:x?.isIncludeStatusTitle==="Yes"?2:1,className:"min-w-16 px-1 py-1 text-left text-xxs font-medium text-gray-500 tracking-wider",children:"Name"}),e.jsx("th",{rowSpan:x?.isIncludeStatusTitle==="Yes"?2:1,className:"w-16 px-1 py-1 text-left text-xxs font-medium text-gray-500 tracking-wider",children:"Actions"}),T?.map(t=>e.jsxs("th",{onClick:()=>he(R===t.CompetitionStructureId?null:t.CompetitionStructureId),className:C("competition-header w-20 px-2 py-1 text-center text-xxs font-medium text-gray-800 tracking-wider border-l border-gray-200 align-top transition-colors duration-150 cursor-pointer",R===t.CompetitionStructureId?"bg-blue-200 hover:bg-blue-300":"bg-gray-200 hover:bg-blue-100"),title:`${t.CompetitionName} - ${t.GroupName}`,children:[e.jsx("div",{className:C("text-xxs ",(t.GenderName!="Both"||t.LanguageName!="Any/NA")&&R!==t.CompetitionStructureId?"border-b-2 border-gray-300":""),children:t.CompetitionName}),t.GenderName!="Both"&&e.jsx("div",{className:C("text-xxs text-gray-900 mt-0.5 flex items-center gap-1 justify-center align-middle relative pl-4",t.LanguageName!="Any/NA"&&R!==t.CompetitionStructureId?" border-gray-300":""),children:e.jsxs("span",{children:[" ",me(t.GenderName,"text-lg"),t.GenderName]})}),t.LanguageName!="Any/NA"&&e.jsx("div",{className:"text-xxs text-gray-900 mt-0.5",children:t.LanguageName})]},t.CompetitionStructureId))]}),x?.isIncludeStatusTitle==="Yes"&&e.jsx("tr",{children:T?.map(t=>e.jsx("th",{className:C("w-20 px-2 py-1 text-center text-xxs font-medium text-gray-800 tracking-wider border-l border-t border-gray-300 align-top",R===t.CompetitionStructureId?"bg-blue-200":"bg-gray-200"),children:t.CompetitionStatus&&e.jsx("div",{className:"flex justify-center",children:Ve(t.CompetitionStatus,K)})},`${t.CompetitionStructureId}-status`))})]}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Q.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:(D?.AllowRegistrationId===1?5:4)+(T?.length||0),className:"px-2 py-6 text-center",children:[e.jsx(de,{className:"h-10 w-10 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-base font-medium text-gray-500",children:"No participants found"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Try adjusting your filters"})]})}):Q.map((t,r)=>{const i=t.Candidate||t.Team,h=ue===i,f=fe===i;return e.jsxs(Me.Fragment,{children:[e.jsxs("tr",{onClick:()=>ge(i),className:C("hover:bg-blue-100 transition-colors border-t-2 border-gray-300",h&&"bg-blue-200"),children:[e.jsx("td",{className:"px-2 py-1 align-top",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:n=>{n.stopPropagation(),Ne(f?null:i)},className:"text-gray-500 hover:text-primary transition-colors",title:f?"Collapse details":"Expand details",children:f?e.jsx(Be,{className:"h-4 w-4"}):e.jsx(ze,{className:"h-4 w-4"})}),e.jsx("div",{className:"h-8 w-8 flex-shrink-0",children:t.UserImage?e.jsx("img",{src:t.UserImage,alt:t.UserName||t.TeamTeamName,className:"h-8 w-8 rounded-full object-cover"}):e.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:t.TeamTeamName?e.jsx(xe,{className:"h-5 w-5 text-gray-500"}):e.jsx(de,{className:"h-5 w-5 text-gray-500"})})})]})}),e.jsx("td",{className:"px-2 py-1 align-top",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.CandidateIdentityNumber||t.TeamIdentityNumber})}),D?.AllowRegistrationId===1&&e.jsx("td",{className:"px-2 py-1 align-top",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.RegistrationId||"-"})}),e.jsxs("td",{className:"px-2 py-1 align-top",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-900 flex items-center gap-1",children:[me(t.UserNameTitle||t.GenderName,"text-xs"),e.jsx("span",{children:t.UserName||t.TeamTeamName})]}),t.LevelSettings&&G?.length>0&&e.jsx("div",{className:"text-xxs text-gray-500 mt-1",children:G.map(n=>{const j=n.LevelName+"Name",N=t.LevelSettings?.[j]||t.LevelSettings?.[n.LevelName]||null;return N?e.jsx("div",{children:N},n.LevelName):null})})]}),e.jsx("td",{className:"px-2 py-1 align-top",children:e.jsx("div",{className:"flex items-center gap-1",children:(()=>{const n=M?.FreezeParticipation==="Yes";return e.jsx(We,{onEdit:()=>{if(n){c.error("Modifications are currently disabled");return}u&&u(t)},isTeam:!!t.TeamTeamName,onTeamManage:()=>{if(n){c.error("Modifications are currently disabled");return}g&&g(t)},onDelete:()=>{if(n){c.error("Modifications are currently disabled");return}const j={UserRoleId:t.Candidate||t.Team,id:t.Candidate||t.Team,participantType:d||1};Te(j)},disabled:n})})()})}),T?.map(n=>{const j=Y.competitionId===n.CompetitionStructureId&&(Y.candidateId===t.Candidate&&t.Candidate>0||Y.candidateId===t.Team&&t.Team>0),N=le(t,n.CompetitionStructureId),l=Ce(t,n),H=M?.FreezeParticipation==="Yes",$=K?.find(p=>p.CompetitionStatusId==n.CompetitionStatus)?.CompetitionStatusTitle||"",v=$==="Not Started",w=H||!v||!N&&l.exceeded,y=d==2?t.Team:t.Candidate;return e.jsx("td",{onClick:p=>{const S=`${y}-${n.CompetitionStructureId}`;if(q.has(S)){c.success("Operation in progress, please wait...");return}if(H||!v){c.error("Modifications are currently disabled for this competition as its status is not 'Not Started'");return}if(!N&&l.exceeded){l.type==="gender"?c.error("Its a gender restricted competition"):l.type==="candidate"?c.error(`Maximum participation limit reached: ${l.current}/${l.limit} competitions per participant`):l.type==="group"&&c.error(`Maximum participation limit reached for group "${l.groupName}": ${l.current}/${l.limit} competitions`);return}Ie(t,n,{target:{checked:!N}})},className:C("px-0.5 py-0.5 text-center border-l border-gray-200 align-top transition-all duration-200",q.has(`${y}-${n.CompetitionStructureId}`)?"cursor-wait":w?"cursor-not-allowed bg-gray-100 text-gray-400 opacity-80":"cursor-pointer hover:bg-blue-50 hover:shadow-sm",j&&"bg-green-100 animate-pulse"),title:w?H?"Participation is globally frozen":v?l.type==="gender"?"Gender restricted competition":l.type==="candidate"?`Maximum participation limit reached: ${l.current}/${l.limit} competitions per participant`:l.type==="group"?`Maximum participation limit reached for group "${l.groupName}": ${l.current}/${l.limit} competitions`:"Participation not allowed":`Competition is not editable (Status: ${$})`:void 0,children:e.jsxs("div",{className:"select-none",children:[e.jsx("div",{className:"mt-1 flex justify-center group",children:(()=>{const p=`${y}-${n.CompetitionStructureId}`,S=q.has(p);return e.jsx("div",{className:C("w-5 h-5 rounded-full flex items-center justify-center transition-all duration-200 border-2",S?"bg-yellow-100 border-yellow-400":N?"bg-green-500 border-green-500 group-hover:bg-green-600 group-hover:border-green-600 group-hover:shadow-md":w?"bg-gray-300 border-gray-400 opacity-60 cursor-not-allowed":"bg-white border-gray-300 group-hover:border-gray-400 group-hover:bg-gray-50 group-hover:shadow-sm"),children:S?e.jsx(Oe,{className:"w-3 h-3 text-yellow-600 animate-spin"}):N?e.jsx(He,{className:"w-3 h-3 text-white"}):null})})()}),e.jsxs("div",{className:"text-xxxs font-medium text-gray-900",title:n.CompetitionName||(n.CompetitionName===void 0?"":void 0),children:[n.CompetitionName||e.jsx("span",{className:"text-gray-300",children:"-"}),n.GenderName!="Both"&&e.jsxs(e.Fragment,{children:[" ",n.GenderName," "]}),n.LanguageName!="Any/NA"&&e.jsxs(e.Fragment,{children:[" ",n.LanguageName," "]})]})]})},n.CompetitionStructureId)})]}),f&&e.jsx("tr",{children:e.jsx("td",{colSpan:(D?.AllowRegistrationId===1?5:4)+(T?.length||0),className:"p-0 bg-gray-50",children:e.jsx(Ke,{eventLevels:G,participant:t,isTeam:!!t.TeamTeamName,eventDetails:D})})},`${i}-detail`)]},i||r)})})]})}),Q.length>0&&e.jsx(De,{rowsFrom:I?.RowFrom,rowsTo:I?.RowTo,totalRowCount:I?.TotalRowCount,setOffsetAndLimit:be,isCompact:!0})]})}),e.jsx("div",{ref:ye,className:`w-1 cursor-col-resize transition-colors ${B?"bg-primary":"bg-gray-300 hover:bg-gray-400"}`,onMouseDown:pe,children:e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("div",{className:"w-0.5 h-8 bg-white opacity-60 rounded-full"})})})]})};export{pt as default,Ve as getCompetitionStatusBadge};
