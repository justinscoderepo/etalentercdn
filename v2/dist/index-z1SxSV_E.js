import{x as y,r as b,u as N,j as e,p as f,z as n,i as P}from"./main-BxwnD9jH.js";import{O as V}from"./OldNewTabLayout-4ImcNKBD.js";import{L as R}from"./layoutOuter-ByjML5xi.js";import{P as G}from"./pageHeader-BXGuln3I.js";import{u as v}from"./index.esm-DdJzIiho.js";import{F as S}from"./PlusIcon-BhECVhJe.js";import{F as w}from"./PencilIcon-DcdvgeDG.js";import{F as C}from"./TrashIcon-C7OBZaOl.js";import{F as I}from"./TrophyIcon-DSwt13Ui.js";import{d as g}from"./tabs-COgck_Cq.js";import"./navigationUtils-DlEZgzL7.js";import"./use-resolve-button-type-CXFQjWP0.js";import"./keyboard-iIws8z7V.js";import"./use-is-mounted-ToLqBgQI.js";function F(){const{eventDetails:d}=y(),[c,t]=b.useState(null),[o,r]=b.useState(!1),{rows:i,status:m,refetch:u}=N("/SetupJson/KeepScore",{filter:`EventCategory=${d?.EventCategoryId||0}&ScoreType=Rank`,select:"EventGradeId,RankTitle,BonusPoints,ParticipantType,Group,CompetitionItem,EventCategory"}),x=i||[],{register:h,handleSubmit:p,reset:s,formState:{errors:a}}=v(),j=async l=>{try{await f("/SetupJson/KeepScore",{...l,EventCategory:d?.EventCategoryId,ScoreType:"Rank"}),n.success("Rank saved successfully"),u(),s(),r(!1),t(null)}catch{n.error("Failed to save rank")}},k=async l=>{if(confirm("Are you sure you want to delete this rank?"))try{await f("/SetupJson/Remove",{EventGradeId:l}),n.success("Rank deleted successfully"),u()}catch{n.error("Failed to delete rank")}};return m==="loading"?e.jsx("div",{className:"text-center py-8",children:"Loading ranks..."}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-base font-medium text-onSurface",children:"Rank Management"}),e.jsxs("button",{onClick:()=>r(!o),className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover",children:[e.jsx(S,{className:"h-4 w-4"}),"New Rank"]})]}),o&&e.jsxs("div",{className:"bg-contentBgOuter p-4 rounded-lg border border-border shadow-sm mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-onSurface mb-4",children:"Add New Rank"}),e.jsxs("form",{onSubmit:p(j),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-onSurface mb-1",children:"Rank Title *"}),e.jsx("input",{type:"text",...h("RankTitle",{required:!0}),className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"E.g., First Place"}),a.RankTitle&&e.jsx("span",{className:"text-xs text-red-600",children:"This field is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-onSurface mb-1",children:"Bonus Points"}),e.jsx("input",{type:"number",...h("BonusPoints"),className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"E.g., 10"})]})]}),e.jsxs("div",{className:"flex justify-end gap-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{r(!1),s()},className:"inline-flex items-center gap-x-2 rounded-md bg-surfaceVariant px-4 py-2 text-sm font-semibold text-onSurfaceVariant shadow-sm hover:bg-surfaceCard",children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover",children:"Save Rank"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:x.length===0?e.jsx("div",{className:"text-center py-8 bg-surfaceCard rounded-lg border border-border",children:e.jsx("p",{className:"text-sm text-onSurfaceVariant",children:"No ranks configured yet. Add your first rank above."})}):x.map(l=>e.jsx("div",{className:"bg-contentBgOuter p-4 rounded-lg border border-border shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-onSurface",children:l.RankTitle}),l.BonusPoints&&e.jsxs("p",{className:"text-xs text-onSurfaceVariant mt-1",children:["Bonus Points: ",e.jsx("span",{className:"font-medium",children:l.BonusPoints})]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("button",{onClick:()=>t(l.EventGradeId),className:"p-1.5 text-primary hover:bg-primary/10 rounded-md",title:"Edit",children:e.jsx(w,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>k(l.EventGradeId),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(C,{className:"h-4 w-4"})})]})]})},l.EventGradeId))})]})}function B(){const{eventDetails:d}=y(),[c,t]=b.useState(!1),{rows:o=[],refetch:r}=N("/SetupJson/KeepScore",{filter:`EventCategory=${d?.EventCategoryId||0}&ScoreType=Grade`,select:"EventGradeId,GradeName,Value,BonusPoints,EventCategory"}),{register:i,handleSubmit:m,reset:u,formState:{errors:x}}=v(),h=async s=>{try{await f("/SetupJson/KeepScore",{...s,EventCategory:d?.EventCategoryId,ScoreType:"Grade"}),n.success("Grade saved successfully"),r(),u(),t(!1)}catch{n.error("Failed to save grade")}},p=async s=>{if(confirm("Are you sure you want to delete this grade?"))try{await f("/SetupJson/Remove",{EventGradeId:s}),n.success("Grade deleted successfully"),r()}catch{n.error("Failed to delete grade")}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-base font-medium text-onSurface",children:"Grade Management"}),e.jsxs("button",{onClick:()=>t(!c),className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover",children:[e.jsx(S,{className:"h-4 w-4"}),"New Grade"]})]}),c&&e.jsxs("div",{className:"bg-contentBgOuter p-4 rounded-lg border border-border shadow-sm mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-onSurface mb-4",children:"Add New Grade"}),e.jsxs("form",{onSubmit:m(h),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-onSurface mb-1",children:"Grade Name *"}),e.jsx("input",{type:"text",...i("GradeName",{required:!0}),className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"E.g., A+"}),x.GradeName&&e.jsx("span",{className:"text-xs text-red-600",children:"This field is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-onSurface mb-1",children:"Value/Percentage"}),e.jsx("input",{type:"number",step:"0.01",...i("Value"),className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"E.g., 95"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-onSurface mb-1",children:"Bonus Points"}),e.jsx("input",{type:"number",...i("BonusPoints"),className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"E.g., 5"})]})]}),e.jsxs("div",{className:"flex justify-end gap-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{t(!1),u()},className:"inline-flex items-center gap-x-2 rounded-md bg-surfaceVariant px-4 py-2 text-sm font-semibold text-onSurfaceVariant shadow-sm hover:bg-surfaceCard",children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover",children:"Save Grade"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.length===0?e.jsx("div",{className:"col-span-full text-center py-8 bg-surfaceCard rounded-lg border border-border",children:e.jsx("p",{className:"text-sm text-onSurfaceVariant",children:"No grades configured yet. Add your first grade above."})}):o.map(s=>e.jsxs("div",{className:"bg-contentBgOuter p-4 rounded-lg border border-border shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"text-base font-medium text-onSurface",children:s.GradeName}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("button",{className:"p-1.5 text-primary hover:bg-primary/10 rounded-md",title:"Edit",children:e.jsx(w,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>p(s.EventGradeId),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(C,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-1",children:[s.Value&&e.jsxs("p",{className:"text-xs text-onSurfaceVariant",children:["Value: ",e.jsxs("span",{className:"font-medium",children:[s.Value,"%"]})]}),s.BonusPoints&&e.jsxs("p",{className:"text-xs text-onSurfaceVariant",children:["Bonus: ",e.jsxs("span",{className:"font-medium",children:[s.BonusPoints," pts"]})]})]})]},s.EventGradeId))})]})}function J(){const{eventDetails:d}=y(),[c,t]=b.useState(!1),{rows:o,refetch:r}=N("/SetupJson/GetJudgesPointDetails",{filter:`EventCategory=${d?.EventCategoryId||0}`,select:"JudgesPointId,CriteriaName,MaximumPoints,CompetitionItem,EventCategory"}),i=o||[],{register:m,handleSubmit:u,reset:x,formState:{errors:h}}=v(),p=async a=>{try{await f("/SetupJson/KeepJudgesPointDetails",{...a,EventCategory:d?.EventCategoryId}),n.success("Criteria saved successfully"),r(),x(),t(!1)}catch{n.error("Failed to save criteria")}},s=async a=>{if(confirm("Are you sure you want to delete this criteria?"))try{await f("/SetupJson/RemoveJudgesPointDetails",{JudgesPointId:a}),n.success("Criteria deleted successfully"),r()}catch{n.error("Failed to delete criteria")}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-base font-medium text-onSurface",children:"Judges Rating Criteria"}),e.jsxs("button",{onClick:()=>t(!c),className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover",children:[e.jsx(S,{className:"h-4 w-4"}),"New Criteria"]})]}),c&&e.jsxs("div",{className:"bg-contentBgOuter p-4 rounded-lg border border-border shadow-sm mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-onSurface mb-4",children:"Add New Rating Criteria"}),e.jsxs("form",{onSubmit:u(p),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-onSurface mb-1",children:"Criteria Name *"}),e.jsx("input",{type:"text",...m("CriteriaName",{required:!0}),className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"E.g., Technical Skill"}),h.CriteriaName&&e.jsx("span",{className:"text-xs text-red-600",children:"This field is required"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-onSurface mb-1",children:"Maximum Points *"}),e.jsx("input",{type:"number",...m("MaximumPoints",{required:!0}),className:"pl-3 block w-full rounded-md border-0 py-1.5 ring-1 ring-inset focus:ring-2 focus:ring-inset text-sm leading-6 text-onSurface focus:border-darkprimary placeholder:text-onSurfaceVariant ring-border",placeholder:"E.g., 10"}),h.MaximumPoints&&e.jsx("span",{className:"text-xs text-red-600",children:"This field is required"})]})]}),e.jsxs("div",{className:"flex justify-end gap-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{t(!1),x()},className:"inline-flex items-center gap-x-2 rounded-md bg-surfaceVariant px-4 py-2 text-sm font-semibold text-onSurfaceVariant shadow-sm hover:bg-surfaceCard",children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover",children:"Save Criteria"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.length===0?e.jsx("div",{className:"col-span-full text-center py-8 bg-surfaceCard rounded-lg border border-border",children:e.jsx("p",{className:"text-sm text-onSurfaceVariant",children:"No judging criteria configured yet. Add your first criteria above."})}):i.map(a=>e.jsx("div",{className:"bg-contentBgOuter p-4 rounded-lg border border-border shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-onSurface",children:a.CriteriaName}),e.jsxs("p",{className:"text-xs text-onSurfaceVariant mt-1",children:["Maximum Points: ",e.jsx("span",{className:"font-medium",children:a.MaximumPoints})]})]}),e.jsxs("div",{className:"flex gap-x-2",children:[e.jsx("button",{className:"p-1.5 text-primary hover:bg-primary/10 rounded-md",title:"Edit",children:e.jsx(w,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>s(a.JudgesPointId),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(C,{className:"h-4 w-4"})})]})]})},a.JudgesPointId))})]})}function X(){const[d,c]=b.useState(0),t=[{title:"New React View",active:!0},{title:"Old View",path:"/SetUp/ScoreSettings"}],o=[{name:"Rank",component:F},{name:"Grade",component:B},{name:"Judges Rating Criteria",component:J}];return e.jsx(V,{tabs:t,children:e.jsx(R,{children:e.jsxs("div",{className:"flex flex-col grow",children:[e.jsx(G,{heading:"Score Settings",subHeading:"Configure ranking, grading, and judging criteria for competitions",rightChildren:e.jsxs("div",{className:"flex items-center gap-x-2 text-gray-600",children:[e.jsx(I,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Scoring Configuration"})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs(g.Group,{selectedIndex:d,onChange:c,children:[e.jsx(g.List,{className:"flex space-x-1 rounded-xl bg-surfaceVariant p-1 mb-4",children:o.map((r,i)=>e.jsx(g,{className:({selected:m})=>P("w-full rounded-lg py-2.5 text-sm font-medium leading-5","ring-white ring-opacity-60 ring-offset-2 ring-offset-primary focus:outline-none focus:ring-2",m?"bg-white shadow text-primary":"text-gray-700 hover:bg-white/[0.12] hover:text-gray-900"),children:r.name},r.name))}),e.jsx(g.Panels,{children:o.map((r,i)=>e.jsx(g.Panel,{children:e.jsx(r.component,{})},i))})]})})]})})})}export{X as default};
