import{q as I,r as o,j as s}from"./main-T_zjahGS.js";const R=({url:c,title:n="Loading...",className:m="reactIframeLayout",id:i="mvc-iframe",onLoad:d,fallbackUrl:r})=>{const h=I(),[f,u]=o.useState(""),[x,a]=o.useState(!0),[p,l]=o.useState(!1);console.log("IframeRender - Initial props:",{url:c,title:n,className:m,id:i,fallbackUrl:r}),o.useEffect(()=>{let t=c;t||(t=h.pathname);const e=g(t);console.log("IframeRender - Converting URL:",t,"to:",e),u(e),a(!0),l(!1)},[n]);const g=t=>{let e=t;e=e.replace(/^\/v2/,""),e=e.replace("/index.html",""),e=e.replace(/\/Render([A-Z])/g,"/$1"),e=e.replace(/\/index\.html$/,""),e=e.replace(/\/$/,""),e.startsWith("/")||(e="/"+e);const j=e.includes("?")?"&":"?";return e+=`${j}IsInIframe=true`,e},v=()=>{a(!1),l(!1),d&&d()},b=()=>{a(!1),l(!0),r&&f!==r&&(console.log("IframeRender - Trying fallback URL:",r),u(r),a(!0),l(!1))},y=()=>{a(!0),l(!1);const t=document.getElementById(i);t&&(t.src=t.src)};return s.jsxs("div",{className:"relative w-full h-full",children:[x&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50 z-10",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),s.jsx("span",{className:"text-sm text-gray-600",children:n})]})}),p&&!x&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50 z-10",children:s.jsxs("div",{className:"text-center p-6",children:[s.jsx("div",{className:"text-red-500 text-4xl mb-3",children:"⚠️"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to load page"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"The requested page could not be loaded."}),s.jsxs("button",{onClick:y,className:"inline-flex items-center gap-x-2 rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primaryHover focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary",children:[s.jsx("span",{className:"material-symbols-outlined text-sm",children:"refresh"}),"Retry"]})]})}),s.jsx("iframe",{id:i,className:`${m} w-full h-full border-0`,src:f,title:n,onLoad:v,onError:b,style:{minHeight:"600px",display:p?"none":"block"}})]})};export{R as default};
