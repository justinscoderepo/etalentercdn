import{r as f,j as e}from"./main-T_zjahGS.js";import{F as L,D as q}from"./index-P6WK9IPg.js";import{C as P}from"./index.esm-BIEfXqts.js";import{c as p}from"./utilities-CN4lTu6a.js";import{V}from"./validationMessage-DUn8aBkg.js";import{u as z}from"./useBackend-BiEufqUg.js";import{F as H}from"./ChevronLeftIcon-DJOUVZdQ.js";import{F as W}from"./ChevronRightIcon-BvRShwEk.js";import{F as _}from"./CheckCircleIcon-CJURfTdD.js";import{F as K}from"./CalendarDaysIcon-BRw_5Sx3.js";import"./clsx-B-dksMZM.js";import"./floating-ui.dom-Di5CRMxg.js";import"./httpService-DhFNxXIP.js";import"./index-t--hEgTQ.js";const A=a=>{let r=new Date(a),n=""+(r.getMonth()+1),o=""+r.getDate(),l=r.getFullYear();return n.length<2&&(n="0"+n),o.length<2&&(o="0"+o),[o,n,l].join("-")},S=a=>{try{if(!a)return"";let r=a.split("-");return r.length<3?"":new Date(r[2],r[1]-1,r[0])}catch{return""}},Q=(a,r,n=r-a+1)=>Array.from({length:n},(o,l)=>a+l),U=a=>a.getFullYear(),X=a=>a.getMonth(),De=({control:a,fieldName:r,label:n,formData:o,errors:l,register:Z,minDate:ee,maxDate:re,optional:N,maxLength:te,onChange:F,type:ae,pattern:se,disabled:d})=>{const{rows:m}=z("/CandidateJson/GetByAge",{sort:{sortOrder:"DESC",sortColumn:"id"},filter:{ParticipantType:1},doCache:!0,select:"AgeFrom,AgeTo,EventGroupId,GroupName,Status,AgeStartDate,MaxAgeDate,MinAgeDate,AgeStartMonth,AgeStartYear"});console.log({ageWiseGroup:m});let M=m?.sort((t,i)=>i.AgeTo-t.AgeTo)?.[0],v=m?.sort((t,i)=>t.AgeFrom-i.AgeFrom)?.[0],k=l?.[r];const y=f.useRef(null);let[g,E]=f.useState(k);const C=t=>{y.current&&!y.current.contains(t.target)&&y.current.closeCalendar()};f.useEffect(()=>(document.addEventListener("click",C,!0),()=>{document.removeEventListener("click",C,!0)}),[]),f.useEffect(()=>{E(l?.[r])},[l?.[r]]);let D=v?.MaxAgeDate?new Date(v?.MaxAgeDate):new Date,j=M?.MinAgeDate?new Date(M?.MinAgeDate):new Date;console.log({minDateCalc:j,maxDateCalc:D});let G=D.getFullYear(),R=j.getFullYear(),u=null,b=null;o?.[r]&&(u=S(o?.[r])),u&&(b=m?.filter(t=>{let i=new Date(t.MaxAgeDate),Y=new Date(t.MinAgeDate),c=t.JsonSettings;if(c&&(c=JSON.parse(c),c?.IsCommon=="Yes"))return!1;if(u>=Y&&u<=i)return t}));const T=Q(R,G),w=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.jsxs("div",{className:"sm:col-span-4",children:[e.jsxs("label",{htmlFor:r,className:p("block text-sm font-medium leading-6 ",g?"text-danger":"text-gray-900"),children:[n||r,!N&&e.jsx("span",{className:"text-danger pl-1",children:"*"})]}),e.jsxs("div",{className:"relative mt-2  print:mt-0 rounded-md shadow-sm items-center",children:[e.jsx("div",{className:p("pointer-events-none h-9 absolute inset-y-0 left-0 z-20 flex items-center",d?"":"pl-3"),children:e.jsx(L,{"aria-hidden":"true",className:"h-5 w-5 mb-0.5 "+(g?"text-red-400":"text-gray-400")})}),d?e.jsx("div",{className:p("pl-7","block w-full py-1.5  print:py-1 sm:text-sm sm:leading-6","text-gray-900   placeholder:text-gray-400 ring-gray-300 ",d?"text-gray-500":""),children:o?.[r]??"-"}):e.jsx(P,{control:a,name:r,disabled:d,rules:{required:!N},render:({field:t,fieldState:{invalid:i,isDirty:Y},formState:{errors:c}})=>e.jsxs(e.Fragment,{children:[e.jsx(q,{maxDate:D,minDate:j,disabled:d,calendarClassName:"!border-gray-100 shadow-lg font-medium",calendarIconClassName:"h-5 w-5",placeholderText:"Select "+n,className:p("appearance-none block w-full px-3 pl-10 py-2 border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",d?"bg-gray-100 text-gray-500":"bg-white text-gray-900",g?"border-red-300 text-red-900 placeholder-red-300 focus:border-red-300 focus:ring-red-300":"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500"),dateFormat:"dd-MM-yyyy",renderCustomHeader:({date:x,changeYear:h,changeMonth:J,decreaseMonth:O,increaseMonth:$,prevMonthButtonDisabled:B,nextMonthButtonDisabled:I})=>e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b space-x-1",children:[e.jsx("button",{type:"button",onClick:O,className:" text-gray-800",disabled:B,children:e.jsx(H,{className:"h-8 w-8"})}),e.jsx("select",{className:`border rounded-md shadow-sm placeholder-gray-400 \r
                        border-gray-300\r
                        py-1\r
                        focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm`,value:U(x),onChange:({target:{value:s}})=>{h(s)},children:T.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("select",{className:`border rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 \r
                        border-gray-300\r
                        py-1\r
                        focus:border-indigo-500 sm:text-sm`,value:w[X(x)],onChange:({target:{value:s}})=>{J(w.indexOf(s))},children:w.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("button",{type:"button",onClick:$,disabled:I,children:e.jsx(W,{className:"h-8 w-8"})})]}),selected:S(t.value),onChange:x=>{let h=A(x);t.onChange(h),F&&F(h)}}),g&&e.jsx(V,{message:"This field is required"})]})}),b?.length>0&&e.jsx("div",{className:"mt-5",children:e.jsx("div",{className:"rounded-lg bg-gray-50 shadow-sm ring-1 ring-gray-900/5",children:e.jsxs("dl",{className:"flex flex-wrap",children:[e.jsx("div",{className:"flex-auto pl-6 pt-1",children:e.jsx("dt",{className:"text-sm/6 font-semibold text-gray-900",children:"Matching Groups"})}),b?.map((t,i)=>e.jsxs("div",{className:" flex w-full flex-none gap-x-4 border-t border-gray-900/5 px-6 py-1",children:[e.jsx("dt",{className:"flex-none",children:e.jsx(_,{"aria-hidden":"true",className:"h-6 w-5 text-green-400 "})}),e.jsx("dd",{className:"text-sm/6 font-medium text-gray-900",children:t.GroupName}),e.jsx("dt",{className:"flex-none",children:e.jsx(K,{"aria-hidden":"true",className:"h-6 w-5 text-gray-400"})}),e.jsx("dd",{className:"text-sm/6 font-medium text-gray-900",children:e.jsxs("span",{className:"text-sm/6 text-gray-500",children:[A(t.MinAgeDate)," - ",A(t.MaxAgeDate)]})})]}))]})})})]})]})};export{De as default};
