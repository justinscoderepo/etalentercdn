function changeCurrentTemplate(n){var t,i;$(".stylishmanuallychanged").removeClass("stylishmanuallychanged");setcache("stylishgroupid",n.closest(".templatelist").attr("stylishgroupid"));t=n.closest("[stylishgroupid]").attr("stylishgroupid");$("#Template").val(t).trigger("change");$(".candidateCardsList.originallist").attr("stylishgroupid",t);i=n.closest(".templatelist");i.find("[data-stylish]").each(function(){var n=$(this).attr("data-stylish"),u=n.replace(/ /ig,""),i=$(this),r={};getcache(t+"_"+n)&&(r=JSON.parse(getcache(t+"_"+n)));$(".stylish").val("").removeClass("stylishchanged");$(".stylish").each(function(){var f=$(this).attr("data-csskey"),o=$(this).attr("data-identifier"),s,h,c,v;o||(o=f);var e="",l=$("#CardsPerRow").val(),a=$("#RowsPerPage").val();i.attr("data-"+f)&&(e=i.attr("data-"+f));i.attr("data-"+l+"_"+a+"-"+f)&&(e=i.attr("data-"+l+"_"+a+"-"+f));r[o]&&(e=r[o]);t&&e&&(s="",$(this).val(""),$(this).closest(".form-group").find(".postfix").length>0&&(s=$(this).closest(".form-group").find(".postfix").val()),h="",$(this).closest(".form-group").find(".prefix").length>0&&(h=$(this).closest(".form-group").find(".prefix").val()),f&&(c=e,$(this).attr("data-customestyles")?$("body").append("<style class='"+u+"_"+t+"'>.originallist[stylishgroupid='"+t+"'] [data-stylish='"+n+"'] { "+c+"}<\/style>"):$("body").append("<style class='"+u+"_"+t+"'>.originallist[stylishgroupid='"+t+"'] [data-stylish='"+n+"'] { "+f+":"+h+c+s+" !important;}<\/style>"),v=$(this)))})})}function setPageSize(){var n=parseInt($("#CardsPerRow").val())*parseInt($("#RowsPerPage").val());$("#pagesize_CandidatesCards").html("<option>"+n+"<\/option>").trigger("change",!0);$("#CandidatesCardsPaginationShowing").addClass("hidden")}var stylishfill=function(n,t,i,r){var f=t?t:$("#designitemslist").val(),o,u,e;f&&(o=f.replace(/ /ig,""),u=$("#designitemslist").find("option[value='"+f+"']").attr("groupid"),r&&(u=$(r.attr("data-stylishgroup")).val()),$("."+o+"_"+u).remove(),e={},getcache(u+"_"+f)&&(e=JSON.parse(getcache(u+"_"+f))),$(".stylish").each(function(){var s=$(this).attr("data-csskey"),t=$(this).attr("data-identifier"),h,c,r,l;t||(t=s);u&&(h="",n&&e[t]?($(this).val(e[t]),$(this).addClass("stylishchanged")):(n||i)&&$(this).val(""),$(this).closest(".form-group").find(".postfix").length>0&&(h=$(this).closest(".form-group").find(".postfix").val()),c="",$(this).closest(".form-group").find(".prefix").length>0&&(c=$(this).closest(".form-group").find(".prefix").val()),$(this).val()&&s&&$(this).hasClass("stylishmanuallychanged")?(r=$(this).val(),$(this).attr("data-customestyles")?$("body").append("<style class='"+o+"_"+u+"'>[stylishgroupid='"+u+"'] [data-stylish='"+f+"'] { "+r+"}<\/style>"):$("body").append("<style class='"+o+"_"+u+"'>[stylishgroupid='"+u+"'] [data-stylish='"+f+"'] { "+s+":"+c+r+h+" !important;}<\/style>"),e[t]=r,l=$(this),l.hasClass("stylishmanuallychanged")&&u.split("demogroup").length==1&&setcache(u+"_"+f,JSON.stringify(e))):n||$(this).val()||!e[t]||(delete e[t],setcache(u+"_"+f,JSON.stringify(e))))}))},importstylishfill=function(n,t){var u=t.replace(/ /ig,""),r,i;$("."+u).remove();r=$("#designitemslist").find("option[value='"+t+"']").attr("groupid");i={};getcache(n+"_"+t)&&(i=JSON.parse(getcache(n+"_"+t)));$(".stylish").each(function(){var f=$(this).attr("data-csskey"),n=$(this).attr("data-identifier"),e,o;n||(n=f);r&&(e="",i[n]?($(this).val(i[n]),$(this).addClass("stylishchanged")):$(this).val(""),$(this).closest(".form-group").find(".postfix").length>0&&(e=$(this).closest(".form-group").find(".postfix").val()),o="",$(this).closest(".form-group").find(".prefix").length>0&&(o=$(this).closest(".form-group").find(".prefix").val()),$(this).val()&&f&&$(this).hasClass("stylishchanged")&&($(this).attr("data-customestyles")?f!="googlefontembedcode"&&$("body").append("<style class='"+u+"'>[stylishgroupid='"+r+"'] [data-stylish='"+t+"'] { "+$(this).val()+"}<\/style>"):$("body").append("<style class='"+u+"'>[stylishgroupid='"+r+"'] [data-stylish='"+t+"'] { "+f+":"+o+$(this).val()+e+" !important;}<\/style>"),i[n]=$(this).val(),setcache(r+"_"+t,JSON.stringify(i))))})};$("body").on("afterappendcomplete","[data-stylishjson]",function(){var i,n,r,t;$("#designitemslist").html("<option value=''>Please Select<\/option>");i=$(this);n=getcache("stylishgroupid");i.attr("stylishgroupid",n);n&&(r=$("#importsettings").val(),$("#importsettings").html('<option value="">None<\/option>'+$(i.attr("data-stylishgroup")).html()),$("#importsettings").val(r),$(this).find("[data-stylish]").each(function(){$("#designitemslist [value='"+$(this).attr("data-stylish")+"']").remove();$("#designitemslist").append("<option groupid='"+n+"' value='"+$(this).attr("data-stylish")+"'>"+$(this).attr("data-stylish")+"<\/option>")}),t=getcache(n+"_designitem"),t?$("#designitemslist [value='"+t+"']").length>0&&$("#designitemslist").val(t).trigger("change",!0):setcache(n+"_designitem",$("#designitemslist").val()))});$("body").on("click","#LayoutDesigner",function(){$(this).children().toggle()});$("body").on("click","#LayoutDesigner > div",function(n){n.stopPropagation()});$("body").on("click",".downloadandprint",function(n){n.stopPropagation();n.preventDefault();var i=$(this).closest("form").serialize(),r=$(this).attr("target")+"?"+i,t=document.createElement("a");t.href=r;t.target="_blank";document.body.appendChild(t);t.click();t.remove()});getcache("stylishgroupid")?changeCurrentTemplate($(".templatelist[stylishgroupid="+getcache("stylishgroupid")+"] .candidateCard,.templatelist .CertificateCard").first()):changeCurrentTemplate($(".templatelist .candidateCard,.templatelist .CertificateCard").first());$("body").on("click",".templatelist .candidateCard,.templatelist .CertificateCard",function(){changeCurrentTemplate($(this))});$("body").on("change","#importsettings",function(){var n=$(this);n.val()&&$("#designitemslist option").each(function(){importstylishfill(n.val(),$(this).attr("value"))})});$("body").on("change",".stylish",function(n){var t,r;if(n.originalEvent&&$(this).addClass("stylishmanuallychanged"),t=$("#designitemslist").val(),t){var f=$(".templatelist[stylishgroupid='"+getcache("stylishgroupid")+"']"),u=t.replace(/ /ig,""),i=getcache("stylishgroupid");$("."+u+"_"+i).remove();r={};getcache(i+"_"+t)&&(r=JSON.parse(getcache(i+"_"+t)));$(".stylish").each(function(){var e=$(this).attr("data-csskey"),o=$(this).attr("data-identifier"),s,h,c,n;o||(o=e);i&&(s="",$(this).closest(".form-group").find(".postfix").length>0&&(s=$(this).closest(".form-group").find(".postfix").val()),h="",$(this).closest(".form-group").find(".prefix").length>0&&(h=$(this).closest(".form-group").find(".prefix").val()),c=f.find("[data-stylish='"+t+"']"),n="",c.attr("data-"+e)&&(n=c.attr("data-"+e)),$(this).val()&&$(this).hasClass("stylishmanuallychanged")&&(n=$(this).val(),r[o]=n),n&&e?($(this).attr("data-customestyles")?$("body").append("<style class='"+u+"_"+i+"'>.originallist[stylishgroupid='"+i+"'] [data-stylish='"+t+"'] { "+n+"}<\/style>"):$("body").append("<style class='"+u+"_"+i+"'>.originallist[stylishgroupid='"+i+"'] [data-stylish='"+t+"'] { "+e+":"+h+n+s+" !important;}<\/style>"),setcache(i+"_"+t,JSON.stringify(r))):!$(this).val()&&r[o]&&(delete r[o],setcache(i+"_"+t,JSON.stringify(r))))})}});$("body").on("click",".stylishreset",function(){remcache(getcache("stylishgroupid")+"_"+$("#designitemslist").val());$(".stylish").removeClass("stylishmanuallychanged");changeCurrentTemplate($(".templatelist[stylishgroupid="+getcache("stylishgroupid")+"] .candidateCard,.templatelist .CertificateCard").first());$("#designitemslist").trigger("change",!0)});$("body").on("change","#designitemslist",function(n,t){var f,u,i,e,r;(n.originalEvent||t)&&($(".stylishmanuallychanged").removeClass("stylishmanuallychanged"),f=$(".templatelist[stylishgroupid='"+getcache("stylishgroupid")+"']"),$(this).find("option:selected").length>0&&(u=getcache("stylishgroupid"),$(".stylish").removeClass("stylishchanged").val(""),setcache(u+"_designitem",$(this).val()),i=$("#designitemslist").val(),i&&(e=i.replace(/ /ig,""),r={},getcache(u+"_"+i)&&(r=JSON.parse(getcache(u+"_"+i))),$(".stylish").each(function(){var e=$(this).attr("data-csskey"),t=$(this).attr("data-identifier"),h,c,s,n,o;t||(t=e);u&&(h="",$(this).val(""),$(this).closest(".form-group").find(".postfix").length>0&&(h=$(this).closest(".form-group").find(".postfix").val()),c="",$(this).closest(".form-group").find(".prefix").length>0&&(c=$(this).closest(".form-group").find(".prefix").val()),s=f.find("[data-stylish='"+i+"']"),s.attr("data-"+e)?(n=s.attr("data-"+e),r[t]&&(n=r[t]),n&&e&&(o=n,$(this).val(o))):r[t]&&(n=r[t],n&&e&&(o=n,$(this).val(o))))}))))});$("[type=color]").attr("type","text").each(function(){$(this).minicolors({opacity:!0,format:"rgb",change:function(){$(this).trigger("change",!0)}})});$(".templatelist").each(function(){var n=$(this);n.find("[data-stylish]").each(function(){var t=n.attr("data-stylishgroup").replace(/\#/ig,""),i=$(this).attr("data-stylish"),r=$(this);$(".stylish").each(function(){var n=$(this).attr("data-csskey"),s=$(this).attr("data-identifier"),u,f,e,o;s||(s=n);r.attr("data-"+n)&&(u=r.attr("data-"+n),u&&n&&(f=u,e="",$(this).closest(".form-group").find(".postfix").length>0&&(e=$(this).closest(".form-group").find(".postfix").val()),o="",$(this).closest(".form-group").find(".prefix").length>0&&(o=$(this).closest(".form-group").find(".prefix").val()),$(this).attr("data-customestyles")?$("body").append("<style class=''>.templatelist[stylishgroupid='"+t+"'] [data-stylish='"+i+"'] { "+f+"}<\/style>"):$("body").append("<style>.templatelist[stylishgroupid='"+t+"'] [data-stylish='"+i+"'] { "+n+":"+o+f+e+" !important;}<\/style>")))})})});setPageSize();$("body").on("afterappendcomplete",".candidateCardsList",function(n,t){t&&t.rows&&t.rows.Rows&&t.rows.Rows.length>0&&$("#IsDuplicateData").val(!0)});$("body").on("afterappendcomplete change",".candidateCardsList,#LogoImage,#CertificateHeading,#EventHeading,#RowsPerPage,#PageSizePrint,#BackgroundImage,#CardsPerRow,#pageside,#CardsZoom,#IdentityNumberFontSize,#CardsHeight,.certificateconfigkeys .globalcachevalues",function(){var t,i,n;$(".cardheaderlogo").attr("src",$("#LogoImage").val());$(".CertificateHeading").text($("#CertificateHeading").val());$(".eventName").text($("#EventHeading").val());$(".certificateconfigkeys .globalcachevalues").each(function(){$("."+$(this).attr("id").toLowerCase()).length>0&&$("."+$(this).attr("id").toLowerCase()).text($(this).val())});$(".rowbreak,.pagebreak").remove();$("#pageside").val()=="1"?($(".candidateCardsList.originallist .candidateCard .frontside,.CertificateCardsList.originallist .CertificateCard .frontside").show(),$(".candidateCardsList.originallist .candidateCard .backside,.CertificateCardsList.originallist .CertificateCard .backside").hide(),$(".candidateCardsList.originallist .candidateCard,.CertificateCardsList.originallist .CertificateCard").removeClass("pull-right")):$("#pageside").val()=="2"?($(".candidateCardsList.originallist .candidateCard .frontside,.CertificateCardsList.originallist .CertificateCard .frontside").hide(),$(".candidateCardsList.originallist .candidateCard .backside,.CertificateCardsList.originallist .CertificateCard .backside").show(),$(".candidateCardsList.originallist .candidateCard,.CertificateCardsList.originallist .CertificateCard").addClass("pull-right")):($(".candidateCardsList.originallist .candidateCard .frontside,.CertificateCardsList.originallist .CertificateCard .frontside").show(),$(".candidateCardsList.originallist .candidateCard .backside,.CertificateCardsList.originallist .CertificateCard .backside").hide(),$(".candidateCardsList.originallist .candidateCard,.CertificateCardsList.originallist .CertificateCard").removeClass("pull-right"));$(".templatelist,.templatelist .CertificateCard").each(function(){var n=100/$("#CardsPerRow").val();$(this).find(".candidateCard").css("width","50%");$(this).find(".candidateCard").css("zoom","100%")});t=0;$(".candidateCardsList.originallist .candidateCard:visible,.CertificateCardsList.originallist .CertificateCard:visible").each(function(n){n!=0&&n%parseInt($("#CardsPerRow").val())==0&&($(this).before('<div class="col-xs-50 rowbreak"><\/div>'),t++);$(this).css("width",100/$("#CardsPerRow").val()+"%");$(this).css("zoom",$("#CardsZoom").val()+"%")});i=t%parseInt($("#CardsPerRow").val());$(".candidateCardsList.originallist .rowbreak,.CertificateCardsList.originallist .rowbreak").each(function(n){n+1!=0&&(n+1)%parseInt($("#RowsPerPage").val())==0&&$(this).after('<div class="col-xs-50 pagebreak hidden-print"><hr/><\/div>')});$("#pageside").val()=="3"&&(n="",$(".backsideitems").remove(),$(".candidateCardsList.originallist .candidateCard:visible,.CertificateCardsList.originallist .CertificateCard:visible").each(function(){var i=$(this)[0].outerHTML,t=$(i);t.find(".frontside").remove();t.find(".backside").show();t.addClass("pull-right backsideitems");n+=t[0].outerHTML;$(this).next().next(".pagebreak").length>0&&($(this).next().next(".pagebreak").after(n+'<div class="col-xs-50 pagebreak hidden-print"><hr/><\/div>'),n="")}))});$("body").on("change","#RowsPerPage,#CardsPerRow",function(){setPageSize()});$(document).ready(function(){$("#CardsPerRow").trigger("change")});$("body").on("click","#templatebutton",function(){$(".menubarbox").hide();applymenustyle();$("#LayoutDesigner").hide()});$("body").on("click","#LayoutDesignerButton",function(){$("#templateListBox").hide();$(".menubarbox").hide();applymenustyle()});$("body").on("click","#contentbox",function(n){$(n.target).not($("#templateListBox *,#templatebutton")).length>0&&$("#templateListBox").hide()});$("body").on("click",".closetemplates",function(){$("#templateListBox").hide()});