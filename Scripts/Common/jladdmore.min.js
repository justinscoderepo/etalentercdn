function assignrows(n,t,i){var r,u=$(n).find('.moreouterdiv[data-list="'+t+'"]');return u.each(function(){var f=$(this).data("listindex")?$(this).data("listindex"):"",n;i==0?$(this).html(moredivhtml[t+f]):$(this).append(moredivhtml[t+f]);setmorediv($(this));u.length==1?(r=$(this).find(".moreinnerpart").eq(i),r.find(".autolist").each(function(){$(this).binder()})):(n=$(this).find(".moreinnerpart").eq(i),n.find(".autolist").each(function(){$(this).binder()}),n.addClass("combinedmoreinnerdiv"+i))}),u.length>1&&(r=u.find(".combinedmoreinnerdiv"+i)),r}function setmorediv(n){var f=parseInt(n.data("rowmaxlimit")),r=parseInt(n.data("rowminlimit")),e=n.find(".moreinnerpart:visible,.moreinnerpart[data-visible=true]"),u=n.find(".moreinnerpart:visible,.moreinnerpart[data-visible=true]").last(),t=e.length;if(n.find(".moreplus:visible").hide(),u.find(".moreplus").show(),n.find(".moredelete").show(),u.find(".moreindex").val(t),t==f&&n.find(".moreplus:visible,[data-visible=true] .moreplus").hide(),t==r)for(i=1;i<=r;i++)n.find(".moredelete:visible,[data-visible=true] .moredelete").eq(i-1).hide();n.find(".moreinnerpart").each(function(n){var t=$(this);$(this).find("input[name],select[name],textarea[name],img[name]").each(function(){$(this).attr("id")||$(this).attr("id",$(this).attr("name").replace("[","_").replace("]","_").replace("__","_").replace(/\./ig,""));var i=$(this).attr("id").replace(new RegExp("[0-9]","g"),"");$(this).attr("name",$(this).attr("name").replace(new RegExp(/\[n\]/g),"["+n+"]"));$(this).attr("name",$(this).attr("name").replace(new RegExp("\\[[0-9]+]"),"["+n+"]"));switch($(this).attr("type")){case"checkbox":case"radio":$(this).attr("id",i+n);t.find('label[for^="'+i+'"]').attr("for",i+n);break;default:$(this).attr("id",i+n);t.find('[data-filterby^="#'+i+'"]').attr("data-filterby","#"+i+n)}})})}function resetaddmores(n){var t=n.find(".moreouterdiv");n.hasClass("moreouterdiv")&&(t=t.add(n));t.each(function(){if($(this).attr("id")){$(this).html(moredivhtml[$(this).attr("id")]);setmorediv($(this));var t=n.find(".moreouterdiv").find(".moreinnerpart:visible:last");t.find("[data-json]").each(function(){$(this).binder()});n.find(".moreouterdiv").trigger("afterappendaddmore",t.find(".moreinnerpart:visible:last"))}})}var moredivhtml={};$(document).ready(function(){$(".moreouterdiv").each(function(){var n=$(this);n.attr("id")||n.attr("id","MoreOuterDiv_"+(new Date).getTime());n.find(".moreinnerpart").length==0&&n.children().addClass("moreinnerpart");moredivhtml[n.attr("id")]||(moredivhtml[n.attr("id")]=$(this).html().replace(/\[0\]/g,"[n]"),setmorediv($(this)))});$("body").on("afterappendcomplete",".moreouterdiv",function(){var t=$(this),n;setmorediv(t);n=$(this).closest("form");n.length>0&&validateSubmitButton(n);n=$(this).find("form");n.length>0&&validateSubmitButton(n)});$("body").on("aftersavemultirows",".moreouterdiv",function(){var n=$(this);resetaddmores(n);$(".moreouterdiv ").html("");$.binder.reload(n)});$("body").on("click",".moreplus",function(){var t=$(this),n=t.closest(".moreouterdiv");n.append(moredivhtml[n.attr("id")]);setmorediv(n);n.find(".moreinnerpart:visible:last").find("[data-json]").each(function(){$(this).binder()});n.trigger("afterappendaddmore",n.find(".moreinnerpart:visible:last"))});$("body").on("click",".moredelete",function(){var n=$(this).closest(".moreouterdiv"),r=$(this),t,i;n.trigger("beforedelete");t=$(this).closest(".moreinnerpart");n.attr("data-disableconfirm")?(n.attr("data-disablehide")?t.remove():(t.hide(),n.attr("data-operation")||n.attr("data-operation","IsDelete"),n.attr("data-operation")&&(i=t.find('[id^="'+n.attr("data-operation")+'"]'),i.val()==1?i.val(2):t.remove())),setmorediv(n),n.trigger("afterdelete")):alert("Are you sure want to delete ?",function(){if(n.trigger("beforeremove",r),n.attr("data-disablehide"))t.remove();else if(t.hide(),n.attr("data-operation")||n.attr("data-operation","IsDelete"),n.attr("data-operation")){var i=t.find('[id*="'+n.attr("data-operation")+'"]');i.length>0?i.val(2):t.remove()}setmorediv(n);n.trigger("afterdelete")},!1,"moredelete","c")})});