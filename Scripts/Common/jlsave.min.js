"use strict";function hideNewBox(n){n.find("i").removeClass("fa-times").addClass("fa-plus");n.find("span").text("Add New");n.removeClass("btn-warning");n.addClass("btn-success");$(n.attr("data-target")).hide()}function showNewBox(n){n.find("i").removeClass("fa-plus").addClass("fa-times");n.find("span").text("Hide New Box");$(n.attr("data-target")).show();n.addClass("btn-warning");n.removeClass("btn-success")}$.ajaxSetup({cache:!1});$.fn.save=function(n){var t=$(this);t.attr("id")||t.attr("id","Id"+(new Date).getTime());t.attr("novalidate","novalidate");var r=t.attr("id"),i=$.extend({},$.fn.save.defaults),u=$.fn.save.keys,f=$.extend($.fn.save.date,$.fn.save.methods);return typeof n=="object"&&(i=$.extend(i,n)),t.removeAttr("data-ajax"),t.attr("data-saveinit")||(t.attr("data-save",!0),t.attr("data-formeventof"+r,!0)),$(this)};$.fn.save.methods={saveform:function(n,t){var r=t.attr("method"),u=t.attr("action"),i={};t.attr("enctype")?(i=new FormData(t.get(0)),$.ajaxSetup({enctype:"multipart/form-data",processData:!1,contentType:!1,async:!1,cache:!1})):i=t.serializeArray();window.submitform(t)&&(t.trigger("beforesave",i),$[r](u,i,function(n){if(t.attr("enctype")&&$.ajaxSetup({processData:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:!0,cache:!0}),n.ModelState&&n.ModelState&&n.ModelState.SecurityValidations&&n.ModelState.SecurityValidations.length>0)$.each(n.ModelState.SecurityValidations,function(n,t){alert(t,!1,!1,"SecurityValidations","w")});else if(t.attr("data-ajax-success")&&window[t.attr("data-ajax-success").split("(")[0]]&&window[t.attr("data-ajax-success").split("(")[0]](n),t.attr("data-updatebinder")&&$(t.attr("data-updatebinder")).binder&&($(t.attr("data-updatebinder")).each(function(){$.binder.clear($(this))}),$(t.attr("data-updatebinder")).each(function(){$.binder.reload($(this))})),t.trigger("aftersave",n),t.find(".moreouterdiv").trigger("aftersavemultirows",n),t.attr("data-successmessage")){var i=t.attr("data-successmessage");alert(i)}}))}};$.fn.save.keys={};$.fn.save.defaults={};$(document).on("pageload",function(){$(".addnewbutton").each(function(){$($(this).attr("data-target")).hide()})});$("body").on("click",".addnewbutton",function(){$(this).find("i").hasClass("fa-plus")?showNewBox($(this)):hideNewBox($(this))});$("body").on("afterappendcomplete","div[data-json]",function(n,t){if(n.target==n.currentTarget&&t.rows&&t.rows.Results){var r=$("[data-updatebinder='#"+$(this).attr("id")+"']").attr("id"),i;t.rows.Results.length>0?(i=$("[data-target='#"+r+"']"),hideNewBox(i)):(i=$("[data-target='#"+r+"']"),i.trigger("click",!0),showNewBox(i))}});$(document).ready(function(){$("body").on("submit","[data-save]",function(n){var t,i;if(n.preventDefault(),t=$(this),t.find("[type=submit]").length!=t.find("[type=submit]:not(.disabled)").length)return!1;t.save();i=$.fn.save.methods;i.saveform(n,t)});$("[data-save]").each(function(){$(this).save()})});